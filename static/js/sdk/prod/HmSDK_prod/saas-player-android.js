eval(function(a,i,l,o,n){if(o=function(a){return(a<62?"":o(parseInt(a/62)))+(35<(a%=62)?String.fromCharCode(a+29):a.toString(36))},!"".replace(/^/,String)){for(;i--;)n[o(i)]=l[i]||o(i);l=[function(a){return n[a]}],o=function(){return"\\w+"},i=1}for(;i--;)l[i]&&(a=a.replace(new RegExp("\\b"+o(i)+"\\b","g"),l[i]));return a}("9 17={3i:'0.1.3',16:1e-6};l v(){}v.23={e:l(i){8(i<1||i>7.4.q)?w:7.4[i-1]},2R:l(){8 7.4.q},1u:l(){8 F.1x(7.2u(7))},24:l(a){9 n=7.4.q;9 V=a.4||a;o(n!=V.q){8 1L}J{o(F.13(7.4[n-1]-V[n-1])>17.16){8 1L}}H(--n);8 2x},1q:l(){8 v.u(7.4)},1b:l(a){9 b=[];7.28(l(x,i){b.19(a(x,i))});8 v.u(b)},28:l(a){9 n=7.4.q,k=n,i;J{i=k-n;a(7.4[i],i+1)}H(--n)},2q:l(){9 r=7.1u();o(r===0){8 7.1q()}8 7.1b(l(x){8 x/r})},1C:l(a){9 V=a.4||a;9 n=7.4.q,k=n,i;o(n!=V.q){8 w}9 b=0,1D=0,1F=0;7.28(l(x,i){b+=x*V[i-1];1D+=x*x;1F+=V[i-1]*V[i-1]});1D=F.1x(1D);1F=F.1x(1F);o(1D*1F===0){8 w}9 c=b/(1D*1F);o(c<-1){c=-1}o(c>1){c=1}8 F.37(c)},1m:l(a){9 b=7.1C(a);8(b===w)?w:(b<=17.16)},34:l(a){9 b=7.1C(a);8(b===w)?w:(F.13(b-F.1A)<=17.16)},2k:l(a){9 b=7.2u(a);8(b===w)?w:(F.13(b)<=17.16)},2j:l(a){9 V=a.4||a;o(7.4.q!=V.q){8 w}8 7.1b(l(x,i){8 x+V[i-1]})},2C:l(a){9 V=a.4||a;o(7.4.q!=V.q){8 w}8 7.1b(l(x,i){8 x-V[i-1]})},22:l(k){8 7.1b(l(x){8 x*k})},x:l(k){8 7.22(k)},2u:l(a){9 V=a.4||a;9 i,2g=0,n=7.4.q;o(n!=V.q){8 w}J{2g+=7.4[n-1]*V[n-1]}H(--n);8 2g},2f:l(a){9 B=a.4||a;o(7.4.q!=3||B.q!=3){8 w}9 A=7.4;8 v.u([(A[1]*B[2])-(A[2]*B[1]),(A[2]*B[0])-(A[0]*B[2]),(A[0]*B[1])-(A[1]*B[0])])},2A:l(){9 m=0,n=7.4.q,k=n,i;J{i=k-n;o(F.13(7.4[i])>F.13(m)){m=7.4[i]}}H(--n);8 m},2Z:l(x){9 a=w,n=7.4.q,k=n,i;J{i=k-n;o(a===w&&7.4[i]==x){a=i+1}}H(--n);8 a},3g:l(){8 S.2X(7.4)},2d:l(){8 7.1b(l(x){8 F.2d(x)})},2V:l(x){8 7.1b(l(y){8(F.13(y-x)<=17.16)?x:y})},1o:l(a){o(a.K){8 a.1o(7)}9 V=a.4||a;o(V.q!=7.4.q){8 w}9 b=0,2b;7.28(l(x,i){2b=x-V[i-1];b+=2b*2b});8 F.1x(b)},3a:l(a){8 a.1h(7)},2T:l(a){8 a.1h(7)},1V:l(t,a){9 V,R,x,y,z;2S(7.4.q){27 2:V=a.4||a;o(V.q!=2){8 w}R=S.1R(t).4;x=7.4[0]-V[0];y=7.4[1]-V[1];8 v.u([V[0]+R[0][0]*x+R[0][1]*y,V[1]+R[1][0]*x+R[1][1]*y]);1I;27 3:o(!a.U){8 w}9 C=a.1r(7).4;R=S.1R(t,a.U).4;x=7.4[0]-C[0];y=7.4[1]-C[1];z=7.4[2]-C[2];8 v.u([C[0]+R[0][0]*x+R[0][1]*y+R[0][2]*z,C[1]+R[1][0]*x+R[1][1]*y+R[1][2]*z,C[2]+R[2][0]*x+R[2][1]*y+R[2][2]*z]);1I;2P:8 w}},1t:l(a){o(a.K){9 P=7.4.2O();9 C=a.1r(P).4;8 v.u([C[0]+(C[0]-P[0]),C[1]+(C[1]-P[1]),C[2]+(C[2]-(P[2]||0))])}1d{9 Q=a.4||a;o(7.4.q!=Q.q){8 w}8 7.1b(l(x,i){8 Q[i-1]+(Q[i-1]-x)})}},1N:l(){9 V=7.1q();2S(V.4.q){27 3:1I;27 2:V.4.19(0);1I;2P:8 w}8 V},2n:l(){8'['+7.4.2K(', ')+']'},26:l(a){7.4=(a.4||a).2O();8 7}};v.u=l(a){9 V=25 v();8 V.26(a)};v.i=v.u([1,0,0]);v.j=v.u([0,1,0]);v.k=v.u([0,0,1]);v.2J=l(n){9 a=[];J{a.19(F.2F())}H(--n);8 v.u(a)};v.1j=l(n){9 a=[];J{a.19(0)}H(--n);8 v.u(a)};l S(){}S.23={e:l(i,j){o(i<1||i>7.4.q||j<1||j>7.4[0].q){8 w}8 7.4[i-1][j-1]},33:l(i){o(i>7.4.q){8 w}8 v.u(7.4[i-1])},2E:l(j){o(j>7.4[0].q){8 w}9 a=[],n=7.4.q,k=n,i;J{i=k-n;a.19(7.4[i][j-1])}H(--n);8 v.u(a)},2R:l(){8{2D:7.4.q,1p:7.4[0].q}},2D:l(){8 7.4.q},1p:l(){8 7.4[0].q},24:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(7.4.q!=M.q||7.4[0].q!=M[0].q){8 1L}9 b=7.4.q,15=b,i,G,10=7.4[0].q,j;J{i=15-b;G=10;J{j=10-G;o(F.13(7.4[i][j]-M[i][j])>17.16){8 1L}}H(--G)}H(--b);8 2x},1q:l(){8 S.u(7.4)},1b:l(a){9 b=[],12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;b[i]=[];J{j=10-G;b[i][j]=a(7.4[i][j],i+1,j+1)}H(--G)}H(--12);8 S.u(b)},2i:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}8(7.4.q==M.q&&7.4[0].q==M[0].q)},2j:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(!7.2i(M)){8 w}8 7.1b(l(x,i,j){8 x+M[i-1][j-1]})},2C:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(!7.2i(M)){8 w}8 7.1b(l(x,i,j){8 x-M[i-1][j-1]})},2B:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}8(7.4[0].q==M.q)},22:l(a){o(!a.4){8 7.1b(l(x){8 x*a})}9 b=a.1u?2x:1L;9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(!7.2B(M)){8 w}9 d=7.4.q,15=d,i,G,10=M[0].q,j;9 e=7.4[0].q,4=[],21,20,c;J{i=15-d;4[i]=[];G=10;J{j=10-G;21=0;20=e;J{c=e-20;21+=7.4[i][c]*M[c][j]}H(--20);4[i][j]=21}H(--G)}H(--d);9 M=S.u(4);8 b?M.2E(1):M},x:l(a){8 7.22(a)},32:l(a,b,c,d){9 e=[],12=c,i,G,j;9 f=7.4.q,1p=7.4[0].q;J{i=c-12;e[i]=[];G=d;J{j=d-G;e[i][j]=7.4[(a+i-1)%f][(b+j-1)%1p]}H(--G)}H(--12);8 S.u(e)},31:l(){9 a=7.4.q,1p=7.4[0].q;9 b=[],12=1p,i,G,j;J{i=1p-12;b[i]=[];G=a;J{j=a-G;b[i][j]=7.4[j][i]}H(--G)}H(--12);8 S.u(b)},1y:l(){8(7.4.q==7.4[0].q)},2A:l(){9 m=0,12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;J{j=10-G;o(F.13(7.4[i][j])>F.13(m)){m=7.4[i][j]}}H(--G)}H(--12);8 m},2Z:l(x){9 a=w,12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;J{j=10-G;o(7.4[i][j]==x){8{i:i+1,j:j+1}}}H(--G)}H(--12);8 w},30:l(){o(!7.1y){8 w}9 a=[],n=7.4.q,k=n,i;J{i=k-n;a.19(7.4[i][i])}H(--n);8 v.u(a)},1K:l(){9 M=7.1q(),1c;9 n=7.4.q,k=n,i,1s,1n=7.4[0].q,p;J{i=k-n;o(M.4[i][i]==0){2e(j=i+1;j<k;j++){o(M.4[j][i]!=0){1c=[];1s=1n;J{p=1n-1s;1c.19(M.4[i][p]+M.4[j][p])}H(--1s);M.4[i]=1c;1I}}}o(M.4[i][i]!=0){2e(j=i+1;j<k;j++){9 a=M.4[j][i]/M.4[i][i];1c=[];1s=1n;J{p=1n-1s;1c.19(p<=i?0:M.4[j][p]-M.4[i][p]*a)}H(--1s);M.4[j]=1c}}}H(--n);8 M},3h:l(){8 7.1K()},2z:l(){o(!7.1y()){8 w}9 M=7.1K();9 a=M.4[0][0],n=M.4.q-1,k=n,i;J{i=k-n+1;a=a*M.4[i][i]}H(--n);8 a},3f:l(){8 7.2z()},2y:l(){8(7.1y()&&7.2z()===0)},2Y:l(){o(!7.1y()){8 w}9 a=7.4[0][0],n=7.4.q-1,k=n,i;J{i=k-n+1;a+=7.4[i][i]}H(--n);8 a},3e:l(){8 7.2Y()},1Y:l(){9 M=7.1K(),1Y=0;9 a=7.4.q,15=a,i,G,10=7.4[0].q,j;J{i=15-a;G=10;J{j=10-G;o(F.13(M.4[i][j])>17.16){1Y++;1I}}H(--G)}H(--a);8 1Y},3d:l(){8 7.1Y()},2W:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}9 T=7.1q(),1p=T.4[0].q;9 b=T.4.q,15=b,i,G,10=M[0].q,j;o(b!=M.q){8 w}J{i=15-b;G=10;J{j=10-G;T.4[i][1p+j]=M[i][j]}H(--G)}H(--b);8 T},2w:l(){o(!7.1y()||7.2y()){8 w}9 a=7.4.q,15=a,i,j;9 M=7.2W(S.I(a)).1K();9 b,1n=M.4[0].q,p,1c,2v;9 c=[],2c;J{i=a-1;1c=[];b=1n;c[i]=[];2v=M.4[i][i];J{p=1n-b;2c=M.4[i][p]/2v;1c.19(2c);o(p>=15){c[i].19(2c)}}H(--b);M.4[i]=1c;2e(j=0;j<i;j++){1c=[];b=1n;J{p=1n-b;1c.19(M.4[j][p]-M.4[i][p]*M.4[j][i])}H(--b);M.4[j]=1c}}H(--a);8 S.u(c)},3c:l(){8 7.2w()},2d:l(){8 7.1b(l(x){8 F.2d(x)})},2V:l(x){8 7.1b(l(p){8(F.13(p-x)<=17.16)?x:p})},2n:l(){9 a=[];9 n=7.4.q,k=n,i;J{i=k-n;a.19(v.u(7.4[i]).2n())}H(--n);8 a.2K('\\n')},26:l(a){9 i,4=a.4||a;o(1g(4[0][0])!='1f'){9 b=4.q,15=b,G,10,j;7.4=[];J{i=15-b;G=4[i].q;10=G;7.4[i]=[];J{j=10-G;7.4[i][j]=4[i][j]}H(--G)}H(--b);8 7}9 n=4.q,k=n;7.4=[];J{i=k-n;7.4.19([4[i]])}H(--n);8 7}};S.u=l(a){9 M=25 S();8 M.26(a)};S.I=l(n){9 a=[],k=n,i,G,j;J{i=k-n;a[i]=[];G=k;J{j=k-G;a[i][j]=(i==j)?1:0}H(--G)}H(--n);8 S.u(a)};S.2X=l(a){9 n=a.q,k=n,i;9 M=S.I(n);J{i=k-n;M.4[i][i]=a[i]}H(--n);8 M};S.1R=l(b,a){o(!a){8 S.u([[F.1H(b),-F.1G(b)],[F.1G(b),F.1H(b)]])}9 d=a.1q();o(d.4.q!=3){8 w}9 e=d.1u();9 x=d.4[0]/e,y=d.4[1]/e,z=d.4[2]/e;9 s=F.1G(b),c=F.1H(b),t=1-c;8 S.u([[t*x*x+c,t*x*y-s*z,t*x*z+s*y],[t*x*y+s*z,t*y*y+c,t*y*z-s*x],[t*x*z-s*y,t*y*z+s*x,t*z*z+c]])};S.3b=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[1,0,0],[0,c,-s],[0,s,c]])};S.39=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[c,0,s],[0,1,0],[-s,0,c]])};S.38=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[c,-s,0],[s,c,0],[0,0,1]])};S.2J=l(n,m){8 S.1j(n,m).1b(l(){8 F.2F()})};S.1j=l(n,m){9 a=[],12=n,i,G,j;J{i=n-12;a[i]=[];G=m;J{j=m-G;a[i][j]=0}H(--G)}H(--12);8 S.u(a)};l 14(){}14.23={24:l(a){8(7.1m(a)&&7.1h(a.K))},1q:l(){8 14.u(7.K,7.U)},2U:l(a){9 V=a.4||a;8 14.u([7.K.4[0]+V[0],7.K.4[1]+V[1],7.K.4[2]+(V[2]||0)],7.U)},1m:l(a){o(a.W){8 a.1m(7)}9 b=7.U.1C(a.U);8(F.13(b)<=17.16||F.13(b-F.1A)<=17.16)},1o:l(a){o(a.W){8 a.1o(7)}o(a.U){o(7.1m(a)){8 7.1o(a.K)}9 N=7.U.2f(a.U).2q().4;9 A=7.K.4,B=a.K.4;8 F.13((A[0]-B[0])*N[0]+(A[1]-B[1])*N[1]+(A[2]-B[2])*N[2])}1d{9 P=a.4||a;9 A=7.K.4,D=7.U.4;9 b=P[0]-A[0],2a=P[1]-A[1],29=(P[2]||0)-A[2];9 c=F.1x(b*b+2a*2a+29*29);o(c===0)8 0;9 d=(b*D[0]+2a*D[1]+29*D[2])/c;9 e=1-d*d;8 F.13(c*F.1x(e<0?0:e))}},1h:l(a){9 b=7.1o(a);8(b!==w&&b<=17.16)},2T:l(a){8 a.1h(7)},1v:l(a){o(a.W){8 a.1v(7)}8(!7.1m(a)&&7.1o(a)<=17.16)},1U:l(a){o(a.W){8 a.1U(7)}o(!7.1v(a)){8 w}9 P=7.K.4,X=7.U.4,Q=a.K.4,Y=a.U.4;9 b=X[0],1z=X[1],1B=X[2],1T=Y[0],1S=Y[1],1M=Y[2];9 c=P[0]-Q[0],2s=P[1]-Q[1],2r=P[2]-Q[2];9 d=-b*c-1z*2s-1B*2r;9 e=1T*c+1S*2s+1M*2r;9 f=b*b+1z*1z+1B*1B;9 g=1T*1T+1S*1S+1M*1M;9 h=b*1T+1z*1S+1B*1M;9 k=(d*g/f+h*e)/(g-h*h);8 v.u([P[0]+k*b,P[1]+k*1z,P[2]+k*1B])},1r:l(a){o(a.U){o(7.1v(a)){8 7.1U(a)}o(7.1m(a)){8 w}9 D=7.U.4,E=a.U.4;9 b=D[0],1l=D[1],1k=D[2],1P=E[0],1O=E[1],1Q=E[2];9 x=(1k*1P-b*1Q),y=(b*1O-1l*1P),z=(1l*1Q-1k*1O);9 N=v.u([x*1Q-y*1O,y*1P-z*1Q,z*1O-x*1P]);9 P=11.u(a.K,N);8 P.1U(7)}1d{9 P=a.4||a;o(7.1h(P)){8 v.u(P)}9 A=7.K.4,D=7.U.4;9 b=D[0],1l=D[1],1k=D[2],1w=A[0],18=A[1],1a=A[2];9 x=b*(P[1]-18)-1l*(P[0]-1w),y=1l*((P[2]||0)-1a)-1k*(P[1]-18),z=1k*(P[0]-1w)-b*((P[2]||0)-1a);9 V=v.u([1l*x-1k*z,1k*y-b*x,b*z-1l*y]);9 k=7.1o(P)/V.1u();8 v.u([P[0]+V.4[0]*k,P[1]+V.4[1]*k,(P[2]||0)+V.4[2]*k])}},1V:l(t,a){o(1g(a.U)=='1f'){a=14.u(a.1N(),v.k)}9 R=S.1R(t,a.U).4;9 C=a.1r(7.K).4;9 A=7.K.4,D=7.U.4;9 b=C[0],1E=C[1],1J=C[2],1w=A[0],18=A[1],1a=A[2];9 x=1w-b,y=18-1E,z=1a-1J;8 14.u([b+R[0][0]*x+R[0][1]*y+R[0][2]*z,1E+R[1][0]*x+R[1][1]*y+R[1][2]*z,1J+R[2][0]*x+R[2][1]*y+R[2][2]*z],[R[0][0]*D[0]+R[0][1]*D[1]+R[0][2]*D[2],R[1][0]*D[0]+R[1][1]*D[1]+R[1][2]*D[2],R[2][0]*D[0]+R[2][1]*D[1]+R[2][2]*D[2]])},1t:l(a){o(a.W){9 A=7.K.4,D=7.U.4;9 b=A[0],18=A[1],1a=A[2],2N=D[0],1l=D[1],1k=D[2];9 c=7.K.1t(a).4;9 d=b+2N,2h=18+1l,2o=1a+1k;9 Q=a.1r([d,2h,2o]).4;9 e=[Q[0]+(Q[0]-d)-c[0],Q[1]+(Q[1]-2h)-c[1],Q[2]+(Q[2]-2o)-c[2]];8 14.u(c,e)}1d o(a.U){8 7.1V(F.1A,a)}1d{9 P=a.4||a;8 14.u(7.K.1t([P[0],P[1],(P[2]||0)]),7.U)}},1Z:l(a,b){a=v.u(a);b=v.u(b);o(a.4.q==2){a.4.19(0)}o(b.4.q==2){b.4.19(0)}o(a.4.q>3||b.4.q>3){8 w}9 c=b.1u();o(c===0){8 w}7.K=a;7.U=v.u([b.4[0]/c,b.4[1]/c,b.4[2]/c]);8 7}};14.u=l(a,b){9 L=25 14();8 L.1Z(a,b)};14.X=14.u(v.1j(3),v.i);14.Y=14.u(v.1j(3),v.j);14.Z=14.u(v.1j(3),v.k);l 11(){}11.23={24:l(a){8(7.1h(a.K)&&7.1m(a))},1q:l(){8 11.u(7.K,7.W)},2U:l(a){9 V=a.4||a;8 11.u([7.K.4[0]+V[0],7.K.4[1]+V[1],7.K.4[2]+(V[2]||0)],7.W)},1m:l(a){9 b;o(a.W){b=7.W.1C(a.W);8(F.13(b)<=17.16||F.13(F.1A-b)<=17.16)}1d o(a.U){8 7.W.2k(a.U)}8 w},2k:l(a){9 b=7.W.1C(a.W);8(F.13(F.1A/2-b)<=17.16)},1o:l(a){o(7.1v(a)||7.1h(a)){8 0}o(a.K){9 A=7.K.4,B=a.K.4,N=7.W.4;8 F.13((A[0]-B[0])*N[0]+(A[1]-B[1])*N[1]+(A[2]-B[2])*N[2])}1d{9 P=a.4||a;9 A=7.K.4,N=7.W.4;8 F.13((A[0]-P[0])*N[0]+(A[1]-P[1])*N[1]+(A[2]-(P[2]||0))*N[2])}},1h:l(a){o(a.W){8 w}o(a.U){8(7.1h(a.K)&&7.1h(a.K.2j(a.U)))}1d{9 P=a.4||a;9 A=7.K.4,N=7.W.4;9 b=F.13(N[0]*(A[0]-P[0])+N[1]*(A[1]-P[1])+N[2]*(A[2]-(P[2]||0)));8(b<=17.16)}},1v:l(a){o(1g(a.U)=='1f'&&1g(a.W)=='1f'){8 w}8!7.1m(a)},1U:l(a){o(!7.1v(a)){8 w}o(a.U){9 A=a.K.4,D=a.U.4,P=7.K.4,N=7.W.4;9 b=(N[0]*(P[0]-A[0])+N[1]*(P[1]-A[1])+N[2]*(P[2]-A[2]))/(N[0]*D[0]+N[1]*D[1]+N[2]*D[2]);8 v.u([A[0]+D[0]*b,A[1]+D[1]*b,A[2]+D[2]*b])}1d o(a.W){9 c=7.W.2f(a.W).2q();9 N=7.W.4,A=7.K.4,O=a.W.4,B=a.K.4;9 d=S.1j(2,2),i=0;H(d.2y()){i++;d=S.u([[N[i%3],N[(i+1)%3]],[O[i%3],O[(i+1)%3]]])}9 e=d.2w().4;9 x=N[0]*A[0]+N[1]*A[1]+N[2]*A[2];9 y=O[0]*B[0]+O[1]*B[1]+O[2]*B[2];9 f=[e[0][0]*x+e[0][1]*y,e[1][0]*x+e[1][1]*y];9 g=[];2e(9 j=1;j<=3;j++){g.19((i==j)?0:f[(j+(5-i)%3)%3])}8 14.u(g,c)}},1r:l(a){9 P=a.4||a;9 A=7.K.4,N=7.W.4;9 b=(A[0]-P[0])*N[0]+(A[1]-P[1])*N[1]+(A[2]-(P[2]||0))*N[2];8 v.u([P[0]+N[0]*b,P[1]+N[1]*b,(P[2]||0)+N[2]*b])},1V:l(t,a){9 R=S.1R(t,a.U).4;9 C=a.1r(7.K).4;9 A=7.K.4,N=7.W.4;9 b=C[0],1E=C[1],1J=C[2],1w=A[0],18=A[1],1a=A[2];9 x=1w-b,y=18-1E,z=1a-1J;8 11.u([b+R[0][0]*x+R[0][1]*y+R[0][2]*z,1E+R[1][0]*x+R[1][1]*y+R[1][2]*z,1J+R[2][0]*x+R[2][1]*y+R[2][2]*z],[R[0][0]*N[0]+R[0][1]*N[1]+R[0][2]*N[2],R[1][0]*N[0]+R[1][1]*N[1]+R[1][2]*N[2],R[2][0]*N[0]+R[2][1]*N[1]+R[2][2]*N[2]])},1t:l(a){o(a.W){9 A=7.K.4,N=7.W.4;9 b=A[0],18=A[1],1a=A[2],2M=N[0],2L=N[1],2Q=N[2];9 c=7.K.1t(a).4;9 d=b+2M,2p=18+2L,2m=1a+2Q;9 Q=a.1r([d,2p,2m]).4;9 e=[Q[0]+(Q[0]-d)-c[0],Q[1]+(Q[1]-2p)-c[1],Q[2]+(Q[2]-2m)-c[2]];8 11.u(c,e)}1d o(a.U){8 7.1V(F.1A,a)}1d{9 P=a.4||a;8 11.u(7.K.1t([P[0],P[1],(P[2]||0)]),7.W)}},1Z:l(a,b,c){a=v.u(a);a=a.1N();o(a===w){8 w}b=v.u(b);b=b.1N();o(b===w){8 w}o(1g(c)=='1f'){c=w}1d{c=v.u(c);c=c.1N();o(c===w){8 w}}9 d=a.4[0],18=a.4[1],1a=a.4[2];9 e=b.4[0],1W=b.4[1],1X=b.4[2];9 f,1i;o(c!==w){9 g=c.4[0],2l=c.4[1],2t=c.4[2];f=v.u([(1W-18)*(2t-1a)-(1X-1a)*(2l-18),(1X-1a)*(g-d)-(e-d)*(2t-1a),(e-d)*(2l-18)-(1W-18)*(g-d)]);1i=f.1u();o(1i===0){8 w}f=v.u([f.4[0]/1i,f.4[1]/1i,f.4[2]/1i])}1d{1i=F.1x(e*e+1W*1W+1X*1X);o(1i===0){8 w}f=v.u([b.4[0]/1i,b.4[1]/1i,b.4[2]/1i])}7.K=a;7.W=f;8 7}};11.u=l(a,b,c){9 P=25 11();8 P.1Z(a,b,c)};11.2I=11.u(v.1j(3),v.k);11.2H=11.u(v.1j(3),v.i);11.2G=11.u(v.1j(3),v.j);11.36=11.2I;11.35=11.2H;11.3j=11.2G;9 $V=v.u;9 $M=S.u;9 $L=14.u;9 $P=11.u;",206,"||||elements|||this|return|var||||||||||||function|||if||length||||create|Vector|null|||||||||Math|nj|while||do|anchor||||||||Matrix||direction||normal||||kj|Plane|ni|abs|Line|ki|precision|Sylvester|A2|push|A3|map|els|else||undefined|typeof|contains|mod|Zero|D3|D2|isParallelTo|kp|distanceFrom|cols|dup|pointClosestTo|np|reflectionIn|modulus|intersects|A1|sqrt|isSquare|X2|PI|X3|angleFrom|mod1|C2|mod2|sin|cos|break|C3|toRightTriangular|false|Y3|to3D|E2|E1|E3|Rotation|Y2|Y1|intersectionWith|rotate|v12|v13|rank|setVectors|nc|sum|multiply|prototype|eql|new|setElements|case|each|PA3|PA2|part|new_element|round|for|cross|product|AD2|isSameSizeAs|add|isPerpendicularTo|v22|AN3|inspect|AD3|AN2|toUnitVector|PsubQ3|PsubQ2|v23|dot|divisor|inverse|true|isSingular|determinant|max|canMultiplyFromLeft|subtract|rows|col|random|ZX|YZ|XY|Random|join|N2|N1|D1|slice|default|N3|dimensions|switch|liesIn|translate|snapTo|augment|Diagonal|trace|indexOf|diagonal|transpose|minor|row|isAntiparallelTo|ZY|YX|acos|RotationZ|RotationY|liesOn|RotationX|inv|rk|tr|det|toDiagonalMatrix|toUpperTriangular|version|XZ".split("|"),0,{}));
function mht(e){var t="";if(16==e.length)for(var n=0;n<4;n++)t+="<span style='font-family: monospace'>["+e[4*n+0].toFixed(4)+","+e[4*n+1].toFixed(4)+","+e[4*n+2].toFixed(4)+","+e[4*n+3].toFixed(4)+"]</span><br>";else{if(9!=e.length)return e.toString();for(n=0;n<3;n++)t+="<span style='font-family: monospace'>["+e[3*n+0].toFixed(4)+","+e[3*n+1].toFixed(4)+","+e[3*n+2].toFixed(4)+"]</font><br>"}return t}function makeLookAt(e,t,n,s,r,i,l,h,o){var m=$V([e,t,n]),s=$V([s,r,i]),r=$V([l,h,o]),i=m.subtract(s).toUnitVector(),l=r.cross(i).toUnitVector(),h=i.cross(l).toUnitVector(),o=$M([[l.e(1),l.e(2),l.e(3),0],[h.e(1),h.e(2),h.e(3),0],[i.e(1),i.e(2),i.e(3),0],[0,0,0,1]]),m=$M([[1,0,0,-e],[0,1,0,-t],[0,0,1,-n],[0,0,0,1]]);return o.x(m)}function makeOrtho(e,t,n,s,r,i){return $M([[2/(t-e),0,0,-(t+e)/(t-e)],[0,2/(s-n),0,-(s+n)/(s-n)],[0,0,-2/(i-r),-(i+r)/(i-r)],[0,0,0,1]])}function makePerspective(e,t,n,s){var e=n*Math.tan(e*Math.PI/360),r=-e;return makeFrustum(r*t,e*t,r,e,n,s)}function makeFrustum(e,t,n,s,r,i){return $M([[2*r/(t-e),0,(t+e)/(t-e),0],[0,2*r/(s-n),(s+n)/(s-n),0],[0,0,-(i+r)/(i-r),-2*i*r/(i-r)],[0,0,-1,0]])}function makeOrtho(e,t,n,s,r,i){return $M([[2/(t-e),0,0,-(t+e)/(t-e)],[0,2/(s-n),0,-(s+n)/(s-n)],[0,0,-2/(i-r),-(i+r)/(i-r)],[0,0,0,1]])}Matrix.Translation=function(e){var t;if(2==e.elements.length)return(t=Matrix.I(3)).elements[2][0]=e.elements[0],t.elements[2][1]=e.elements[1],t;if(3==e.elements.length)return(t=Matrix.I(4)).elements[0][3]=e.elements[0],t.elements[1][3]=e.elements[1],t.elements[2][3]=e.elements[2],t;throw"Invalid length for Translation"},Matrix.prototype.flatten=function(){var e=[];if(0==this.elements.length)return[];for(var t=0;t<this.elements[0].length;t++)for(var n=0;n<this.elements.length;n++)e.push(this.elements[n][t]);return e},Matrix.prototype.ensure4x4=function(){if(4!=this.elements.length||4!=this.elements[0].length){if(4<this.elements.length||4<this.elements[0].length)return null;for(var e=0;e<this.elements.length;e++)for(var t=this.elements[e].length;t<4;t++)e==t?this.elements[e].push(1):this.elements[e].push(0);for(e=this.elements.length;e<4;e++)0==e?this.elements.push([1,0,0,0]):1==e?this.elements.push([0,1,0,0]):2==e?this.elements.push([0,0,1,0]):3==e&&this.elements.push([0,0,0,1])}return this},Matrix.prototype.make3x3=function(){return 4!=this.elements.length||4!=this.elements[0].length?null:Matrix.create([[this.elements[0][0],this.elements[0][1],this.elements[0][2]],[this.elements[1][0],this.elements[1][1],this.elements[1][2]],[this.elements[2][0],this.elements[2][1],this.elements[2][2]]])},Vector.prototype.flatten=function(){return this.elements};
"use strict";function error(t){}function assert(t,n){t||error(n)}function isPowerOfTwo(t){return 0==(t&t-1)}function text(t){return t.join("\n")}function nextHighestPowerOfTwo(t){--t;for(var n=1;n<32;n<<=1)t|=t>>n;return t+1}var Size=function(){function t(t,n){this.w=t,this.h=n}return t.prototype={toString:function(){return"("+this.w+", "+this.h+")"},getHalfSize:function(){return new Size(this.w>>>1,this.h>>>1)},length:function(){return this.w*this.h}},t}();function inherit(t,n){var r,i=Object.create(t.prototype);for(r in n)i[r]=n[r];return i}
var Script=function(){function o(){}return o.createFromElementId=function(t){for(var e=document.getElementById(t),r=(assert(e,"Could not find shader with ID: "+t),""),i=e.firstChild;i;)3==i.nodeType&&(r+=i.textContent),i=i.nextSibling;t=new o;return t.type=e.type,t.source=r,t},o.createFromSource=function(t,e){var r=new o;return r.type=t,r.source=e,r},o}(),Shader=function(t,e){if("x-shader/x-fragment"==e.type)this.shader=t.createShader(t.FRAGMENT_SHADER);else{if("x-shader/x-vertex"!=e.type)return void error("Unknown shader type: "+e.type);this.shader=t.createShader(t.VERTEX_SHADER)}t.shaderSource(this.shader,e.source),t.compileShader(this.shader),t.getShaderParameter(this.shader,t.COMPILE_STATUS)||error("An error occurred compiling the shaders: "+t.getShaderInfoLog(this.shader))},Program=function(){function t(t){this.gl=t,this.program=this.gl.createProgram()}return t.prototype={attach:function(t){this.gl.attachShader(this.program,t.shader)},link:function(){this.gl.linkProgram(this.program),assert(this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS),"Unable to initialize the shader program.")},use:function(){this.gl.useProgram(this.program)},getAttributeLocation:function(t){return this.gl.getAttribLocation(this.program,t)},setMatrixUniform:function(t,e){t=this.gl.getUniformLocation(this.program,t);this.gl.uniformMatrix4fv(t,!1,e)}},t}(),Texture=function(){function t(t,e,r){this.gl=t,this.size=e,this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),this.format=r||t.LUMINANCE,t.texImage2D(t.TEXTURE_2D,0,this.format,e.w,e.h,0,this.format,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}var o=null;return t.prototype={fill:function(t,e){var r=this.gl;assert(t.length>=this.size.w*this.size.h,"Texture size mismatch, data:"+t.length+", texture: "+this.size.w*this.size.h),r.bindTexture(r.TEXTURE_2D,this.texture),e?r.texSubImage2D(r.TEXTURE_2D,0,0,0,this.size.w,this.size.h,this.format,r.UNSIGNED_BYTE,t):r.texImage2D(r.TEXTURE_2D,0,this.format,this.size.w,this.size.h,0,this.format,r.UNSIGNED_BYTE,t)},bind:function(t,e,r){var i=this.gl;o=o||[i.TEXTURE0,i.TEXTURE1,i.TEXTURE2],i.activeTexture(o[t]),i.bindTexture(i.TEXTURE_2D,this.texture),i.uniform1i(i.getUniformLocation(e.program,r),t)}},t}(),WebGLCanvas=function(){var t=Script.createFromSource("x-shader/x-vertex",text(["attribute vec3 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat4 uMVMatrix;","uniform mat4 uPMatrix;","varying highp vec2 vTextureCoord;","void main(void) {","  gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);","  vTextureCoord = aTextureCoord;","}"])),e=Script.createFromSource("x-shader/x-fragment",text(["precision highp float;","varying highp vec2 vTextureCoord;","uniform sampler2D texture;","void main(void) {","  gl_FragColor = texture2D(texture, vTextureCoord);","}"]));function r(t,e,r){this.canvas=t,this.size=e,this.onInitWebGL(),this.onInitShaders(),function(){var t,e=this.gl;this.quadVPBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.quadVPBuffer),t=[1,1,0,-1,1,0,1,-1,0,-1,-1,0],e.bufferData(e.ARRAY_BUFFER,new Float32Array(t),e.STATIC_DRAW),this.quadVPBuffer.itemSize=3,this.quadVPBuffer.numItems=4;this.quadVTCBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.quadVTCBuffer),t=[1,0,0,0,1,1,0,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(t),e.STATIC_DRAW)}.call(this),r&&function(){var t=this.gl,e=(this.framebuffer=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer),this.framebufferTexture=new Texture(this.gl,this.size,t.RGBA),t.createRenderbuffer());t.bindRenderbuffer(t.RENDERBUFFER,e),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,this.size.w,this.size.h),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.framebufferTexture.texture,0),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)}.call(this),this.onInitTextures(),function(){var t=this.gl;this.perspectiveMatrix=makePerspective(45,1,.1,100),function(){this.mvMatrix=Matrix.I(4)}.call(this),function(t){!function(t){this.mvMatrix=this.mvMatrix.x(t)}.call(this,Matrix.Translation($V([t[0],t[1],t[2]])).ensure4x4())}.call(this,[0,0,-2.4]),t.bindBuffer(t.ARRAY_BUFFER,this.quadVPBuffer),t.vertexAttribPointer(this.vertexPositionAttribute,3,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,this.quadVTCBuffer),t.vertexAttribPointer(this.textureCoordAttribute,2,t.FLOAT,!1,0,0),this.onInitSceneTextures(),function(){this.program.setMatrixUniform("uPMatrix",new Float32Array(this.perspectiveMatrix.flatten())),this.program.setMatrixUniform("uMVMatrix",new Float32Array(this.mvMatrix.flatten()))}.call(this),this.framebuffer&&t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer)}.call(this)}return r.prototype={toString:function(){return"WebGLCanvas Size: "+this.size},checkLastError:function(t){var e,r=this.gl.getError();r!=this.gl.NO_ERROR&&(e=void 0!==(e=this.glNames[r])?e+"("+r+")":"Unknown WebGL ENUM (0x"+value.toString(16)+")")},onInitWebGL:function(){try{this.gl=this.canvas.getContext("experimental-webgl")}catch(t){}if(this.gl||error("Unable to initialize WebGL. Your browser may not support it."),!this.glNames)for(var t in this.glNames={},this.gl)"number"==typeof this.gl[t]&&(this.glNames[this.gl[t]]=t)},onInitShaders:function(){this.program=new Program(this.gl),this.program.attach(new Shader(this.gl,t)),this.program.attach(new Shader(this.gl,e)),this.program.link(),this.program.use(),this.vertexPositionAttribute=this.program.getAttributeLocation("aVertexPosition"),this.gl.enableVertexAttribArray(this.vertexPositionAttribute),this.textureCoordAttribute=this.program.getAttributeLocation("aTextureCoord"),this.gl.enableVertexAttribArray(this.textureCoordAttribute)},onInitTextures:function(){var t=this.gl;this.texture=new Texture(t,this.size,t.RGBA)},onInitSceneTextures:function(){this.texture.bind(0,this.program,"texture")},drawScene:function(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)},readPixels:function(t){var e=this.gl;e.readPixels(0,0,this.size.w,this.size.h,e.RGBA,e.UNSIGNED_BYTE,t)}},r}(),YUVWebGLCanvas=function(){var t=Script.createFromSource("x-shader/x-vertex",text(["attribute vec3 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat4 uMVMatrix;","uniform mat4 uPMatrix;","varying highp vec2 vTextureCoord;","void main(void) {","  gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);","  vTextureCoord = aTextureCoord;","}"])),e=(Script.createFromSource("x-shader/x-fragment",text(["precision highp float;","varying highp vec2 vTextureCoord;","uniform sampler2D YTexture;","uniform sampler2D UTexture;","uniform sampler2D VTexture;","void main(void) {","  vec3 YUV = vec3","  (","    texture2D(YTexture, vTextureCoord).x * 1.1643828125,   // premultiply Y","    texture2D(UTexture, vTextureCoord).x,","    texture2D(VTexture, vTextureCoord).x","  );","  gl_FragColor = vec4","  (","    YUV.x + 1.59602734375 * YUV.z - 0.87078515625,","    YUV.x - 0.39176171875 * YUV.y - 0.81296875 * YUV.z + 0.52959375,","    YUV.x + 2.017234375   * YUV.y - 1.081390625,","    1","  );","}"])),Script.createFromSource("x-shader/x-fragment",text(["precision highp float;","varying highp vec2 vTextureCoord;","uniform sampler2D YTexture;","uniform sampler2D UTexture;","uniform sampler2D VTexture;","void main(void) {","  gl_FragColor = texture2D(YTexture, vTextureCoord);","}"])),Script.createFromSource("x-shader/x-fragment",text(["precision highp float;","varying highp vec2 vTextureCoord;","uniform sampler2D YTexture;","uniform sampler2D UTexture;","uniform sampler2D VTexture;","const mat4 YUV2RGB = mat4","("," 1.1643828125, 0, 1.59602734375, -.87078515625,"," 1.1643828125, -.39176171875, -.81296875, .52959375,"," 1.1643828125, 2.017234375, 0, -1.081390625,"," 0, 0, 0, 1",");","void main(void) {"," gl_FragColor = vec4( texture2D(YTexture,  vTextureCoord).x, texture2D(UTexture, vTextureCoord).x, texture2D(VTexture, vTextureCoord).x, 1) * YUV2RGB;","}"])));function r(t,e){WebGLCanvas.call(this,t,e)}return r.prototype=inherit(WebGLCanvas,{onInitShaders:function(){this.program=new Program(this.gl),this.program.attach(new Shader(this.gl,t)),this.program.attach(new Shader(this.gl,e)),this.program.link(),this.program.use(),this.vertexPositionAttribute=this.program.getAttributeLocation("aVertexPosition"),this.gl.enableVertexAttribArray(this.vertexPositionAttribute),this.textureCoordAttribute=this.program.getAttributeLocation("aTextureCoord"),this.gl.enableVertexAttribArray(this.textureCoordAttribute)},onInitTextures:function(){this.YTexture=new Texture(this.gl,this.size),this.UTexture=new Texture(this.gl,this.size.getHalfSize()),this.VTexture=new Texture(this.gl,this.size.getHalfSize())},onInitSceneTextures:function(){this.YTexture.bind(0,this.program,"YTexture"),this.UTexture.bind(1,this.program,"UTexture"),this.VTexture.bind(2,this.program,"VTexture")},fillYUVTextures:function(t,e,r){this.YTexture.fill(t),this.UTexture.fill(e),this.VTexture.fill(r)},toString:function(){return"YUVCanvas Size: "+this.size}}),r}(),FilterWebGLCanvas=function(){var t=Script.createFromSource("x-shader/x-vertex",text(["attribute vec3 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat4 uMVMatrix;","uniform mat4 uPMatrix;","varying highp vec2 vTextureCoord;","void main(void) {","  gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);","  vTextureCoord = aTextureCoord;","}"])),e=Script.createFromSource("x-shader/x-fragment",text(["precision highp float;","varying highp vec2 vTextureCoord;","uniform sampler2D FTexture;","void main(void) {"," gl_FragColor = texture2D(FTexture,  vTextureCoord);","}"]));function r(t,e,r){WebGLCanvas.call(this,t,e,r)}return r.prototype=inherit(WebGLCanvas,{onInitShaders:function(){this.program=new Program(this.gl),this.program.attach(new Shader(this.gl,t)),this.program.attach(new Shader(this.gl,e)),this.program.link(),this.program.use(),this.vertexPositionAttribute=this.program.getAttributeLocation("aVertexPosition"),this.gl.enableVertexAttribArray(this.vertexPositionAttribute),this.textureCoordAttribute=this.program.getAttributeLocation("aTextureCoord"),this.gl.enableVertexAttribArray(this.textureCoordAttribute)},onInitTextures:function(){this.FTexture=new Texture(this.gl,this.size,this.gl.RGBA)},onInitSceneTextures:function(){this.FTexture.bind(0,this.program,"FTexture")},process:function(t,e){this.FTexture.fill(t),this.drawScene(),this.readPixels(e)},toString:function(){return"FilterWebGLCanvas Size: "+this.size}}),r}();
var WorkerSocket=function(){function t(t){this.client=!t,this.socket=this.client?self:new Worker(t),this.dispatch={},this.totalSendTime=0,this.totalSendCount=0,this.socket.addEventListener("message",function(t){t.data.name&&(this.totalSendTime+=Date.now()-t.data.time,this.totalSendCount+=1,this.totalSendCount,t.data.name in this.dispatch)&&this.dispatch[t.data.name](t.data)}.bind(this)),this.socket.addEventListener("error",function(){this.dispatch.workerError()}.bind(this)),this.client&&this.onReceiveMessage("internal-notify",function(t){this.sendMessage(t.reply,null)}.bind(this))}return t.prototype={onReceiveMessage:function(t,e){this.dispatch[t]=e},sendMessage:function(t,e,n){e={name:t,payload:e,time:Date.now()};n&&(e.reply=t+"-reply",this.onReceiveMessage(e.reply,n)),this.socket.postMessage(e)},sendBuffer:function(t,e,n){t={name:t,payload:e,time:Date.now()};this.socket.postMessage(t,n)},notify:function(t){this.client||this.sendMessage("internal-notify",null,t)},terminate:function(){this.socket}},t}();
function WSAvcPlayer(e,t,s,i,a,r,n){var o=window.CP_ENABLE_DEBUG?200:1e3,s=(this.canvas=e,this.nals=s,this.delay=i,this.isUseWebGL="webgl"==t,this.isWorkerError=!1,this.avcWorker=new WorkerSocket(n),this.avcWorker.onReceiveMessage("console.log",function(e){}),this.avcWorker.onReceiveMessage("console.info",function(e){}),this.avcWorker.onReceiveMessage("console.warn",function(e){}),this.avcWorker.onReceiveMessage("console.error",function(e){}),this.avcWorker.onReceiveMessage("workerError",function(){this.isWorkerError||(a.emit(r,"video_decode_failed"),this.isWorkerError=!0)}),this.avcWorker.onReceiveMessage("test_transferable_object_succeed",function(e){try{for(var t=new Uint8Array(e.payload),s=0;s<t.length;s++)if(t[s]!=2*s)return void(a&&a.emit(r,"transferable_object_not_support"))}catch(e){a&&a.emit(r,"transferable_object_not_support")}}),this.avcWorker.onReceiveMessage("test_transferable_object_failed",function(e){a&&a.emit(r,"transferable_object_not_support")}),this.avcWorker.sendMessage("test_transferable_object"),{filter:"original",filterHorLuma:"optimized",filterVerLumaEdge:"optimized",getBoundaryStrengthsA:"optimized",sendBufferOnPictureDecoded:!0,logInfInterval:o});function h(e,t,s,i){this._decodedNum++,this._decodeStartTime<=0&&(this._decodeStartTime=Date.now());var i=Date.now()-i;this._sendTotalTime+=i,this._decodedNum%o==1&&this._decodedNum,e&&(this._prevframe.buffer=e,t=(i=(this._prevframe.width=t)*(this._prevframe.height=s))>>2,this.webGLCanvas.YTexture.fill(e.subarray(0,i)),this.webGLCanvas.UTexture.fill(e.subarray(i,i+t)),this.webGLCanvas.VTexture.fill(e.subarray(i+t,i+2*t)),this.webGLCanvas.drawScene(),this._isReady||(this._isReady=!0,a&&a.emit(r,"ready")))}function c(e,t,s){if(this._decodedNum++,e){this._prevframe.buffer=e;for(var i=(this._prevframe.width=t)*(this._prevframe.height=s),a=i>>2,r=e.subarray(0,i),n=e.subarray(i,i+a),o=e.subarray(i+a,i+2*a),h=0;h<s;h++)for(var c=0;c<t;c++){var f=c+h*t,d=~~(h/2)*~~(t/2)+~~(c/2),u=~~(h/2)*~~(t/2)+~~(c/2),l=1.164*(r[f]-16)+1.596*(o[u]-128),u=1.164*(r[f]-16)-.813*(o[u]-128)-.391*(n[d]-128),d=1.164*(r[f]-16)+2.018*(n[d]-128),f=4*f;this.canvasBuffer.data[0+f]=l,this.canvasBuffer.data[1+f]=u,this.canvasBuffer.data[2+f]=d,this.canvasBuffer.data[3+f]=255}this.canvasCtx.putImageData(this.canvasBuffer,0,0)}}this.avcWorker.sendMessage("configure",s),this.isUseWebGL?(this.webGLCanvas=new YUVWebGLCanvas(this.canvas,new Size(e.width,e.height)),this.avcWorker.onReceiveMessage("on-picture-decoded",function(e){h.call(this,new Uint8Array(e.payload.picture),e.payload.width,e.payload.height,e.time)}.bind(this))):"canvas"==t&&(this.canvasCtx=this.canvas.getContext("2d"),this.canvasBuffer=this.canvasCtx.createImageData(this.canvas.width,this.canvas.height),this.avcWorker.onReceiveMessage("on-picture-decoded",function(e){c.call(this,new Uint8Array(e.payload.picture),e.payload.width,e.payload.height)}.bind(this))),this._isReady=!1,this._prevframe={buffer:null,width:0,height:0},this._recvPkgCount=0,this._decodedNum=0,this._decodeStartTime=0,this._sendTotalTime=0,this.ws=null,this.getVideoDataFlag=!1,this.connect=function(e){this.ws&&(this.ws.close(),this.ws=null),this.ws=new WebSocket(e),this.ws.binaryType="arraybuffer",this.ws.onopen=function(){a&&a.emit(r,"connected"),this.playStream()}.bind(this);this.ws.onmessage=function(e){this.getVideoDataFlag||(a.emit(r,"get_video_data_success"),this.getVideoDataFlag=!0);e=new Uint8Array(e.data);this._recvPkgCount++,this.avcWorker.sendBuffer("decode-sample",e.buffer,[e.buffer])}.bind(this),this.ws.onerror=function(e){this.ws=null,a&&a.emit(r,"error",e)},this.ws.onclose=function(){this.ws=null,a&&a.emit(r,"closed")}},this.disconnect=function(){this.ws&&(this.ws.close(),this.ws=null)},this.playStream=function(){var e="REQUESTSTREAM "+this.nals+"NAL "+this.delay+"MS";this.ws.send(e)},this.stopStream=function(){this.ws.send("STOPSTREAM")},this.playNAL=function(){var e="REQUEST "+this.nals+"NAL";this.ws.send(e)},this.flush=function(){this._prevframe.buffer&&(this.isUseWebGL?h.call(this,this._prevframe.buffer,this._prevframe.width,this._prevframe.height,Date.now()):c.call(this,this._prevframe.buffer,this._prevframe.width,this._prevframe.height),this._prevframe.buffer=null)}}
var CP_DO_AUDIO_DECODE=!1,CP_NODE_BUFFER_SIZE=4096,CP_READY_MARK=5,CP_DROP_THRESHOLD_COUNT=25,CP_DROP_DURATION=5e3,CP_AUDIO_CALL_BACK_LOW_AVG_COUNT=10.6,CP_AUDIO_CALL_BACK_PERIOD_CHECK_COUNT=window.CP_ENABLE_DEBUG?parseInt(CP_AUDIO_CALL_BACK_LOW_AVG_COUNT+1):110;function CP_initAudio(t,e,r){if(!window.sharedAudioContext||e||"closed"===window.sharedAudioContext.state){var i,s;window.sharedAudioContext&&(window.sharedAudioContext.onstatechange=null),window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext;try{i=new window.AudioContext}catch(t){return}i.createScriptProcessor?s=i.createScriptProcessor(1024,0,2):i.createJavaScriptNode&&(s=i.createJavaScriptNode(1024,0,2)),s.connect(i.destination),s.disconnect(),window.sharedAudioContext=i,r&&(window.sharedAudioContext.onstatechange=function(t){r.emit("cp_audio_state_changed",window.sharedAudioContext.state)})}return AV.Player.fromWebSocket(t)}function CP_currentAudioState(){return window.sharedAudioContext?window.sharedAudioContext.state:"null"}!function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).AV=t()}(function(){return function i(s,n,a){function o(r,t){if(!n[r]){if(!s[r]){var e="function"==typeof require&&require;if(!t&&e)return e(r,!0);if(h)return h(r,!0);t=new Error("Cannot find module '"+r+"'");throw t.code="MODULE_NOT_FOUND",t}e=n[r]={exports:{}};s[r][0].call(e.exports,function(t){var e=s[r][1][t];return o(e||t)},e,e.exports,i,s,n,a)}return n[r].exports}for(var h="function"==typeof require&&require,t=0;t<a.length;t++)o(a[t]);return o}({1:[function(e,r,t){!function(){function n(t,e){return function(){return t.apply(e,arguments)}}var a={}.hasOwnProperty,o=e("./core/events"),h=e("./sources/node/http"),u=e("./sources/node/file"),f=e("./sources/buffer"),c=e("./demuxer"),l=e("./decoder"),t=function(){var t,e=s,r=o;for(t in r)a.call(r,t)&&(e[t]=r[t]);function i(){this.constructor=e}function s(t){var e,r,i;this.source=t,this._decode=n(this._decode,this),this.findDecoder=n(this.findDecoder,this),this.probe=n(this.probe,this),this.buffered=0,this.duration=null,this.format=null,this.metadata=null,this.active=!1,this.demuxer=null,this.decoder=null,this.source.once("data",this.probe),this.source.on("error",(e=this,function(t){return e.emit("error",t),e.stop()})),this.source.on("progress",(r=this,function(t){return r.buffered=t,r.emit("buffer",r.buffered)})),this.source.once("connected",(i=this,function(){return i.emit("connected")}))}return i.prototype=r.prototype,e.prototype=new i,e.__super__=r.prototype,s.fromURL=function(t,e){return new s(new h(t,e))},s.fromFile=function(t){return new s(new u(t))},s.fromBuffer=function(t){return new s(new f(t))},s.prototype.start=function(t){if(!this.active)return null!=t&&(this.shouldDecode=t),null==this.shouldDecode&&(this.shouldDecode=!0),this.active=!0,this.source.start(),this.decoder&&this.shouldDecode?this._decode():void 0},s.prototype.stop=function(){if(this.active)return this.active=!1,this.source.close()},s.prototype.get=function(t,e){var r;if("format"===t||"duration"===t||"metadata"===t)return null!=this[t]?e(this[t]):(this.once(t,(r=this,function(t){return r.stop(),e(t)})),this.start())},s.prototype.decodePacket=function(){return this.decoder.decode()},s.prototype.decodeToBuffer=function(n){var a,o=0,h=[];return this.on("data",a=function(t){return o+=t.length,h.push(t)}),this.once("end",function(){for(var t,e=new Float32Array(o),r=0,i=0,s=h.length;i<s;i++)t=h[i],e.set(t,r),r+=t.length;return this.off("data",a),n(e)}),this.start()},s.prototype.probe=function(t){var e,r,i,s;if(this.active)return(e=c.find(t))?(this.demuxer=new e(this.source,t),this.demuxer.on("format",this.findDecoder),this.demuxer.on("duration",(r=this,function(t){return r.duration=t,r.emit("duration",r.duration)})),this.demuxer.on("metadata",(i=this,function(t){return i.metadata=t,i.emit("metadata",i.metadata)})),this.demuxer.on("error",(s=this,function(t){return s.emit("error",t),s.stop()}))):this.emit("error","A demuxer for this container was not found.")},s.prototype.findDecoder=function(t){var a,o,e,r,i;if(this.format=t,this.active)return this.emit("format",this.format),(t=l.find(this.format.formatID))?(this.decoder=new t(this.demuxer,this.format),this.format.floatingPoint?this.decoder.on("data",(e=this,function(t){return e.emit("data",t)})):(a=Math.pow(2,this.format.bitsPerChannel-1),this.decoder.on("data",(o=this,function(t){for(var e,r,i=new Float32Array(t.length),s=r=0,n=t.length;r<n;s=++r)e=t[s],i[s]=e/a;return o.emit("data",i)}))),this.decoder.on("error",(r=this,function(t){return r.emit("error",t),r.stop()})),this.decoder.on("end",(i=this,function(){return i.emit("end")})),this.emit("decodeStart"),this.shouldDecode?this._decode():void 0):this.emit("error","A decoder for "+this.format.formatID+" was not found.")},s.prototype._decode=function(){for(;this.decoder.decode()&&this.active;);if(this.active)return this.decoder.once("data",this._decode)},s.prototype.destroy=function(){var t;return this.stop(),null!=(t=this.demuxer)&&t.off(),null!=(t=this.decoder)&&t.off(),null!=(t=this.source)&&t.off(),this.off()},s}();r.exports=t}.call(this)},{"./core/events":8,"./decoder":11,"./demuxer":14,"./sources/buffer":31,"./sources/node/file":29,"./sources/node/http":30}],2:[function(i,t,s){!function(){var t,e,r=i("./aurora_base");for(t in r)e=r[t],s[t]=e;i("./demuxers/caf"),i("./demuxers/m4a"),i("./demuxers/aiff"),i("./demuxers/wave"),i("./demuxers/au"),i("./decoders/lpcm"),i("./decoders/xlaw")}.call(this)},{"./aurora_base":3,"./decoders/lpcm":12,"./decoders/xlaw":13,"./demuxers/aiff":15,"./demuxers/au":16,"./demuxers/caf":17,"./demuxers/m4a":18,"./demuxers/wave":19}],3:[function(t,e,r){!function(){r.Base=t("./core/base"),r.Buffer=t("./core/buffer"),r.BufferList=t("./core/bufferlist"),r.Stream=t("./core/stream"),r.Bitstream=t("./core/bitstream"),r.EventEmitter=t("./core/events"),r.UnderflowError=t("./core/underflow"),r.HTTPSource=t("./sources/node/http"),r.FileSource=t("./sources/node/file"),r.BufferSource=t("./sources/buffer"),r.Demuxer=t("./demuxer"),r.Decoder=t("./decoder"),r.AudioDevice=t("./device"),r.Asset=t("./asset"),r.Player=t("./player"),r.Filter=t("./filter"),r.VolumeFilter=t("./filters/volume"),r.BalanceFilter=t("./filters/balance")}.call(this)},{"./asset":1,"./core/base":4,"./core/bitstream":5,"./core/buffer":6,"./core/bufferlist":7,"./core/events":8,"./core/stream":9,"./core/underflow":10,"./decoder":11,"./demuxer":14,"./device":20,"./filter":24,"./filters/balance":25,"./filters/volume":26,"./player":27,"./sources/buffer":31,"./sources/node/file":29,"./sources/node/http":30}],4:[function(t,e,r){!function(){var o,h={}.hasOwnProperty,u=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1};function t(){}o=/\b_super\b/,t.extend=function(t){var e,r,i,s,n,a=function(t){var e,r=n,i=t;for(e in i)h.call(i,e)&&(r[e]=i[e]);function s(){this.constructor=r}function n(){return n.__super__.constructor.apply(this,arguments)}return s.prototype=i.prototype,r.prototype=new s,r.__super__=i.prototype,n}(this);if("function"==typeof t)for(r in i=Object.keys(a.prototype),t.call(a,a),t={},s=a.prototype)e=s[r],u.call(i,r)<0&&(t[r]=e);for(r in n=a.__super__,t)"function"==typeof(e=t[r])&&o.test(e)?function(r,i){a.prototype[r]=function(){var t,e=this._super;return this._super=n[r],t=i.apply(this,arguments),this._super=e,t}}(r,e):a.prototype[r]=e;return a},e.exports=t}.call(this)},{}],5:[function(t,r,e){!function(){function e(t){this.stream=t,this.bitPosition=0}e.prototype.copy=function(){var t=new e(this.stream.copy());return t.bitPosition=this.bitPosition,t},e.prototype.offset=function(){return 8*this.stream.offset+this.bitPosition},e.prototype.available=function(t){return this.stream.available((t+8-this.bitPosition)/8)},e.prototype.advance=function(t){t=this.bitPosition+t;return this.stream.advance(t>>3),this.bitPosition=7&t},e.prototype.rewind=function(t){t=this.bitPosition-t;return this.stream.rewind(Math.abs(t>>3)),this.bitPosition=7&t},e.prototype.seek=function(t){var e=this.offset();return e<t?this.advance(t-e):t<e?this.rewind(e-t):void 0},e.prototype.align=function(){if(0!==this.bitPosition)return this.bitPosition=0,this.stream.advance(1)},e.prototype.read=function(t,e){var r,i;if(0===t)return 0;if((i=t+this.bitPosition)<=8)r=(this.stream.peekUInt8()<<this.bitPosition&255)>>>8-t;else if(i<=16)r=(this.stream.peekUInt16()<<this.bitPosition&65535)>>>16-t;else if(i<=24)r=(this.stream.peekUInt24()<<this.bitPosition&16777215)>>>24-t;else if(i<=32)r=this.stream.peekUInt32()<<this.bitPosition>>>32-t;else{if(!(i<=40))throw new Error("Too many bits!");r=4294967296*this.stream.peekUInt8(0)+(this.stream.peekUInt8(1)<<24>>>0)+(this.stream.peekUInt8(2)<<16)+(this.stream.peekUInt8(3)<<8)+this.stream.peekUInt8(4),r%=Math.pow(2,40-this.bitPosition),r=Math.floor(r/Math.pow(2,40-this.bitPosition-t))}return e&&(i<32?r>>>t-1&&(r=-1*((1<<t>>>0)-r)):r/Math.pow(2,t-1)|0&&(r=-1*(Math.pow(2,t)-r))),this.advance(t),r},e.prototype.peek=function(t,e){var r,i;if(0===t)return 0;if((i=t+this.bitPosition)<=8)r=(this.stream.peekUInt8()<<this.bitPosition&255)>>>8-t;else if(i<=16)r=(this.stream.peekUInt16()<<this.bitPosition&65535)>>>16-t;else if(i<=24)r=(this.stream.peekUInt24()<<this.bitPosition&16777215)>>>24-t;else if(i<=32)r=this.stream.peekUInt32()<<this.bitPosition>>>32-t;else{if(!(i<=40))throw new Error("Too many bits!");r=4294967296*this.stream.peekUInt8(0)+(this.stream.peekUInt8(1)<<24>>>0)+(this.stream.peekUInt8(2)<<16)+(this.stream.peekUInt8(3)<<8)+this.stream.peekUInt8(4),r%=Math.pow(2,40-this.bitPosition),r=Math.floor(r/Math.pow(2,40-this.bitPosition-t))}return e&&(i<32?r>>>t-1&&(r=-1*((1<<t>>>0)-r)):r/Math.pow(2,t-1)|0&&(r=-1*(Math.pow(2,t)-r))),r},e.prototype.readLSB=function(t,e){var r,i;if(0===t)return 0;if(40<t)throw new Error("Too many bits!");return i=t+this.bitPosition,r=this.stream.peekUInt8(0)>>>this.bitPosition,8<i&&(r|=this.stream.peekUInt8(1)<<8-this.bitPosition),16<i&&(r|=this.stream.peekUInt8(2)<<16-this.bitPosition),24<i&&(r+=this.stream.peekUInt8(3)<<24-this.bitPosition>>>0),32<i&&(r+=this.stream.peekUInt8(4)*Math.pow(2,32-this.bitPosition)),32<=i?r%=Math.pow(2,t):r&=(1<<t)-1,e&&(i<32?r>>>t-1&&(r=-1*((1<<t>>>0)-r)):r/Math.pow(2,t-1)|0&&(r=-1*(Math.pow(2,t)-r))),this.advance(t),r},e.prototype.peekLSB=function(t,e){var r,i;if(0===t)return 0;if(40<t)throw new Error("Too many bits!");return i=t+this.bitPosition,r=this.stream.peekUInt8(0)>>>this.bitPosition,8<i&&(r|=this.stream.peekUInt8(1)<<8-this.bitPosition),16<i&&(r|=this.stream.peekUInt8(2)<<16-this.bitPosition),24<i&&(r+=this.stream.peekUInt8(3)<<24-this.bitPosition>>>0),32<i&&(r+=this.stream.peekUInt8(4)*Math.pow(2,32-this.bitPosition)),32<=i?r%=Math.pow(2,t):r&=(1<<t)-1,e&&(i<32?r>>>t-1&&(r=-1*((1<<t>>>0)-r)):r/Math.pow(2,t-1)|0&&(r=-1*(Math.pow(2,t)-r))),r},r.exports=e}.call(this)},{}],6:[function(t,e,r){!function(n){!function(){var i,r;function s(t){var e;if(t instanceof Uint8Array)this.data=t;else if(t instanceof ArrayBuffer||Array.isArray(t)||"number"==typeof t||null!=(e=n.Buffer)&&e.isBuffer(t))this.data=new Uint8Array(t);else if(t.buffer instanceof ArrayBuffer)this.data=new Uint8Array(t.buffer,t.byteOffset,t.length*t.BYTES_PER_ELEMENT);else{if(!(t instanceof s))throw new Error("Constructing buffer with unknown type.");this.data=t.data}this.length=this.data.length,this.next=null,this.prev=null}s.allocate=function(t){return new s(t)},s.prototype.copy=function(){return new s(new Uint8Array(this.data))},s.prototype.slice=function(t,e){return null==e&&(e=this.length),0===t&&e>=this.length?new s(this.data):new s(this.data.subarray(t,t+e))},i=n.BlobBuilder||n.MozBlobBuilder||n.WebKitBlobBuilder,r=n.URL||n.webkitURL||n.mozURL,s.makeBlob=function(t,e){var r;null==e&&(e="application/octet-stream");try{return new Blob([t],{type:e})}catch(t){}return null!=i?((r=new i).append(t),r.getBlob(e)):null},s.makeBlobURL=function(t,e){return null!=r?r.createObjectURL(this.makeBlob(t,e)):void 0},s.revokeBlobURL=function(t){return null!=r?r.revokeObjectURL(t):void 0},s.prototype.toBlob=function(){return s.makeBlob(this.data.buffer)},s.prototype.toBlobURL=function(){return s.makeBlobURL(this.data.buffer)},e.exports=s}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(t,r,e){!function(){function e(){this.first=null,this.last=null,this.numBuffers=0,this.availableBytes=0,this.availableBuffers=0}e.prototype.copy=function(){var t=new e;return t.first=this.first,t.last=this.last,t.numBuffers=this.numBuffers,t.availableBytes=this.availableBytes,t.availableBuffers=this.availableBuffers,t},e.prototype.append=function(t){var e;return t.prev=this.last,null!=(e=this.last)&&(e.next=t),this.last=t,null==this.first&&(this.first=t),this.availableBytes+=t.length,this.availableBuffers++,this.numBuffers++},e.prototype.advance=function(){return!!this.first&&(this.availableBytes-=this.first.length,this.availableBuffers--,this.first=this.first.next,null!=this.first)},e.prototype.rewind=function(){var t;return!(this.first&&!this.first.prev)&&(this.first=(null!=(t=this.first)?t.prev:void 0)||this.last,this.first&&(this.availableBytes+=this.first.length,this.availableBuffers++),null!=this.first)},e.prototype.reset=function(){for(var t=[];this.rewind(););return t},r.exports=e}.call(this)},{}],8:[function(e,r,t){!function(){var n={}.hasOwnProperty,a=[].slice,o=e("./base"),t=function(){var t,e=s,r=o;for(t in r)n.call(r,t)&&(e[t]=r[t]);function i(){this.constructor=e}function s(){return s.__super__.constructor.apply(this,arguments)}return i.prototype=r.prototype,e.prototype=new i,e.__super__=r.prototype,s.prototype.on=function(t,e){var r;return null==this.events&&(this.events={}),null==(r=this.events)[t]&&(r[t]=[]),this.events[t].push(e)},s.prototype.off=function(t,e){var r;if(null!=this.events)return null!=(r=this.events)&&r[t]?null==e?this.events[t]:~(r=this.events[t].indexOf(e))?this.events[t].splice(r,1):void 0:null==t?{}:void 0},s.prototype.once=function(t,e){var r;return this.on(t,r=function(){return this.off(t,r),e.apply(this,arguments)})},s.prototype.emit=function(){var t,e,r,i,s=arguments[0],n=2<=arguments.length?a.call(arguments,1):[];if(null!=(r=this.events)&&r[s])for(t=0,e=(i=this.events[s].slice()).length;t<e;t++)i[t].apply(this,n)},s}();r.exports=t}.call(this)},{"./base":4}],9:[function(v,k,t){!function(){var a,r,i,t,s,n,o,h,u,f,c,e,l,p,d,m;function y(t){this.list=t,this.localOffset=0,this.offset=0}r=v("./bufferlist"),a=v("./buffer"),i=v("./underflow"),t=new ArrayBuffer(16),m=new Uint8Array(t),e=new Int8Array(t),p=new Uint16Array(t),f=new Int16Array(t),d=new Uint32Array(t),c=new Int32Array(t),n=new Float32Array(t),"undefined"!=typeof Float64Array&&null!==Float64Array&&(o=new Float64Array(t)),l=13330===new Uint16Array(new Uint8Array([18,52]).buffer)[0],y.fromBuffer=function(t){var e=new r;return e.append(t),new y(e)},y.prototype.copy=function(){var t=new y(this.list.copy());return t.localOffset=this.localOffset,t.offset=this.offset,t},y.prototype.available=function(t){return t<=this.list.availableBytes-this.localOffset},y.prototype.remainingBytes=function(){return this.list.availableBytes-this.localOffset},y.prototype.advance=function(t){if(!this.available(t))throw new i;for(this.localOffset+=t,this.offset+=t;this.list.first&&this.localOffset>=this.list.first.length;)this.localOffset-=this.list.first.length,this.list.advance();return this},y.prototype.rewind=function(t){if(t>this.offset)throw new i;for(this.list.first||(this.list.rewind(),this.localOffset=this.list.first.length),this.localOffset-=t,this.offset-=t;this.list.first.prev&&this.localOffset<0;)this.list.rewind(),this.localOffset+=this.list.first.length;return this},y.prototype.seek=function(t){return t>this.offset?this.advance(t-this.offset):t<this.offset?this.rewind(this.offset-t):void 0},y.prototype.readUInt8=function(){var t;if(this.available(1))return t=this.list.first.data[this.localOffset],this.localOffset+=1,this.offset+=1,this.localOffset===this.list.first.length&&(this.localOffset=0,this.list.advance()),t;throw new i},y.prototype.peekUInt8=function(t){var e;if(!this.available((t=null==t?0:t)+1))throw new i;for(t=this.localOffset+t,e=this.list.first;e;){if(e.length>t)return e.data[t];t-=e.length,e=e.next}return 0},y.prototype.read=function(t,e){var r,i,s;if((e=null==e?!1:e)===l)for(r=i=0;i<t;r=i+=1)m[r]=this.readUInt8();else for(r=s=t-1;0<=s;r=s+=-1)m[r]=this.readUInt8()},y.prototype.peek=function(t,e,r){var i,s,n;if((r=null==r?!1:r)===l)for(i=s=0;s<t;i=s+=1)m[i]=this.peekUInt8(e+i);else for(i=n=0;n<t;i=n+=1)m[t-i-1]=this.peekUInt8(e+i)},y.prototype.readInt8=function(){return this.read(1),e[0]},y.prototype.peekInt8=function(t){return this.peek(1,t=null==t?0:t),e[0]},y.prototype.readUInt16=function(t){return this.read(2,t),p[0]},y.prototype.peekUInt16=function(t,e){return this.peek(2,t=null==t?0:t,e),p[0]},y.prototype.readInt16=function(t){return this.read(2,t),f[0]},y.prototype.peekInt16=function(t,e){return this.peek(2,t=null==t?0:t,e),f[0]},y.prototype.readUInt24=function(t){return t?this.readUInt16(!0)+(this.readUInt8()<<16):(this.readUInt16()<<8)+this.readUInt8()},y.prototype.peekUInt24=function(t,e){return null==t&&(t=0),e?this.peekUInt16(t,!0)+(this.peekUInt8(t+2)<<16):(this.peekUInt16(t)<<8)+this.peekUInt8(t+2)},y.prototype.readInt24=function(t){return t?this.readUInt16(!0)+(this.readInt8()<<16):(this.readInt16()<<8)+this.readUInt8()},y.prototype.peekInt24=function(t,e){return null==t&&(t=0),e?this.peekUInt16(t,!0)+(this.peekInt8(t+2)<<16):(this.peekInt16(t)<<8)+this.peekUInt8(t+2)},y.prototype.readUInt32=function(t){return this.read(4,t),d[0]},y.prototype.peekUInt32=function(t,e){return this.peek(4,t=null==t?0:t,e),d[0]},y.prototype.readInt32=function(t){return this.read(4,t),c[0]},y.prototype.peekInt32=function(t,e){return this.peek(4,t=null==t?0:t,e),c[0]},y.prototype.readFloat32=function(t){return this.read(4,t),n[0]},y.prototype.peekFloat32=function(t,e){return this.peek(4,t=null==t?0:t,e),n[0]},y.prototype.readFloat64=function(t){return this.read(8,t),o?o[0]:h()},h=function(){var t,e,r=d[0],i=d[1];return i&&2147483648!==i?(e=1-2*(i>>>31),t=1048575&i,2047==(i=i>>>20&2047)?t?NaN:1/0*e:(i-=1023,t=(1048576|t)*Math.pow(2,i-20),e*(t+=r*Math.pow(2,i-52)))):0},y.prototype.peekFloat64=function(t,e){return this.peek(8,t=null==t?0:t,e),o?o[0]:h()},y.prototype.readFloat80=function(t){return this.read(10,t),u()},u=function(){var t=d[0],e=d[1],r=m[9],i=1-2*(r>>>7),r=(127&r)<<8|m[8];return 0==r&&0===e&&0===t?0:32767==r?0===e&&0===t?1/0*i:NaN:(r-=16383,e=e*Math.pow(2,r-31),i*(e+=t*Math.pow(2,r-63)))},y.prototype.peekFloat80=function(t,e){return this.peek(10,t=null==t?0:t,e),u()},y.prototype.readBuffer=function(t){for(var e,r=a.allocate(t),i=r.data,s=e=0;e<t;s=e+=1)i[s]=this.readUInt8();return r},y.prototype.peekBuffer=function(t,e){var r,i,s,n;for(null==t&&(t=0),s=(i=a.allocate(e)).data,r=n=0;n<e;r=n+=1)s[r]=this.peekUInt8(t+r);return i},y.prototype.readSingleBuffer=function(t){t=this.list.first.slice(this.localOffset,t);return this.advance(t.length),t},y.prototype.peekSingleBuffer=function(t,e){return this.list.first.slice(this.localOffset+t,e)},y.prototype.readString=function(t,e){return s.call(this,0,t,e=null==e?"ascii":e,!0)},y.prototype.peekString=function(t,e,r){return s.call(this,t=null==t?0:t,e,r=null==r?"ascii":r,!1)},s=function(t,e,r,i){var s,n,a,o,h,u,f,c,l,p=null===e?0:-1,d=t+(e=null==e?1/0:e),m="";switch(r=r.toLowerCase()){case"ascii":case"latin1":for(;t<d&&(h=this.peekUInt8(t++))!==p;)m+=String.fromCharCode(h);break;case"utf8":case"utf-8":for(;t<d&&(s=this.peekUInt8(t++))!==p;)0==(128&s)?m+=String.fromCharCode(s):192==(224&s)?(n=63&this.peekUInt8(t++),m+=String.fromCharCode((31&s)<<6|n)):224==(240&s)?(n=63&this.peekUInt8(t++),a=63&this.peekUInt8(t++),m+=String.fromCharCode((15&s)<<12|n<<6|a)):240==(248&s)&&(f=((15&s)<<18|(n=63&this.peekUInt8(t++))<<12|(a=63&this.peekUInt8(t++))<<6|63&this.peekUInt8(t++))-65536,m+=String.fromCharCode(55296+(f>>10),56320+(1023&f)));break;case"utf16-be":case"utf16be":case"utf16le":case"utf16-le":case"utf16bom":case"utf16-bom":switch(r){case"utf16be":case"utf16-be":u=!1;break;case"utf16le":case"utf16-le":u=!0;break;case"utf16bom":case"utf16-bom":if(e<2||(o=this.peekUInt16(t))===p)return i&&this.advance(t+=2),m;u=65534===o,t+=2}for(;t<d&&(c=this.peekUInt16(t,u))!==p;)if(t+=2,c<55296||57343<c)m+=String.fromCharCode(c);else{if(56319<c)throw new Error("Invalid utf16 sequence.");if((l=this.peekUInt16(t,u))<56320||57343<l)throw new Error("Invalid utf16 sequence.");m+=String.fromCharCode(c,l),t+=2}c===p&&(t+=2);break;default:throw new Error("Unknown encoding: "+r)}return i&&this.advance(t),m},k.exports=y}.call(this)},{"./buffer":6,"./bufferlist":7,"./underflow":10}],10:[function(t,e,r){!function(){var a={}.hasOwnProperty,t=function(t){var e,r=n,i=t;for(e in i)a.call(i,e)&&(r[e]=i[e]);function s(){this.constructor=r}function n(){n.__super__.constructor.apply(this,arguments),this.name="UnderflowError",this.stack=(new Error).stack}return s.prototype=i.prototype,r.prototype=new s,r.__super__=i.prototype,n}(Error);e.exports=t}.call(this)},{}],11:[function(e,r,t){!function(){var a={}.hasOwnProperty,o=e("./core/events"),h=e("./core/bufferlist"),u=e("./core/stream"),f=e("./core/bitstream"),c=e("./core/underflow"),t=function(){var r,t,e=n,i=o;for(t in i)a.call(i,t)&&(e[t]=i[t]);function s(){this.constructor=e}function n(t,e){var r,i,s,n;this.demuxer=t,this.format=e,r=new h,this.stream=new u(r),this.bitstream=new f(this.stream),this.receivedFinalBuffer=!1,this.waiting=!1,this.demuxer.on("cookie",(i=this,function(t){try{return i.setCookie(t)}catch(t){return i.emit("error",t)}})),this.demuxer.on("data",(s=this,function(t){if(r.append(t),s.waiting)return s.decode()})),this.demuxer.on("end",(n=this,function(){if(n.receivedFinalBuffer=!0,n.waiting)return n.decode()})),this.init()}return s.prototype=i.prototype,e.prototype=new s,e.__super__=i.prototype,n.prototype.init=function(){},n.prototype.setCookie=function(t){},n.prototype.readChunk=function(){},n.prototype.decode=function(){var e,t,r;this.waiting=!this.receivedFinalBuffer,t=this.bitstream.offset();try{r=this.readChunk()}catch(t){if(!((e=t)instanceof c))return this.emit("error",e),!1}return r?(this.emit("data",r),this.receivedFinalBuffer&&this.emit("end"),!0):(this.receivedFinalBuffer?this.emit("end"):(this.bitstream.seek(t),this.waiting=!0),!1)},n.prototype.seek=function(t){t=this.demuxer.seek(t);return this.stream.seek(t.offset),t.timestamp},r={},n.register=function(t,e){return r[t]=e},n.find=function(t){return r[t]||null},n}();r.exports=t}.call(this)},{"./core/bitstream":5,"./core/bufferlist":7,"./core/events":8,"./core/stream":9,"./core/underflow":10}],12:[function(o,t,e){!function(){var t,e={}.hasOwnProperty,r=o("../decoder"),i=a,s=r;for(t in s)e.call(s,t)&&(i[t]=s[t]);function n(){this.constructor=i}function a(){var t,e;return this.readChunk=(t=this.readChunk,e=this,function(){return t.apply(e,arguments)}),a.__super__.constructor.apply(this,arguments)}n.prototype=s.prototype,i.prototype=new n,i.__super__=s.prototype,r.register("lpcm",a),a.prototype.readChunk=function(){var t,e,r,i,s,n,a,o,h=this.stream,u=this.format.littleEndian,f=Math.min(CP_NODE_BUFFER_SIZE,h.remainingBytes()),c=f/(this.format.bitsPerChannel/8)|0;if(f<this.format.bitsPerChannel/8)return null;if(this.format.floatingPoint)switch(this.format.bitsPerChannel){case 32:for(e=new Float32Array(c),t=r=0;r<c;t=r+=1)e[t]=h.readFloat32(u);break;case 64:for(e=new Float64Array(c),t=i=0;i<c;t=i+=1)e[t]=h.readFloat64(u);break;default:throw new Error("Unsupported bit depth.")}else switch(this.format.bitsPerChannel){case 8:for(e=new Int8Array(c),t=s=0;s<c;t=s+=1)e[t]=h.readInt8();break;case 16:for(e=new Int16Array(c),t=n=0;n<c;t=n+=1)e[t]=h.readInt16(u);break;case 24:for(e=new Int32Array(c),t=a=0;a<c;t=a+=1)e[t]=h.readInt24(u);break;case 32:for(e=new Int32Array(c),t=o=0;o<c;t=o+=1)e[t]=h.readInt32(u);break;default:throw new Error("Unsupported bit depth.")}return e}}.call(this)},{"../decoder":11}],13:[function(o,t,e){!function(){var t,e={}.hasOwnProperty,r=o("../decoder"),i=a,s=r;for(t in s)e.call(s,t)&&(i[t]=s[t]);function n(){this.constructor=i}function a(){var t,e;return this.readChunk=(t=this.readChunk,e=this,function(){return t.apply(e,arguments)}),a.__super__.constructor.apply(this,arguments)}n.prototype=s.prototype,i.prototype=new n,i.__super__=s.prototype,r.register("ulaw",a),r.register("alaw",a),a.prototype.init=function(){var t,e,r,i,s,n,a;if(this.format.bitsPerChannel=16,this.table=i=new Int16Array(256),"ulaw"===this.format.formatID)for(t=n=0;n<256;t=++n)r=132+((15&(s=~t))<<3),r<<=(112&s)>>>4,i[t]=128&s?132-r:r-132;else for(t=a=0;a<256;t=++a)r=15&(s=85^t),r=(e=(112&s)>>>4)?r+r+1+32<<2+e:r+r+1<<3,i[t]=128&s?r:-r},a.prototype.readChunk=function(){var t,e,r,i=this.stream,s=this.table,n=Math.min(CP_NODE_BUFFER_SIZE,this.stream.remainingBytes());if(0!==n){for(e=new Int16Array(n),t=r=0;r<n;t=r+=1)e[t]=s[i.readUInt8()];return e}}}.call(this)},{"../decoder":11}],14:[function(e,r,t){!function(){var n={}.hasOwnProperty,o=e("./core/events"),h=e("./core/bufferlist"),u=e("./core/stream"),t=function(){var a,t,e=s,r=o;for(t in r)n.call(r,t)&&(e[t]=r[t]);function i(){this.constructor=e}function s(t,e){var r,i,s,n,a=new h;a.append(e),this.stream=new u(a),r=!1,t.on("data",(i=this,function(t){r=!0,a.append(t);try{return i.readChunk(t)}catch(t){return i.emit("error",t)}})),t.on("error",(s=this,function(t){return s.emit("error",t)})),t.on("end",(n=this,function(){return r||n.readChunk(e),n.emit("end")})),this.seekPoints=[],this.init()}return i.prototype=r.prototype,e.prototype=new i,e.__super__=r.prototype,s.probe=function(t){return!1},s.prototype.init=function(){},s.prototype.readChunk=function(t){},s.prototype.addSeekPoint=function(t,e){var r=this.searchTimestamp(e);return this.seekPoints.splice(r,0,{offset:t,timestamp:e})},s.prototype.searchTimestamp=function(t,e){var r,i,s=0,n=this.seekPoints.length;if(!(0<n&&this.seekPoints[n-1].timestamp<t)){for(;s<n;)(i=this.seekPoints[r=s+n>>1].timestamp)<t?s=1+r:t<=i&&(n=r);n>this.seekPoints.length&&(n=this.seekPoints.length)}return n},s.prototype.seek=function(t){return this.format&&0<this.format.framesPerPacket&&0<this.format.bytesPerPacket?{timestamp:t,offset:this.format.bytesPerPacket*t/this.format.framesPerPacket}:(t=this.searchTimestamp(t),this.seekPoints[t])},a=[],s.register=function(t){return a.push(t)},s.find=function(t){for(var e,r,i=u.fromBuffer(t),s=0,n=a.length;s<n;s++){e=a[s],r=i.offset;try{if(e.probe(i))return e}catch(t){0}i.seek(r)}return null},s}();r.exports=t}.call(this)},{"./core/bufferlist":7,"./core/events":8,"./core/stream":9}],15:[function(o,t,e){!function(){var t,e={}.hasOwnProperty,r=o("../demuxer"),i=a,s=r;for(t in s)e.call(s,t)&&(i[t]=s[t]);function n(){this.constructor=i}function a(){return a.__super__.constructor.apply(this,arguments)}n.prototype=s.prototype,i.prototype=new n,i.__super__=s.prototype,r.register(a),a.probe=function(t){return"FORM"===t.peekString(0,4)&&("AIFF"===(t=t.peekString(8,4))||"AIFC"===t)},a.prototype.readChunk=function(){var t,e,r;if(!this.readStart&&this.stream.available(12)){if("FORM"!==this.stream.readString(4))return this.emit("error","Invalid AIFF.");if(this.fileSize=this.stream.readUInt32(),this.fileType=this.stream.readString(4),this.readStart=!0,"AIFF"!==(r=this.fileType)&&"AIFC"!==r)return this.emit("error","Invalid AIFF.")}for(;this.stream.available(1);){switch(!this.readHeaders&&this.stream.available(8)&&(this.type=this.stream.readString(4),this.len=this.stream.readUInt32()),this.type){case"COMM":if(!this.stream.available(this.len))return;this.format={formatID:"lpcm",channelsPerFrame:this.stream.readUInt16(),sampleCount:this.stream.readUInt32(),bitsPerChannel:this.stream.readUInt16(),sampleRate:this.stream.readFloat80(),framesPerPacket:1,littleEndian:!1,floatingPoint:!1},this.format.bytesPerPacket=this.format.bitsPerChannel/8*this.format.channelsPerFrame,"AIFC"===this.fileType&&(e=this.stream.readString(4),this.format.littleEndian="sowt"===e&&8<this.format.bitsPerChannel,this.format.floatingPoint="fl32"===e||"fl64"===e,"twos"!==e&&"sowt"!==e&&"fl32"!==e&&"fl64"!==e&&"NONE"!==e||(e="lpcm"),this.format.formatID=e,this.len-=4),this.stream.advance(this.len-18),this.emit("format",this.format),this.emit("duration",this.format.sampleCount/this.format.sampleRate*1e3|0);break;case"SSND":this.readSSNDHeader&&this.stream.available(4)||(e=this.stream.readUInt32(),this.stream.advance(4),this.stream.advance(e),this.readSSNDHeader=!0),t=this.stream.readSingleBuffer(this.len),this.len-=t.length,this.readHeaders=0<this.len,this.emit("data",t);break;default:if(!this.stream.available(this.len))return;this.stream.advance(this.len)}"SSND"!==this.type&&(this.readHeaders=!1)}}}.call(this)},{"../demuxer":14}],16:[function(u,t,e){!function(){var r,i,t,e={}.hasOwnProperty,s=u("../demuxer"),n=h,a=s;for(t in a)e.call(a,t)&&(n[t]=a[t]);function o(){this.constructor=n}function h(){return h.__super__.constructor.apply(this,arguments)}o.prototype=a.prototype,n.prototype=new o,n.__super__=a.prototype,s.register(h),h.probe=function(t){return".snd"===t.peekString(0,4)},(r=[8,8,16,24,32,32,64])[26]=8,i={1:"ulaw",27:"alaw"},h.prototype.readChunk=function(){var t,e;if(!this.readHeader&&this.stream.available(24)){if(".snd"!==this.stream.readString(4))return this.emit("error","Invalid AU file.");if(this.stream.readUInt32(),t=this.stream.readUInt32(),e=this.stream.readUInt32(),this.format={formatID:i[e]||"lpcm",littleEndian:!1,floatingPoint:6===e||7===e,bitsPerChannel:r[e-1],sampleRate:this.stream.readUInt32(),channelsPerFrame:this.stream.readUInt32(),framesPerPacket:1},null==this.format.bitsPerChannel)return this.emit("error","Unsupported encoding in AU file.");this.format.bytesPerPacket=this.format.bitsPerChannel/8*this.format.channelsPerFrame,4294967295!==t&&(e=this.format.bitsPerChannel/8,this.emit("duration",t/e/this.format.channelsPerFrame/this.format.sampleRate*1e3|0)),this.emit("format",this.format),this.readHeader=!0}if(this.readHeader)for(;this.stream.available(1);)this.emit("data",this.stream.readSingleBuffer(this.stream.remainingBytes()))}}.call(this)},{"../demuxer":14}],17:[function(o,t,e){!function(){var t,e={}.hasOwnProperty,r=o("../demuxer"),p=o("./m4a"),i=a,s=r;for(t in s)e.call(s,t)&&(i[t]=s[t]);function n(){this.constructor=i}function a(){return a.__super__.constructor.apply(this,arguments)}n.prototype=s.prototype,i.prototype=new n,i.__super__=s.prototype,r.register(a),a.probe=function(t){return"caff"===t.peekString(0,4)},a.prototype.readChunk=function(){var t,e,r,i,s,n,a,o,h,u,f,c,l;if(!this.format&&this.stream.available(64)){if("caff"!==this.stream.readString(4))return this.emit("error","Invalid CAF, does not begin with 'caff'");if(this.stream.advance(4),"desc"!==this.stream.readString(4))return this.emit("error","Invalid CAF, 'caff' is not followed by 'desc'");if(0!==this.stream.readUInt32()||32!==this.stream.readUInt32())return this.emit("error","Invalid 'desc' size, should be 32");this.format={},this.format.sampleRate=this.stream.readFloat64(),this.format.formatID=this.stream.readString(4),s=this.stream.readUInt32(),"lpcm"===this.format.formatID&&(this.format.floatingPoint=Boolean(1&s),this.format.littleEndian=Boolean(2&s)),this.format.bytesPerPacket=this.stream.readUInt32(),this.format.framesPerPacket=this.stream.readUInt32(),this.format.channelsPerFrame=this.stream.readUInt32(),this.format.bitsPerChannel=this.stream.readUInt32(),this.emit("format",this.format)}for(;this.stream.available(1);){if(!this.headerCache&&(this.headerCache={type:this.stream.readString(4),oversize:0!==this.stream.readUInt32(),size:this.stream.readUInt32()},this.headerCache.oversize))return this.emit("error","Holy Shit, an oversized file, not supported in JS");switch(this.headerCache.type){case"kuki":this.stream.available(this.headerCache.size)&&("aac "===this.format.formatID?(o=this.stream.offset+this.headerCache.size,(r=p.readEsds(this.stream))&&this.emit("cookie",r),this.stream.seek(o)):(t=this.stream.readBuffer(this.headerCache.size),this.emit("cookie",t)),this.headerCache=null);break;case"pakt":if(this.stream.available(this.headerCache.size)){if(0!==this.stream.readUInt32())return this.emit("error","Sizes greater than 32 bits are not supported.");if(this.numPackets=this.stream.readUInt32(),0!==this.stream.readUInt32())return this.emit("error","Sizes greater than 32 bits are not supported.");for(this.numFrames=this.stream.readUInt32(),this.primingFrames=this.stream.readUInt32(),this.remainderFrames=this.stream.readUInt32(),this.emit("duration",this.numFrames/this.format.sampleRate*1e3|0),this.sentDuration=!0,f=h=e=0,l=this.numPackets;f<l;f+=1)this.addSeekPoint(e,h),e+=this.format.bytesPerPacket||p.readDescrLen(this.stream),h+=this.format.framesPerPacket||p.readDescrLen(this.stream);this.headerCache=null}break;case"info":for(i=this.stream.readUInt32(),a={},c=0;0<=i?c<i:i<c;0<=i?++c:--c)n=this.stream.readString(null),u=this.stream.readString(null),a[n]=u;this.emit("metadata",a),this.headerCache=null;break;case"data":this.sentFirstDataChunk||(this.stream.advance(4),this.headerCache.size-=4,0===this.format.bytesPerPacket||this.sentDuration||(this.numFrames=this.headerCache.size/this.format.bytesPerPacket,this.emit("duration",this.numFrames/this.format.sampleRate*1e3|0)),this.sentFirstDataChunk=!0),t=this.stream.readSingleBuffer(this.headerCache.size),this.headerCache.size-=t.length,this.emit("data",t),this.headerCache.size<=0&&(this.headerCache=null);break;default:this.stream.available(this.headerCache.size)&&(this.stream.advance(this.headerCache.size),this.headerCache=null)}}}}.call(this)},{"../demuxer":14,"./m4a":18}],18:[function(e,r,t){!function(){var p={}.hasOwnProperty,d=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1},m=e("../demuxer"),t=function(){var r,e,i,o,h,s,t,n,a,u=l,f=m;for(a in f)p.call(f,a)&&(u[a]=f[a]);function c(){this.constructor=u}function l(){return l.__super__.constructor.apply(this,arguments)}return c.prototype=f.prototype,u.prototype=new c,u.__super__=f.prototype,m.register(l),e=["M4A ","M4P ","M4B ","M4V ","isom","mp42","qt  "],l.probe=function(t){return"ftyp"===t.peekString(4,4)&&(t=t.peekString(8,4),0<=d.call(e,t))},l.prototype.init=function(){return this.atoms=[],this.offsets=[],this.track=null,this.tracks=[]},o={},h={},i=function(t,e){for(var r,i=[],s=t.split(".").slice(0,-1),n=0,a=s.length;n<a;n++)r=s[n],i.push(r),h[i.join(".")]=!0;return null==o[t]&&(o[t]={}),o[t].fn=e},t=function(t,e){return null==o[t]&&(o[t]={}),o[t].after=e},l.prototype.readChunk=function(){var t,e;for(this.break=!1;this.stream.available(1)&&!this.break;){if(!this.readHeaders){if(!this.stream.available(8))return;if(this.len=this.stream.readUInt32()-8,this.type=this.stream.readString(4),0===this.len)continue;this.atoms.push(this.type),this.offsets.push(this.stream.offset+this.len),this.readHeaders=!0}if(e=this.atoms.join("."),null!=(t=o[e])&&t.fn){if(!this.stream.available(this.len)&&"mdat"!==e)return;t.fn.call(this),e in h&&(this.readHeaders=!1)}else if(e in h)this.readHeaders=!1;else{if(!this.stream.available(this.len))return;this.stream.advance(this.len)}for(;this.stream.offset>=this.offsets[this.offsets.length-1];)null!=(t=o[this.atoms.join(".")])&&t.after&&t.after.call(this),this.atoms.pop(),this.offsets.pop(),this.readHeaders=!1}},i("ftyp",function(){var t;return t=this.stream.readString(4),d.call(e,t)<0?this.emit("error","Not a valid M4A file."):this.stream.advance(this.len-4)}),i("moov.trak",function(){return this.track={},this.tracks.push(this.track)}),i("moov.trak.tkhd",function(){return this.stream.advance(4),this.stream.advance(8),this.track.id=this.stream.readUInt32(),this.stream.advance(this.len-16)}),i("moov.trak.mdia.hdlr",function(){return this.stream.advance(4),this.stream.advance(4),this.track.type=this.stream.readString(4),this.stream.advance(12),this.stream.advance(this.len-24)}),i("moov.trak.mdia.mdhd",function(){return this.stream.advance(4),this.stream.advance(8),this.track.timeScale=this.stream.readUInt32(),this.track.duration=this.stream.readUInt32(),this.stream.advance(4)}),r={ulaw:8,alaw:8,in24:24,in32:32,fl32:32,fl64:64},i("moov.trak.mdia.minf.stbl.stsd",function(){var t,e;return this.stream.advance(4),t=this.stream.readUInt32(),"soun"!==this.track.type?this.stream.advance(this.len-8):1!==t?this.emit("error","Only expecting one entry in sample description atom!"):(this.stream.advance(4),(t=this.track.format={}).formatID=this.stream.readString(4),this.stream.advance(6),this.stream.advance(2),e=this.stream.readUInt16(),this.stream.advance(6),t.channelsPerFrame=this.stream.readUInt16(),t.bitsPerChannel=this.stream.readUInt16(),this.stream.advance(4),t.sampleRate=this.stream.readUInt16(),this.stream.advance(2),1===e?(t.framesPerPacket=this.stream.readUInt32(),this.stream.advance(4),t.bytesPerFrame=this.stream.readUInt32(),this.stream.advance(4)):0!==e&&this.emit("error","Unknown version in stsd atom"),null!=r[t.formatID]&&(t.bitsPerChannel=r[t.formatID]),t.floatingPoint="fl32"===(e=t.formatID)||"fl64"===e,t.littleEndian="sowt"===t.formatID&&8<t.bitsPerChannel,"twos"===(e=t.formatID)||"sowt"===e||"in24"===e||"in32"===e||"fl32"===e||"fl64"===e||"raw "===e||"NONE"===e?t.formatID="lpcm":void 0)}),i("moov.trak.mdia.minf.stbl.stsd.alac",function(){return this.stream.advance(4),this.track.cookie=this.stream.readBuffer(this.len-4)}),i("moov.trak.mdia.minf.stbl.stsd.esds",function(){var t=this.stream.offset+this.len;return this.track.cookie=l.readEsds(this.stream),this.stream.seek(t)}),i("moov.trak.mdia.minf.stbl.stsd.wave.enda",function(){return this.track.format.littleEndian=!!this.stream.readUInt16()}),l.readDescrLen=function(t){for(var e,r=0,i=4;i--&&(r=r<<7|127&(e=t.readUInt8()),128&e););return r},l.readEsds=function(t){var e,r;return t.advance(4),r=t.readUInt8(),l.readDescrLen(t),(3!==r||(t.advance(2),128&(e=t.readUInt8())&&t.advance(2),64&e&&t.advance(t.readUInt8()),32&e))&&t.advance(2),r=t.readUInt8(),l.readDescrLen(t),4===r&&(t.readUInt8(),t.advance(1),t.advance(3),t.advance(4),t.advance(4),r=t.readUInt8(),e=l.readDescrLen(t),5===r)?t.readBuffer(e):null},i("moov.trak.mdia.minf.stbl.stts",function(){var t,e,r;for(this.stream.advance(4),t=this.stream.readUInt32(),this.track.stts=[],e=r=0;r<t;e=r+=1)this.track.stts[e]={count:this.stream.readUInt32(),duration:this.stream.readUInt32()};return this.setupSeekPoints()}),i("moov.trak.mdia.minf.stbl.stsc",function(){var t,e,r;for(this.stream.advance(4),t=this.stream.readUInt32(),this.track.stsc=[],e=r=0;r<t;e=r+=1)this.track.stsc[e]={first:this.stream.readUInt32(),count:this.stream.readUInt32(),id:this.stream.readUInt32()};return this.setupSeekPoints()}),i("moov.trak.mdia.minf.stbl.stsz",function(){var t,e,r;if(this.stream.advance(4),this.track.sampleSize=this.stream.readUInt32(),t=this.stream.readUInt32(),0===this.track.sampleSize&&0<t)for(this.track.sampleSizes=[],e=r=0;r<t;e=r+=1)this.track.sampleSizes[e]=this.stream.readUInt32();return this.setupSeekPoints()}),i("moov.trak.mdia.minf.stbl.stco",function(){var t,e,r;for(this.stream.advance(4),t=this.stream.readUInt32(),this.track.chunkOffsets=[],e=r=0;r<t;e=r+=1)this.track.chunkOffsets[e]=this.stream.readUInt32();return this.setupSeekPoints()}),i("moov.trak.tref.chap",function(){var t,e,r=this.len>>2;for(this.track.chapterTracks=[],t=e=0;e<r;t=e+=1)this.track.chapterTracks[t]=this.stream.readUInt32()}),l.prototype.setupSeekPoints=function(){var t,e,r,i,s,n,a,o,h,u,f,c,l,p,d;if(null!=this.track.chunkOffsets&&null!=this.track.stsc&&null!=this.track.sampleSize&&null!=this.track.stts){for(h=e=i=o=a=a=n=0,this.track.seekPoints=[],d=[],t=u=0,c=(l=this.track.chunkOffsets).length;u<c;t=++u){for(r=l[t],f=0,p=this.track.stsc[n].count;f<p;f+=1)this.track.seekPoints.push({offset:e,position:r,timestamp:h}),e+=s=this.track.sampleSize||this.track.sampleSizes[i++],r+=s,h+=this.track.stts[a].duration,a+1<this.track.stts.length&&++o===this.track.stts[a].count&&(o=0,a++);n+1<this.track.stsc.length&&t+1===this.track.stsc[n+1].first?d.push(n++):d.push(void 0)}return d}},t("moov",function(){var t,e,r,i;for(null!=this.mdatOffset&&this.stream.seek(this.mdatOffset-8),e=0,r=(i=this.tracks).length;e<r;e++)if("soun"===(t=i[e]).type){this.track=t;break}return"soun"!==this.track.type?(this.track=null,this.emit("error","No audio tracks in m4a file.")):(this.emit("format",this.track.format),this.emit("duration",this.track.duration/this.track.timeScale*1e3|0),this.track.cookie&&this.emit("cookie",this.track.cookie),this.seekPoints=this.track.seekPoints)}),i("mdat",function(){var t,e,r,i,s,n,a,o;if(!this.startedData){if(null==this.mdatOffset&&(this.mdatOffset=this.stream.offset),0===this.tracks.length)return t=Math.min(this.stream.remainingBytes(),this.len),this.stream.advance(t),void(this.len-=t);this.chunkIndex=0,this.stscIndex=0,this.sampleIndex=0,this.tailOffset=0,this.tailSamples=0,this.startedData=!0}if(!this.readChapters){if(this.readChapters=this.parseChapters(),this.break=!this.readChapters)return;this.stream.seek(this.mdatOffset)}if(s=this.track.chunkOffsets[this.chunkIndex]+this.tailOffset,r=0,this.stream.available(s-this.stream.offset)){for(this.stream.seek(s);this.chunkIndex<this.track.chunkOffsets.length;){for(i=this.track.stsc[this.stscIndex].count-this.tailSamples,n=o=e=0;o<i&&(a=this.track.sampleSize||this.track.sampleSizes[this.sampleIndex],this.stream.available(r+a));n=o+=1)r+=a,e+=a,this.sampleIndex++;if(n<i){this.tailOffset+=e,this.tailSamples+=n;break}if(this.chunkIndex++,this.tailOffset=0,this.tailSamples=0,this.stscIndex+1<this.track.stsc.length&&this.chunkIndex+1===this.track.stsc[this.stscIndex+1].first&&this.stscIndex++,s+r!==this.track.chunkOffsets[this.chunkIndex])break}return 0<r?(this.emit("data",this.stream.readBuffer(r)),this.break=this.chunkIndex===this.track.chunkOffsets.length):this.break=!0}this.break=!0}),l.prototype.parseChapters=function(){var t,e,r,i,s,n,a,o,h,u;if(0<(null!=(a=this.track.chapterTracks)?a.length:void 0)){for(t=this.track.chapterTracks[0],s=0,n=(o=this.tracks).length;s<n&&(i=o[s]).id!==t;s++);for(i.id!==t&&this.emit("error","Chapter track does not exist."),null==this.chapters&&(this.chapters=[]);this.chapters.length<i.seekPoints.length;){if(e=i.seekPoints[this.chapters.length],!this.stream.available(e.position-this.stream.offset+32))return!1;if(this.stream.seek(e.position),h=this.stream.readUInt16(),r=null,!this.stream.available(h))return!1;2<h&&(65279!==(u=this.stream.peekUInt16())&&65534!==u||(r=this.stream.readString(h,"utf16-bom"))),null==r&&(r=this.stream.readString(h,"utf8")),h=null!=(h=null!=(u=i.seekPoints[this.chapters.length+1])?u.timestamp:void 0)?h:i.duration,this.chapters.push({title:r,timestamp:e.timestamp/i.timeScale*1e3|0,duration:(h-e.timestamp)/i.timeScale*1e3|0})}this.emit("chapters",this.chapters)}return!0},i("moov.udta.meta",function(){return this.metadata={},this.stream.advance(4)}),t("moov.udta.meta",function(){return this.emit("metadata",this.metadata)}),(t=function(t,e,r){return i("moov.udta.meta.ilst."+t+".data",function(){return this.stream.advance(8),this.len-=8,r.call(this,e)})})("alb","album",n=function(t){return this.metadata[t]=this.stream.readString(this.len,"utf8")}),t("arg","arranger",n),t("art","artist",n),t("ART","artist",n),t("aART","albumArtist",n),t("catg","category",n),t("com","composer",n),t("cpy","copyright",n),t("cprt","copyright",n),t("cmt","comments",n),t("day","releaseDate",n),t("desc","description",n),t("gen","genre",n),t("grp","grouping",n),t("isr","ISRC",n),t("keyw","keywords",n),t("lab","recordLabel",n),t("ldes","longDescription",n),t("lyr","lyrics",n),t("nam","title",n),t("phg","recordingCopyright",n),t("prd","producer",n),t("prf","performers",n),t("purd","purchaseDate",n),t("purl","podcastURL",n),t("swf","songwriter",n),t("too","encoder",n),t("wrt","composer",n),t("covr","coverArt",function(t){return this.metadata[t]=this.stream.readBuffer(this.len)}),s=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","AlternRock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychadelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk/Rock","National Folk","Swing","Fast Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Capella","Euro-House","Dance Hall"],t("gnre","genre",function(t){return this.metadata[t]=s[this.stream.readUInt16()-1]}),t("tmpo","tempo",function(t){return this.metadata[t]=this.stream.readUInt16()}),t("rtng","rating",function(t){var e=this.stream.readUInt8();return this.metadata[t]=2===e?"Clean":0!==e?"Explicit":"None"}),t("disk","diskNumber",n=function(t){return this.stream.advance(2),this.metadata[t]=this.stream.readUInt16()+" of "+this.stream.readUInt16(),this.stream.advance(this.len-6)}),t("trkn","trackNumber",n),t("cpil","compilation",n=function(t){return this.metadata[t]=1===this.stream.readUInt8()}),t("pcst","podcast",n),t("pgap","gapless",n),l}();r.exports=t}.call(this)},{"../demuxer":14}],19:[function(h,t,e){!function(){var r,t,e={}.hasOwnProperty,i=h("../demuxer"),s=o,n=i;for(t in n)e.call(n,t)&&(s[t]=n[t]);function a(){this.constructor=s}function o(){return o.__super__.constructor.apply(this,arguments)}a.prototype=n.prototype,s.prototype=new a,s.__super__=n.prototype,i.register(o),o.probe=function(t){return"RIFF"===t.peekString(0,4)&&"WAVE"===t.peekString(8,4)},r={1:"lpcm",3:"lpcm",6:"alaw",7:"ulaw"},o.prototype.readChunk=function(){var t,e;if(!this.readStart&&this.stream.available(12)){if("RIFF"!==this.stream.readString(4))return this.emit("error","Invalid WAV file.");if(this.fileSize=this.stream.readUInt32(!0),this.readStart=!0,"WAVE"!==this.stream.readString(4))return this.emit("error","Invalid WAV file.")}for(;this.stream.available(1);){switch(!this.readHeaders&&this.stream.available(8)&&(this.type=this.stream.readString(4),this.len=this.stream.readUInt32(!0)),this.type){case"fmt ":if(!((e=this.stream.readUInt16(!0))in r))return this.emit("error","Unsupported format in WAV file.");this.format={formatID:r[e],floatingPoint:3===e,littleEndian:"lpcm"===r[e],channelsPerFrame:this.stream.readUInt16(!0),sampleRate:this.stream.readUInt32(!0),framesPerPacket:1},this.stream.advance(4),this.stream.advance(2),this.format.bitsPerChannel=this.stream.readUInt16(!0),this.format.bytesPerPacket=this.format.bitsPerChannel/8*this.format.channelsPerFrame,this.emit("format",this.format),this.stream.advance(this.len-16);break;case"data":this.sentDuration||(e=this.format.bitsPerChannel/8,this.emit("duration",this.len/e/this.format.channelsPerFrame/this.format.sampleRate*1e3|0),this.sentDuration=!0),t=this.stream.readSingleBuffer(this.len),this.len-=t.length,this.readHeaders=0<this.len,this.emit("data",t);break;default:if(!this.stream.available(this.len))return;this.stream.advance(this.len)}"data"!==this.type&&(this.readHeaders=!1)}}}.call(this)},{"../demuxer":14}],20:[function(e,r,t){!function(){var a={}.hasOwnProperty,o=e("./core/events"),t=function(){var n,t,e=s,r=o;for(t in r)a.call(r,t)&&(e[t]=r[t]);function i(){this.constructor=e}function s(t,e){var r,i;this.sampleRate=t,this.channels=e,this.updateTime=(r=this.updateTime,i=this,function(){return r.apply(i,arguments)}),this.playing=!1,this.currentTime=0,this._lastTime=0}return i.prototype=r.prototype,e.prototype=new i,e.__super__=r.prototype,s.prototype.start=function(){if(!this.playing){if(this.playing=!0,null==this.device&&(this.device=s.create(this.sampleRate,this.channels)),this.device)return this._lastTime=this.device.getDeviceTime(),this._timer=setInterval(this.updateTime,200),this.device.on("refill",this.refill=(e=this,function(t){return e.emit("refill",t)}));throw new Error("No supported audio device found.");var e}},s.prototype.stop=function(){if(this.playing)return this.playing=!1,this.device.off("refill",this.refill),clearInterval(this._timer)},s.prototype.destroy=function(){var t;return this.stop(),null!=(t=this.device)?t.destroy():void 0},s.prototype.seek=function(t){return this.currentTime=t,this.playing&&(this._lastTime=this.device.getDeviceTime()),this.emit("timeUpdate",this.currentTime)},s.prototype.updateTime=function(){var t=this.device.getDeviceTime();return this.currentTime+=(t-this._lastTime)/this.device.sampleRate*1e3|0,this._lastTime=t,this.emit("timeUpdate",this.currentTime)},n=[],s.register=function(t){return n.push(t)},s.create=function(t,e){for(var r,i=0,s=n.length;i<s;i++)if((r=n[i]).supported)return new r(t,e);return null},s}();r.exports=t}.call(this)},{"./core/events":8}],21:[function(c,t,e){!function(){var s,t,e,r={}.hasOwnProperty,i=c("../core/events"),n=c("../device"),a=c("../core/buffer"),o=f,h=i;for(e in h)r.call(h,e)&&(o[e]=h[e]);function u(){this.constructor=o}function f(t,e){var r,i;this.sampleRate=t,this.channels=e,this.refill=(r=this.refill,i=this,function(){return r.apply(i,arguments)}),this.audio=new Audio,this.audio.mozSetup(this.channels,this.sampleRate),this.writePosition=0,this.prebufferSize=this.sampleRate/2,this.tail=null,this.timer=s(this.refill,100)}u.prototype=h.prototype,o.prototype=new u,o.__super__=h.prototype,n.register(f),f.supported="undefined"!=typeof Audio&&null!==Audio&&"mozWriteAudio"in new Audio,f.prototype.refill=function(){var t,e;this.tail&&(e=this.audio.mozWriteAudio(this.tail),this.writePosition+=e,this.writePosition<this.tail.length?this.tail=this.tail.subarray(e):this.tail=null),0<(t=this.audio.mozCurrentSampleOffset()+this.prebufferSize-this.writePosition)&&(t=new Float32Array(t),this.emit("refill",t),(e=this.audio.mozWriteAudio(t))<t.length&&(this.tail=t.subarray(e)),this.writePosition+=e)},f.prototype.destroy=function(){return t(this.timer)},f.prototype.getDeviceTime=function(){return this.audio.mozCurrentSampleOffset()/this.channels},s=function(t,e){var r=a.makeBlobURL("setInterval(function() { postMessage('ping'); }, "+e+");");return null==r?setInterval(t,e):((e=new Worker(r)).onmessage=t,e.url=r,e)},t=function(t){return t.terminate?(t.terminate(),URL.revokeObjectURL(t.url)):clearInterval(t)}}.call(this)},{"../core/buffer":6,"../core/events":8,"../device":20}],22:[function(t,e,r){function i(t,e,r,i){this.fromSampleRate=+t,this.toSampleRate=+e,this.channels=0|r,this.inputBufferLength=i,this.initialize()}i.prototype.initialize=function(){if(!(0<this.fromSampleRate&&0<this.toSampleRate&&0<this.channels))throw new Error("Invalid settings specified for the resampler.");var t;this.fromSampleRate==this.toSampleRate?(this.resampler=this.bypassResampler,this.ratioWeight=1):(this.ratioWeight=this.fromSampleRate/this.toSampleRate,this.fromSampleRate<this.toSampleRate?(this.compileLinearInterpolationFunction(),this.lastWeight=1):(this.compileMultiTapFunction(),this.tailExists=!1,this.lastWeight=0),t=Math.ceil(this.inputBufferLength*this.toSampleRate/this.fromSampleRate/this.channels*1.01)*this.channels+this.channels,this.outputBuffer=new Float32Array(t),this.lastOutput=new Float32Array(this.channels))},i.prototype.compileLinearInterpolationFunction=function(){for(var t="var outputOffset = 0;                var bufferLength = buffer.length;                if (bufferLength > 0) {                var weight = this.lastWeight;                var firstWeight = 0;                var secondWeight = 0;                var sourceOffset = 0;                var outputOffset = 0;                var outputBuffer = this.outputBuffer;                for (; weight < 1; weight += "+this.ratioWeight+") {                secondWeight = weight % 1;                firstWeight = 1 - secondWeight;",e=0;e<this.channels;++e)t+="outputBuffer[outputOffset++] = (this.lastOutput["+e+"] * firstWeight) + (buffer["+e+"] * secondWeight);";t+="}                weight -= 1;                for (bufferLength -= "+this.channels+", sourceOffset = Math.floor(weight) * "+this.channels+"; sourceOffset < bufferLength;) {                secondWeight = weight % 1;                firstWeight = 1 - secondWeight;";for(e=0;e<this.channels;++e)t+="outputBuffer[outputOffset++] = (buffer[sourceOffset"+(0<e?" + "+e:"")+"] * firstWeight) + (buffer[sourceOffset + "+(this.channels+e)+"] * secondWeight);";t+="weight += "+this.ratioWeight+";                sourceOffset = Math.floor(weight) * "+this.channels+";                }";for(e=0;e<this.channels;++e)t+="this.lastOutput["+e+"] = buffer[sourceOffset++];";t+="this.lastWeight = weight % 1;                }                return this.outputBuffer;",this.resampler=Function("buffer",t)},i.prototype.compileMultiTapFunction=function(){for(var t="var outputOffset = 0;                var bufferLength = buffer.length;                if (bufferLength > 0) {                var weight = 0;",e=0;e<this.channels;++e)t+="var output"+e+" = 0;";for(t+="var actualPosition = 0;                var amountToNext = 0;                var alreadyProcessedTail = !this.tailExists;                this.tailExists = false;                var outputBuffer = this.outputBuffer;                var currentPosition = 0;                do {                if (alreadyProcessedTail) {                weight = "+this.ratioWeight+";",e=0;e<this.channels;++e)t+="output"+e+" = 0;";for(t+="}                else {                weight = this.lastWeight;",e=0;e<this.channels;++e)t+="output"+e+" = this.lastOutput["+e+"];";for(t+="alreadyProcessedTail = true;                }                while (weight > 0 && actualPosition < bufferLength) {                amountToNext = 1 + actualPosition - currentPosition;                if (weight >= amountToNext) {",e=0;e<this.channels;++e)t+="output"+e+" += buffer[actualPosition++] * amountToNext;";for(t+="currentPosition = actualPosition;                weight -= amountToNext;                }                else {",e=0;e<this.channels;++e)t+="output"+e+" += buffer[actualPosition"+(0<e?" + "+e:"")+"] * weight;";for(t+="currentPosition += weight;                weight = 0;                break;                }                }                if (weight <= 0) {",e=0;e<this.channels;++e)t+="outputBuffer[outputOffset++] = output"+e+" / "+this.ratioWeight+";";for(t+="}                else {                this.lastWeight = weight;",e=0;e<this.channels;++e)t+="this.lastOutput["+e+"] = output"+e+";";t+="this.tailExists = true;                break;                }                } while (actualPosition < bufferLength);                }                return this.outputBuffer;",this.resampler=Function("buffer",t)},i.prototype.bypassResampler=function(t){return t},e.exports=i},{}],23:[function(l,t,e){!function(c){!function(){var s,n,t,e={}.hasOwnProperty,r=l("../core/events"),i=l("../device"),a=l("./resampler"),o=f,h=r;for(t in h)e.call(h,t)&&(o[t]=h[t]);function u(){this.constructor=o}function f(t,e){var r,i;this.sampleRate=t,this.channels=e,this.refill=(r=this.refill,i=this,function(){return r.apply(i,arguments)}),this.context=null!=n&&"closed"!==n.state?n:n=window.sharedAudioContext,this.deviceSampleRate=this.context.sampleRate,this.bufferSize=Math.ceil(CP_NODE_BUFFER_SIZE/(this.deviceSampleRate/this.sampleRate)*this.channels),this.bufferSize+=this.bufferSize%this.channels,this.deviceSampleRate!==this.sampleRate&&(this.resampler=new a(this.sampleRate,this.deviceSampleRate,this.channels,this.bufferSize)),this.node=this.context[s](CP_NODE_BUFFER_SIZE,this.channels,this.channels),this.node.onaudioprocess=this.refill,this.node.connect(this.context.destination);try{this.node.onstatechange=this.onNodeStateChange}catch(t){}try{this.node.oncomplete=this.onComplete}catch(t){}try{this.node.onended=this.onEnded}catch(t){}this.onaudioprocessCallCount=0,this.onaudioprocessCallStartTime=0}u.prototype=h.prototype,o.prototype=new u,o.__super__=h.prototype,i.register(f),r=c.AudioContext||c.webkitAudioContext,f.supported=r&&("function"==typeof r.prototype[s="createScriptProcessor"]||"function"==typeof r.prototype[s="createJavaScriptNode"]),n=null,f.prototype.onNodeStateChange=function(t){},f.prototype.onComplete=function(t){},f.prototype.onEnded=function(t){},f.prototype.refill=function(t){var e,r,i,s,n,a,o,h,u,f,c;for(this.onaudioprocessCallCount+=1,this.onaudioprocessCallCount%CP_AUDIO_CALL_BACK_PERIOD_CHECK_COUNT==1&&1!=this.onaudioprocessCallCount&&(e=Date.now(),0<this.onaudioprocessCallStartTime&&0!=e-this.onaudioprocessCallStartTime&&0,this.onaudioprocessCallStartTime=e),r=(o=t.outputBuffer).numberOfChannels,i=new Array(r),n=h=0;h<r;n=h+=1)i[n]=o.getChannelData(n);for(s=new Float32Array(this.bufferSize),this.emit("refill",s),this.resampler&&(s=this.resampler.resampler(s)),n=u=0,c=o.length;u<c;n=u+=1)for(a=f=0;f<r;a=f+=1)i[a][n]=s[n*r+a]},f.prototype.destroy=function(){return this.node.disconnect(0)},f.prototype.getDeviceTime=function(){return this.context.currentTime*this.sampleRate}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../core/events":8,"../device":20,"./resampler":22}],24:[function(t,e,r){!function(){function t(t,e){t&&e&&Object.defineProperty(this,"value",{get:function(){return t[e]}})}t.prototype.process=function(t){},e.exports=t}.call(this)},{}],25:[function(e,r,t){!function(){var n={}.hasOwnProperty,a=e("../filter"),t=function(){var t,e=s,r=a;for(t in r)n.call(r,t)&&(e[t]=r[t]);function i(){this.constructor=e}function s(){return s.__super__.constructor.apply(this,arguments)}return i.prototype=r.prototype,e.prototype=new i,e.__super__=r.prototype,s.prototype.process=function(t){var e,r,i,s;if(0!==this.value)for(r=Math.max(-50,Math.min(50,this.value)),e=i=0,s=t.length;i<s;e=i+=2)t[e]*=Math.min(1,(50-r)/50),t[e+1]*=Math.min(1,(50+r)/50)},s}();r.exports=t}.call(this)},{"../filter":24}],26:[function(e,r,t){!function(){var n={}.hasOwnProperty,a=e("../filter"),t=function(){var t,e=s,r=a;for(t in r)n.call(r,t)&&(e[t]=r[t]);function i(){this.constructor=e}function s(){return s.__super__.constructor.apply(this,arguments)}return i.prototype=r.prototype,e.prototype=new i,e.__super__=r.prototype,s.prototype.process=function(t){var e,r,i,s;if(!(100<=this.value))for(r=Math.max(0,Math.min(100,this.value))/100,e=i=0,s=t.length;i<s;e=i+=1)t[e]*=r},s}();r.exports=t}.call(this)},{"../filter":24}],27:[function(e,r,t){!function(){var n={}.hasOwnProperty,a=e("./core/events"),o=e("./asset"),f=e("./filters/volume"),c=e("./filters/balance"),l=e("./queue"),p=e("./device"),t=function(){var t,e=s,r=a;for(t in r)n.call(r,t)&&(e[t]=r[t]);function i(){this.constructor=e}function s(t){var e,r,i,s,n,a,o,h,u;this.asset=t,this.startPlaying=(e=this.startPlaying,r=this,function(){return e.apply(r,arguments)}),this.playing=!1,this.buffered=0,this.currentTime=0,this.duration=0,this.volume=100,this.pan=0,this.metadata={},this.filters=[new f(this,"volume"),new c(this,"pan")],this.asset.on("buffer",(i=this,function(t){return i.buffered=t,i.emit("buffer",i.buffered)})),this.asset.on("decodeStart",(s=this,function(){return s.queue=new l(s.asset),s.queue.once("ready",s.startPlaying)})),this.asset.on("format",(n=this,function(t){return n.format=t,n.emit("format",n.format)})),this.asset.on("metadata",(a=this,function(t){return a.metadata=t,a.emit("metadata",a.metadata)})),this.asset.on("duration",(o=this,function(t){return o.duration=t,o.emit("duration",o.duration)})),this.asset.on("error",(h=this,function(t){return h.emit("error",t)})),this.asset.on("connected",(u=this,function(){return u.emit("connected")}))}return i.prototype=r.prototype,e.prototype=new i,e.__super__=r.prototype,s.fromURL=function(t,e){return new s(o.fromURL(t,e))},s.fromFile=function(t){return new s(o.fromFile(t))},s.fromBuffer=function(t){return new s(o.fromBuffer(t))},s.prototype.preload=function(){if(this.asset)return this.startedPreloading=!0,this.asset.start(!1)},s.prototype.play=function(){var t;if(!this.playing)return this.startedPreloading||this.preload(),this.playing=!0,null!=(t=this.device)?t.start():void 0},s.prototype.pause=function(){var t;if(this.playing)return this.playing=!1,null!=(t=this.device)?t.stop():void 0},s.prototype.togglePlayback=function(){return this.playing?this.pause():this.play()},s.prototype.stop=function(){var t;return this.pause(),this.asset.stop(),null!=(t=this.device)?t.destroy():void 0},s.prototype.seek=function(t){var e,r;return null!=(e=this.device)&&e.stop(),this.queue.once("ready",(r=this,function(){var t;return null!=(t=r.device)&&t.seek(r.currentTime),r.playing&&null!=(t=r.device)?t.start():void 0})),t=t/1e3*this.format.sampleRate,t=this.asset.decoder.seek(t),this.currentTime=t/this.format.sampleRate*1e3|0,this.queue.reset(),this.currentTime},s.prototype.startPlaying=function(){var e,o,h=this.queue.read(),u=0;return this.device=new p(this.format.sampleRate,this.format.channelsPerFrame),this.device.on("timeUpdate",(e=this,function(t){return e.currentTime=t,e.emit("progress",e.currentTime)})),this.refill=(o=this,function(t){var e,r,i,s,n,a;if(o.playing){for(h||(h=o.queue.read(),u=0),e=0;h&&e<t.length;){for(r=Math.min(h.length-u,t.length-e),i=0;i<r;i+=1)t[e++]=h[u++];u===h.length&&(h=o.queue.read(),u=0)}for(t.length,s=0,n=(a=o.filters).length;s<n;s++)a[s].process(t);h||o.queue.ended&&(o.currentTime=o.duration,o.emit("progress",o.currentTime),o.emit("end"),o.stop())}}),this.device.on("refill",this.refill),this.playing&&this.device.start(),this.emit("ready")},s.prototype.destroy=function(){var t;return this.stop(),null!=(t=this.device)&&t.off(),null!=(t=this.asset)&&t.destroy(),this.off()},s}();r.exports=t}.call(this)},{"./asset":1,"./core/events":8,"./device":20,"./filters/balance":25,"./filters/volume":26,"./queue":28}],28:[function(e,r,t){!function(){var n={}.hasOwnProperty,a=e("./core/events"),t=function(){var t,e=s,r=a;for(t in r)n.call(r,t)&&(e[t]=r[t]);function i(){this.constructor=e}function s(t){var e,r,i;this.asset=t,this.write=(e=this.write,r=this,function(){return e.apply(r,arguments)}),this.readyMark=CP_READY_MARK,this.startDropCheckTime=0,this.finished=!1,this.buffering=!0,this.ended=!1,this.buffers=[],this.asset.on("data",this.write),this.asset.on("end",(i=this,function(){return i.ended=!0})),this.asset.decodePacket()}return i.prototype=r.prototype,e.prototype=new i,e.__super__=r.prototype,s.prototype.write=function(t){var e;if(t&&(CP_DO_AUDIO_DECODE||(e=Date.now(),!(this.startDropCheckTime<=0)&&this.buffers.length>CP_DROP_THRESHOLD_COUNT?e-this.startDropCheckTime>=CP_DROP_DURATION&&(this.startDropCheckTime=e,this.buffers.length=parseInt(.5*CP_DROP_THRESHOLD_COUNT)):this.startDropCheckTime=e),this.buffers.push(t)),this.buffering)return this.buffers.length>=this.readyMark||this.ended?(this.buffering=!1,this.emit("ready")):this.asset.decodePacket()},s.prototype.read=function(){return 0===this.buffers.length?null:(CP_DO_AUDIO_DECODE&&(this.buffers.length,this.buffers[0].length,this.asset.decodePacket(),this.buffers[0].length),this.buffers.shift())},s.prototype.reset=function(){return this.buffers.length=0,this.buffering=!0,this.asset.decodePacket()},s}();r.exports=t}.call(this)},{"./core/events":8}],29:[function(t,e,r){var n={}.hasOwnProperty,a=t("../../core/events"),o=t("../../core/buffer"),t=function(){var t,e=s,r=a;for(t in r)n.call(r,t)&&(e[t]=r[t]);function i(){this.constructor=e}function s(t){if(this.file=t,"undefined"==typeof FileReader||null===FileReader)return this.emit("error","This browser does not have FileReader support.");this.offset=0,this.length=this.file.size,this.chunkSize=1<<20,this.file[this.slice="slice"]||this.file[this.slice="webkitSlice"]||this.file[this.slice="mozSlice"]}return i.prototype=r.prototype,e.prototype=new i,e.__super__=r.prototype,s.prototype.start=function(){var e,t,r,i;return this.reader&&!this.active||(this.reader=new FileReader,this.active=!0,this.reader.onload=(e=this,function(t){t=new o(new Uint8Array(t.target.result));if(e.offset+=t.length,e.emit("data",t),e.active=!1,e.offset<e.length)return e.loop()}),this.reader.onloadend=(t=this,function(){if(t.offset===t.length)return t.emit("end"),t.reader=null}),this.reader.onerror=(r=this,function(t){return r.emit("error",t)}),this.reader.onprogress=(i=this,function(t){return i.emit("progress",(i.offset+t.loaded)/i.length*100)})),this.loop()},s.prototype.loop=function(){var t;return this.active=!0,t=Math.min(this.offset+this.chunkSize,this.length),t=this.file[this.slice](this.offset,t),this.reader.readAsArrayBuffer(t)},s.prototype.pause=function(){var t;this.active=!1;try{return null!=(t=this.reader)?t.abort():void 0}catch(t){}},s.prototype.reset=function(){return this.pause(),this.offset=0},s}();e.exports=t},{"../../core/buffer":6,"../../core/events":8}],30:[function(t,e,r){var n={}.hasOwnProperty,a=t("../../core/events"),h=t("../../core/buffer"),t=function(){var t,e=s,r=a;for(t in r)n.call(r,t)&&(e[t]=r[t]);function i(){this.constructor=e}function s(t,e){this.url=t,this.opts=null!=e?e:{},this.chunkSize=1<<20,this.inflight=!1,this.opts.length&&(this.length=this.opts.length),this.reset()}return i.prototype=r.prototype,e.prototype=new i,e.__super__=r.prototype,s.prototype.start=function(){var e,r,i;return this.length&&!this.inflight?this.loop():(this.inflight=!0,this.xhr=new XMLHttpRequest,this.xhr.onload=(e=this,function(t){return e.length=parseInt(e.xhr.getResponseHeader("Content-Length")),e.inflight=!1,e.loop()}),this.xhr.onerror=(r=this,function(t){return r.pause(),r.emit("error",t)}),this.xhr.onabort=(i=this,function(t){return i.inflight=!1}),this.xhr.open("HEAD",this.url,!0),this.xhr.send(null))},s.prototype.loop=function(){var t,o,e,r,i;return this.inflight||!this.length?this.emit("error","Something is wrong in HTTPSource.loop"):(this.inflight=!0,this.xhr=new XMLHttpRequest,this.xhr.onload=(o=this,function(t){var e,r,i,s,n,a;if(o.xhr.response)e=new Uint8Array(o.xhr.response);else for(s=o.xhr.responseText,e=new Uint8Array(s.length),i=n=0,a=s.length;0<=a?n<a:a<n;i=0<=a?++n:--n)e[i]=255&s.charCodeAt(i);if(r=new h(e),o.offset+=r.length,o.emit("data",r),o.offset>=o.length&&o.emit("end"),o.inflight=!1,!(o.offset>=o.length))return o.loop()}),this.xhr.onprogress=(e=this,function(t){return e.emit("progress",(e.offset+t.loaded)/e.length*100)}),this.xhr.onerror=(r=this,function(t){return r.emit("error",t),r.pause()}),this.xhr.onabort=(i=this,function(t){return i.inflight=!1}),this.xhr.open("GET",this.url,!0),this.xhr.responseType="arraybuffer",t=Math.min(this.offset+this.chunkSize,this.length-1),this.xhr.setRequestHeader("If-None-Match","webkit-no-cache"),this.xhr.setRequestHeader("Range","bytes="+this.offset+"-"+t),this.xhr.overrideMimeType("text/plain; charset=x-user-defined"),this.xhr.send(null))},s.prototype.pause=function(){var t;return this.inflight=!1,null!=(t=this.xhr)?t.abort():void 0},s.prototype.reset=function(){return this.pause(),this.offset=0},s}();e.exports=t},{"../../core/buffer":6,"../../core/events":8}],31:[function(e,r,t){!function(c){!function(){var o={}.hasOwnProperty,h=e("../core/events"),u=e("../core/bufferlist"),f=e("../core/buffer"),t=function(){var t,e,r,i=a,s=h;for(r in s)o.call(s,r)&&(i[r]=s[r]);function n(){this.constructor=i}function a(t){var e,r;this.loop=(e=this.loop,r=this,function(){return e.apply(r,arguments)}),t instanceof u?this.list=t:(this.list=new u,this.list.append(new f(t))),this.paused=!0}return n.prototype=s.prototype,i.prototype=new n,i.__super__=s.prototype,e=c.setImmediate||function(t){return c.setTimeout(t,0)},t=c.clearImmediate||function(t){return c.clearTimeout(t)},a.prototype.start=function(){return this.paused=!1,this._timer=e(this.loop)},a.prototype.check=function(){if(this.paused)return this.paused=!1,this._timer=e(this.loop)},a.prototype.loop=function(){return this.emit("progress",(this.list.numBuffers-this.list.availableBuffers+1)/this.list.numBuffers*100|0),this.emit("data",this.list.first),this.list.advance()?e(this.loop):this.paused=!0},a.prototype.pause=function(){return t(this._timer),this.paused=!0},a.prototype.reset=function(){return this.pause(),this.list.rewind()},a}();r.exports=t}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../core/buffer":6,"../core/bufferlist":7,"../core/events":8}],32:[function(t,e,r){var i,s,n=t("./src/aurora");for(i in n)s=n[i],r[i]=s;t("./src/devices/webaudio"),t("./src/devices/mozilla")},{"./src/aurora":2,"./src/devices/mozilla":21,"./src/devices/webaudio":23}]},{},[32])(32)});
!function n(i,o,s){function a(r,e){if(!o[r]){if(!i[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(h)return h(r,!0);throw new Error("Cannot find module '"+r+"'")}e=o[r]={exports:{}};i[r][0].call(e.exports,function(e){var t=i[r][1][e];return a(t||e)},e,e.exports,n,i,o,s)}return o[r].exports}for(var h="function"==typeof require&&require,e=0;e<s.length;e++)a(s[e]);return a}({1:[function(t,r,e){!function(e){var i="undefined"!=typeof window?window.AV:void 0!==e?e.AV:null,o=t("./tables"),s=i.Demuxer.extend(function(){i.Demuxer.register(this),this.probe=function(e){for(var t=e.offset;e.available(2);)if(65520==(65526&e.readUInt16()))return e.seek(t),!0;return e.seek(t),!1},this.prototype.init=function(){this.bitstream=new i.Bitstream(this.stream)},this.readHeader=function(e){if(4095!==e.read(12))throw new Error("Invalid ADTS header.");var t={},r=(e.advance(3),!!e.read(1));return t.profile=e.read(2)+1,t.samplingIndex=e.read(4),e.advance(1),t.chanConfig=e.read(3),e.advance(4),t.frameLength=e.read(13),e.advance(11),t.numFrames=e.read(2)+1,r||e.advance(16),t},this.prototype.readChunk=function(){var e,t,r;for(this.sentHeader||(e=this.stream.offset,t=s.readHeader(this.bitstream),this.emit("format",{formatID:"aac ",sampleRate:o.SAMPLE_RATES[t.samplingIndex],channelsPerFrame:t.chanConfig,bitsPerChannel:16}),(r=new Uint8Array(2))[0]=t.profile<<3|t.samplingIndex>>1&7,r[1]=(1&t.samplingIndex)<<7|t.chanConfig<<3,this.emit("cookie",new i.Buffer(r)),this.stream.seek(e),this.sentHeader=!0);this.stream.available(1);){var n=this.stream.readSingleBuffer(this.stream.remainingBytes());this.emit("data",n)}}});r.exports=s}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./tables":11}],2:[function(e,t,r){var S=e("./ics"),A=e("./huffman");function _(e){this.ics=new S(e),this.channelPair=new Array(8),this.idSelect=new Int32Array(8),this.chSelect=new Int32Array(8),this.gain=new Array(16)}_.BEFORE_TNS=0,_.AFTER_TNS=1,_.AFTER_IMDCT=2;const y=new Float32Array([1.0905077326652577,1.189207115002721,1.4142135623730951,2]);_.prototype={decode:function(e,t){for(var r=this.channelPair,n=this.idSelect,i=this.chSelect,o=(this.couplingPoint=2*e.read(1),this.coupledCount=e.read(3),0),s=0;s<=this.coupledCount;s++)o++,r[s]=e.read(1),n[s]=e.read(4),r[s]?(i[s]=e.read(2),3===i[s]&&o++):i[s]=2;this.couplingPoint+=e.read(1),this.couplingPoint|=this.couplingPoint>>>1;for(var a=e.read(1),h=y[e.read(2)],f=(this.ics.decode(e,t,!1),this.ics.info.groupCount),c=this.ics.info.maxSFB,d=this.ics.bandTypes,s=0;s<o;s++){var l=0,p=1,u=0,w=1,g=(0<s&&(u=(p=this.couplingPoint===_.AFTER_IMDCT?1:e.read(1))?A.decodeScaleFactor(e)-60:0,w=Math.pow(h,-u)),this.gain[s]=new Float32Array(120));if(this.couplingPoint===_.AFTER_IMDCT)g[0]=w;else for(var E=0;E<f;E++)for(var m,T,v=0;v<c;v++)d[l]!==S.ZERO_BT&&(0===p&&0!==(T=A.decodeScaleFactor(e)-60)&&(m=1,T=u+=T,a||(m-=2*(1&T),T>>>=1),w=Math.pow(h,-T)*m),g[l++]=w)}},applyIndependentCoupling:function(e,t){for(var r=this.gain[e][0],n=this.ics.data,i=0;i<t.length;i++)t[i]+=r*n[i]},applyDependentCoupling:function(e,t){for(var r=this.ics.info,n=r.swbOffsets,i=r.groupCount,o=r.maxSFB,s=this.ics.bandTypes,a=this.ics.data,h=0,f=0,c=this.gain[e],d=0;d<i;d++){for(var l=r.groupLength[d],p=0;p<o;p++,h++)if(s[h]!==S.ZERO_BT)for(var u=c[h],w=0;w<l;w++)for(var g=n[p];g<n[swb+1];g++)t[f+128*w+g]+=u*a[f+128*w+g];f+=128*l}}},t.exports=_},{"./huffman":7,"./ics":8}],3:[function(e,t,r){var n=e("./ics");function i(e){this.ms_used=[],this.left=new n(e),this.right=new n(e)}i.prototype.decode=function(e,t){var r=this.left,n=this.right,i=this.ms_used;if(this.commonWindow=!!e.read(1)){r.info.decode(e,t,!0),n.info=r.info;var o=e.read(2);switch(this.maskPresent=!!o,o){case 1:for(var s=r.info.groupCount*r.info.maxSFB,a=0;a<s;a++)i[a]=!!e.read(1);break;case 0:case 2:for(var h=!!o,a=0;a<128;a++)i[a]=h;break;default:throw new Error("Reserved ms mask type: "+o)}}else for(a=0;a<128;a++)i[a]=!1;r.decode(e,t,this.commonWindow),n.decode(e,t,this.commonWindow)},t.exports=i},{"./ics":8}],4:[function(t,r,e){!function(e){var n="undefined"!=typeof window?window.AV:void 0!==e?e.AV:null,m=t("./adts_demuxer"),A=t("./ics"),T=t("./cpe"),v=t("./cce"),i=t("./filter_bank"),o=t("./tables"),e=n.Decoder.extend(function(){n.Decoder.register("mp4a",this),n.Decoder.register("aac ",this);this.prototype.init=function(){this.format.floatingPoint=!0},this.prototype.setCookie=function(e){var e=n.Stream.fromBuffer(e),t=new n.Bitstream(e);if(this.config={},this.config.profile=t.read(5),31===this.config.profile&&(this.config.profile=32+t.read(6)),this.config.sampleIndex=t.read(4),15===this.config.sampleIndex){this.config.sampleRate=t.read(24);for(var r=0;r<o.SAMPLE_RATES.length;r++)if(o.SAMPLE_RATES[r]===this.config.sampleRate){this.config.sampleIndex=r;break}}else this.config.sampleRate=o.SAMPLE_RATES[this.config.sampleIndex];switch(this.config.chanConfig=t.read(4),this.format.channelsPerFrame=this.config.chanConfig,this.config.profile){case 1:case 2:case 4:if(t.read(1))throw new Error("frameLengthFlag not supported");if(this.config.frameLength=1024,t.read(1)&&t.advance(14),t.read(1)&&(16<this.config.profile&&(this.config.sectionDataResilience=t.read(1),this.config.scalefactorResilience=t.read(1),this.config.spectralDataResilience=t.read(1)),t.advance(1)),0===this.config.chanConfig)throw t.advance(4),new Error("PCE unimplemented");break;default:throw new Error("AAC profile "+this.config.profile+" not supported.")}this.filter_bank=new i(!1,this.config.chanConfig)};var g=window.CP_ENABLE_DEBUG?200:1e3,E=0;this.prototype.readChunk=function(){for(var e,t=this.bitstream,r=(4095===t.peek(12)&&m.readHeader(t),Date.now()),n=(this.cces=[],[]),i=this.config,o=i.frameLength;7!==(e=t.read(3));){var s=t.read(4);switch(e){case 0:case 3:var a=new A(this.config);a.id=s,n.push(a),a.decode(t,i,!1);break;case 1:a=new T(this.config);a.id=s,n.push(a),a.decode(t,i);break;case 2:var h=new v(this.config);this.cces.push(h),h.decode(t,i);break;case 4:var h=t.read(1),f=t.read(8);255===f&&(f+=t.read(8)),h&&t.align(),t.advance(8*f);break;case 5:throw new Error("TODO: PCE_ELEMENT");case 6:15===s&&(s+=t.read(8)-1),t.advance(8*s);break;default:throw new Error("Unknown element")}}t.align(),this.process(n);for(var c=this.data,d=c.length,l=new Float32Array(o*d),p=0,u=0;u<o;u++)for(var w=0;w<d;w++)l[p++]=c[w][u]/32768;return Date.now(),(E+=1)%g==1&&0,l},this.prototype.process=function(e){for(var t=this.config.chanConfig,r=+this.config.frameLength,n=this.data=[],i=0;i<t;i++)n[i]=new Float32Array(r);for(var o=0,i=0;i<e.length&&o<t;i++){var s=e[i];if(s instanceof A)o+=this.processSingle(s,o);else if(s instanceof T)this.processPair(s,o),o+=2;else{if(!(s instanceof v))throw new Error("Unknown element found.");o++}}},this.prototype.processSingle=function(e,t){var r=this.config.profile,n=e.info,i=e.data;if(1===r)throw new Error("Main prediction unimplemented");if(4===r)throw new Error("LTP prediction unimplemented");if(this.applyChannelCoupling(e,v.BEFORE_TNS,i,null),e.tnsPresent&&e.tns.process(e,i,!1),this.applyChannelCoupling(e,v.AFTER_TNS,i,null),this.filter_bank.process(n,i,this.data[t],t),4===r)throw new Error("LTP prediction unimplemented");if(this.applyChannelCoupling(e,v.AFTER_IMDCT,this.data[t],null),e.gainPresent)throw new Error("Gain control not implemented");if(this.sbrPresent)throw new Error("SBR not implemented");return 1},this.prototype.processPair=function(e,t){var r=this.config.profile,n=e.left,i=e.right,o=n.info,s=i.info,a=n.data,h=i.data;if(e.commonWindow&&e.maskPresent&&this.processMS(e,a,h),1===r)throw new Error("Main prediction unimplemented");if(this.processIS(e,a,h),4===r)throw new Error("LTP prediction unimplemented");if(this.applyChannelCoupling(e,v.BEFORE_TNS,a,h),n.tnsPresent&&n.tns.process(n,a,!1),i.tnsPresent&&i.tns.process(i,h,!1),this.applyChannelCoupling(e,v.AFTER_TNS,a,h),this.filter_bank.process(o,a,this.data[t],t),this.filter_bank.process(s,h,this.data[t+1],t+1),4===r)throw new Error("LTP prediction unimplemented");if(this.applyChannelCoupling(e,v.AFTER_IMDCT,this.data[t],this.data[t+1]),n.gainPresent)throw new Error("Gain control not implemented");if(i.gainPresent)throw new Error("Gain control not implemented");if(this.sbrPresent)throw new Error("SBR not implemented")},this.prototype.processIS=function(e,t,r){for(var n=e.right,i=n.info,o=i.swbOffsets,s=i.groupCount,a=i.maxSFB,h=n.bandTypes,f=n.sectEnd,c=n.scaleFactors,d=0,l=0,p=0;p<s;p++){for(var u=0;u<a;){var w=f[d];if(h[d]===A.INTENSITY_BT||h[d]===A.INTENSITY_BT2)for(;u<w;u++,d++)for(var g=h[d]===A.INTENSITY_BT?1:-1,E=(e.maskPresent&&(g*=e.ms_used[d]?-1:1),g*c[d]),m=0;m<i.groupLength[p];m++)for(var T=l+128*m+o[u],v=o[u+1]-o[u],S=0;S<v;S++)r[T+S]=t[T+S]*E;else d+=w-u,u=w}l+=128*i.groupLength[p]}},this.prototype.processMS=function(e,t,r){for(var n=e.left,i=n.info,o=i.swbOffsets,s=i.groupCount,a=i.maxSFB,h=n.bandTypes,f=e.right.bandTypes,c=0,d=0,l=0;l<s;l++){for(var p=0;p<a;p++,d++)if(e.ms_used[d]&&h[d]<A.NOISE_BT&&f[d]<A.NOISE_BT)for(var u=0;u<i.groupLength[l];u++)for(var w=c+128*u+o[p],g=0;g<o[p+1]-o[p];g++){var E=t[w+g]-r[w+g];t[w+g]+=r[w+g],r[w+g]=E}c+=128*i.groupLength[l]}},this.prototype.applyChannelCoupling=function(e,t,r,n){for(var i=this.cces,o=e instanceof T,s=t===v.AFTER_IMDCT?"applyIndependentCoupling":"applyDependentCoupling",a=0;a<i.length;a++){var h=i[a],f=0;if(h.couplingPoint===t)for(var c=0;c<h.coupledCount;c++){var d=h.chSelect[c];h.channelPair[c]===o&&h.idSelect[c]===e.id?(1!==d&&(h[s](f,r),d)&&f++,2!==d&&h[s](f++,n)):f+=1+(3===d?1:0)}}}});r.exports=e}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./adts_demuxer":1,"./cce":2,"./cpe":3,"./filter_bank":6,"./ics":8,"./tables":11}],5:[function(e,t,r){function n(e){switch(this.length=e){case 64:this.roots=i(64);break;case 512:this.roots=o(512);break;case 60:this.roots=i(60);break;case 480:this.roots=o(480);break;default:throw new Error("unexpected FFT length: "+e)}this.rev=new Array(e);for(var t=0;t<e;t++)this.rev[t]=new Float32Array(2);this.a=new Float32Array(2),this.b=new Float32Array(2),this.c=new Float32Array(2),this.d=new Float32Array(2),this.e1=new Float32Array(2),this.e2=new Float32Array(2)}function i(e){for(var t=2*Math.PI/e,r=Math.cos(t),n=Math.sin(t),i=new Array(e),o=0;o<e;o++)i[o]=new Float32Array(2);i[0][0]=1;for(var s=i[0][1]=0,o=1;o<e;o++)i[o][0]=i[o-1][0]*r+s*n,s=s*r-i[o-1][0]*n,i[o][1]=-s;return i}function o(e){for(var t=2*Math.PI/e,r=Math.cos(t),n=Math.sin(t),i=new Array(e),o=0;o<e;o++)i[o]=new Float32Array(3);i[0][0]=1,i[0][1]=0,i[0][2]=0;for(o=1;o<e;o++)i[o][0]=i[o-1][0]*r+i[o-1][2]*n,i[o][2]=i[o-1][2]*r-i[o-1][0]*n,i[o][1]=-i[o][2];return i}n.prototype.process=function(e,t){for(var r=this.length,n=t?2:1,i=t?r:1,o=this.rev,s=this.roots,a=0,h=0;h<r;h++){o[h][0]=e[a][0],o[h][1]=e[a][1];for(var f=r>>>1;f<=a&&0<f;)a-=f,f>>=1;a+=f}for(var c=this.a,d=this.b,l=this.c,p=this.d,u=this.e1,w=this.e2,h=0;h<r;h++)e[h][0]=o[h][0],e[h][1]=o[h][1];for(h=0;h<r;h+=4)c[0]=e[h][0]+e[h+1][0],c[1]=e[h][1]+e[h+1][1],d[0]=e[h+2][0]+e[h+3][0],d[1]=e[h+2][1]+e[h+3][1],l[0]=e[h][0]-e[h+1][0],l[1]=e[h][1]-e[h+1][1],p[0]=e[h+2][0]-e[h+3][0],p[1]=e[h+2][1]-e[h+3][1],e[h][0]=c[0]+d[0],e[h][1]=c[1]+d[1],e[h+2][0]=c[0]-d[0],e[h+2][1]=c[1]-d[1],u[0]=l[0]-p[1],u[1]=l[1]+p[0],w[0]=l[0]+p[1],w[1]=l[1]-p[0],t?(e[h+1][0]=w[0],e[h+1][1]=w[1],e[h+3][0]=u[0],e[h+3][1]=u[1]):(e[h+1][0]=u[0],e[h+1][1]=u[1],e[h+3][0]=w[0],e[h+3][1]=w[1]);for(h=4;h<r;h<<=1)for(var g=h<<1,E=r/g,m=0;m<r;m+=g)for(f=0;f<h;f++){var T=f*E,v=s[T][0],T=s[T][n],S=e[h+m+f][0]*v-e[h+m+f][1]*T,T=e[h+m+f][0]*T+e[h+m+f][1]*v;e[h+m+f][0]=(e[m+f][0]-S)*i,e[h+m+f][1]=(e[m+f][1]-T)*i,e[m+f][0]=(e[m+f][0]+S)*i,e[m+f][1]=(e[m+f][1]+T)*i}},t.exports=n},{}],6:[function(e,t,r){var m=e("./ics"),n=e("./mdct");function i(e,t){if(e)throw new Error("WHA?? No small frames allowed.");this.length=1024,this.shortLength=128,this.mid=(this.length-this.shortLength)/2,this.trans=this.shortLength/2,this.mdctShort=new n(2*this.shortLength),this.mdctLong=new n(2*this.length),this.overlaps=new Array(t);for(var r=0;r<t;r++)this.overlaps[r]=new Float32Array(this.length);this.buf=new Float32Array(2*this.length)}function o(e){for(var t=new Float32Array(e),r=0;r<e;r++)t[r]=Math.sin((r+.5)*(Math.PI/(2*e)));return t}function s(e,t){for(var r=Math.PI/t,n=new Float32Array(t),i=0,o=new Float32Array(t),s=e*r*(e*r),a=0;a<t;a++){for(var h=a*(t-a)*s,f=1,c=50;0<c;c--)f=f*h/(c*c)+1;i+=f,o[a]=i}i++;for(a=0;a<t;a++)n[a]=Math.sqrt(o[a]/i);return n}const a=o(1024),h=o(128),f=s(4,1024),c=s(6,128),T=[a,f],v=[h,c];i.prototype.process=function(e,t,r,n){var i=this.overlaps[n],n=e.windowShape[1],o=e.windowShape[0],s=T[n],a=v[n],h=T[o],f=v[o],c=this.length,d=this.shortLength,l=this.mid,p=this.trans,u=this.buf,w=this.mdctLong,g=this.mdctShort;switch(e.windowSequence){case m.ONLY_LONG_SEQUENCE:w.process(t,0,u,0);for(var E=0;E<c;E++)r[E]=i[E]+u[E]*h[E];for(E=0;E<c;E++)i[E]=u[c+E]*s[c-1-E];break;case m.LONG_START_SEQUENCE:w.process(t,0,u,0);for(E=0;E<c;E++)r[E]=i[E]+u[E]*h[E];for(E=0;E<l;E++)i[E]=u[c+E];for(E=0;E<d;E++)i[l+E]=u[c+l+E]*a[d-E-1];for(E=0;E<l;E++)i[l+d+E]=0;break;case m.EIGHT_SHORT_SEQUENCE:for(E=0;E<8;E++)g.process(t,E*d,u,2*E*d);for(E=0;E<l;E++)r[E]=i[E];for(E=0;E<d;E++)r[l+E]=i[l+E]+u[E]*f[E],r[l+ +d+E]=i[l+ +d+E]+u[+d+E]*a[d-1-E]+u[2*d+E]*a[E],r[l+2*d+E]=i[l+2*d+E]+u[3*d+E]*a[d-1-E]+u[4*d+E]*a[E],r[l+3*d+E]=i[l+3*d+E]+u[5*d+E]*a[d-1-E]+u[6*d+E]*a[E],E<p&&(r[l+4*d+E]=i[l+4*d+E]+u[7*d+E]*a[d-1-E]+u[8*d+E]*a[E]);for(E=0;E<d;E++)p<=E&&(i[l+4*d+E-c]=u[7*d+E]*a[d-1-E]+u[8*d+E]*a[E]),i[l+5*d+E-c]=u[9*d+E]*a[d-1-E]+u[10*d+E]*a[E],i[l+6*d+E-c]=u[11*d+E]*a[d-1-E]+u[12*d+E]*a[E],i[l+7*d+E-c]=u[13*d+E]*a[d-1-E]+u[14*d+E]*a[E],i[l+8*d+E-c]=u[15*d+E]*a[d-1-E];for(E=0;E<l;E++)i[l+d+E]=0;break;case m.LONG_STOP_SEQUENCE:w.process(t,0,u,0);for(E=0;E<l;E++)r[E]=i[E];for(E=0;E<d;E++)r[l+E]=i[l+E]+u[l+E]*f[E];for(E=0;E<l;E++)r[l+d+E]=i[l+d+E]+u[l+d+E];for(E=0;E<c;E++)i[E]=u[c+E]*s[c-1-E]}},t.exports=i},{"./ics":8,"./mdct":9}],7:[function(e,t,r){const n=[[1,0,60],[3,4,59],[4,10,61],[4,11,58],[4,12,62],[5,26,57],[5,27,63],[6,56,56],[6,57,64],[6,58,55],[6,59,65],[7,120,66],[7,121,54],[7,122,67],[8,246,53],[8,247,68],[8,248,52],[8,249,69],[8,250,51],[9,502,70],[9,503,50],[9,504,49],[9,505,71],[10,1012,72],[10,1013,48],[10,1014,73],[10,1015,47],[10,1016,74],[10,1017,46],[11,2036,76],[11,2037,75],[11,2038,77],[11,2039,78],[11,2040,45],[11,2041,43],[12,4084,44],[12,4085,79],[12,4086,42],[12,4087,41],[12,4088,80],[12,4089,40],[13,8180,81],[13,8181,39],[13,8182,82],[13,8183,38],[13,8184,83],[14,16370,37],[14,16371,35],[14,16372,85],[14,16373,33],[14,16374,36],[14,16375,34],[14,16376,84],[14,16377,32],[15,32756,87],[15,32757,89],[15,32758,30],[15,32759,31],[16,65520,86],[16,65521,29],[16,65522,26],[16,65523,27],[16,65524,28],[16,65525,24],[16,65526,88],[17,131054,25],[17,131055,22],[17,131056,23],[18,262114,90],[18,262115,21],[18,262116,19],[18,262117,3],[18,262118,1],[18,262119,2],[18,262120,0],[19,524242,98],[19,524243,99],[19,524244,100],[19,524245,101],[19,524246,102],[19,524247,117],[19,524248,97],[19,524249,91],[19,524250,92],[19,524251,93],[19,524252,94],[19,524253,95],[19,524254,96],[19,524255,104],[19,524256,111],[19,524257,112],[19,524258,113],[19,524259,114],[19,524260,115],[19,524261,116],[19,524262,110],[19,524263,105],[19,524264,106],[19,524265,107],[19,524266,108],[19,524267,109],[19,524268,118],[19,524269,6],[19,524270,8],[19,524271,9],[19,524272,10],[19,524273,5],[19,524274,103],[19,524275,120],[19,524276,119],[19,524277,4],[19,524278,7],[19,524279,15],[19,524280,16],[19,524281,18],[19,524282,20],[19,524283,17],[19,524284,11],[19,524285,12],[19,524286,14],[19,524287,13]],s=[[[1,0,0,0,0,0],[5,16,1,0,0,0],[5,17,-1,0,0,0],[5,18,0,0,0,-1],[5,19,0,1,0,0],[5,20,0,0,0,1],[5,21,0,0,-1,0],[5,22,0,0,1,0],[5,23,0,-1,0,0],[7,96,1,-1,0,0],[7,97,-1,1,0,0],[7,98,0,0,-1,1],[7,99,0,1,-1,0],[7,100,0,-1,1,0],[7,101,0,0,1,-1],[7,102,1,1,0,0],[7,103,0,0,-1,-1],[7,104,-1,-1,0,0],[7,105,0,-1,-1,0],[7,106,1,0,-1,0],[7,107,0,1,0,-1],[7,108,-1,0,1,0],[7,109,0,0,1,1],[7,110,1,0,1,0],[7,111,0,-1,0,1],[7,112,0,1,1,0],[7,113,0,1,0,1],[7,114,-1,0,-1,0],[7,115,1,0,0,1],[7,116,-1,0,0,-1],[7,117,1,0,0,-1],[7,118,-1,0,0,1],[7,119,0,-1,0,-1],[9,480,1,1,-1,0],[9,481,-1,1,-1,0],[9,482,1,-1,1,0],[9,483,0,1,1,-1],[9,484,0,1,-1,1],[9,485,0,-1,1,1],[9,486,0,-1,1,-1],[9,487,1,-1,-1,0],[9,488,1,0,-1,1],[9,489,0,1,-1,-1],[9,490,-1,1,1,0],[9,491,-1,0,1,-1],[9,492,-1,-1,1,0],[9,493,0,-1,-1,1],[9,494,1,-1,0,1],[9,495,1,-1,0,-1],[9,496,-1,1,0,-1],[9,497,-1,-1,-1,0],[9,498,0,-1,-1,-1],[9,499,0,1,1,1],[9,500,1,0,1,-1],[9,501,1,1,0,1],[9,502,-1,1,0,1],[9,503,1,1,1,0],[10,1008,-1,-1,0,1],[10,1009,-1,0,-1,-1],[10,1010,1,1,0,-1],[10,1011,1,0,-1,-1],[10,1012,-1,0,-1,1],[10,1013,-1,-1,0,-1],[10,1014,-1,0,1,1],[10,1015,1,0,1,1],[11,2032,1,-1,1,-1],[11,2033,-1,1,-1,1],[11,2034,-1,1,1,-1],[11,2035,1,-1,-1,1],[11,2036,1,1,1,1],[11,2037,-1,-1,1,1],[11,2038,1,1,-1,-1],[11,2039,-1,-1,1,-1],[11,2040,-1,-1,-1,-1],[11,2041,1,1,-1,1],[11,2042,1,-1,1,1],[11,2043,-1,1,1,1],[11,2044,-1,1,-1,-1],[11,2045,-1,-1,-1,1],[11,2046,1,-1,-1,-1],[11,2047,1,1,1,-1]],[[3,0,0,0,0,0],[4,2,1,0,0,0],[5,6,-1,0,0,0],[5,7,0,0,0,1],[5,8,0,0,-1,0],[5,9,0,0,0,-1],[5,10,0,-1,0,0],[5,11,0,0,1,0],[5,12,0,1,0,0],[6,26,0,-1,1,0],[6,27,-1,1,0,0],[6,28,0,1,-1,0],[6,29,0,0,1,-1],[6,30,0,1,0,-1],[6,31,0,0,-1,1],[6,32,-1,0,0,-1],[6,33,1,-1,0,0],[6,34,1,0,-1,0],[6,35,-1,-1,0,0],[6,36,0,0,-1,-1],[6,37,1,0,1,0],[6,38,1,0,0,1],[6,39,0,-1,0,1],[6,40,-1,0,1,0],[6,41,0,1,0,1],[6,42,0,-1,-1,0],[6,43,-1,0,0,1],[6,44,0,-1,0,-1],[6,45,-1,0,-1,0],[6,46,1,1,0,0],[6,47,0,1,1,0],[6,48,0,0,1,1],[6,49,1,0,0,-1],[7,100,0,1,-1,1],[7,101,1,0,-1,1],[7,102,-1,1,-1,0],[7,103,0,-1,1,-1],[7,104,1,-1,1,0],[7,105,1,1,0,-1],[7,106,1,0,1,1],[7,107,-1,1,1,0],[7,108,0,-1,-1,1],[7,109,1,1,1,0],[7,110,-1,0,1,-1],[7,111,-1,-1,-1,0],[7,112,-1,0,-1,1],[7,113,1,-1,-1,0],[7,114,1,1,-1,0],[8,230,1,-1,0,1],[8,231,-1,1,0,-1],[8,232,-1,-1,1,0],[8,233,-1,0,1,1],[8,234,-1,-1,0,1],[8,235,-1,-1,0,-1],[8,236,0,-1,-1,-1],[8,237,1,0,1,-1],[8,238,1,0,-1,-1],[8,239,0,1,-1,-1],[8,240,0,1,1,1],[8,241,-1,1,0,1],[8,242,-1,0,-1,-1],[8,243,0,1,1,-1],[8,244,1,-1,0,-1],[8,245,0,-1,1,1],[8,246,1,1,0,1],[8,247,1,-1,1,-1],[8,248,-1,1,-1,1],[9,498,1,-1,-1,1],[9,499,-1,-1,-1,-1],[9,500,-1,1,1,-1],[9,501,-1,1,1,1],[9,502,1,1,1,1],[9,503,-1,-1,1,-1],[9,504,1,-1,1,1],[9,505,-1,1,-1,-1],[9,506,-1,-1,1,1],[9,507,1,1,-1,-1],[9,508,1,-1,-1,-1],[9,509,-1,-1,-1,1],[9,510,1,1,-1,1],[9,511,1,1,1,-1]],[[1,0,0,0,0,0],[4,8,1,0,0,0],[4,9,0,0,0,1],[4,10,0,1,0,0],[4,11,0,0,1,0],[5,24,1,1,0,0],[5,25,0,0,1,1],[6,52,0,1,1,0],[6,53,0,1,0,1],[6,54,1,0,1,0],[6,55,0,1,1,1],[6,56,1,0,0,1],[6,57,1,1,1,0],[7,116,1,1,1,1],[7,117,1,0,1,1],[7,118,1,1,0,1],[8,238,2,0,0,0],[8,239,0,0,0,2],[8,240,0,0,1,2],[8,241,2,1,0,0],[8,242,1,2,1,0],[9,486,0,0,2,1],[9,487,0,1,2,1],[9,488,1,2,0,0],[9,489,0,1,1,2],[9,490,2,1,1,0],[9,491,0,0,2,0],[9,492,0,2,1,0],[9,493,0,1,2,0],[9,494,0,2,0,0],[9,495,0,1,0,2],[9,496,2,0,1,0],[9,497,1,2,1,1],[9,498,0,2,1,1],[9,499,1,1,2,0],[9,500,1,1,2,1],[10,1002,1,2,0,1],[10,1003,1,0,2,0],[10,1004,1,0,2,1],[10,1005,0,2,0,1],[10,1006,2,1,1,1],[10,1007,1,1,1,2],[10,1008,2,1,0,1],[10,1009,1,0,1,2],[10,1010,0,0,2,2],[10,1011,0,1,2,2],[10,1012,2,2,1,0],[10,1013,1,2,2,0],[10,1014,1,0,0,2],[10,1015,2,0,0,1],[10,1016,0,2,2,1],[11,2034,2,2,0,0],[11,2035,1,2,2,1],[11,2036,1,1,0,2],[11,2037,2,0,1,1],[11,2038,1,1,2,2],[11,2039,2,2,1,1],[11,2040,0,2,2,0],[11,2041,0,2,1,2],[12,4084,1,0,2,2],[12,4085,2,2,0,1],[12,4086,2,1,2,0],[12,4087,2,2,2,0],[12,4088,0,2,2,2],[12,4089,2,2,2,1],[12,4090,2,1,2,1],[12,4091,1,2,1,2],[12,4092,1,2,2,2],[13,8186,0,2,0,2],[13,8187,2,0,2,0],[13,8188,1,2,0,2],[14,16378,2,0,2,1],[14,16379,2,1,1,2],[14,16380,2,1,0,2],[15,32762,2,2,2,2],[15,32763,2,2,1,2],[15,32764,2,1,2,2],[15,32765,2,0,1,2],[15,32766,2,0,0,2],[16,65534,2,2,0,2],[16,65535,2,0,2,2]],[[4,0,1,1,1,1],[4,1,0,1,1,1],[4,2,1,1,0,1],[4,3,1,1,1,0],[4,4,1,0,1,1],[4,5,1,0,0,0],[4,6,1,1,0,0],[4,7,0,0,0,0],[4,8,0,0,1,1],[4,9,1,0,1,0],[5,20,1,0,0,1],[5,21,0,1,1,0],[5,22,0,0,0,1],[5,23,0,1,0,1],[5,24,0,0,1,0],[5,25,0,1,0,0],[7,104,2,1,1,1],[7,105,1,1,2,1],[7,106,1,2,1,1],[7,107,1,1,1,2],[7,108,2,1,1,0],[7,109,2,1,0,1],[7,110,1,2,1,0],[7,111,2,0,1,1],[7,112,0,1,2,1],[8,226,0,1,1,2],[8,227,1,1,2,0],[8,228,0,2,1,1],[8,229,1,0,1,2],[8,230,1,2,0,1],[8,231,1,1,0,2],[8,232,1,0,2,1],[8,233,2,1,0,0],[8,234,2,0,1,0],[8,235,1,2,0,0],[8,236,2,0,0,1],[8,237,0,1,0,2],[8,238,0,2,1,0],[8,239,0,0,1,2],[8,240,0,1,2,0],[8,241,0,2,0,1],[8,242,1,0,0,2],[8,243,0,0,2,1],[8,244,1,0,2,0],[8,245,2,0,0,0],[8,246,0,0,0,2],[9,494,0,2,0,0],[9,495,0,0,2,0],[9,496,1,2,2,1],[9,497,2,2,1,1],[9,498,2,1,2,1],[9,499,1,1,2,2],[9,500,1,2,1,2],[9,501,2,1,1,2],[10,1004,1,2,2,0],[10,1005,2,2,1,0],[10,1006,2,1,2,0],[10,1007,0,2,2,1],[10,1008,0,1,2,2],[10,1009,2,2,0,1],[10,1010,0,2,1,2],[10,1011,2,0,2,1],[10,1012,1,0,2,2],[10,1013,2,2,2,1],[10,1014,1,2,0,2],[10,1015,2,0,1,2],[10,1016,2,1,0,2],[10,1017,1,2,2,2],[11,2036,2,1,2,2],[11,2037,2,2,1,2],[11,2038,0,2,2,0],[11,2039,2,2,0,0],[11,2040,0,0,2,2],[11,2041,2,0,2,0],[11,2042,0,2,0,2],[11,2043,2,0,0,2],[11,2044,2,2,2,2],[11,2045,0,2,2,2],[11,2046,2,2,2,0],[12,4094,2,2,0,2],[12,4095,2,0,2,2]],[[1,0,0,0],[4,8,-1,0],[4,9,1,0],[4,10,0,1],[4,11,0,-1],[5,24,1,-1],[5,25,-1,1],[5,26,-1,-1],[5,27,1,1],[7,112,-2,0],[7,113,0,2],[7,114,2,0],[7,115,0,-2],[8,232,-2,-1],[8,233,2,1],[8,234,-1,-2],[8,235,1,2],[8,236,-2,1],[8,237,2,-1],[8,238,-1,2],[8,239,1,-2],[8,240,-3,0],[8,241,3,0],[8,242,0,-3],[8,243,0,3],[9,488,-3,-1],[9,489,1,3],[9,490,3,1],[9,491,-1,-3],[9,492,-3,1],[9,493,3,-1],[9,494,1,-3],[9,495,-1,3],[9,496,-2,2],[9,497,2,2],[9,498,-2,-2],[9,499,2,-2],[10,1e3,-3,-2],[10,1001,3,-2],[10,1002,-2,3],[10,1003,2,-3],[10,1004,3,2],[10,1005,2,3],[10,1006,-3,2],[10,1007,-2,-3],[10,1008,0,-4],[10,1009,-4,0],[10,1010,4,1],[10,1011,4,0],[11,2024,-4,-1],[11,2025,0,4],[11,2026,4,-1],[11,2027,-1,-4],[11,2028,1,4],[11,2029,-1,4],[11,2030,-4,1],[11,2031,1,-4],[11,2032,3,-3],[11,2033,-3,-3],[11,2034,-3,3],[11,2035,-2,4],[11,2036,-4,-2],[11,2037,4,2],[11,2038,2,-4],[11,2039,2,4],[11,2040,3,3],[11,2041,-4,2],[12,4084,-2,-4],[12,4085,4,-2],[12,4086,3,-4],[12,4087,-4,-3],[12,4088,-4,3],[12,4089,3,4],[12,4090,-3,4],[12,4091,4,3],[12,4092,4,-3],[12,4093,-3,-4],[13,8188,4,-4],[13,8189,-4,4],[13,8190,4,4],[13,8191,-4,-4]],[[4,0,0,0],[4,1,1,0],[4,2,0,-1],[4,3,0,1],[4,4,-1,0],[4,5,1,1],[4,6,-1,1],[4,7,1,-1],[4,8,-1,-1],[6,36,2,-1],[6,37,2,1],[6,38,-2,1],[6,39,-2,-1],[6,40,-2,0],[6,41,-1,2],[6,42,2,0],[6,43,1,-2],[6,44,1,2],[6,45,0,-2],[6,46,-1,-2],[6,47,0,2],[6,48,2,-2],[6,49,-2,2],[6,50,-2,-2],[6,51,2,2],[7,104,-3,1],[7,105,3,1],[7,106,3,-1],[7,107,-1,3],[7,108,-3,-1],[7,109,1,3],[7,110,1,-3],[7,111,-1,-3],[7,112,3,0],[7,113,-3,0],[7,114,0,-3],[7,115,0,3],[7,116,3,2],[8,234,-3,-2],[8,235,-2,3],[8,236,2,3],[8,237,3,-2],[8,238,2,-3],[8,239,-2,-3],[8,240,-3,2],[8,241,3,3],[9,484,3,-3],[9,485,-3,-3],[9,486,-3,3],[9,487,1,-4],[9,488,-1,-4],[9,489,4,1],[9,490,-4,1],[9,491,-4,-1],[9,492,1,4],[9,493,4,-1],[9,494,-1,4],[9,495,0,-4],[9,496,-4,2],[9,497,-4,-2],[9,498,2,4],[9,499,-2,-4],[9,500,-4,0],[9,501,4,2],[9,502,4,-2],[9,503,-2,4],[9,504,4,0],[9,505,2,-4],[9,506,0,4],[10,1014,-3,-4],[10,1015,-3,4],[10,1016,3,-4],[10,1017,4,-3],[10,1018,3,4],[10,1019,4,3],[10,1020,-4,3],[10,1021,-4,-3],[11,2044,4,4],[11,2045,-4,4],[11,2046,-4,-4],[11,2047,4,-4]],[[1,0,0,0],[3,4,1,0],[3,5,0,1],[4,12,1,1],[6,52,2,1],[6,53,1,2],[6,54,2,0],[6,55,0,2],[7,112,3,1],[7,113,1,3],[7,114,2,2],[7,115,3,0],[7,116,0,3],[8,234,2,3],[8,235,3,2],[8,236,1,4],[8,237,4,1],[8,238,1,5],[8,239,5,1],[8,240,3,3],[8,241,2,4],[8,242,0,4],[8,243,4,0],[9,488,4,2],[9,489,2,5],[9,490,5,2],[9,491,0,5],[9,492,6,1],[9,493,5,0],[9,494,1,6],[9,495,4,3],[9,496,3,5],[9,497,3,4],[9,498,5,3],[9,499,2,6],[9,500,6,2],[9,501,1,7],[10,1004,3,6],[10,1005,0,6],[10,1006,6,0],[10,1007,4,4],[10,1008,7,1],[10,1009,4,5],[10,1010,7,2],[10,1011,5,4],[10,1012,6,3],[10,1013,2,7],[10,1014,7,3],[10,1015,6,4],[10,1016,5,5],[10,1017,4,6],[10,1018,3,7],[11,2038,7,0],[11,2039,0,7],[11,2040,6,5],[11,2041,5,6],[11,2042,7,4],[11,2043,4,7],[11,2044,5,7],[11,2045,7,5],[12,4092,7,6],[12,4093,6,6],[12,4094,6,7],[12,4095,7,7]],[[3,0,1,1],[4,2,2,1],[4,3,1,0],[4,4,1,2],[4,5,0,1],[4,6,2,2],[5,14,0,0],[5,15,2,0],[5,16,0,2],[5,17,3,1],[5,18,1,3],[5,19,3,2],[5,20,2,3],[6,42,3,3],[6,43,4,1],[6,44,1,4],[6,45,4,2],[6,46,2,4],[6,47,3,0],[6,48,0,3],[6,49,4,3],[6,50,3,4],[6,51,5,2],[7,104,5,1],[7,105,2,5],[7,106,1,5],[7,107,5,3],[7,108,3,5],[7,109,4,4],[7,110,5,4],[7,111,0,4],[7,112,4,5],[7,113,4,0],[7,114,2,6],[7,115,6,2],[7,116,6,1],[7,117,1,6],[8,236,3,6],[8,237,6,3],[8,238,5,5],[8,239,5,0],[8,240,6,4],[8,241,0,5],[8,242,4,6],[8,243,7,1],[8,244,7,2],[8,245,2,7],[8,246,6,5],[8,247,7,3],[8,248,1,7],[8,249,5,6],[8,250,3,7],[9,502,6,6],[9,503,7,4],[9,504,6,0],[9,505,4,7],[9,506,0,6],[9,507,7,5],[9,508,7,6],[9,509,6,7],[10,1020,5,7],[10,1021,7,0],[10,1022,0,7],[10,1023,7,7]],[[1,0,0,0],[3,4,1,0],[3,5,0,1],[4,12,1,1],[6,52,2,1],[6,53,1,2],[6,54,2,0],[6,55,0,2],[7,112,3,1],[7,113,2,2],[7,114,1,3],[8,230,3,0],[8,231,0,3],[8,232,2,3],[8,233,3,2],[8,234,1,4],[8,235,4,1],[8,236,2,4],[8,237,1,5],[9,476,4,2],[9,477,3,3],[9,478,0,4],[9,479,4,0],[9,480,5,1],[9,481,2,5],[9,482,1,6],[9,483,3,4],[9,484,5,2],[9,485,6,1],[9,486,4,3],[10,974,0,5],[10,975,2,6],[10,976,5,0],[10,977,1,7],[10,978,3,5],[10,979,1,8],[10,980,8,1],[10,981,4,4],[10,982,5,3],[10,983,6,2],[10,984,7,1],[10,985,0,6],[10,986,8,2],[10,987,2,8],[10,988,3,6],[10,989,2,7],[10,990,4,5],[10,991,9,1],[10,992,1,9],[10,993,7,2],[11,1988,6,0],[11,1989,5,4],[11,1990,6,3],[11,1991,8,3],[11,1992,0,7],[11,1993,9,2],[11,1994,3,8],[11,1995,4,6],[11,1996,3,7],[11,1997,0,8],[11,1998,10,1],[11,1999,6,4],[11,2e3,2,9],[11,2001,5,5],[11,2002,8,0],[11,2003,7,0],[11,2004,7,3],[11,2005,10,2],[11,2006,9,3],[11,2007,8,4],[11,2008,1,10],[11,2009,7,4],[11,2010,6,5],[11,2011,5,6],[11,2012,4,8],[11,2013,4,7],[11,2014,3,9],[11,2015,11,1],[11,2016,5,8],[11,2017,9,0],[11,2018,8,5],[12,4038,10,3],[12,4039,2,10],[12,4040,0,9],[12,4041,11,2],[12,4042,9,4],[12,4043,6,6],[12,4044,12,1],[12,4045,4,9],[12,4046,8,6],[12,4047,1,11],[12,4048,9,5],[12,4049,10,4],[12,4050,5,7],[12,4051,7,5],[12,4052,2,11],[12,4053,1,12],[12,4054,12,2],[12,4055,11,3],[12,4056,3,10],[12,4057,5,9],[12,4058,6,7],[12,4059,8,7],[12,4060,11,4],[12,4061,0,10],[12,4062,7,6],[12,4063,12,3],[12,4064,10,0],[12,4065,10,5],[12,4066,4,10],[12,4067,6,8],[12,4068,2,12],[12,4069,9,6],[12,4070,9,7],[12,4071,4,11],[12,4072,11,0],[12,4073,6,9],[12,4074,3,11],[12,4075,5,10],[13,8152,8,8],[13,8153,7,8],[13,8154,12,5],[13,8155,3,12],[13,8156,11,5],[13,8157,7,7],[13,8158,12,4],[13,8159,11,6],[13,8160,10,6],[13,8161,4,12],[13,8162,7,9],[13,8163,5,11],[13,8164,0,11],[13,8165,12,6],[13,8166,6,10],[13,8167,12,0],[13,8168,10,7],[13,8169,5,12],[13,8170,7,10],[13,8171,9,8],[13,8172,0,12],[13,8173,11,7],[13,8174,8,9],[13,8175,9,9],[13,8176,10,8],[13,8177,7,11],[13,8178,12,7],[13,8179,6,11],[13,8180,8,11],[13,8181,11,8],[13,8182,7,12],[13,8183,6,12],[14,16368,8,10],[14,16369,10,9],[14,16370,8,12],[14,16371,9,10],[14,16372,9,11],[14,16373,9,12],[14,16374,10,11],[14,16375,12,9],[14,16376,10,10],[14,16377,11,9],[14,16378,12,8],[14,16379,11,10],[14,16380,12,10],[14,16381,12,11],[15,32764,10,12],[15,32765,11,11],[15,32766,11,12],[15,32767,12,12]],[[4,0,1,1],[4,1,1,2],[4,2,2,1],[5,6,2,2],[5,7,1,0],[5,8,0,1],[5,9,1,3],[5,10,3,2],[5,11,3,1],[5,12,2,3],[5,13,3,3],[6,28,2,0],[6,29,0,2],[6,30,2,4],[6,31,4,2],[6,32,1,4],[6,33,4,1],[6,34,0,0],[6,35,4,3],[6,36,3,4],[6,37,3,0],[6,38,0,3],[6,39,4,4],[6,40,2,5],[6,41,5,2],[7,84,1,5],[7,85,5,1],[7,86,5,3],[7,87,3,5],[7,88,5,4],[7,89,4,5],[7,90,6,2],[7,91,2,6],[7,92,6,3],[7,93,4,0],[7,94,6,1],[7,95,0,4],[7,96,1,6],[7,97,3,6],[7,98,5,5],[7,99,6,4],[7,100,4,6],[8,202,6,5],[8,203,7,2],[8,204,3,7],[8,205,2,7],[8,206,5,6],[8,207,8,2],[8,208,7,3],[8,209,5,0],[8,210,7,1],[8,211,0,5],[8,212,8,1],[8,213,1,7],[8,214,8,3],[8,215,7,4],[8,216,4,7],[8,217,2,8],[8,218,6,6],[8,219,7,5],[8,220,1,8],[8,221,3,8],[8,222,8,4],[8,223,4,8],[8,224,5,7],[8,225,8,5],[8,226,5,8],[9,454,7,6],[9,455,6,7],[9,456,9,2],[9,457,6,0],[9,458,6,8],[9,459,9,3],[9,460,3,9],[9,461,9,1],[9,462,2,9],[9,463,0,6],[9,464,8,6],[9,465,9,4],[9,466,4,9],[9,467,10,2],[9,468,1,9],[9,469,7,7],[9,470,8,7],[9,471,9,5],[9,472,7,8],[9,473,10,3],[9,474,5,9],[9,475,10,4],[9,476,2,10],[9,477,10,1],[9,478,3,10],[9,479,9,6],[9,480,6,9],[9,481,8,0],[9,482,4,10],[9,483,7,0],[9,484,11,2],[10,970,7,9],[10,971,11,3],[10,972,10,6],[10,973,1,10],[10,974,11,1],[10,975,9,7],[10,976,0,7],[10,977,8,8],[10,978,10,5],[10,979,3,11],[10,980,5,10],[10,981,8,9],[10,982,11,5],[10,983,0,8],[10,984,11,4],[10,985,2,11],[10,986,7,10],[10,987,6,10],[10,988,10,7],[10,989,4,11],[10,990,1,11],[10,991,12,2],[10,992,9,8],[10,993,12,3],[10,994,11,6],[10,995,5,11],[10,996,12,4],[10,997,11,7],[10,998,12,5],[10,999,3,12],[10,1e3,6,11],[10,1001,9,0],[10,1002,10,8],[10,1003,10,0],[10,1004,12,1],[10,1005,0,9],[10,1006,4,12],[10,1007,9,9],[10,1008,12,6],[10,1009,2,12],[10,1010,8,10],[11,2022,9,10],[11,2023,1,12],[11,2024,11,8],[11,2025,12,7],[11,2026,7,11],[11,2027,5,12],[11,2028,6,12],[11,2029,10,9],[11,2030,8,11],[11,2031,12,8],[11,2032,0,10],[11,2033,7,12],[11,2034,11,0],[11,2035,10,10],[11,2036,11,9],[11,2037,11,10],[11,2038,0,11],[11,2039,11,11],[11,2040,9,11],[11,2041,10,11],[11,2042,12,0],[11,2043,8,12],[12,4088,12,9],[12,4089,10,12],[12,4090,9,12],[12,4091,11,12],[12,4092,12,11],[12,4093,0,12],[12,4094,12,10],[12,4095,12,12]],[[4,0,0,0],[4,1,1,1],[5,4,16,16],[5,5,1,0],[5,6,0,1],[5,7,2,1],[5,8,1,2],[5,9,2,2],[6,20,1,3],[6,21,3,1],[6,22,3,2],[6,23,2,0],[6,24,2,3],[6,25,0,2],[6,26,3,3],[7,54,4,1],[7,55,1,4],[7,56,4,2],[7,57,2,4],[7,58,4,3],[7,59,3,4],[7,60,3,0],[7,61,0,3],[7,62,5,1],[7,63,5,2],[7,64,2,5],[7,65,4,4],[7,66,1,5],[7,67,5,3],[7,68,3,5],[7,69,5,4],[8,140,4,5],[8,141,6,2],[8,142,2,6],[8,143,6,1],[8,144,6,3],[8,145,3,6],[8,146,1,6],[8,147,4,16],[8,148,3,16],[8,149,16,5],[8,150,16,3],[8,151,16,4],[8,152,6,4],[8,153,16,6],[8,154,4,0],[8,155,4,6],[8,156,0,4],[8,157,2,16],[8,158,5,5],[8,159,5,16],[8,160,16,7],[8,161,16,2],[8,162,16,8],[8,163,2,7],[8,164,7,2],[8,165,3,7],[8,166,6,5],[8,167,5,6],[8,168,6,16],[8,169,16,10],[8,170,7,3],[8,171,7,1],[8,172,16,9],[8,173,7,16],[8,174,1,16],[8,175,1,7],[8,176,4,7],[8,177,16,11],[8,178,7,4],[8,179,16,12],[8,180,8,16],[8,181,16,1],[8,182,6,6],[8,183,9,16],[8,184,2,8],[8,185,5,7],[8,186,10,16],[8,187,16,13],[8,188,8,3],[8,189,8,2],[8,190,3,8],[8,191,5,0],[8,192,16,14],[8,193,11,16],[8,194,7,5],[8,195,4,8],[8,196,6,7],[8,197,7,6],[8,198,0,5],[9,398,8,4],[9,399,16,15],[9,400,12,16],[9,401,1,8],[9,402,8,1],[9,403,14,16],[9,404,5,8],[9,405,13,16],[9,406,3,9],[9,407,8,5],[9,408,7,7],[9,409,2,9],[9,410,8,6],[9,411,9,2],[9,412,9,3],[9,413,15,16],[9,414,4,9],[9,415,6,8],[9,416,6,0],[9,417,9,4],[9,418,5,9],[9,419,8,7],[9,420,7,8],[9,421,1,9],[9,422,10,3],[9,423,0,6],[9,424,10,2],[9,425,9,1],[9,426,9,5],[9,427,4,10],[9,428,2,10],[9,429,9,6],[9,430,3,10],[9,431,6,9],[9,432,10,4],[9,433,8,8],[9,434,10,5],[9,435,9,7],[9,436,11,3],[9,437,1,10],[9,438,7,0],[9,439,10,6],[9,440,7,9],[9,441,3,11],[9,442,5,10],[9,443,10,1],[9,444,4,11],[9,445,11,2],[9,446,13,2],[9,447,6,10],[9,448,13,3],[9,449,2,11],[9,450,16,0],[9,451,5,11],[9,452,11,5],[10,906,11,4],[10,907,9,8],[10,908,7,10],[10,909,8,9],[10,910,0,16],[10,911,4,13],[10,912,0,7],[10,913,3,13],[10,914,11,6],[10,915,13,1],[10,916,13,4],[10,917,12,3],[10,918,2,13],[10,919,13,5],[10,920,8,10],[10,921,6,11],[10,922,10,8],[10,923,10,7],[10,924,14,2],[10,925,12,4],[10,926,1,11],[10,927,4,12],[10,928,11,1],[10,929,3,12],[10,930,1,13],[10,931,12,2],[10,932,7,11],[10,933,3,14],[10,934,5,12],[10,935,5,13],[10,936,14,4],[10,937,4,14],[10,938,11,7],[10,939,14,3],[10,940,12,5],[10,941,13,6],[10,942,12,6],[10,943,8,0],[10,944,11,8],[10,945,2,12],[10,946,9,9],[10,947,14,5],[10,948,6,13],[10,949,10,10],[10,950,15,2],[10,951,8,11],[10,952,9,10],[10,953,14,6],[10,954,10,9],[10,955,5,14],[10,956,11,9],[10,957,14,1],[10,958,2,14],[10,959,6,12],[10,960,1,12],[10,961,13,8],[10,962,0,8],[10,963,13,7],[10,964,7,12],[10,965,12,7],[10,966,7,13],[10,967,15,3],[10,968,12,1],[10,969,6,14],[10,970,2,15],[10,971,15,5],[10,972,15,4],[10,973,1,14],[10,974,9,11],[10,975,4,15],[10,976,14,7],[10,977,8,13],[10,978,13,9],[10,979,8,12],[10,980,5,15],[10,981,3,15],[10,982,10,11],[10,983,11,10],[10,984,12,8],[10,985,15,6],[10,986,15,7],[10,987,8,14],[10,988,15,1],[10,989,7,14],[10,990,9,0],[10,991,0,9],[10,992,9,13],[10,993,9,12],[10,994,12,9],[10,995,14,8],[10,996,10,13],[10,997,14,9],[10,998,12,10],[10,999,6,15],[10,1e3,7,15],[11,2002,9,14],[11,2003,15,8],[11,2004,11,11],[11,2005,11,14],[11,2006,1,15],[11,2007,10,12],[11,2008,10,14],[11,2009,13,11],[11,2010,13,10],[11,2011,11,13],[11,2012,11,12],[11,2013,8,15],[11,2014,14,11],[11,2015,13,12],[11,2016,12,13],[11,2017,15,9],[11,2018,14,10],[11,2019,10,0],[11,2020,12,11],[11,2021,9,15],[11,2022,0,10],[11,2023,12,12],[11,2024,11,0],[11,2025,12,14],[11,2026,10,15],[11,2027,13,13],[11,2028,0,13],[11,2029,14,12],[11,2030,15,10],[11,2031,15,11],[11,2032,11,15],[11,2033,14,13],[11,2034,13,0],[11,2035,0,11],[11,2036,13,14],[11,2037,15,12],[11,2038,15,13],[11,2039,12,15],[11,2040,14,0],[11,2041,14,14],[11,2042,13,15],[11,2043,12,0],[11,2044,14,15],[12,4090,0,14],[12,4091,0,12],[12,4092,15,14],[12,4093,15,0],[12,4094,0,15],[12,4095,15,15]]],a=[!1,!1,!0,!0,!1,!1,!0,!0,!0,!0,!0];t.exports={findOffset:function(e,t){for(var r=0,n=t[r][0],i=e.read(n);i!==t[r][1];)var o=t[++r][0]-n,n=t[r][0],i=(i<<=o)|e.read(o);return r},signValues:function(e,t,r,n){for(var i=r;i<r+n;i++)t[i]&&e.read(1)&&(t[i]=-t[i])},getEscape:function(e,t){for(var r=4;e.read(1);)r++;var n=e.read(r)|1<<r;return t<0?-n:n},decodeScaleFactor:function(e){e=this.findOffset(e,n);return n[e][2]},decodeSpectralData:function(e,t,r,n){var i=s[t-1],o=this.findOffset(e,i);if(r[n]=i[o][2],r[n+1]=i[o][3],t<5&&(r[n+2]=i[o][4],r[n+3]=i[o][5]),t<11)a[t-1]&&this.signValues(e,r,n,t<5?4:2);else{if(!(11===t||15<t))throw new Error("Huffman: unknown spectral codebook: "+t);this.signValues(e,r,n,t<5?4:2),16===Math.abs(r[n])&&(r[n]=this.getEscape(e,r[n])),16===Math.abs(r[n+1])&&(r[n+1]=this.getEscape(e,r[n+1]))}}}},{}],8:[function(e,t,r){var y=e("./tables"),C=e("./huffman"),n=e("./tns");function F(e){this.info=new s,this.bandTypes=new Int32Array(i),this.sectEnd=new Int32Array(i),this.data=new Float32Array(e.frameLength),this.scaleFactors=new Float32Array(i),this.randomState=523124044,this.tns=new n(e),this.specBuf=new Int32Array(4)}F.ZERO_BT=0,F.FIRST_PAIR_BT=5,F.ESC_BT=11,F.NOISE_BT=13,F.INTENSITY_BT2=14,F.INTENSITY_BT=15,F.ONLY_LONG_SEQUENCE=0,F.LONG_START_SEQUENCE=1,F.EIGHT_SHORT_SEQUENCE=2,F.LONG_STOP_SEQUENCE=3;const i=120,o=8;function s(){this.windowShape=new Int32Array(2),this.windowSequence=F.ONLY_LONG_SEQUENCE,this.groupLength=new Int32Array(o),this.ltpData1Present=!1,this.ltpData2Present=!1}F.prototype={decode:function(e,t,r){if(this.globalGain=e.read(8),r||this.info.decode(e,t,r),this.decodeBandTypes(e,t),this.decodeScaleFactors(e),this.pulsePresent=e.read(1)){if(this.info.windowSequence===F.EIGHT_SHORT_SEQUENCE)throw new Error("Pulse tool not allowed in eight short sequence.");this.decodePulseData(e)}if((this.tnsPresent=e.read(1))&&this.tns.decode(e,this.info),this.gainPresent=e.read(1))throw new Error("TODO: decode gain control/SSR");this.decodeSpectralData(e)},decodeBandTypes:function(e,t){for(var r=this.info.windowSequence===F.EIGHT_SHORT_SEQUENCE?3:5,n=this.info.groupCount,i=this.info.maxSFB,o=this.bandTypes,s=this.sectEnd,a=0,h=(1<<r)-1,f=0;f<n;f++)for(var c=0;c<i;){var d,l=c,p=e.read(4);if(12===p)throw new Error("Invalid band type: 12");for(;(d=e.read(r))===h;)l+=d;if(i<(l+=d))throw new Error("Too many bands ("+l+" > "+i+")");for(;c<l;c++)o[a]=p,s[a++]=l}},decodeScaleFactors:function(e){for(var t=this.info.groupCount,r=this.info.maxSFB,n=[this.globalGain,this.globalGain-90,0],i=0,o=!0,s=this.scaleFactors,a=this.sectEnd,h=this.bandTypes,f=0;f<t;f++)for(var c=0;c<r;){var d=a[i];switch(h[i]){case F.ZERO_BT:for(;c<d;c++,i++)s[i]=0;break;case F.INTENSITY_BT:case F.INTENSITY_BT2:for(;c<d;c++,i++){n[2]+=C.decodeScaleFactor(e)-60;var l=Math.min(Math.max(n[2],-155),100);s[i]=y.SCALEFACTOR_TABLE[200-l]}break;case F.NOISE_BT:for(;c<d;c++,i++){o?(n[1]+=e.read(9)-256,o=!1):n[1]+=C.decodeScaleFactor(e)-60;l=Math.min(Math.max(n[1],-100),155);s[i]=-y.SCALEFACTOR_TABLE[l+200]}break;default:for(;c<d;c++,i++){if(n[0]+=C.decodeScaleFactor(e)-60,255<n[0])throw new Error("Scalefactor out of range: "+n[0]);s[i]=y.SCALEFACTOR_TABLE[n[0]-100+200]}}}},decodePulseData:function(e){var t=e.read(2)+1,r=e.read(6);if(r>=this.info.swbCount)throw new Error("Pulse SWB out of range: "+r);if(this.pulseOffset&&this.pulseOffset.length===t||(this.pulseOffset=new Int32Array(t),this.pulseAmp=new Int32Array(t)),this.pulseOffset[0]=this.info.swbOffsets[r]+e.read(5),this.pulseAmp[0]=e.read(4),1023<this.pulseOffset[0])throw new Error("Pulse offset out of range: "+this.pulseOffset[0]);for(var n=1;n<t;n++){if(this.pulseOffset[n]=e.read(5)+this.pulseOffset[n-1],1023<this.pulseOffset[n])throw new Error("Pulse offset out of range: "+this.pulseOffset[n]);this.pulseAmp[n]=e.read(4)}},decodeSpectralData:function(e){for(var t=this.data,r=this.info,n=r.maxSFB,i=r.groupCount,o=r.swbOffsets,s=this.bandTypes,a=this.scaleFactors,h=this.specBuf,f=0,c=0,d=0;d<i;d++){for(var l=r.groupLength[d],p=0;p<n;p++,c++){var u=s[c],w=f+o[p],g=o[p+1]-o[p];if(u===F.ZERO_BT||u===F.INTENSITY_BT||u===F.INTENSITY_BT2)for(var E=0;E<l;E++,w+=128)for(var m=w;m<w+g;m++)t[m]=0;else if(u===F.NOISE_BT)for(E=0;E<l;E++,w+=128){for(var T=0,v=0;v<g;v++)this.randomState=1015568748*this.randomState|0,t[w+v]=this.randomState,T+=t[w+v]*t[w+v];for(var S=a[c]/Math.sqrt(T),v=0;v<g;v++)t[w+v]*=S}else for(E=0;E<l;E++,w+=128)for(var A=F.FIRST_PAIR_BT<=u?2:4,v=0;v<g;v+=A){C.decodeSpectralData(e,u,h,0);for(var _=0;_<A;_++)t[w+v+_]=0<h[_]?y.IQ_TABLE[h[_]]:-y.IQ_TABLE[-h[_]],t[w+v+_]*=a[c]}}f+=l<<7}if(this.pulsePresent)throw new Error("TODO: add pulse data")}},s.prototype={decode:function(e,t,r){if(e.advance(1),this.windowSequence=e.read(2),this.windowShape[0]=this.windowShape[1],this.windowShape[1]=e.read(1),this.groupCount=1,this.groupLength[0]=1,this.windowSequence===F.EIGHT_SHORT_SEQUENCE){this.maxSFB=e.read(4);for(var n=0;n<7;n++)e.read(1)?this.groupLength[this.groupCount-1]++:(this.groupCount++,this.groupLength[this.groupCount-1]=1);this.windowCount=8,this.swbOffsets=y.SWB_OFFSET_128[t.sampleIndex],this.swbCount=y.SWB_SHORT_WINDOW_COUNT[t.sampleIndex],this.predictorPresent=!1}else this.maxSFB=e.read(6),this.windowCount=1,this.swbOffsets=y.SWB_OFFSET_1024[t.sampleIndex],this.swbCount=y.SWB_LONG_WINDOW_COUNT[t.sampleIndex],this.predictorPresent=!!e.read(1),this.predictorPresent&&this.decodePrediction(e,t,r)},decodePrediction:function(e,t,r){throw new Error("Prediction not implemented.")}},t.exports=F},{"./huffman":7,"./tables":11,"./tns":12}],9:[function(e,t,r){var n=e("./mdct_tables"),i=e("./fft");function o(e){switch(this.N=e,this.N2=e>>>1,this.N4=e>>>2,this.N8=e>>>3,e){case 2048:this.sincos=n.MDCT_TABLE_2048;break;case 256:this.sincos=n.MDCT_TABLE_256;break;case 1920:this.sincos=n.MDCT_TABLE_1920;break;case 240:this.sincos=n.MDCT_TABLE_240;break;default:throw new Error("unsupported MDCT length: "+e)}this.fft=new i(this.N4),this.buf=new Array(this.N4);for(var t=0;t<this.N4;t++)this.buf[t]=new Float32Array(2);this.tmp=new Float32Array(2)}o.prototype.process=function(e,t,r,n){for(var i=this.N2,o=this.N4,s=this.N8,a=this.buf,h=this.tmp,f=this.sincos,c=this.fft,d=0;d<o;d++)a[d][1]=e[t+2*d]*f[d][0]+e[t+i-1-2*d]*f[d][1],a[d][0]=e[t+i-1-2*d]*f[d][0]-e[t+2*d]*f[d][1];c.process(a,!1);for(d=0;d<o;d++)h[0]=a[d][0],h[1]=a[d][1],a[d][1]=h[1]*f[d][0]+h[0]*f[d][1],a[d][0]=h[0]*f[d][0]-h[1]*f[d][1];for(d=0;d<s;d+=2)r[n+2*d]=a[s+d][1],r[n+2+2*d]=a[s+1+d][1],r[n+1+2*d]=-a[s-1-d][0],r[n+3+2*d]=-a[s-2-d][0],r[n+o+2*d]=a[d][0],r[n+o+2+2*d]=a[1+d][0],r[n+o+1+2*d]=-a[o-1-d][1],r[n+o+3+2*d]=-a[o-2-d][1],r[n+i+2*d]=a[s+d][0],r[n+i+2+2*d]=a[s+1+d][0],r[n+i+1+2*d]=-a[s-1-d][1],r[n+i+3+2*d]=-a[s-2-d][1],r[n+i+o+2*d]=-a[d][1],r[n+i+o+2+2*d]=-a[1+d][1],r[n+i+o+1+2*d]=a[o-1-d][0],r[n+i+o+3+2*d]=a[o-2-d][0]},t.exports=o},{"./fft":5,"./mdct_tables":10}],10:[function(e,t,r){r.MDCT_TABLE_2048=[[.031249997702054,11984224612e-15],[.031249813866531,.000107857810004],[.031249335895858,.000203730380198],[.031248563794535,.000299601032804],[.031247497569829,.000395468865451],[.031246137231775,.000491332975794],[.031244482793177,.000587192461525],[.031242534269608,.000683046420376],[.031240291679407,.000778893950134],[.031237755043684,.000874734148645],[.031234924386313,.000970566113826],[.031231799733938,.001066388943669],[.03122838111597,.001162201736253],[.031224668564585,.001258003589751],[.031220662114728,.001353793602441],[.031216361804108,.00144957087271],[.031211767673203,.001545334499065],[.031206879765253,.001641083580144],[.031201698126266,.001736817214719],[.031196222805014,.001832534501709],[.031190453853031,.001928234540186],[.031184391324617,.002023916429386],[.031178035276836,.002119579268713],[.031171385769513,.002215222157753],[.031164442865236,.002310844196278],[.031157206629353,.002406444484258],[.031149677129975,.002502022121865],[.031141854437973,.002597576209488],[.031133738626977,.002693105847734],[.031125329773375,.002788610137442],[.031116627956316,.002884088179689],[.031107633257703,.002979539075801],[.0310983457622,.003074961927355],[.031088765557222,.003170355836197],[.031078892732942,.003265719904442],[.031068727382288,.003361053234488],[.031058269600939,.003456354929021],[.031047519487329,.003551624091024],[.03103647714264,.00364685982379],[.031025142670809,.003742061230921],[.031013516178519,.003837227416347],[.031001597775203,.003932357484328],[.030989387573042,.004027450539462],[.030976885686963,.004122505686697],[.030964092234638,.00421752203134],[.030951007336485,.004312498679058],[.030937631115663,.004407434735897],[.030923963698074,.004502329308281],[.030910005212362,.004597181503027],[.030895755789908,.00469199042735],[.030881215564835,.004786755188872],[.030866384674,.004881474895632],[.030851263256996,.00497614865609],[.030835851456154,.005070775579142],[.030820149416533,.005165354774124],[.030804157285929,.005259885350819],[.030787875214864,.005354366419469],[.030771303356593,.005448797090784],[.030754441867095,.005543176475946],[.030737290905077,.005637503686619],[.030719850631972,.005731777834961],[.030702121211932,.005825998033626],[.030684102811835,.00592016339578],[.030665795601276,.006014273035101],[.03064719975257,.006108326065793],[.030628315440748,.006202321602594],[.030609142843557,.006296258760782],[.030589682141455,.006390136656185],[.030569933517616,.006483954405188],[.030549897157919,.006577711124743],[.030529573250956,.006671405932375],[.030508961988022,.006765037946194],[.030488063563118,.0068586062849],[.030466878172949,.006952110067791],[.030445406016919,.007045548414774],[.030423647297133,.007138920446372],[.030401602218392,.007232225283733],[.030379270988192,.007325462048634],[.030356653816724,.007418629863497],[.030333750916869,.00751172785139],[.030310562504198,.00760475513604],[.030287088796968,.007697710841838],[.030263330016124,.007790594093851],[.030239286385293,.007883404017824],[.030214958130781,.007976139740197],[.030190345481576,.008068800388104],[.030165448669342,.00816138508939],[.030140267928416,.00825389297261],[.030114803495809,.008346323167047],[.030089055611203,.008438674802711],[.030063024516947,.008530947010354],[.030036710458054,.008623138921475],[.030010113682202,.008715249668328],[.029983234439732,.008807278383932],[.02995607298364,.008899224202078],[.02992862956958,.008991086257336],[.02990090445586,.009082863685067],[.029872897903441,.009174555621425],[.029844610175929,.009266161203371],[.029816041539579,.009357679568679],[.029787192263292,.009449109855944],[.029758062618606,.009540451204587],[.029728652879702,.009631702754871],[.029698963323395,.0097228636479],[.029668994229134,.009813933025633],[.029638745879,.009904910030891],[.029608218557702,.009995793807363],[.029577412552575,.010086583499618],[.029546328153577,.010177278253107],[.029514965653285,.010267877214177],[.029483325346896,.010358379530076],[.02945140753222,.010448784348962],[.029419212509679,.010539090819911],[.029386740582307,.010629298092923],[.02935399205574,.010719405318933],[.02932096723822,.010809411649818],[.02928766644059,.010899316238403],[.02925408997629,.010989118238474],[.029220238161353,.011078816804778],[.029186111314406,.011168411093039],[.029151709756664,.011257900259961],[.029117033811927,.011347283463239],[.029082083806579,.011436559861563],[.029046860069582,.01152572861463],[.029011362932476,.01161478888315],[.028975592729373,.011703739828853],[.028939549796957,.0117925806145],[.028903234474475,.011881310403886],[.028866647103744,.011969928361855],[.028829788029135,.012058433654299],[.028792657597583,.012146825448172],[.028755256158571,.012235102911499],[.028717584064137,.012323265213377],[.028679641668864,.01241131152399],[.028641429329882,.012499241014612],[.028602947406859,.012587052857618],[.028564196262001,.012674746226488],[.02852517626005,.012762320295819],[.028485887768276,.012849774241331],[.028446331156478,.012937107239875],[.028406506796976,.013024318469437],[.028366415064615,.013111407109155],[.028326056336751,.013198372339315],[.028285430993258,.013285213341368],[.028244539416515,.013371929297933],[.028203381991411,.013458519392807],[.028161959105334,.013544982810971],[.028120271148172,.013631318738598],[.028078318512309,.013717526363062],[.028036101592619,.013803604872943],[.027993620786463,.013889553458039],[.027950876493687,.013975371309367],[.027907869116616,.014061057619178],[.027864599060052,.014146611580959],[.02782106673127,.014232032389445],[.027777272540012,.014317319240622],[.027733216898487,.014402471331737],[.027688900221361,.014487487861307],[.027644322925762,.014572368029123],[.027599485431266,.014657111036262],[.027554388159903,.01474171608509],[.027509031536144,.014826182379271],[.027463415986904,.014910509123778],[.027417541941533,.014994695524894],[.027371409831816,.015078740790225],[.027325020091965,.015162644128704],[.027278373158618,.015246404750603],[.027231469470833,.015330021867534],[.027184309470088,.01541349469246],[.027136893600268,.015496822439704],[.027089222307671,.015580004324954],[.027041296040997,.015663039565269],[.026993115251345,.015745927379091],[.026944680392213,.015828666986247],[.026895991919487,.015911257607961],[.026847050291442,.015993698466859],[.026797855968734,.016075988786976],[.026748409414401,.016158127793763],[.026698711093851,.016240114714099],[.026648761474864,.016321948776289],[.026598561027585,.016403629210082],[.026548110224519,.016485155246669],[.02649740954053,.016566526118696],[.02644645945283,.016647741060271],[.026395260440982,.016728799306966],[.02634381298689,.016809700095831],[.026292117574797,.016890442665397],[.02624017469128,.016971026255683],[.026187984825246,.017051450108208],[.026135548467924,.01713171346599],[.026082866112867,.01721181557356],[.026029938255941,.017291755676967],[.025976765395322,.017371533023784],[.025923348031494,.017451146863116],[.025869686667242,.017530596445607],[.025815781807646,.017609881023449],[.02576163396008,.017688999850383],[.025707243634204,.017767952181715],[.02565261134196,.017846737274313],[.025597737597568,.017925354386623],[.025542622917522,.018003802778671],[.025487267820581,.018082081712071],[.025431672827768,.018160190450031],[.025375838462365,.018238128257362],[.025319765249906,.018315894400484],[.025263453718173,.018393488147432],[.025206904397193,.018470908767865],[.025150117819228,.01854815553307],[.025093094518776,.018625227715971],[.025035835032562,.018702124591135],[.024978339899534,.01877884543478],[.024920609660858,.01885538952478],[.024862644859912,.018931756140672],[.024804446042284,.019007944563666],[.024746013755764,.019083954076646],[.024687348550337,.019159783964183],[.024628450978184,.019235433512536],[.02456932159367,.019310902009663],[.024509960953345,.019386188745225],[.024450369615932,.019461293010596],[.024390548142329,.019536214098866],[.024330497095598,.019610951304848],[.024270217040961,.019685503925087],[.024209708545799,.019759871257867],[.024148972179639,.019834052603212],[.024088008514157,.019908047262901],[.024026818123164,.019981854540467],[.023965401582609,.020055473741208],[.023903759470567,.020128904172192],[.023841892367236,.020202145142264],[.023779800854935,.020275195962052],[.023717485518092,.020348055943974],[.023654946943242,.020420724402244],[.023592185719023,.020493200652878],[.023529202436167,.020565484013703],[.023465997687496,.020637573804361],[.023402572067918,.020709469346314],[.023338926174419,.020781169962854],[.023275060606058,.020852674979108],[.023210975963963,.020923983722044],[.023146672851322,.020995095520475],[.02308215187338,.021066009705072],[.023017413637435,.021136725608363],[.022952458752826,.021207242564742],[.022887287830934,.021277559910478],[.022821901485173,.021347676983716],[.022756300330983,.021417593124488],[.022690484985827,.021487307674717],[.022624456069185,.021556819978223],[.022558214202547,.021626129380729],[.022491760009405,.021695235229869],[.022425094115252,.021764136875192],[.022358217147572,.021832833668171],[.022291129735838,.021901324962204],[.022223832511501,.021969610112625],[.022156326107988,.022037688476709],[.022088611160696,.022105559413676],[.022020688306983,.022173222284699],[.021952558186166,.022240676452909],[.02188422143951,.022307921283403],[.021815678710228,.022374956143245],[.021746930643469,.022441780401478],[.021677977886316,.022508393429127],[.02160882108778,.022574794599206],[.02153946089879,.022640983286719],[.02146989797219,.022706958868676],[.021400132962735,.022772720724087],[.021330166527077,.022838268233979],[.021259999323769,.022903600781391],[.02118963201325,.022968717751391],[.021119065257845,.023033618531071],[.021048299721754,.023098302509561],[.02097733607105,.023162769078031],[.02090617497367,.023227017629698],[.020834817099409,.023291047559828],[.020763263119915,.023354858265748],[.02069151370868,.023418449146848],[.020619569541038,.023481819604585],[.020547431294155,.023544969042494],[.020475099647023,.023607896866186],[.020402575280455,.023670602483363],[.020329858877078,.023733085303813],[.020256951121327,.023795344739427],[.020183852699437,.023857380204193],[.020110564299439,.023919191114211],[.02003708661115,.023980776887692],[.019963420326171,.024042136944968],[.019889566137877,.024103270708495],[.019815524741412,.024164177602859],[.019741296833681,.024224857054779],[.019666883113346,.02428530849312],[.019592284280817,.024345531348888],[.019517501038246,.024405525055242],[.019442534089523,.0244652890475],[.019367384140264,.024524822763141],[.019292051897809,.024584125641809],[.019216538071215,.024643197125323],[.019140843371246,.024702036657681],[.019064968510369,.024760643685063],[.018988914202748,.024819017655836],[.018912681164234,.024877158020562],[.018836270112363,.024935064232003],[.018759681766343,.024992735745123],[.018682916847054,.025050172017095],[.018605976077037,.025107372507308],[.018528860180486,.025164336677369],[.018451569883247,.02522106399111],[.018374105912805,.025277553914591],[.01829646899828,.025333805916107],[.018218659870421,.025389819466194],[.018140679261596,.02544559403763],[.01806252790579,.025501129105445],[.017984206538592,.02555642414692],[.017905715897192,.025611478641598],[.017827056720375,.025666292071285],[.017748229748511,.025720863920056],[.01766923572355,.02577519367426],[.017590075389012,.025829280822525],[.017510749489986,.025883124855762],[.017431258773116,.02593672526717],[.0173516039866,.025990081552242],[.01727178588018,.026043193208768],[.017191805205132,.026096059736841],[.017111662714267,.026148680638861],[.017031359161915,.026201055419541],[.016950895303924,.026253183585908],[.016870271897651,.026305064647313],[.016789489701954,.026356698115431],[.016708549477186,.026408083504269],[.016627451985187,.026459220330167],[.016546197989277,.026510108111806],[.01646478825425,.026560746370212],[.016383223546365,.026611134628757],[.016301504633341,.026661272413168],[.016219632284346,.02671115925153],[.016137607269996,.026760794674288],[.01605543036234,.026810178214254],[.015973102334858,.026859309406613],[.015890623962454,.026908187788922],[.015807996021446,.026956812901119],[.015725219289558,.027005184285527],[.015642294545918,.027053301486856],[.015559222571044,.027101164052208],[.015476004146842,.027148771531083],[.015392640056594,.02719612347538],[.015309131084956,.027243219439406],[.015225478017946,.027290058979875],[.015141681642938,.027336641655915],[.015057742748656,.027382967029073],[.014973662125164,.027429034663317],[.014889440563862,.02747484412504],[.014805078857474,.027520394983066],[.014720577800046,.027565686808654],[.014635938186934,.027610719175499],[.014551160814797,.02765549165974],[.014466246481592,.02770000383996],[.014381195986567,.027744255297195],[.014296010130247,.027788245614933],[.014210689714436,.02783197437912],[.014125235542201,.027875441178165],[.01403964841787,.027918645602941],[.01395392914702,.027961587246792],[.013868078536476,.028004265705534],[.013782097394294,.028046680577462],[.013695986529763,.028088831463351],[.01360974675339,.028130717966461],[.013523378876898,.02817233969254],[.013436883713214,.028213696249828],[.013350262076462,.028254787249062],[.01326351478196,.028295612303478],[.013176642646205,.028336171028814],[.013089646486871,.028376463043317],[.013002527122799,.028416487967743],[.01291528537399,.028456245425361],[.012827922061597,.02849573504196],[.012740438007915,.028534956445849],[.012652834036379,.028573909267859],[.01256511097155,.028612593141354],[.012477269639111,.028651007702224],[.012389310865858,.028689152588899],[.012301235479693,.028727027442343],[.012213044309615,.028764631906065],[.012124738185712,.028801965626115],[.012036317939156,.028839028251097],[.011947784402191,.028875819432161],[.01185913840813,.028912338823015],[.011770380791341,.028948586079925],[.011681512387245,.028984560861718],[.011592534032306,.029020262829785],[.011503446564022,.029055691648087],[.011414250820918,.029090846983152],[.011324947642537,.029125728504087],[.011235537869437,.029160335882573],[.011146022343175,.029194668792871],[.011056401906305,.029228726911828],[.010966677402371,.029262509918876],[.010876849675891,.029296017496036],[.010786919572361,.029329249327922],[.010696887938235,.029362205101743],[.010606755620926,.029394884507308],[.010516523468793,.029427287237024],[.010426192331137,.029459412985906],[.010335763058187,.029491261451573],[.010245236501099,.029522832334255],[.010154613511943,.029554125336796],[.010063894943698,.029585140164654],[.00997308165024,.029615876525905],[.00988217448634,.029646334131247],[.00979117430765,.029676512694001],[.009700081970699,.029706411930116],[.009608898332881,.029736031558168],[.009517624252453,.029765371299366],[.009426260588521,.029794430877553],[.009334808201034,.02982321001921],[.009243267950778,.029851708453456],[.009151640699363,.029879925912053],[.00905992730922,.029907862129408],[.008968128643591,.029935516842573],[.00887624556652,.029962889791254],[.008784278942845,.029989980717805],[.008692229638191,.030016789367235],[.008600098518961,.030043315487212],[.008507886452329,.030069558828062],[.00841559430623,.030095519142772],[.008323222949351,.030121196186994],[.008230773251129,.030146589719046],[.008138246081733,.030171699499915],[.008045642312067,.030196525293257],[.00795296281375,.030221066865402],[.007860208459119,.030245323985357],[.007767380121212,.030269296424803],[.007674478673766,.030292983958103],[.007581504991203,.030316386362302],[.007488459948628,.030339503417126],[.007395344421816,.030362334904989],[.007302159287206,.030384880610993],[.007208905421891,.030407140322928],[.007115583703613,.030429113831278],[.007022195010752,.03045080092922],[.006928740222316,.030472201412626],[.006835220217939,.030493315080068],[.006741635877866,.030514141732814],[.006647988082948,.030534681174838],[.006554277714635,.030554933212813],[.006460505654964,.030574897656119],[.006366672786553,.030594574316845],[.006272779992593,.030613963009786],[.006178828156839,.030633063552447],[.006084818163601,.030651875765048],[.005990750897737,.03067039947052],[.005896627244644,.030688634494512],[.00580244809025,.030706580665388],[.005708214321004,.030724237814232],[.005613926823871,.030741605774849],[.005519586486321,.030758684383764],[.005425194196321,.030775473480228],[.005330750842327,.030791972906214],[.005236257313276,.030808182506425],[.005141714498576,.030824102128288],[.005047123288102,.030839731621963],[.004952484572181,.030855070840339],[.004857799241589,.030870119639036],[.004763068187541,.030884877876411],[.004668292301681,.030899345413553],[.004573472476075,.030913522114288],[.004478609603205,.03092740784518],[.004383704575956,.03094100247553],[.00428875828761,.030954305877381],[.004193771631837,.030967317925516],[.004098745502689,.030980038497461],[.004003680794587,.030992467473486],[.003908578402316,.031004604736602],[.003813439221017,.031016450172571],[.003718264146176,.031028003669899],[.003623054073616,.031039265119839],[.003527809899492,.031050234416394],[.003432532520278,.031060911456318],[.00333722283276,.031071296139114],[.003241881734029,.031081388367037],[.003146510121474,.031091188045095],[.003051108892766,.031100695081051],[.00295567894586,.031109909385419],[.002860221178978,.031118830871473],[.002764736490604,.031127459455239],[.002669225779478,.031135795055501],[.002573689944583,.031143837593803],[.002478129885137,.031151586994444],[.002382546500589,.031159043184484],[.002286940690606,.031166206093743],[.002191313355067,.0311730756548],[.002095665394051,.031179651802998],[.001999997707835,.031185934476438],[.001904311196878,.031191923615985],[.00180860676182,.031197619165268],[.001712885303465,.031203021070678],[.001617147722782,.03120812928137],[.001521394920889,.031212943749264],[.001425627799047,.031217464429043],[.001329847258653,.031221691278159],[.001234054201231,.031225624256825],[.00113824952842,.031229263328024],[.001042434141971,.031232608457502],[.000946608943736,.031235659613775],[.000850774835656,.031238416768124],[.000754932719759,.031240879894597],[.000659083498149,.03124304897001],[.000563228072993,.031244923973948],[.00046736734652,.031246504888762],[.000371502221008,.031247791699571],[.000275633598775,.031248784394264],[.000179762382174,.031249482963498],[83889473581e-15,.031249887400697]],r.MDCT_TABLE_256=[[.088387931675923,.000271171628935],[.088354655998507,.002440238387037],[.08826815878011,.00460783523678],[.088128492123423,.006772656498875],[.087935740158418,.008933398165942],[.08769001899167,.011088758687994],[.087391476636423,.013237439756448],[.087040292923427,.015378147086172],[.086636679392621,.017509591195118],[.086180879165703,.019630488181053],[.085673166799686,.02173956049494],[.085113848121515,.023835537710479],[.084503260043847,.025917157289369],[.08384177036211,.027983165341813],[.083129777532952,.030032317381813],[.08236771043423,.032063379076803],[.081556028106671,.034075126991164],[.080695219477356,.036066349323177],[.079785803065216,.038035846634965],[.078828326668693,.039982432574992],[.077823367035766,.041904934592675],[.07677152951654,.043802194644686],[.075673447698606,.045673069892513],[.07452978302539,.047516433390863],[.073341224397728,.049331174766491],[.072108487758894,.051116200887052],[.070832315663343,.052870436519557],[.069513476829429,.054592824978055],[.068152765676348,.056282328760143],[.06675100184562,.057937930171918],[.065309029707361,.059558631940996],[.063827717851668,.061143457817234],[.062307958565413,.062691453160784],[.060750667294763,.064201685517134],[.059156782093749,.065673245178784],[.057527263059216,.06710524573322],[.055863091752499,.068496824596852],[.054165270608165,.069847143534609],[.052434822330188,.071155389164853],[.050672789275903,.072420773449336],[.048880232828135,.073642534167879],[.047058232755862,.074819935377512],[.045207886563797,.075952267855771],[.043330308831298,.077038849527912],[.041426630540984,.078079025877766],[.039497998397473,.079072170341994],[.037545574136653,.080017684687506],[.035570533825892,.080914999371817],[.033574067155622,.081763573886112],[.031557376722714,.082562897080836],[.029521677306074,.083312487473584],[.027468195134911,.084011893539132],[.025398167150101,.084660693981419],[.023312840259098,.08525849798732],[.021213470584847,.085804945462053],[.019101322709138,.086299707246093],[.016977668910873,.086742485313442],[.014843788399692,.087133012951149],[.012700966545425,.087471054919968],[.01055049410383,.087756407596056],[.008393666439096,.087988899093631],[.006231782743558,.08816838936851],[.004066145255116,.088294770302461],[.001898058472816,.088367965768336]],r.MDCT_TABLE_1920=[[.032274858518097,13202404176e-15],[.032274642494505,.000118821372483],[.032274080835421,.000224439068308],[.03227317354686,.000330054360572],[.032271920638538,.000435666118218],[.032270322123873,.000541273210231],[.032268378019984,.000646874505642],[.032266088347691,.000752468873546],[.032263453131514,.000858055183114],[.032260472399674,.0009636323036],[.032257146184092,.001069199104358],[.03225347452039,.001174754454853],[.032249457447888,.001280297224671],[.032245095009606,.001385826283535],[.032240387252262,.001491340501313],[.032235334226272,.001596838748031],[.03222993598575,.00170231989389],[.032224192588507,.001807782809271],[.03221810409605,.001913226364749],[.032211670573582,.002018649431111],[.03220489209,.002124050879359],[.032197768717898,.002229429580728],[.03219030053356,.002334784406698],[.032182487616965,.002440114229003],[.032174330051782,.002545417919644],[.032165827925374,.002650694350905],[.03215698132879,.002755942395358],[.032147790356771,.002861160925883],[.032138255107744,.002966348815672],[.032128375683825,.00307150493825],[.032118152190814,.003176628167476],[.032107584738196,.003281717377568],[.032096673439141,.003386771443102],[.0320854184105,.003491789239036],[.032073819772804,.003596769640711],[.032061877650267,.003701711523874],[.032049592170778,.00380661376468],[.032036963465906,.003911475239711],[.032023991670893,.004016294825985],[.032010676924657,.004121071400967],[.031997019369789,.004225803842586],[.031983019152549,.004330491029241],[.031968676422869,.004435131839816],[.031953991334348,.004539725153692],[.031938964044252,.004644269850758],[.03192359471351,.004748764811426],[.031907883506716,.004853208916638],[.031891830592124,.004957601047881],[.031875436141648,.0050619400872],[.031858700330859,.005166224917208],[.031841623338985,.005270454421097],[.031824205348907,.005374627482653],[.031806446547156,.005478742986267],[.031788347123916,.005582799816945],[.031769907273017,.005686796860323],[.031751127191935,.005790733002674],[.031732007081789,.005894607130928],[.03171254714734,.005998418132675],[.031692747596989,.006102164896182],[.031672608642773,.006205846310406],[.031652130500364,.006309461265002],[.031631313389067,.006413008650337],[.031610157531816,.006516487357501],[.031588663155172,.006619896278321],[.031566830489325,.00672323430537],[.031544659768083,.006826500331981],[.031522151228878,.006929693252258],[.031499305112758,.007032811961088],[.031476121664387,.007135855354151],[.03145260113204,.007238822327937],[.031428743767604,.007341711779751],[.031404549826572,.00744452260773],[.031380019568042,.007547253710853],[.031355153254712,.007649903988952],[.031329951152882,.007752472342725],[.031304413532445,.007854957673748],[.031278540666888,.007957358884484],[.03125233283329,.0080596748783],[.031225790312316,.008161904559473],[.031198913388214,.008264046833205],[.031171702348814,.008366100605636],[.031144157485525,.008468064783849],[.031116279093331,.008569938275893],[.031088067470786,.008671719990782],[.031059522920014,.008773408838517],[.031030645746705,.008875003730092],[.03100143626011,.008976503577507],[.030971894773039,.00907790729378],[.030942021601857,.009179213792959],[.030911817066483,.009280421990133],[.030881281490382,.009381530801444],[.030850415200566,.009482539144097],[.030819218527589,.009583445936373],[.030787691805541,.009684250097643],[.030755835372048,.009784950548375],[.030723649568268,.009885546210147],[.030691134738883,.009986036005661],[.030658291232103,.010086418858753],[.030625119399655,.010186693694402],[.030591619596781,.010286859438745],[.030557792182239,.010386915019088],[.030523637518292,.010486859363916],[.03048915597071,.010586691402906],[.030454347908763,.010686410066936],[.030419213705216,.010786014288099],[.030383753736329,.010885502999714],[.030347968381849,.010984875136338],[.03031185802501,.011084129633775],[.030275423052523,.011183265429088],[.030238663854579,.011282281460612],[.030201580824838,.011381176667967],[.03016417436043,.011479949992062],[.030126444861948,.011578600375117],[.030088392733446,.011677126760663],[.03005001838243,.011775528093563],[.030011322219859,.011873803320018],[.029972304660138,.011971951387578],[.029932966121114,.012069971245157],[.02989330702407,.012167861843041],[.029853327793724,.012265622132901],[.029813028858222,.012363251067801],[.029772410649132,.012460747602215],[.029731473601443,.012558110692033],[.029690218153558,.012655339294575],[.029648644747289,.0127524323686],[.029606753827855,.01284938887432],[.029564545843872,.012946207773407],[.029522021247356,.013042888029011],[.02947918049371,.013139428605762],[.029436024041725,.013235828469789],[.02939255235357,.013332086588727],[.029348765894794,.013428201931728],[.029304665134313,.013524173469475],[.029260250544412,.013620000174189],[.029215522600735,.013715681019643],[.029170481782283,.013811214981173],[.029125128571406,.013906601035686],[.029079463453801,.014001838161674],[.029033486918505,.014096925339225],[.028987199457889,.014191861550031],[.028940601567655,.014286645777401],[.028893693746829,.014381277006273],[.028846476497755,.014475754223221],[.028798950326094,.014570076416472],[.028751115740811,.01466424257591],[.028702973254178,.014758251693091],[.02865452338176,.014852102761253],[.028605766642418,.014945794775326],[.028556703558297,.015039326731945],[.028507334654823,.015132697629457],[.028457660460698,.015225906467935],[.028407681507891,.015318952249187],[.028357398331639,.015411833976768],[.028306811470432,.015504550655988],[.028255921466016,.015597101293927],[.028204728863381,.015689484899442],[.02815323421076,.015781700483179],[.028101438059619,.015873747057582],[.028049340964652,.015965623636907],[.027996943483779,.016057329237229],[.027944246178133,.016148862876456],[.027891249612061,.016240223574335],[.027837954353113,.016331410352467],[.027784360972039,.016422422234315],[.02773047004278,.016513258245214],[.027676282142466,.016603917412384],[.027621797851405,.016694398764938],[.02756701775308,.016784701333894],[.027511942434143,.016874824152183],[.027456572484404,.016964766254662],[.027400908496833,.017054526678124],[.027344951067546,.017144104461307],[.027288700795801,.017233498644904],[.027232158283994,.017322708271577],[.027175324137651,.01741173238596],[.027118198965418,.017500570034678],[.02706078337906,.017589220266351],[.027003077993454,.017677682131607],[.026945083426576,.017765954683088],[.026886800299502,.017854036975468],[.026828229236397,.017941928065456],[.026769370864511,.018029627011808],[.02671022581417,.01811713287534],[.026650794718768,.018204444718934],[.026591078214767,.018291561607551],[.02653107694168,.018378482608238],[.026470791542075,.018465206790142],[.026410222661558,.018551733224515],[.026349370948775,.01863806098473],[.026288237055398,.018724189146286],[.026226821636121,.018810116786819],[.026165125348656,.018895842986112],[.026103148853718,.018981366826109],[.026040892815028,.019066687390916],[.025978357899296,.019151803766819],[.025915544776223,.01923671504229],[.025852454118485,.019321420307998],[.025789086601733,.019405918656817],[.025725442904582,.019490209183837],[.025661523708606,.019574290986376],[.025597329698327,.019658163163984],[.025532861561211,.019741824818458],[.025468119987662,.019825275053848],[.025403105671008,.01990851297647],[.025337819307501,.019991537694913],[.025272261596305,.020074348320047],[.025206433239491,.020156943965039],[.025140334942028,.020239323745355],[.025073967411776,.020321486778774],[.025007331359476,.020403432185395],[.024940427498748,.02048515908765],[.024873256546079,.020566666610309],[.024805819220816,.020647953880491],[.024738116245157,.020729020027676],[.024670148344147,.020809864183709],[.024601916245669,.020890485482816],[.024533420680433,.020970883061607],[.024464662381971,.021051056059087],[.02439564208663,.02113100361667],[.024326360533561,.021210724878181],[.024256818464715,.021290218989868],[.02418701662483,.021369485100415],[.02411695576143,.021448522360944],[.024046636624808,.02152732992503],[.023976059968027,.021605906948708],[.023905226546906,.02168425259048],[.023834137120014,.021762366011328],[.023762792448662,.02184024637472],[.023691193296893,.02191789284662],[.023619340431478,.021995304595495],[.023547234621902,.02207248079233],[.023474876640361,.022149420610628],[.023402267261751,.022226123226426],[.023329407263659,.0223025878183],[.023256297426359,.022378813567377],[.023182938532797,.022454799657339],[.023109331368588,.022530545274437],[.023035476722006,.022606049607496],[.022961375383975,.022681311847926],[.022887028148061,.022756331189727],[.022812435810462,.022831106829504],[.022737599170003,.022905637966469],[.022662519028125,.022979923802453],[.022587196188874,.023053963541915],[.022511631458899,.02312775639195],[.022435825647437,.023201301562294],[.022359779566306,.023274598265338],[.0222834940299,.023347645716133],[.022206969855176,.0234204431324],[.022130207861645,.023492989734537],[.022053208871367,.023565284745628],[.02197597370894,.023637327391451],[.021898503201489,.023709116900488],[.021820798178663,.023780652503931],[.021742859472618,.023851933435691],[.021664687918017,.023922958932406],[.021586284352013,.023993728233451],[.021507649614247,.024064240580942],[.021428784546832,.02413449521975],[.02134968999435,.024204491397504],[.02127036680384,.0242742283646],[.021190815824791,.024343705374213],[.021111037909128,.024412921682298],[.02103103391121,.024481876547605],[.020950804687815,.024550569231683],[.020870351098134,.024618998998889],[.020789674003759,.024687165116394],[.020708774268678,.024755066854194],[.020627652759262,.024822703485116],[.020546310344257,.024890074284826],[.020464747894775,.024957178531837],[.020382966284284,.025024015507516],[.0203009663886,.025090584496093],[.020218749085876,.025156884784668],[.020136315256592,.025222915663218],[.020053665783549,.025288676424605],[.019970801551857,.025354166364584],[.019887723448925,.025419384781811],[.019804432364452,.025484330977848],[.019720929190419,.025549004257175],[.019637214821078,.025613403927192],[.019553290152943,.02567752929823],[.019469156084779,.025741379683559],[.019384813517595,.025804954399392],[.019300263354632,.025868252764895],[.019215506501354,.025931274102193],[.019130543865439,.025994017736379],[.019045376356769,.026056482995518],[.018960004887419,.026118669210657],[.018874430371648,.026180575715833],[.018788653725892,.026242201848076],[.01870267586875,.026303546947421],[.018616497720974,.026364610356909],[.018530120205464,.026425391422602],[.018443544247254,.026485889493583],[.018356770773502,.026546103921965],[.018269800713483,.026606034062902],[.018182634998576,.026665679274589],[.018095274562256,.026725038918274],[.018007720340083,.026784112358263],[.017919973269692,.026842898961926],[.017832034290785,.026901398099707],[.017743904345116,.026959609145127],[.017655584376488,.027017531474792],[.017567075330734,.027075164468401],[.017478378155718,.02713250750875],[.017389493801313,.027189559981742],[.017300423219401,.027246321276391],[.017211167363854,.027302790784828],[.017121727190533,.02735896790231],[.017032103657269,.027414852027226],[.016942297723858,.027470442561102],[.01685231035205,.027525738908608],[.016762142505537,.027580740477564],[.016671795149944,.027635446678948],[.016581269252819,.0276898569269],[.016490565783622,.02774397063873],[.016399685713714,.027797787234924],[.016308630016347,.027851306139149],[.016217399666655,.02790452677826],[.016125995641641,.027957448582309],[.01603441892017,.028010070984544],[.015942670482954,.028062393421421],[.015850751312545,.02811441533261],[.015758662393324,.028166136160998],[.015666404711489,.028217555352697],[.015573979255046,.028268672357047],[.015481387013797,.028319486626627],[.015388628979331,.028369997617257],[.015295706145012,.028420204788004],[.015202619505968,.028470107601191],[.015109370059084,.028519705522399],[.015015958802984,.028568998020472],[.01492238673803,.028617984567529],[.014828654866302,.028666664638963],[.014734764191593,.028715037713449],[.014640715719398,.028763103272951],[.0145465104569,.028810860802724],[.014452149412962,.028858309791325],[.014357633598114,.028905449730613],[.014262964024545,.028952280115756],[.01416814170609,.02899880044524],[.01407316765822,.029045010220868],[.01397804289803,.029090908947771],[.013882768444231,.029136496134411],[.013787345317136,.029181771292585],[.013691774538648,.029226733937433],[.013596057132255,.029271383587441],[.013500194123014,.029315719764447],[.013404186537539,.029359741993647],[.013308035403995,.029403449803598],[.013211741752084,.029446842726223],[.013115306613032,.02948992029682],[.013018731019584,.029532682054063],[.012922016005985,.029575127540008],[.012825162607977,.029617256300097],[.012728171862781,.029659067883165],[.012631044809089,.029700561841444],[.012533782487056,.029741737730567],[.012436385938281,.029782595109573],[.012338856205805,.029823133540913],[.012241194334091,.029863352590452],[.012143401369021,.029903251827477],[.012045478357878,.029942830824699],[.011947426349339,.029982089158259],[.011849246393462,.030021026407731],[.011750939541676,.030059642156129],[.011652506846768,.030097935989909],[.011553949362874,.030135907498976],[.011455268145464,.030173556276684],[.011356464251335,.030210881919845],[.011257538738598,.030247884028732],[.011158492666665,.030284562207083],[.01105932709624,.030320916062102],[.010960043089307,.03035694520447],[.010860641709118,.030392649248343],[.010761124020182,.030428027811361],[.010661491088253,.030463080514646],[.010561743980319,.030497806982812],[.010461883764593,.030532206843968],[.010361911510496,.030566279729717],[.010261828288652,.030600025275167],[.010161635170872,.030633443118931],[.010061333230142,.030666532903129],[.009960923540617,.030699294273397],[.009860407177603,.030731726878888],[.00975978521755,.030763830372273],[.009659058738038,.03079560440975],[.009558228817767,.030827048651045],[.009457296536545,.030858162759415],[.009356262975275,.030888946401653],[.009255129215945,.030919399248091],[.009153896341616,.030949520972603],[.009052565436412,.030979311252611],[.008951137585505,.031008769769084],[.008849613875105,.031037896206544],[.008747995392451,.031066690253072],[.008646283225794,.031095151600306],[.00854447846439,.031123279943448],[.008442582198486,.031151074981266],[.00834059551931,.031178536416098],[.008238519519057,.031205663953853],[.008136355290878,.031232457304017],[.008034103928871,.031258916179656],[.007931766528065,.031285040297416],[.007829344184412,.031310829377528],[.007726837994772,.031336283143813],[.007624249056906,.03136140132368],[.007521578469457,.031386183648135],[.007418827331946,.031410629851778],[.007315996744755,.031434739672811],[.007213087809115,.031458512853036],[.007110101627101,.031481949137863],[.00700703930161,.031505048276306],[.006903901936357,.031527810020993],[.006800690635862,.031550234128164],[.006697406505433,.031572320357675],[.006594050651161,.031594068473],[.006490624179905,.031615478241233],[.006387128199278,.031636549433095],[.006283563817639,.031657281822929],[.00617993214408,.031677675188707],[.006076234288412,.031697729312034],[.005972471361157,.031717443978146],[.005868644473532,.031736818975914],[.00576475473744,.031755854097848],[.005660803265456,.031774549140098],[.005556791170816,.031792903902453],[.005452719567407,.03181091818835],[.005348589569753,.031828591804869],[.005244402293001,.031845924562742],[.005140158852914,.031862916276347],[.005035860365855,.031879566763717],[.004931507948778,.031895875846539],[.004827102719212,.031911843350155],[.004722645795254,.031927469103567],[.004618138295554,.031942752939435],[.004513581339303,.031957694694082],[.004408976046222,.031972294207493],[.004304323536549,.03198655132332],[.00419962493103,.032000465888879],[.004094881350902,.032014037755158],[.003990093917884,.032027266776813],[.003885263754166,.03204015281217],[.003780391982394,.032052695723232],[.003675479725661,.032064895375674],[.003570528107494,.032076751638847],[.003465538251839,.03208826438578],[.003360511283053,.032099433493181],[.003255448325892,.032110258841438],[.003150350505494,.032120740314619],[.003045218947373,.032130877800478],[.002940054777404,.032140671190449],[.00283485912181,.032150120379653],[.002729633107153,.032159225266897],[.002624377860318,.032167985754674],[.002519094508504,.032176401749168],[.002413784179212,.03218447316025],[.002308448000231,.032192199901481],[.002203087099626,.032199581890114],[.002097702605728,.032206619047093],[.001992295647121,.032213311297057],[.001886867352628,.032219658568338],[.001781418851302,.03222566079296],[.00167595127241,.032231317906644],[.001570465745428,.032236629848809],[.001464963400018,.032241596562566],[.001359445366028,.032246217994727],[.00125391277347,.032250494095799],[.001148366752513,.03225442481999],[.001042808433471,.032258010125204],[.000937238946789,.032261249973045],[.00083165942303,.032264144328817],[.000726070992868,.032266693161525],[.000620474787068,.032268896443871],[.000514871936481,.032270754152261],[.00040926357203,.032272266266801],[.000303650824695,.032273432771295],[.000198034825504,.032274253653254],[92416705518e-15,.032274728903884]],r.MDCT_TABLE_240=[[.091286604111815,.000298735779793],[.091247502481454,.002688238127538],[.091145864370807,.005075898091152],[.090981759437558,.00746007928776],[.09075530015103,.009839147718664],[.090466641715108,.012211472889198],[.090115981961863,.014575428926191],[.089703561215976,.016929395692256],[.089229662130024,.019271759896156],[.088694609490769,.02160091619847],[.088098769996564,.02391526831181],[.087442552006035,.026213230094844],[.086726405258214,.028493226639351],[.085950820564309,.030753695349588],[.085116329471329,.032993087013213],[.084223503897785,.035209866863042],[.083272955741727,.037402515628894],[.082265336461381,.039569530578832],[.08120133662867,.041709426549053],[.08008168545593,.043820736961749],[.078907150296148,.045902014830227],[.077678536117054,.047951833750597],[.076396684949434,.049968788879362],[.07506247531005,.051951497896226],[.073676821599542,.053898601951466],[.072240673475749,.055808766597225],[.070755015202858,.057680682702068],[.06922086497684,.059513067348201],[.067639274227625,.061304664710718],[.066011326898512,.063054246918278],[.064338138703282,.06476061489463],[.062620856361546,.066422599180399],[.060860656812842,.068039060734572],[.059058746410016,.069608891715145],[.05721636009245,.071131016238378],[.055334760539699,.072604391116154],[.053415237306106,.07402800657093],[.051459105937014,.075400886927784],[.049467707067153,.076722091283096],[.047442405501835,.077990714149396],[.045384589281588,.079205886075941],[.043295668730857,.080366774244592],[.041177075491445,.081472583040586],[.039030261541332,.08252255459781],[.036856698199564,.083515969318206],[.034657875117883,.084452146364948],[.032435299259796,.085330444129049],[.030190493867775,.086150260669096],[.027924997419306,.086911034123781],[.025640362572491,.087612243096981],[.023338155101933,.088253407015092],[.021019952825636,.08883408645639],[.018687344523641,.089353883452193],[.016341928849164,.089812441759604],[.013985313232951,.090209447105664],[.011619112781631,.09054462740274],[.009244949170797,.090817752935],[.006864449533597,.091028636515846],[.004479245345574,.091177133616206],[.002090971306534,.091263142463585]]},{}],11:[function(e,t,r){var n=new Uint16Array([0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,64,72,80,88,96,108,120,132,144,156,172,188,212,240,276,320,384,448,512,576,640,704,768,832,896,960,1024]),i=new Uint16Array([0,4,8,12,16,20,24,32,40,48,64,92,128]),o=new Uint16Array([0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,64,72,80,88,100,112,124,140,156,172,192,216,240,268,304,344,384,424,464,504,544,584,624,664,704,744,784,824,864,904,944,984,1024]),s=new Uint16Array([0,4,8,12,16,20,24,32,40,48,64,92,128]),a=new Uint16Array([0,4,8,12,16,20,24,28,32,36,40,48,56,64,72,80,88,96,108,120,132,144,160,176,196,216,240,264,292,320,352,384,416,448,480,512,544,576,608,640,672,704,736,768,800,832,864,896,928,1024]),h=new Uint16Array([0,4,8,12,16,20,28,36,44,56,68,80,96,112,128]),f=new Uint16Array([0,4,8,12,16,20,24,28,32,36,40,48,56,64,72,80,88,96,108,120,132,144,160,176,196,216,240,264,292,320,352,384,416,448,480,512,544,576,608,640,672,704,736,768,800,832,864,896,928,960,992,1024]),c=new Uint16Array([0,4,8,12,16,20,24,28,32,36,40,44,52,60,68,76,84,92,100,108,116,124,136,148,160,172,188,204,220,240,260,284,308,336,364,396,432,468,508,552,600,652,704,768,832,896,960,1024]),d=new Uint16Array([0,4,8,12,16,20,24,28,36,44,52,64,76,92,108,128]),l=new Uint16Array([0,8,16,24,32,40,48,56,64,72,80,88,100,112,124,136,148,160,172,184,196,212,228,244,260,280,300,320,344,368,396,424,456,492,532,572,616,664,716,772,832,896,960,1024]),p=new Uint16Array([0,4,8,12,16,20,24,28,32,40,48,60,72,88,108,128]),u=new Uint16Array([0,12,24,36,48,60,72,84,96,108,120,132,144,156,172,188,204,220,236,252,268,288,308,328,348,372,396,420,448,476,508,544,580,620,664,712,764,820,880,944,1024]),w=new Uint16Array([0,4,8,12,16,20,24,28,36,44,52,60,72,88,108,128]);r.SWB_OFFSET_1024=[n,n,o,a,a,f,c,c,l,l,l,u],r.SWB_OFFSET_128=[i,i,s,h,h,h,d,d,p,p,p,w],r.SWB_SHORT_WINDOW_COUNT=new Uint8Array([12,12,12,14,14,14,15,15,15,15,15,15]),r.SWB_LONG_WINDOW_COUNT=new Uint8Array([41,41,47,49,49,51,47,47,43,43,43,40]),r.SCALEFACTOR_TABLE=function(){for(var e=new Float32Array(428),t=0;t<428;t++)e[t]=Math.pow(2,(t-200)/4);return e}(),r.IQ_TABLE=function(){for(var e=new Float32Array(8191),t=0;t<8191;t++)e[t]=Math.pow(t,4/3);return e}(),r.SAMPLE_RATES=new Int32Array([96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350])},{}],12:[function(e,t,r){function n(e){this.maxBands=i[e.sampleIndex],this.nFilt=new Int32Array(8),this.length=new Array(8),this.direction=new Array(8),this.order=new Array(8),this.coef=new Array(8);for(var t=0;t<8;t++){this.length[t]=new Int32Array(4),this.direction[t]=new Array(4),this.order[t]=new Int32Array(4),this.coef[t]=new Array(4);for(var r=0;r<4;r++)this.coef[t][r]=new Float32Array(20)}this.lpc=new Float32Array(20),this.tmp=new Float32Array(20)}const m=[1,4,3],T=[2,6,5],v=[[0,-.43388373,-.7818315,-.9749279,.98480773,.86602539,.64278758,.34202015],[0,-.2079117,-.40673664,-.58778524,-.74314481,-.86602539,-.95105654,-.99452192,.99573416,.96182561,.8951633,.7980172,.67369562,.52643216,.36124167,.18374951],[0,-.43388373,.64278758,.34202015],[0,-.2079117,-.40673664,-.58778524,.67369562,.52643216,.36124167,.18374951]],i=[31,31,34,40,42,51,46,46,42,42,42,39,39];n.prototype.decode=function(e,t){for(var r=t.windowCount,n=2===t.windowSequence?m:T,i=0;i<r;i++)if(this.nFilt[i]=e.read(n[0]))for(var o=e.read(1),s=this.nFilt[i],a=this.length[i],h=this.order[i],f=this.direction[i],c=this.coef[i],d=0;d<s;d++){if(a[d]=e.read(n[1]),20<(h[d]=e.read(n[2])))throw new Error("TNS filter out of range: "+h[d]);if(h[d]){f[d]=!!e.read(1);for(var l=e.read(1),p=o+3-l,l=2*l+o,u=v[l],w=h[d],g=c[d],E=0;E<w;E++)g[E]=u[e.read(p)]}}},n.prototype.process=function(e,t,r){for(var n=Math.min(this.maxBands,e.maxSFB),i=this.lpc,o=this.tmp,s=e.info,a=s.windowCount,h=0;h<a;h++)for(var f=s.swbCount,c=this.nFilt[h],d=this.length[h],l=this.order[h],p=this.coef[h],u=this.direction[h],w=0;w<c;w++){var g=f,f=Math.max(0,o-d[w]),E=l[w];if(0!==E){for(var m=p[w],T=0;T<E;T++){var v=-m[T];i[T]=v;for(var S=0,A=T+1>>1;S<A;S++){var _=i[S],y=i[T-1-S];i[S]=_+v*y,i[T-1-S]=y+v*_}}var C,F=s.swbOffsets[Math.min(f,n)],g=s.swbOffsets[Math.min(g,n)],b=1;if(!((C=g-F)<=0))if(u[w]&&(b=-1,F=g-1),F+=128*h,r)for(var I=0;I<C;I++,F+=b)for(T=1;T<=Math.min(I,E);T++)t[F]-=t[F-T*b]*i[T-1];else for(I=0;I<C;I++,F+=b){o[0]=t[F];for(T=1;T<=Math.min(I,E);T++)t[F]+=o[T]*i[T-1];for(T=E;0<T;T--)o[T]=o[T-1]}}}},t.exports=n},{}]},{},[4]);
var CP_USE_WEB_SOCKET_WORKER=!1;!function(){var _={}.hasOwnProperty;AV.WebSocketSource=function(e){var t,r=c,o=e;for(t in o)_.call(o,t)&&(r[t]=o[t]);function s(){this.constructor=r}s.prototype=o.prototype,r.prototype=new s,r.__super__=o.prototype;var n=window.CP_ENABLE_DEBUG,i=-1;window.CP_ENABLE_DEBUG;function c(e,t){if(this.serverUrl=e,this.fileName=t,"undefined"==typeof WebSocket||null===WebSocket)return this.emit("error","[audio_player socket]: This browser does not have WebSocket support.");this.socket=CP_USE_WEB_SOCKET_WORKER?new CPWebSocketWorker(this.serverUrl,n):new WebSocket(this.serverUrl),this.bytesLoaded=0,this.__closed=!1,this.__debugCheckTimerId=i,this.__debugCheckLastTime=0,this.__debugCheckLastPkgCount=0,this._setupSocket(),CP_USE_WEB_SOCKET_WORKER&&this.socket.connect()}c.prototype.start=function(){return this._send({resume:!0})},c.prototype.pause=function(){return this._send({pause:!0})},c.prototype.reset=function(){return this._send({reset:!0})},c.prototype.close=function(){return this.__closed=!0,this.__debugCheckTimerId!=i&&(clearInterval(this.__debugCheckTimerId),this.__debugCheckTimerId=i),this.socket&&(this.socket.close(1e3),this.socket=null),!0},c.prototype._send=function(e){return this.open?this.socket.send(JSON.stringify(e)):this._bufferMessage=e};var u=this.socket;return c.prototype._setupSocket=function(){function t(){return this.__debugCheckTimerId!=i&&(clearInterval(this.__debugCheckTimerId),this.__debugCheckTimerId=i),this.__closed&&(u&&setTimeout(function(){u.close(),u=null},100),1)}var e,r,o,s;return this.socket.binaryType="arraybuffer",this.socket.onopen=(e=this,function(){if(!t())return e.open=!0,e.emit("connected"),e.fileName&&e._send({fileName:e.fileName}),e._bufferMessage?(e._send(e._bufferMessage),e._bufferMessage=null):void 0}),this.pktnum=0,this.socket.onmessage=(r=this,function(e){if(!t())return r.pktnum++,n&&!r.__closed&&r.__debugCheckTimerId==i&&(r.__debugCheckLastTime=Date.now(),r.__debugCheckLastPkgCount=r.pktnum,r.__debugCheckTimerId=setInterval(function(){var e;t()||(e=Date.now(),r.pktnum,r.__debugCheckLastPkgCount,r.__debugCheckLastTime,r.__debugCheckLastPkgCount=r.pktnum,r.__debugCheckLastTime=e)},1e3)),"string"==typeof(e=e.data)?null!=(e=JSON.parse(e)).fileSize?r.length=e.fileSize:null!=e.error?r.emit("error",e.error):e.end?r.socket.close():void 0:(e=new Uint8Array(e),r.pktnum,e=new AV.Buffer(e),r.bytesLoaded+=e.length,r.length&&r.emit("progress",r.bytesLoaded/r.length*100),r.emit("data",e))}),this.socket.onclose=(o=this,function(e){return this.__closed=!0,o.open=!1,e.wasClean?o.emit("end"):o.emit("error","[audio_player socket]: WebSocket closed uncleanly with code "+e.code+".")}),this.socket.onerror=(s=this,function(e){return s.emit("error",e)})},c}(AV.EventEmitter),AV.Asset.fromWebSocket=function(e,t){e=new AV.WebSocketSource(e,t);return new AV.Asset(e)},AV.Player.fromWebSocket=function(e,t){e=AV.Asset.fromWebSocket(e,t);return new AV.Player(e)}}.call(this);
var CP_TEST_WITHOUT_VIDEO=!1;window.CP_ENABLE_DEBUG=!0,window.playerH264=function(e){var n=e,i=null,a=!1,d=null,t=null,r=null,c=null,l="video_player_"+(new Date).getTime();function o(){t=CP_initAudio(c.audioUrl,!1,n),n.emit("H264","audio_connect"),t.on("connected",function(e){n.emit("H264","audio_connected",e)}),t.on("ready",function(e){n.emit("H264","audio_ready",e)}),t.on("format",function(e){}),t.on("closed",function(e){}),t.on("error",function(e){n.emit("H264","audio_error",e)}),t.play()}return{isPlaying:function(){return a},id:function(){return i.id},playAudio:function(){a&&!t&&o()},enableAudio:function(e){return t||o(),!!t&&(t.volume=e?100:0,!0)},isAudioPlaying:function(){return a&&null!=t},create:function(e,t,o){return r=e,(i=document.createElement("canvas")).id="canvas"+Math.floor((new Date).getTime()+1e8*Math.random()),i.width=t,i.height=o,i.style.width="100%",i.style.height="100%",(e=document.createElement("div")).setAttribute("class","HMplayerBox"),e.appendChild(i),r.appendChild(e),(t=document.createElement("div")).id="cover"+Math.floor((new Date).getTime()+1e8*Math.random()),t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.zIndex="11",t.style.width="100%",t.style.height="100%",t.style.background="#000000",e.appendChild(t),{canvasId:i.id,videoId:"",coverId:t.id}},connect:function(e){var t,o;c=e,e="",(t=sessionStorage.getItem("saas_player_code"))&&/Android/i.test(navigator.userAgent)&&(e=URL.createObjectURL(new Blob([t]))),d=new WSAvcPlayer(i,"webgl",1,35,n,l,e),o=!1,n.on(l,function(e,t){if(d)switch(e){case"connected":n.emit("H264","video_connected");break;case"ready":a=!0,n.emit("H264","video_ready");break;case"closed":!o&&a?(o=!0,n.emit("H264","video_error")):n.emit("H264","video_closed");break;case"error":!o&&a&&(o=!0,n.emit("H264","video_error"));break;case"transferable_object_not_support":n.emit("H264","video_transferable_object_not_support");break;case"get_video_data_success":n.emit("H264","video_data_success");break;case"video_decode_failed":n.emit("H264","video_decode_failed")}}),n.emit("H264","video_connect",c.videoUrl),d.connect(c.videoUrl)},disconnect:function(e){if(a=!1,d){try{n.off(l),d.stopStream(),d.disconnect()}catch(e){}d=null}if(t){try{t.stop(),t.off("connected"),t.off("ready"),t.off("format"),t.off("closed"),t.off("error")}catch(e){}t=null}e&&r.removeChild(i)}}};