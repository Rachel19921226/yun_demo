!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Cloudplay=t()}(this,function(){"use strict";function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}function ownKeys(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread2(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey(r.key),r)}}function _createClass(e,t,n){t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1})}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _unsupportedIterableToArray(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"==typeof e?e:String(e)}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return commonjsRequire(e,null==t?n.path:t)}},n.exports),n.exports}function getAugmentedNamespace(n){var r;return n.__esModule?n:(r=Object.defineProperty({},"__esModule",{value:!0}),Object.keys(n).forEach(function(e){var t=Object.getOwnPropertyDescriptor(n,e);Object.defineProperty(r,e,t.get?t:{enumerable:!0,get:function(){return n[e]}})}),r)}function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var core=createCommonjsModule(function(e,t){e.exports=function(l){var n=Object.create||function(e){return t.prototype=e,e=new t,t.prototype=null,e};function t(){}var e={},r=e.lib={},o=r.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},d=r.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,o=e.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++){var a=n[i>>>2]>>>24-i%4*8&255;t[r+i>>>2]|=a<<24-(r+i)%4*8}else for(i=0;i<o;i+=4)t[r+i>>>2]=n[i>>>2];return this.sigBytes+=o,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=l.ceil(t/4)},clone:function(){var e;return(e=o.clone.call(this)).words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4){var r=function(t){var n=987654321,r=4294967295;return function(){var e=((n=36969*(65535&n)+(n>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return(e/4294967296+.5)*(.5<l.random()?1:-1)}}(4294967296*(o||l.random())),o=987654071*r();t.push(4294967296*r()|0)}return new d.init(t,e)}}),i=e.enc={},a=i.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new d.init(n,t/2)}},s=i.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new d.init(n,t)}},c=i.Utf8={stringify:function(e){try{return decodeURIComponent(escape(s.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return s.parse(unescape(encodeURIComponent(e)))}},u=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,n=t.words,r=t.sigBytes,o=this.blockSize,i=r/(4*o),a=(i=e?l.ceil(i):l.max((0|i)-this._minBufferSize,0))*o,e=l.min(4*a,r);if(a){for(var s=0;s<a;s+=o)this._doProcessBlock(n,s);var c=n.splice(0,a);t.sigBytes-=e}return new d.init(c,e)},clone:function(){var e;return(e=o.clone.call(this))._data=this._data.clone(),e},_minBufferSize:0}),p=(r.Hasher=u.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(n){return function(e,t){return new n.init(t).finalize(e)}},_createHmacHelper:function(n){return function(e,t){return new p.HMAC.init(n,t).finalize(e)}}}),e.algo={});return e}(Math)}),x64Core=createCommonjsModule(function(e,t){var n,o,i,r;e.exports=(r=(n=e=core).lib,o=r.Base,i=r.WordArray,(r=n.x64={}).Word=o.extend({init:function(e,t){this.high=e,this.low=t}}),r.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var o=e[r];n.push(o.high),n.push(o.low)}return i.create(n,this.sigBytes)},clone:function(){for(var e,t=(e=o.clone.call(this)).words=this.words.slice(0),n=t.length,r=0;r<n;r++)t[r]=t[r].clone();return e}}),e)}),libTypedarrays=createCommonjsModule(function(e,t){var n;e.exports=(n=core,function(){var e,o;"function"==typeof ArrayBuffer&&(e=n.lib.WordArray,o=e.init,(e.init=function(e){if((e=(e=e instanceof ArrayBuffer?new Uint8Array(e):e)instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e)instanceof Uint8Array){for(var t=e.byteLength,n=[],r=0;r<t;r++)n[r>>>2]|=e[r]<<24-r%4*8;o.call(this,n,t)}else o.apply(this,arguments)}).prototype=e)}(),n.lib.WordArray)}),encUtf16=createCommonjsModule(function(e,t){function a(e){return e<<8&4278255360|e>>>8&16711935}var o,n;e.exports=(o=(e=core).lib.WordArray,(n=e.enc).Utf16=n.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o+=2){var i=t[o>>>2]>>>16-o%4*8&65535;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>1]|=e.charCodeAt(r)<<16-r%2*16;return o.create(n,2*t)}},n.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o+=2){var i=a(t[o>>>2]>>>16-o%4*8&65535);r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>1]|=a(e.charCodeAt(r)<<16-r%2*16);return o.create(n,2*t)}},e.enc.Utf16)}),encBase64=createCommonjsModule(function(e,t){function a(e,t,n){for(var r,o,i=[],a=0,s=0;s<t;s++)s%4&&(r=n[e.charCodeAt(s-1)]<<s%4*2,o=n[e.charCodeAt(s)]>>>6-s%4*2,i[a>>>2]|=(r|o)<<24-a%4*8,a++);return c.create(i,a)}var c;e.exports=(c=(e=core).lib.WordArray,e.enc.Base64={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=this._map,o=(e.clamp(),[]),i=0;i<n;i+=3)for(var a=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;s<4&&i+.75*s<n;s++)o.push(r.charAt(a>>>6*(3-s)&63));var c=r.charAt(64);if(c)for(;o.length%4;)o.push(c);return o.join("")},parse:function(e){var t=e.length,n=this._map;if(!(r=this._reverseMap))for(var r=this._reverseMap=[],o=0;o<n.length;o++)r[n.charCodeAt(o)]=o;var i=n.charAt(64);return i&&-1!==(i=e.indexOf(i))&&(t=i),a(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.enc.Base64)}),md5=createCommonjsModule(function(e,t){e.exports=function(e){for(var u=Math,t=e,n=t.lib,r=n.WordArray,o=n.Hasher,i=t.algo,T=[],a=0;a<64;a++)T[a]=u.abs(u.sin(a+1))*4294967296|0;var s=i.MD5=o.extend({_doReset:function e(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function e(t,n){for(var r=0;r<16;r++){var o=n+r;var i=t[o];t[o]=(i<<8|i>>>24)&16711935|(i<<24|i>>>8)&4278255360}var a=this._hash.words;var s=t[n+0];var c=t[n+1];var l=t[n+2];var d=t[n+3];var u=t[n+4];var p=t[n+5];var h=t[n+6];var f=t[n+7];var m=t[n+8];var A=t[n+9];var y=t[n+10];var _=t[n+11];var g=t[n+12];var v=t[n+13];var S=t[n+14];var b=t[n+15];var w=a[0];var C=a[1];var k=a[2];var E=a[3];w=R(w,C,k,E,s,7,T[0]);E=R(E,w,C,k,c,12,T[1]);k=R(k,E,w,C,l,17,T[2]);C=R(C,k,E,w,d,22,T[3]);w=R(w,C,k,E,u,7,T[4]);E=R(E,w,C,k,p,12,T[5]);k=R(k,E,w,C,h,17,T[6]);C=R(C,k,E,w,f,22,T[7]);w=R(w,C,k,E,m,7,T[8]);E=R(E,w,C,k,A,12,T[9]);k=R(k,E,w,C,y,17,T[10]);C=R(C,k,E,w,_,22,T[11]);w=R(w,C,k,E,g,7,T[12]);E=R(E,w,C,k,v,12,T[13]);k=R(k,E,w,C,S,17,T[14]);C=R(C,k,E,w,b,22,T[15]);w=I(w,C,k,E,c,5,T[16]);E=I(E,w,C,k,h,9,T[17]);k=I(k,E,w,C,_,14,T[18]);C=I(C,k,E,w,s,20,T[19]);w=I(w,C,k,E,p,5,T[20]);E=I(E,w,C,k,y,9,T[21]);k=I(k,E,w,C,b,14,T[22]);C=I(C,k,E,w,u,20,T[23]);w=I(w,C,k,E,A,5,T[24]);E=I(E,w,C,k,S,9,T[25]);k=I(k,E,w,C,d,14,T[26]);C=I(C,k,E,w,m,20,T[27]);w=I(w,C,k,E,v,5,T[28]);E=I(E,w,C,k,l,9,T[29]);k=I(k,E,w,C,f,14,T[30]);C=I(C,k,E,w,g,20,T[31]);w=D(w,C,k,E,p,4,T[32]);E=D(E,w,C,k,m,11,T[33]);k=D(k,E,w,C,_,16,T[34]);C=D(C,k,E,w,S,23,T[35]);w=D(w,C,k,E,c,4,T[36]);E=D(E,w,C,k,u,11,T[37]);k=D(k,E,w,C,f,16,T[38]);C=D(C,k,E,w,y,23,T[39]);w=D(w,C,k,E,v,4,T[40]);E=D(E,w,C,k,s,11,T[41]);k=D(k,E,w,C,d,16,T[42]);C=D(C,k,E,w,h,23,T[43]);w=D(w,C,k,E,A,4,T[44]);E=D(E,w,C,k,g,11,T[45]);k=D(k,E,w,C,b,16,T[46]);C=D(C,k,E,w,l,23,T[47]);w=P(w,C,k,E,s,6,T[48]);E=P(E,w,C,k,f,10,T[49]);k=P(k,E,w,C,S,15,T[50]);C=P(C,k,E,w,p,21,T[51]);w=P(w,C,k,E,g,6,T[52]);E=P(E,w,C,k,d,10,T[53]);k=P(k,E,w,C,y,15,T[54]);C=P(C,k,E,w,c,21,T[55]);w=P(w,C,k,E,m,6,T[56]);E=P(E,w,C,k,b,10,T[57]);k=P(k,E,w,C,h,15,T[58]);C=P(C,k,E,w,v,21,T[59]);w=P(w,C,k,E,u,6,T[60]);E=P(E,w,C,k,_,10,T[61]);k=P(k,E,w,C,l,15,T[62]);C=P(C,k,E,w,A,21,T[63]);a[0]=a[0]+w|0;a[1]=a[1]+C|0;a[2]=a[2]+k|0;a[3]=a[3]+E|0},_doFinalize:function e(){var t=this._data;var n=t.words;var r=this._nDataBytes*8;var o=t.sigBytes*8;n[o>>>5]|=128<<24-o%32;var i=u.floor(r/4294967296);var a=r;n[(o+64>>>9<<4)+15]=(i<<8|i>>>24)&16711935|(i<<24|i>>>8)&4278255360;n[(o+64>>>9<<4)+14]=(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4278255360;t.sigBytes=(n.length+1)*4;this._process();var s=this._hash;var c=s.words;for(var l=0;l<4;l++){var d=c[l];c[l]=(d<<8|d>>>24)&16711935|(d<<24|d>>>8)&4278255360}return s},clone:function e(){var e=o.clone.call(this);e._hash=this._hash.clone();return e}});function R(e,t,n,r,o,i,a){var s=e+(t&n|~t&r)+o+a;return(s<<i|s>>>32-i)+t}function I(e,t,n,r,o,i,a){var s=e+(t&r|n&~r)+o+a;return(s<<i|s>>>32-i)+t}function D(e,t,n,r,o,i,a){var s=e+(t^n^r)+o+a;return(s<<i|s>>>32-i)+t}function P(e,t,n,r,o,i,a){var s=e+(n^(t|~r))+o+a;return(s<<i|s>>>32-i)+t}return t.MD5=o._createHelper(s),t.HmacMD5=o._createHmacHelper(s),e.MD5}(core)}),sha1=createCommonjsModule(function(e,t){var n,r,o,d,i;e.exports=(i=(n=e=core).lib,r=i.WordArray,o=i.Hasher,i=n.algo,d=[],i=i.SHA1=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],c=0;c<80;c++){c<16?d[c]=0|e[t+c]:(l=d[c-3]^d[c-8]^d[c-14]^d[c-16],d[c]=l<<1|l>>>31);var l=(r<<5|r>>>27)+s+d[c];l+=c<20?1518500249+(o&i|~o&a):c<40?1859775393+(o^i^a):c<60?(o&i|o&a|i&a)-1894007588:(o^i^a)-899497514,s=a,a=i,i=o<<30|o>>>2,o=r,r=l}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(64+r>>>9<<4)]=Math.floor(n/4294967296),t[15+(64+r>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e;return(e=o.clone.call(this))._hash=this._hash.clone(),e}}),n.SHA1=o._createHelper(i),n.HmacSHA1=o._createHmacHelper(i),e.SHA1)}),sha256=createCommonjsModule(function(e,t){e.exports=function(e){var i=Math,t=e,n=t.lib,r=n.WordArray,o=n.Hasher,a=t.algo,s=[],w=[];function c(e){var t=i.sqrt(e);for(var n=2;n<=t;n++)if(!(e%n))return false;return true}function l(e){return(e-(e|0))*4294967296|0}var d=2,u=0;while(u<64){if(c(d)){if(u<8)s[u]=l(i.pow(d,1/2));w[u]=l(i.pow(d,1/3));u++}d++}var C=[],p=a.SHA256=o.extend({_doReset:function e(){this._hash=new r.init(s.slice(0))},_doProcessBlock:function e(t,n){var r=this._hash.words;var o=r[0];var i=r[1];var a=r[2];var s=r[3];var c=r[4];var l=r[5];var d=r[6];var u=r[7];for(var p=0;p<64;p++){if(p<16)C[p]=t[n+p]|0;else{var h=C[p-15];var f=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3;var m=C[p-2];var A=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;C[p]=f+C[p-7]+A+C[p-16]}var y=c&l^~c&d;var _=o&i^o&a^i&a;var g=(o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22);var v=(c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25);var S=u+v+y+w[p]+C[p];var b=g+_;u=d;d=l;l=c;c=s+S|0;s=a;a=i;i=o;o=S+b|0}r[0]=r[0]+o|0;r[1]=r[1]+i|0;r[2]=r[2]+a|0;r[3]=r[3]+s|0;r[4]=r[4]+c|0;r[5]=r[5]+l|0;r[6]=r[6]+d|0;r[7]=r[7]+u|0},_doFinalize:function e(){var t=this._data;var n=t.words;var r=this._nDataBytes*8;var o=t.sigBytes*8;n[o>>>5]|=128<<24-o%32;n[(o+64>>>9<<4)+14]=i.floor(r/4294967296);n[(o+64>>>9<<4)+15]=r;t.sigBytes=n.length*4;this._process();return this._hash},clone:function e(){var e=o.clone.call(this);e._hash=this._hash.clone();return e}});return t.SHA256=o._createHelper(p),t.HmacSHA256=o._createHmacHelper(p),e.SHA256}(core)}),sha224=createCommonjsModule(function(e,t){var n,r,o,i;e.exports=(r=(n=e=core).lib.WordArray,i=n.algo,o=i.SHA256,i=i.SHA224=o.extend({_doReset:function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=o._doFinalize.call(this);return e.sigBytes-=4,e}}),n.SHA224=o._createHelper(i),n.HmacSHA224=o._createHmacHelper(i),e.SHA224)}),sha512=createCommonjsModule(function(e,t){e.exports=function(e){var t=e,n,r=t.lib.Hasher,o=t.x64,i=o.Word,a=o.WordArray,s=t.algo;function c(){return i.create.apply(i,arguments)}for(var ke=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],Ee=[],l=0;l<80;l++)Ee[l]=c();var d=s.SHA512=r.extend({_doReset:function e(){this._hash=new a.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function B(L,F){var e=this._hash.words;var t=e[0];var n=e[1];var r=e[2];var o=e[3];var i=e[4];var a=e[5];var s=e[6];var c=e[7];var j=t.high;var l=t.low;var K=n.high;var d=n.low;var U=r.high;var u=r.low;var G=o.high;var p=o.low;var H=i.high;var h=i.low;var W=a.high;var f=a.low;var V=s.high;var m=s.low;var z=c.high;var q=c.low;var A=j;var y=l;var _=K;var g=d;var v=U;var S=u;var Y=G;var b=p;var w=H;var C=h;var $=W;var k=f;var J=V;var E=m;var X=z;var T=q;for(var R=0;R<80;R++){var Q=Ee[R];if(R<16){var Z=Q.high=L[F+R*2]|0;var I=Q.low=L[F+R*2+1]|0}else{var ee=Ee[R-15];var D=ee.high;var P=ee.low;var te=(D>>>1|P<<31)^(D>>>8|P<<24)^D>>>7;var ne=(P>>>1|D<<31)^(P>>>8|D<<24)^(P>>>7|D<<25);var re=Ee[R-2];var O=re.high;var x=re.low;var oe=(O>>>19|x<<13)^(O<<3|x>>>29)^O>>>6;var ie=(x>>>19|O<<13)^(x<<3|O>>>29)^(x>>>6|O<<26);var ae=Ee[R-7];var se=ae.high;var ce=ae.low;var le=Ee[R-16];var de=le.high;var ue=le.low;var I=ne+ce;var Z=te+se+(I>>>0<ne>>>0?1:0);var I=I+ie;var Z=Z+oe+(I>>>0<ie>>>0?1:0);var I=I+ue;var Z=Z+de+(I>>>0<ue>>>0?1:0);Q.high=Z;Q.low=I}var pe=w&$^~w&J;var he=C&k^~C&E;var fe=A&_^A&v^_&v;var me=y&g^y&S^g&S;var Ae=(A>>>28|y<<4)^(A<<30|y>>>2)^(A<<25|y>>>7);var ye=(y>>>28|A<<4)^(y<<30|A>>>2)^(y<<25|A>>>7);var _e=(w>>>14|C<<18)^(w>>>18|C<<14)^(w<<23|C>>>9);var ge=(C>>>14|w<<18)^(C>>>18|w<<14)^(C<<23|w>>>9);var ve=ke[R];var Se=ve.high;var be=ve.low;var M=T+ge;var N=X+_e+(M>>>0<T>>>0?1:0);var M=M+he;var N=N+pe+(M>>>0<he>>>0?1:0);var M=M+be;var N=N+Se+(M>>>0<be>>>0?1:0);var M=M+I;var N=N+Z+(M>>>0<I>>>0?1:0);var we=ye+me;var Ce=Ae+fe+(we>>>0<ye>>>0?1:0);X=J;T=E;J=$;E=k;$=w;k=C;C=b+M|0;w=Y+N+(C>>>0<b>>>0?1:0)|0;Y=v;b=S;v=_;S=g;_=A;g=y;y=M+we|0;A=N+Ce+(y>>>0<M>>>0?1:0)|0}l=t.low=l+y;t.high=j+A+(l>>>0<y>>>0?1:0);d=n.low=d+g;n.high=K+_+(d>>>0<g>>>0?1:0);u=r.low=u+S;r.high=U+v+(u>>>0<S>>>0?1:0);p=o.low=p+b;o.high=G+Y+(p>>>0<b>>>0?1:0);h=i.low=h+C;i.high=H+w+(h>>>0<C>>>0?1:0);f=a.low=f+k;a.high=W+$+(f>>>0<k>>>0?1:0);m=s.low=m+E;s.high=V+J+(m>>>0<E>>>0?1:0);q=c.low=q+T;c.high=z+X+(q>>>0<T>>>0?1:0)},_doFinalize:function e(){var t=this._data;var n=t.words;var r=this._nDataBytes*8;var o=t.sigBytes*8;n[o>>>5]|=128<<24-o%32;n[(o+128>>>10<<5)+30]=Math.floor(r/4294967296);n[(o+128>>>10<<5)+31]=r;t.sigBytes=n.length*4;this._process();var i=this._hash.toX32();return i},clone:function e(){var e=r.clone.call(this);e._hash=this._hash.clone();return e},blockSize:1024/32});return t.SHA512=r._createHelper(d),t.HmacSHA512=r._createHmacHelper(d),e.SHA512}(core)}),sha384=createCommonjsModule(function(e,t){var n,r,o,i,a;e.exports=(a=(n=e=core).x64,r=a.Word,o=a.WordArray,a=n.algo,i=a.SHA512,a=a.SHA384=i.extend({_doReset:function(){this._hash=new o.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},_doFinalize:function(){var e=i._doFinalize.call(this);return e.sigBytes-=16,e}}),n.SHA384=i._createHelper(a),n.HmacSHA384=i._createHmacHelper(a),e.SHA384)}),sha3=createCommonjsModule(function(e,t){e.exports=function(e){for(var h=Math,t=e,n=t.lib,f=n.WordArray,r=n.Hasher,o,i=t.x64.Word,a=t.algo,D=[],P=[],O=[],s=1,c=0,l=0;l<24;l++){D[s+5*c]=(l+1)*(l+2)/2%64;var d=c%5;var u=(2*s+3*c)%5;s=d;c=u}for(var s=0;s<5;s++)for(var c=0;c<5;c++)P[s+5*c]=c+(2*s+3*c)%5*5;for(var p=1,m=0;m<24;m++){var A=0;var y=0;for(var _=0;_<7;_++){if(p&1){var g=(1<<_)-1;if(g<32)y^=1<<g;else A^=1<<g-32}if(p&128)p=p<<1^113;else p<<=1}O[m]=i.create(A,y)}for(var x=[],v=0;v<25;v++)x[v]=i.create();var S=a.SHA3=r.extend({cfg:r.cfg.extend({outputLength:512}),_doReset:function e(){var t=this._state=[];for(var n=0;n<25;n++)t[n]=new i.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function e(t,n){var r=this._state;var o=this.blockSize/2;for(var i=0;i<o;i++){var a=t[n+2*i];var s=t[n+2*i+1];a=(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4278255360;s=(s<<8|s>>>24)&16711935|(s<<24|s>>>8)&4278255360;var c=r[i];c.high^=s;c.low^=a}for(var l=0;l<24;l++){for(var d=0;d<5;d++){var u=0,p=0;for(var h=0;h<5;h++){var c=r[d+5*h];u^=c.high;p^=c.low}var f=x[d];f.high=u;f.low=p}for(var d=0;d<5;d++){var m=x[(d+4)%5];var A=x[(d+1)%5];var y=A.high;var _=A.low;var u=m.high^(y<<1|_>>>31);var p=m.low^(_<<1|y>>>31);for(var h=0;h<5;h++){var c=r[d+5*h];c.high^=u;c.low^=p}}for(var g=1;g<25;g++){var c=r[g];var v=c.high;var S=c.low;var b=D[g];if(b<32){var u=v<<b|S>>>32-b;var p=S<<b|v>>>32-b}else{var u=S<<b-32|v>>>64-b;var p=v<<b-32|S>>>64-b}var w=x[P[g]];w.high=u;w.low=p}var C=x[0];var k=r[0];C.high=k.high;C.low=k.low;for(var d=0;d<5;d++)for(var h=0;h<5;h++){var g=d+5*h;var c=r[g];var E=x[g];var T=x[(d+1)%5+5*h];var R=x[(d+2)%5+5*h];c.high=E.high^~T.high&R.high;c.low=E.low^~T.low&R.low}var c=r[0];var I=O[l];c.high^=I.high;c.low^=I.low}},_doFinalize:function e(){var t=this._data;var n=t.words;this._nDataBytes*8;var r=t.sigBytes*8;var o=this.blockSize*32;n[r>>>5]|=1<<24-r%32;n[(h.ceil((r+1)/o)*o>>>5)-1]|=128;t.sigBytes=n.length*4;this._process();var i=this._state;var a=this.cfg.outputLength/8;var s=a/8;var c=[];for(var l=0;l<s;l++){var d=i[l];var u=d.high;var p=d.low;u=(u<<8|u>>>24)&16711935|(u<<24|u>>>8)&4278255360;p=(p<<8|p>>>24)&16711935|(p<<24|p>>>8)&4278255360;c.push(p);c.push(u)}return new f.init(c,a)},clone:function e(){var e=r.clone.call(this);var t=e._state=this._state.slice(0);for(var n=0;n<25;n++)t[n]=t[n].clone();return e}});return t.SHA3=r._createHelper(S),t.HmacSHA3=r._createHmacHelper(S),e.SHA3}(core)}),ripemd160=createCommonjsModule(function(e,t){function w(e,t,n){return e&t|~e&n}function C(e,t,n){return e&n|t&~n}function k(e,t){return e<<t|e>>>32-t}var n,r,o,E,T,R,I,D,P,i;e.exports=(i=(n=e=core).lib,r=i.WordArray,o=i.Hasher,i=n.algo,E=r.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),T=r.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),R=r.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),I=r.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),D=r.create([0,1518500249,1859775393,2400959708,2840853838]),P=r.create([1352829926,1548603684,1836072691,2053994217,0]),i=i.RIPEMD160=o.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,o=e[r];e[r]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}for(var i,a,s,c,l,d,u=this._hash.words,p=D.words,h=P.words,f=E.words,m=T.words,A=R.words,y=I.words,_=i=u[0],g=a=u[1],v=s=u[2],S=c=u[3],b=l=u[4],n=0;n<80;n+=1)d=(d=k(d=(d=i+e[t+f[n]]|0)+(n<16?(a^s^c)+p[0]:n<32?w(a,s,c)+p[1]:n<48?((a|~s)^c)+p[2]:n<64?C(a,s,c)+p[3]:(a^(s|~c))+p[4])|0,A[n]))+l|0,i=l,l=c,c=k(s,10),s=a,a=d,d=(d=k(d=(d=_+e[t+m[n]]|0)+(n<16?(g^(v|~S))+h[0]:n<32?C(g,v,S)+h[1]:n<48?((g|~v)^S)+h[2]:n<64?w(g,v,S)+h[3]:(g^v^S)+h[4])|0,y[n]))+b|0,_=b,b=S,S=k(v,10),v=g,g=d;d=u[1]+s+S|0,u[1]=u[2]+c+b|0,u[2]=u[3]+l+_|0,u[3]=u[4]+i+g|0,u[4]=u[0]+a+v|0,u[0]=d},_doFinalize:function(){for(var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes,r=(t[r>>>5]|=128<<24-r%32,t[14+(64+r>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process(),this._hash),o=r.words,i=0;i<5;i++){var a=o[i];o[i]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}return r},clone:function(){var e;return(e=o.clone.call(this))._hash=this._hash.clone(),e}}),n.RIPEMD160=o._createHelper(i),n.HmacRIPEMD160=o._createHmacHelper(i),e.RIPEMD160)}),hmac=createCommonjsModule(function(e,t){var n,s;e.exports=(n=(e=core).lib.Base,s=e.enc.Utf8,void(e.algo.HMAC=n.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=s.parse(t));for(var n=e.blockSize,r=4*n,e=((t=t.sigBytes>r?e.finalize(t):t).clamp(),this._oKey=t.clone()),t=this._iKey=t.clone(),o=e.words,i=t.words,a=0;a<n;a++)o[a]^=1549556828,i[a]^=909522486;e.sigBytes=t.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,e=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(e))}})))}),pbkdf2=createCommonjsModule(function(e,t){var n,r,y,o,i,_,a;e.exports=(o=(n=e=core).lib,r=o.Base,y=o.WordArray,o=n.algo,i=o.SHA1,_=o.HMAC,a=o.PBKDF2=r.extend({cfg:r.extend({keySize:4,hasher:i,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=_.create(n.hasher,e),o=y.create(),i=y.create([1]),a=o.words,s=i.words,c=n.keySize,l=n.iterations;a.length<c;){for(var d=r.update(t).finalize(i),u=(r.reset(),d.words),p=u.length,h=d,f=1;f<l;f++){h=r.finalize(h),r.reset();for(var m=h.words,A=0;A<p;A++)u[A]^=m[A]}o.concat(d),s[0]++}return o.sigBytes=4*c,o}}),n.PBKDF2=function(e,t,n){return a.create(n).compute(e,t)},e.PBKDF2)}),evpkdf=createCommonjsModule(function(e,t){var n,r,d,o,i,a;e.exports=(o=(n=e=core).lib,r=o.Base,d=o.WordArray,o=n.algo,i=o.MD5,a=o.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:i,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=n.hasher.create(),o=d.create(),i=o.words,a=n.keySize,s=n.iterations;i.length<a;){c&&r.update(c);var c=r.update(e).finalize(t);r.reset();for(var l=1;l<s;l++)c=r.finalize(c),r.reset();o.concat(c)}return o.sigBytes=4*a,o}}),n.EvpKDF=function(e,t,n){return a.create(n).compute(e,t)},e.EvpKDF)}),cipherCore=createCommonjsModule(function(e,t){var n,r,a,o,i,s,c,l,d,u,p,h,f;e.exports=void((e=core).lib.Cipher||(n=(e=e).lib,r=n.Base,a=n.WordArray,o=n.BufferedBlockAlgorithm,(u=e.enc).Utf8,i=u.Base64,s=e.algo.EvpKDF,c=n.Cipher=o.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function o(e){return"string"==typeof e?f:p}return function(r){return{encrypt:function(e,t,n){return o(t).encrypt(r,e,t,n)},decrypt:function(e,t,n){return o(t).decrypt(r,e,t,n)}}}}()}),n.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),u=e.mode={},l=n.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),u=u.CBC=function(){var e=l.extend();function i(e,t,n){var r,o=this._iv;o?(r=o,this._iv=void 0):r=this._prevBlock;for(var i=0;i<n;i++)e[t+i]^=r[i]}return e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;i.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),e.Decryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,o=e.slice(t,t+r);n.decryptBlock(e,t),i.call(this,e,t,r),this._prevBlock=o}}),e}(),h=(e.pad={}).Pkcs7={pad:function(e,t){for(var t=4*t,n=t-e.sigBytes%t,r=n<<24|n<<16|n<<8|n,o=[],i=0;i<n;i+=4)o.push(r);t=a.create(o,n);e.concat(t)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.BlockCipher=c.extend({cfg:c.cfg.extend({mode:u,padding:h}),reset:function(){c.reset.call(this);var e,t=this.cfg,n=t.iv,t=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=t.createEncryptor:(e=t.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(t,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),d=n.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),u=(e.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,e=e.salt;return(e?a.create([1398893684,1701076831]).concat(e).concat(t):t).toString(i)},parse:function(e){var t,e=i.parse(e),n=e.words;return 1398893684==n[0]&&1701076831==n[1]&&(t=a.create(n.slice(2,4)),n.splice(0,4),e.sigBytes-=16),d.create({ciphertext:e,salt:t})}},p=n.SerializableCipher=r.extend({cfg:r.extend({format:u}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var o=e.createEncryptor(n,r),t=o.finalize(t),o=o.cfg;return d.create({ciphertext:t,key:n,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),h=(e.kdf={}).OpenSSL={execute:function(e,t,n,r){r=r||a.random(8);e=s.create({keySize:t+n}).compute(e,r),n=a.create(e.words.slice(t),4*n);return e.sigBytes=4*t,d.create({key:e,iv:n,salt:r})}},f=n.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:h}),encrypt:function(e,t,n,r){n=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize),r.iv=n.iv,e=p.encrypt.call(this,e,t,n.key,r);return e.mixIn(n),e},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);n=r.kdf.execute(n,e.keySize,e.ivSize,t.salt);return r.iv=n.iv,p.decrypt.call(this,e,t,n.key,r)}})))}),modeCfb=createCommonjsModule(function(e,t){var n;e.exports=((n=core).mode.CFB=function(){var e=n.lib.BlockCipherMode.extend();function i(e,t,n,r){var o,i=this._iv;i?(o=i.slice(0),this._iv=void 0):o=this._prevBlock,r.encryptBlock(o,0);for(var a=0;a<n;a++)e[t+a]^=o[a]}return e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;i.call(this,e,t,r,n),this._prevBlock=e.slice(t,t+r)}}),e.Decryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,o=e.slice(t,t+r);i.call(this,e,t,r,n),this._prevBlock=o}}),e}(),n.mode.CFB)}),modeCtr=createCommonjsModule(function(e,t){var n;e.exports=((n=core).mode.CTR=function(){var e=n.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,o=this._iv,i=this._counter,a=(o&&(i=this._counter=o.slice(0),this._iv=void 0),i.slice(0));n.encryptBlock(a,0),i[r-1]=i[r-1]+1|0;for(var s=0;s<r;s++)e[t+s]^=a[s]}});return e.Decryptor=t,e}(),n.mode.CTR)}),modeCtrGladman=createCommonjsModule(function(e,t){var n;e.exports=((n=core).mode.CTRGladman=function(){var e=n.lib.BlockCipherMode.extend();function c(e){var t,n,r;return 255==(e>>24&255)?(n=e>>8&255,r=255&e,255===(t=e>>16&255)?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e=(e+=t<<16)+(n<<8)+r):e+=1<<24,e}var t=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,o=this._iv,i=this._counter,a=(o&&(i=this._counter=o.slice(0),this._iv=void 0),0===((o=i)[0]=c(o[0]))&&(o[1]=c(o[1])),i.slice(0));n.encryptBlock(a,0);for(var s=0;s<r;s++)e[t+s]^=a[s]}});return e.Decryptor=t,e}(),n.mode.CTRGladman)}),modeOfb=createCommonjsModule(function(e,t){var n;e.exports=((n=core).mode.OFB=function(){var e=n.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,o=this._iv,i=this._keystream;o&&(i=this._keystream=o.slice(0),this._iv=void 0),n.encryptBlock(i,0);for(var a=0;a<r;a++)e[t+a]^=i[a]}});return e.Decryptor=t,e}(),n.mode.OFB)}),modeEcb=createCommonjsModule(function(e,t){var n;e.exports=((n=core).mode.ECB=function(){var e=n.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),e.Decryptor=e.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),e}(),n.mode.ECB)}),padAnsix923=createCommonjsModule(function(e,t){e.exports=((e=core).pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,t=4*t,t=t-n%t,n=n+t-1;e.clamp(),e.words[n>>>2]|=t<<24-n%4*8,e.sigBytes+=t},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Ansix923)}),padIso10126=createCommonjsModule(function(e,t){var n;e.exports=((n=core).pad.Iso10126={pad:function(e,t){t*=4,t-=e.sigBytes%t;e.concat(n.lib.WordArray.random(t-1)).concat(n.lib.WordArray.create([t<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.pad.Iso10126)}),padIso97971=createCommonjsModule(function(e,t){var n;e.exports=((n=core).pad.Iso97971={pad:function(e,t){e.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(e,t)},unpad:function(e){n.pad.ZeroPadding.unpad(e),e.sigBytes--}},n.pad.Iso97971)}),padZeropadding=createCommonjsModule(function(e,t){e.exports=((e=core).pad.ZeroPadding={pad:function(e,t){t*=4;e.clamp(),e.sigBytes+=t-(e.sigBytes%t||t)},unpad:function(e){for(var t=e.words,n=e.sigBytes-1;!(t[n>>>2]>>>24-n%4*8&255);)n--;e.sigBytes=n+1}},e.pad.ZeroPadding)}),padNopadding=createCommonjsModule(function(e,t){e.exports=((e=core).pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding)}),formatHex=createCommonjsModule(function(e,t){var n,r;e.exports=(n=(e=core).lib.CipherParams,r=e.enc.Hex,e.format.Hex={stringify:function(e){return e.ciphertext.toString(r)},parse:function(e){e=r.parse(e);return n.create({ciphertext:e})}},e.format.Hex)}),aes=createCommonjsModule(function(e,t){e.exports=function(e){for(var t=e,n,r=t.lib.BlockCipher,o=t.algo,u=[],i=[],a=[],s=[],c=[],l=[],p=[],h=[],f=[],m=[],d=[],A=0;A<256;A++)if(A<128)d[A]=A<<1;else d[A]=A<<1^283;for(var y=0,_=0,A=0;A<256;A++){var g=_^_<<1^_<<2^_<<3^_<<4;g=g>>>8^g&255^99;u[y]=g;i[g]=y;var v=d[y];var S=d[v];var b=d[S];var w=d[g]*257^g*16843008;a[y]=w<<24|w>>>8;s[y]=w<<16|w>>>16;c[y]=w<<8|w>>>24;l[y]=w;var w=b*16843009^S*65537^v*257^y*16843008;p[g]=w<<24|w>>>8;h[g]=w<<16|w>>>16;f[g]=w<<8|w>>>24;m[g]=w;if(!y)y=_=1;else{y=v^d[d[d[b^v]]];_^=d[d[_]]}}var C=[0,1,2,4,8,16,32,64,128,27,54],k=o.AES=r.extend({_doReset:function e(){if(this._nRounds&&this._keyPriorReset===this._key)return;var t=this._keyPriorReset=this._key;var n=t.words;var r=t.sigBytes/4;var o=this._nRounds=r+6;var i=(o+1)*4;var a=this._keySchedule=[];for(var s=0;s<i;s++)if(s<r)a[s]=n[s];else{var c=a[s-1];if(!(s%r)){c=c<<8|c>>>24;c=u[c>>>24]<<24|u[c>>>16&255]<<16|u[c>>>8&255]<<8|u[c&255];c^=C[s/r|0]<<24}else if(r>6&&s%r==4)c=u[c>>>24]<<24|u[c>>>16&255]<<16|u[c>>>8&255]<<8|u[c&255];a[s]=a[s-r]^c}var l=this._invKeySchedule=[];for(var d=0;d<i;d++){var s=i-d;if(d%4)var c=a[s];else var c=a[s-4];if(d<4||s<=4)l[d]=c;else l[d]=p[u[c>>>24]]^h[u[c>>>16&255]]^f[u[c>>>8&255]]^m[u[c&255]]}},encryptBlock:function e(t,n){this._doCryptBlock(t,n,this._keySchedule,a,s,c,l,u)},decryptBlock:function e(t,n){var r=t[n+1];t[n+1]=t[n+3];t[n+3]=r;this._doCryptBlock(t,n,this._invKeySchedule,p,h,f,m,i);var r=t[n+1];t[n+1]=t[n+3];t[n+3]=r},_doCryptBlock:function e(t,n,r,o,i,a,s,c){var l=this._nRounds;var d=t[n]^r[0];var u=t[n+1]^r[1];var p=t[n+2]^r[2];var h=t[n+3]^r[3];var f=4;for(var m=1;m<l;m++){var A=o[d>>>24]^i[u>>>16&255]^a[p>>>8&255]^s[h&255]^r[f++];var y=o[u>>>24]^i[p>>>16&255]^a[h>>>8&255]^s[d&255]^r[f++];var _=o[p>>>24]^i[h>>>16&255]^a[d>>>8&255]^s[u&255]^r[f++];var g=o[h>>>24]^i[d>>>16&255]^a[u>>>8&255]^s[p&255]^r[f++];d=A;u=y;p=_;h=g}var A=(c[d>>>24]<<24|c[u>>>16&255]<<16|c[p>>>8&255]<<8|c[h&255])^r[f++];var y=(c[u>>>24]<<24|c[p>>>16&255]<<16|c[h>>>8&255]<<8|c[d&255])^r[f++];var _=(c[p>>>24]<<24|c[h>>>16&255]<<16|c[d>>>8&255]<<8|c[u&255])^r[f++];var g=(c[h>>>24]<<24|c[d>>>16&255]<<16|c[u>>>8&255]<<8|c[p&255])^r[f++];t[n]=A;t[n+1]=y;t[n+2]=_;t[n+3]=g},keySize:256/32});return t.AES=r._createHelper(k),e.AES}(core)}),tripledes=createCommonjsModule(function(e,t){function d(e,t){t=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=t,this._lBlock^=t<<e}function u(e,t){t=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=t,this._rBlock^=t<<e}var n,r,o,l,p,h,f,m,i,a;e.exports=(o=(n=e=core).lib,r=o.WordArray,o=o.BlockCipher,a=n.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],p=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],h=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],m=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],i=a.DES=o.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var r=l[n]-1;t[n]=e[r>>>5]>>>31-r%32&1}for(var o=this._subKeys=[],i=0;i<16;i++){for(var a=o[i]=[],s=h[i],n=0;n<24;n++)a[n/6|0]|=t[(p[n]-1+s)%28]<<31-n%6,a[4+(n/6|0)]|=t[28+(p[n+24]-1+s)%28]<<31-n%6;a[0]=a[0]<<1|a[0]>>>31;for(n=1;n<7;n++)a[n]=a[n]>>>4*(n-1)+3;a[7]=a[7]<<5|a[7]>>>27}for(var c=this._invSubKeys=[],n=0;n<16;n++)c[n]=o[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],d.call(this,4,252645135),d.call(this,16,65535),u.call(this,2,858993459),u.call(this,8,16711935),d.call(this,1,1431655765);for(var r=0;r<16;r++){for(var o=n[r],i=this._lBlock,a=this._rBlock,s=0,c=0;c<8;c++)s|=f[c][((a^o[c])&m[c])>>>0];this._lBlock=a,this._rBlock=i^s}var l=this._lBlock;this._lBlock=this._rBlock,this._rBlock=l,d.call(this,1,1431655765),u.call(this,8,16711935),u.call(this,2,858993459),d.call(this,16,65535),d.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2}),n.DES=o._createHelper(i),a=a.TripleDES=o.extend({_doReset:function(){var e=this._key.words;this._des1=i.createEncryptor(r.create(e.slice(0,2))),this._des2=i.createEncryptor(r.create(e.slice(2,4))),this._des3=i.createEncryptor(r.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2}),n.TripleDES=o._createHelper(a),e.TripleDES)}),rc4=createCommonjsModule(function(e,t){function n(){for(var e=this._S,t=this._i,n=this._j,r=0,o=0;o<4;o++){var n=(n+e[t=(t+1)%256])%256,i=e[t];e[t]=e[n],e[n]=i,r|=e[(e[t]+e[n])%256]<<24-8*o}return this._i=t,this._j=n,r}var r,o,i,a;e.exports=(o=(r=e=core).lib.StreamCipher,a=r.algo,i=a.RC4=o.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,r=this._S=[],o=0;o<256;o++)r[o]=o;for(var o=0,i=0;o<256;o++){var a=o%n,a=t[a>>>2]>>>24-a%4*8&255,i=(i+r[o]+a)%256,a=r[o];r[o]=r[i],r[i]=a}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=n.call(this)},keySize:8,ivSize:0}),r.RC4=o._createHelper(i),a=a.RC4Drop=i.extend({cfg:i.cfg.extend({drop:192}),_doReset:function(){i._doReset.call(this);for(var e=this.cfg.drop;0<e;e--)n.call(this)}}),r.RC4Drop=o._createHelper(a),e.RC4)}),rabbit=createCommonjsModule(function(e,t){function c(){for(var e=this._X,t=this._C,n=0;n<8;n++)a[n]=t[n];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0;for(n=0;n<8;n++){var r=e[n]+t[n],o=65535&r,i=r>>>16;s[n]=((o*o>>>17)+o*i>>>15)+i*i^((4294901760&r)*r|0)+((65535&r)*r|0)}e[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,e[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,e[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,e[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,e[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,e[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,e[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,e[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}var n,r,o,a,s,i;e.exports=(r=(n=e=core).lib.StreamCipher,i=n.algo,o=[],a=[],s=[],i=i.Rabbit=r.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);for(var r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],o=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]],n=this._b=0;n<4;n++)c.call(this);for(n=0;n<8;n++)o[n]^=r[n+4&7];if(t){var t=t.words,i=t[0],t=t[1],i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t=16711935&(t<<8|t>>>24)|4278255360&(t<<24|t>>>8),a=i>>>16|4294901760&t,s=t<<16|65535&i;o[0]^=i,o[1]^=a,o[2]^=t,o[3]^=s,o[4]^=i,o[5]^=a,o[6]^=t,o[7]^=s;for(n=0;n<4;n++)c.call(this)}},_doProcessBlock:function(e,t){var n=this._X;c.call(this),o[0]=n[0]^n[5]>>>16^n[3]<<16,o[1]=n[2]^n[7]>>>16^n[5]<<16,o[2]=n[4]^n[1]>>>16^n[7]<<16,o[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)o[r]=16711935&(o[r]<<8|o[r]>>>24)|4278255360&(o[r]<<24|o[r]>>>8),e[t+r]^=o[r]},blockSize:4,ivSize:2}),n.Rabbit=r._createHelper(i),e.Rabbit)}),rabbitLegacy=createCommonjsModule(function(e,t){function s(){for(var e=this._X,t=this._C,n=0;n<8;n++)a[n]=t[n];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0;for(n=0;n<8;n++){var r=e[n]+t[n],o=65535&r,i=r>>>16;c[n]=((o*o>>>17)+o*i>>>15)+i*i^((4294901760&r)*r|0)+((65535&r)*r|0)}e[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,e[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,e[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,e[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,e[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,e[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,e[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,e[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}var n,r,o,a,c,i;e.exports=(r=(n=e=core).lib.StreamCipher,i=n.algo,o=[],a=[],c=[],i=i.RabbitLegacy=r.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]],o=this._b=0;o<4;o++)s.call(this);for(o=0;o<8;o++)r[o]^=n[o+4&7];if(t){var e=t.words,t=e[0],e=e[1],t=16711935&(t<<8|t>>>24)|4278255360&(t<<24|t>>>8),e=16711935&(e<<8|e>>>24)|4278255360&(e<<24|e>>>8),i=t>>>16|4294901760&e,a=e<<16|65535&t;r[0]^=t,r[1]^=i,r[2]^=e,r[3]^=a,r[4]^=t,r[5]^=i,r[6]^=e,r[7]^=a;for(o=0;o<4;o++)s.call(this)}},_doProcessBlock:function(e,t){var n=this._X;s.call(this),o[0]=n[0]^n[5]>>>16^n[3]<<16,o[1]=n[2]^n[7]>>>16^n[5]<<16,o[2]=n[4]^n[1]>>>16^n[7]<<16,o[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)o[r]=16711935&(o[r]<<8|o[r]>>>24)|4278255360&(o[r]<<24|o[r]>>>8),e[t+r]^=o[r]},blockSize:4,ivSize:2}),n.RabbitLegacy=r._createHelper(i),e.RabbitLegacy)}),_cryptoJs_3_3_0_cryptoJs=createCommonjsModule(function(e,t){e.exports=core});function encrypt(e,t){t=_cryptoJs_3_3_0_cryptoJs.enc.Utf8.parse(t);return _cryptoJs_3_3_0_cryptoJs.AES.encrypt(e,t,{mode:_cryptoJs_3_3_0_cryptoJs.mode.ECB,padding:_cryptoJs_3_3_0_cryptoJs.pad.Pkcs7}).toString()}function decrypt(e,t){t=_cryptoJs_3_3_0_cryptoJs.enc.Utf8.parse(t),e=_cryptoJs_3_3_0_cryptoJs.AES.decrypt(e,t,{mode:_cryptoJs_3_3_0_cryptoJs.mode.ECB,padding:_cryptoJs_3_3_0_cryptoJs.pad.Pkcs7});return _cryptoJs_3_3_0_cryptoJs.enc.Utf8.stringify(e)}function md5Encrypt(e){return _cryptoJs_3_3_0_cryptoJs.MD5(e)}function base64(e){e=_cryptoJs_3_3_0_cryptoJs.enc.Utf8.parse(window.encodeURIComponent(e));return _cryptoJs_3_3_0_cryptoJs.enc.Base64.stringify(e)}function getDeviceInfo(){return""}function getDeviceOS(){var e=navigator.userAgent;if(/iPhone/i.test(e))return"iPhone";if(/iPad/i.test(e))return"iPad";if(/Android/i.test(e))return"Android";var t=navigator.platform;if(/^(Mac68K|MacPPC|Macintosh|MacIntel)$/i.test(t))return"Mac";if(/Linux/i.test(t))return"Linux";if(/^(Win32|Windows)$/i.test(t)){if(0<e.search(/Windows NT 5\.0|Windows 2000/))return"Win2000";if(0<e.search(/Windows NT 5\.1|Windows XP/))return"WinXP";if(0<e.search(/Windows NT 5\.2|Windows 2003/))return"Win2003";if(0<e.search(/Windows NT 6\.0|Windows Vista/))return"WinVista";if(0<e.search(/Windows NT 6\.1|Windows 7/))return"Win7";if(0<e.search(/Windows NT 6\.2|Windows 8/))return"Win8";if(0<e.search(/Windows NT 10\.0|Windows NT 6\.4|Windows 10/))return"Win10"}return/^X11$/.test(t)?"Unix":"other"}function getBrowserInfo(e){var t,n=navigator.userAgent.toLowerCase(),r="",o="";return/msie ([\d.]+)/.test(n)?(r="Trident",o=n.match(/msie ([\d.]+)/)[1]):/micromessenger\/([\d.]+)/.test(n)?(t=n.match(/micromessenger\/([\d.]+)/),r="iphone"==getDeviceInfo().toLowerCase()?"WeixinAppleWebKit":"WeixinAndroidWebKit",o=t[1]):/firefox\/([\d.]+)/.test(n)?(r="Gecko",o=n.match(/firefox\/([\d.]+)/)[1]):/chrome\/([\d.]+)/.test(n)?(r="WebKit",o=n.match(/chrome\/([\d.]+)/)[1]):/opera.([\d.]+)/.test(n)?(r="Presto",o=n.match(/opera.([\d.]+)/)[1]):/version\/([\d.]+).*safari/.test(n)&&(r="WebKit",o=n.match(/version\/([\d.]+).*safari/)[1]),"kernel"==e||"name"==e?r:"version"==e?o:""}function _webglInfo(e){var t,n=document.createElement("canvas").getContext("experimental-webgl"),r=null,o="",i=getDeviceOS().toLowerCase();return null!=(r="getExtension"in n?n.getExtension("WEBGL_debug_renderer_info"):r)&&(o=(o="getParameter"in n?n.getParameter(r[e]):o)&&o.toString().toUpperCase().trim()),"iphone"!==i&&"ipad"!==i||(t="getParameter"in n?n.getParameter(n.VERSION):t)&&(t=t.toString().toUpperCase().trim(),o=o?o+"__"+t:t),o}function getMobileDeviceGPU(){var e=getDeviceOS().toLowerCase(),t="";try{t=_webglInfo("UNMASKED_RENDERER_WEBGL")}catch(e){return"UNKNOWN"}return"iphone"===e||"ipad"===e?0<t.indexOf("A6")?"iPhone5":0<t.indexOf("A7")?"iPhone5s":-1<t.indexOf("POWERVR SGX 543")?"iPhone5c":0<t.indexOf("A8")?"iPhone6":0<t.indexOf("A9")?"iPhone6s":!(0<t.indexOf("A10"))&&0<t.search(/A11|A12|A13|A14|A15|A16/i)?"iPhone8":"iPhone7":"android"===e?{"ADRENO (TM) 505":"AndroidMedium"}[t]||"AndroidMedium":"UNKNOWN"}function getClientType(){var e=getDeviceOS().toLowerCase();return"iphone"===e||"ipad"===e?6:"android"===e?7:3}function screenOrientation(){switch(window.orientation){case 0:case 180:return"portrait";case-90:case 90:return"landscape";default:return"unknown"}}function getScreenSize(){var e=window.innerHeight,t=document.documentElement,n=t.clientWidth,t=t.clientHeight;return{width:n,height:t<(e=isIniOSWeixin()?document.body.clientHeight:e)?t:e}}function isIniOSWeixin(){return"WeixinAppleWebKit"==getBrowserInfo("kernel")}var SDK_VERSION="h5-master-6.33.1-cf8b3f36",CRYPT_KEY_PREFIX="web0123456789012",API_VERSION="3.0.11",saasConf={saasUrl:"https://saasauth-pre.cmgame.com/rest/api",envType:""},loggerConf={logUrl:"https://countly01.cmgame.com:44301",appKey:"9c0edb3f80d8d9adc71bb544b6dc87743340e829",timeStamp:Date.now()},mouseType={down:1,up:2,move:3},stopByApp={app:1,server:0};function getSDKPath(e){var t="",n=document.getElementsByTagName("script");if(n&&0<n.length)for(var r in n){var r=n[r].src,o=r&&r.indexOf(e);if(0<o){t=r.slice(0,o);break}}return t}function hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function mixTips(e,t){if("string"!==typeCheck(e))return"";for(var n=0;n<t.length;++n)e=e.replace("|",t[n]);return e.replace(/\n/g,"<br />")}function createUID(e){for(var t="",n="0123456789abcdef",r=0;r<8;++r)t+=n.charAt(Math.round(15*Math.random()));for(var o=0;o<3;++o){t+="-";for(var i=0;i<4;i++)t+=n.charAt(Math.round(15*Math.random()))}for(var t=(t+="-")+("0000000"+(new Date).getTime().toString(16).toUpperCase()).substr(-8),a=0;a<4;a++)t+=n.charAt(Math.round(15*Math.random()));return"".concat(t,"-").concat(e).concat(getDeviceOS()).concat(getBrowserInfo("name"))}function formatMS(e,t){var n,r="",e=e/1e3;return 3600<e&&((n=Math.floor(e/3600))&&(r+="".concat(n).concat(t.hour)),e%=3600),60<e&&((n=Math.floor(e/60))&&(r+="".concat(n).concat(t.minute)),e%=60),(e=Math.ceil(e))&&(r+="".concat(e).concat(t.seconds)),r}function getRandomString(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:16,t="abcdefghijklmnopqrstuvwxyz0123456789",n=t.charAt(Math.floor(26*Math.random())),r=0;r<e-1;++r)n+=t.charAt(Math.floor(Math.random()*t.length));return n}function indexBy(e,t,n){if(!e||!t)return{};var r,o={};for(r in e){var i=e[r];i&&i[t]&&(o[i[t]]=n?i[n]||"":i)}return o}function mixErrorCodeHtml(e,t,n,r){t=t||e||r+(n?"["+n+"]":"");return t=n?"".concat(t,"[").concat(n,"]"):t}function isSupportRTC(){var e=window.RTCPeerConnection||window.webkitRTCPeerConnection||window.mozRTCPeerConnection;try{new e(null)}catch(e){return!1}return!0}function getGameAspectRatio(e,t){return e&&t?e<t?e/t:t/e:.5625}function autoPlayVideo(e){var t=document.getElementById(e);t&&(window.WeixinJSBridge?WeixinJSBridge.invoke("getNetworkType",{},function(){t.play()},!1):document.addEventListener("WeixinJSBridgeReady",function(){WeixinJSBridge.invoke("getNetworkType",{},function(){t.play()})},!1),t.play(),t.addEventListener("pause",t.play),t.addEventListener("loadeddata",t.play),t.parentNode.addEventListener("touchend",function(){t.paused&&t.play()}),t.previousElementSibling.addEventListener("touchend",function(){t.paused&&t.play()},!0))}function setCacheGameInfo(e,t){var n=getCacheGameInfo();n[e]=t,sessionStorage.setItem("hm_cloudPlay",JSON.stringify(n))}function getCacheGameInfo(){var e=sessionStorage.getItem("hm_cloudPlay");return e?JSON.parse(e):{}}function isIE10(){return!(window.navigator.userAgent.toLowerCase().indexOf("msie")<0)&&/MSIE\s+10.0/i.test(navigator.userAgent)&&function(){return void 0===this}()}function isIE(){return!!(window.ActiveXObject||"ActiveXObject"in window)}function isObject$2(e){return"[object Object]"===Object.prototype.toString.call(e)}function emptyFunction(){}function isImage(e){var t;return null==e||"undefined"==e||e.length<8?null:(arraycopy(e,0,[],0,6),arraycopy(e,6,t=[],0,4),isJpeg(t)?"image/jpeg":(arraycopy(e,0,t=[],0,8),isPng(t)?"image/png":null))}function arraycopy(e,t,n,r,o){for(var i=0;i<o;i++)n[r+i]=e[t+i]}function arrayEquals(e,t){if("undefined"!=e&&"undefined"!=t&&e instanceof Array&&t instanceof Array){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}return!1}var pngMagic=[137,80,78,71,13,10,26,10],jpeg_jfif=[74,70,73,70],jpeg_exif=[69,120,105,102],jpegMagic=[255,216,255,224];function isJpeg(e){return arrayEquals(e,jpegMagic)||arrayEquals(e,jpeg_jfif)||arrayEquals(e,jpeg_exif)}function isPng(e){return arrayEquals(e,pngMagic)}function paramInObj(e,t,n){var r=!1;return e.map(function(e){e[t]==n&&(r=!0)}),r}function getViewResolutionStr(e,t){var n="";return n="NaN"!=parseFloat(e).toString()&&"NaN"!=parseFloat(t).toString()?t<e?e+"x"+t:t+"x"+e:n}function typeCheck(e){e=Object.prototype.toString.call(e);return e.substring(8,e.length-1).toLowerCase()}function resInfoCurBitrate(e,t){for(var n=0;n<t.length;n++)if(e==t[n].id)return parseInt(t[n].bitRate)}function numToString(e){return void 0===e||null==e||isNaN(e)?"-1":e.toString()}function divideBy2(e){return parseInt(e,2)}function assiginObj(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=t;if("object"!=_typeof(t)||"object"!=_typeof(n))return n;for(e in n)hasOwnProperty(t,e)?r[e]=assiginObj(t[e],n[e]):r[e]=n[e];return r}function isArray$1(e){e=Object.prototype.toString.call(e);return"array"===e.substring(8,e.length-1).toLowerCase()}function ajax(e){var t=e.url,n=e.data,r=e.done,o=e.timeout,i=void 0===o?10:o,o=e.contentType,o=void 0===o?"application/x-www-form-urlencoded":o,a=e.retryRequestCount,s=new XMLHttpRequest,c=null;return"get"===e.method.toLowerCase()?(s.open("GET",t,!0),s.send()):"post"===e.method.toLowerCase()&&(s.open("POST",t,!0),s.setRequestHeader("Content-type",o),s.send(n)),s.onreadystatechange=function(){4===s.readyState&&(200<=s.status&&s.status<300||304===s.status?r(!0,{statusCode:s.status,message:"",timeout:1e3*i,retryRequestCount:a},s.responseText):r(!1,{statusCode:s.status,message:"",timeout:1e3*i,retryRequestCount:a},""),clearTimeout(c),s=void 0)},c=setTimeout(function(){s.abort()},1e3*i),function(){s&&(s.onreadystatechange=null,clearTimeout(c),s=c=void 0)}}function http(e){var r,o=e.url,i=e.data,a=e.method,s=e.contentType,t=e.timeout,c=e.retryCount,l=e.done,e=e.retryInterval,d=void 0===e?500:e,u=1;return isArray$1(c)&&0<c.length?(u=c.length,r=l,ajax({url:o,data:i,method:a,contentType:s,done:l=function(e,t,n){e?r(!0,t,n):--u<=0?r(!1,t,n):setTimeout(function(){ajax({url:o,data:i,method:a,contentType:s,done:l,timeout:c[u-1],retryRequestCount:c.length-u})},d)},timeout:c[u-1],retryRequestCount:0})):ajax({url:o,data:i,method:a,contentType:s,done:l,timeout:t,retryRequestCount:0})}function json2url(e){var t,n=[];for(t in e)n.push("".concat(t,"=").concat(e[t]));return n.join("&")}var SaasRequest=function(){function n(e,t){_classCallCheck(this,n),this.accessKeyId=e,this.channelId=t,this.envType=saasConf.envType,this.clientType=getClientType(),this.device=this.deviceInfo(),this.retryCount=[10,10,10,10,10,10]}return _createClass(n,[{key:"deviceInfo",value:function(){return{hardDecoderSupported:"1",osName:getDeviceOS(),osVersion:getDeviceOS(),webInfo:{installLocSignYN:"",cookieId:"",userAgent:navigator.userAgent||"",browserType:navigator.vendor||"",platform:navigator.platform||"",browserVersion:getBrowserInfo("version"),browserKernel:getBrowserInfo("kernel"),browserKernelVersion:navigator.appVersion.substring(navigator.appVersion.lastIndexOf("/")+1,navigator.appVersion.length),flashPlayerVersion:-1},screenInfo:{dpi:"",resolution:"".concat(screen.width,"*").concat(screen.height)}}}},{key:"http",value:function(i,e,a){var s=this,c={url:saasConf.saasUrl,action:i,startTime:(new Date).getTime(),responseTime:0,time:0,result:"",msg:""},t=localStorage.getItem(md5Encrypt("did"))||"",n="",l="",l=/^(104|108|211|217|218|113|112|219|220|221|223|304|305|306|308|309|310)$/.test(i)?(n=getRandomString(),"".concat(CRYPT_KEY_PREFIX).concat(n)):(n=e.cid,this.secretKey),r={accessKeyID:this.accessKeyId,channel:this.channelId,packageName:"haima",sdkVersion:SDK_VERSION},n={action:{actId:i,transId:"".concat((new Date).getTime()).concat(getRandomString(4)),protocol:API_VERSION,random:n,sdkType:this.clientType,did:t,clientTransId:this.clientTransId},language:this.language||"zh_CN",data:encrypt(JSON.stringify(e),l),device:encrypt(JSON.stringify(this.device),l),client:encrypt(JSON.stringify(r),l)},t=json2url({t:n.action.clientTransId,a:n.action.actId,b:r.accessKeyID,d:n.action.did,u:this.userInfo.uId,p:e.packageName||"",g:e.appChannel||"",ct:n.action.sdkType,dt:(new Date).getTime()}),r="".concat(saasConf.saasUrl,"?").concat(t);this._ajaxRelease=http({url:r,data:JSON.stringify(n),method:"post",contentType:"application/json",retryCount:this.retryCount,timeout:10,retryInterval:2e3,done:function(e,t,n){if(c.responseTime=(new Date).getTime(),c.time=c.responseTime-c.startTime,c.result=e?"success":"failed",e){e=null;try{e=JSON.parse(n)}catch(e){throw new Error(s.sdkTips.responseDataError)}var r=e,o=r.code,r=r.errorCode;if(0!=o&&(c.msg="".concat(i," ").concat(o," ").concat(e.errorMsg," ").concat(e.errorCode)),(0===o||20303===o||e.data)&&(!r||"0"===r))try{e.data=JSON.parse(decrypt(e.data,l))}catch(e){throw new Error(s.sdkTips.responseDataError)}0===o&&r&&"0"!==r&&(e.code=r),a(!0,t,e,c)}else c.msg="".concat(i," ").concat(t.status),a(!1,t,n,c)}})}},{key:"setClientTransId",value:function(e){this.clientTransId=e}},{key:"setRetryCount",value:function(e){this.retryCount=e}},{key:"setSecretKey",value:function(e){this.secretKey=e}},{key:"setUserInfo",value:function(e){this.userInfo=e}},{key:"setLanguage",value:function(e,t){this.language=e,this.sdkTips=t}},{key:"getDid",value:function(e,t){e={did:e,clientType:this.clientType,envType:this.envType};this.http("104",e,t)}},{key:"getConfig",value:function(e,t,n,r,o,i,a,s){e={clientType:this.clientType,packageName:e,type:t,accessKeyId:this.accessKeyId,envType:this.envType,appChannel:n,streamingTypes:i,sdkAbility:[a]};r&&o&&(e.viewResolution=getViewResolutionStr(r,o)),this.http("108",e,s)}},{key:"getSteamInfo",value:function(e,t){var n,r={envType:this.envType,channel:this.channelId,clientType:this.clientType,deviceType:getMobileDeviceGPU(),syncRefresh:!0,confirm:e.confirm||0,userInfo:{userId:e.userInfo.uId,token:e.userInfo.uToken,userType:e.userInfo.uType,uLevel:e.userInfo.uLevel},configInfo:e.configInfo,pkgName:e.pkgName,cToken:e.cToken,orientation:e.orientation||1,playingtime:1e3*e.playingtime,opType:e.opType||1,isArchive:!!hasOwnProperty(e,"isArchive")&&e.isArchive,streamingTypes:e.streamingTypes,cid:e.cid||"",isHotUpdate:!!hasOwnProperty(e,"isHotUpdate")&&e.isHotUpdate,protoData:e.protoData||"",appChannel:e.appChannel||"",bitRate:-1,payStr:e.payStr||"",priority:e.priority||0,extraId:e.extraId||"",noInputTimeout:e.noInputTimeout||"",archiveFromBid:e.archiveFromBid||"",archiveFromUserId:e.archiveFromUserId||"",componentType:e.componentType||0,action:e.action||"",componentName:e.componentName||"",extraData:e.extraData||"",sdkAbility:e.sdkAbility,richData:null,resolution:-1};if(/^([1-9]+)(\d*)$/.test(e.bitRate)&&(r.bitRate=21474e5<e.bitRate?21474e5:parseInt(e.bitRate)),e.viewResolutionWidth&&(n="",e.viewResolutionWidth||e.viewResolutionHeight)&&(n=getViewResolutionStr(e.viewResolutionWidth,e.viewResolutionHeight))&&(r.viewResolution=n),e.paramsExtension)for(var o in e.paramsExtension)r[o]=e.paramsExtension[o];"object"===typeCheck(e.richData)&&(r.richData=e.richData),/^([1-9]+)(\d*)$/.test(e.resolutionId)&&(r.resolution=e.resolutionId),this.http("211",r,t)}},{key:"releaseCid",value:function(e,t,n){e={cid:e,archiveMinSeconds:t||0,envType:this.envType};this.http("202",e,n)}},{key:"cloudService",value:function(e,t,n,r,o,i,a){t={cid:t,sign:n,clientType:this.clientType,orientation:1,playingtime:1e3*e.playingtime,opType:o,envType:this.envType,isArchive:!!e.isArchive,resolution:i,confirm:r,priority:e.priority||0,payStr:e.payStr||""};3!=this.clientType&&(t.deviceType=getMobileDeviceGPU()),e.viewResolutionWidth&&(n="",e.viewResolutionWidth||e.viewResolutionHeight)&&(n=getViewResolutionStr(e.viewResolutionWidth,e.viewResolutionHeight))&&(t.viewResolution=n),this.http("201",t,a)}},{key:"getGameArchiveStatus",value:function(e,t,n,r){e={pkgName:e,userInfo:{userId:(this.userInfo=t).uId,token:t.uToken,userType:t.uType||0,uLevel:t.uLevel||""},appChannel:n,envType:this.envType};this.http("112",e,r)}},{key:"hasGameArchived",value:function(e,t,n,r){e={pkgName:e,userInfo:{userId:(this.userInfo=t).uId,token:t.uToken,userType:t.uType||0,uLevel:t.uLevel||""},appChannel:n,envType:this.envType};this.http("113",e,r)}},{key:"updateUID",value:function(e,t,n){t={envType:this.envType,cid:t.cid,playingTime:t.playingTime,userInfo:{userId:t.userInfo.uId,token:t.userInfo.uToken,userType:t.userInfo.uType||0,uLevel:t.userInfo.uLevel||""},tip:t.tip,cToken:t.cToken,sdkAbility:t.sdkAbility,protoData:e.protoData||""};this.http("214",t,n)}},{key:"checkPlayingGame",value:function(e,t){this.userInfo=e;e={envType:this.envType,userInfo:{userId:e.uId,token:e.uToken,userType:e.uType||0,uLevel:e.uLevel||""}};this.http("217",e,t)}},{key:"releasePlayingGame",value:function(e,t){var n=e.userInfo,e=(this.userInfo=n,{envType:this.envType,cid:e.cid,cToken:e.cToken,pkgName:e.pkgName,playingtime:e.playingtime,appChannel:e.appChannel,userInfo:{userId:n.uId,token:n.uToken,userType:n.uType||0,uLevel:n.uLevel||""}});this.http("218",e,t)}},{key:"toStartLiving",value:function(e,t){e={envType:this.envType,cid:e.cid,livingId:e.roomId,pushStreamUrl:e.streamerUrl};this.http("219",e,t)}},{key:"toGetPinCode",value:function(e,t){e={envType:this.envType,cid:e.cid};this.http("220",e,t)}},{key:"toApplyControlPower",value:function(e,t){var n,r=e;e.richData&&"object"!==typeCheck(e.richData)&&(e.richData=null),r.richData=e.richData||null,e.viewResolutionWidth&&(n="",e.viewResolutionWidth||e.viewResolutionHeight)&&(n=getViewResolutionStr(e.viewResolutionWidth,e.viewResolutionHeight))&&(r.viewResolution=n),e.bitRate&&(0<(n=parseInt(e.bitRate))?21474e5<n&&(n=21474e5):n=-1,r.bitRate=n),3!=this.clientType&&(r.imeType=0),this.http("221",r,t)}},{key:"toEndLiving",value:function(e,t){e={envType:this.envType,cid:e.cid,livingId:e.roomId};this.http("223",e,t)}},{key:"controlPowerDistribute",value:function(e,t){e={cid:e.cid,controlInfos:e.controlInfos,envType:this.envType};this.http("304",e,t)}},{key:"controlPowerQuery",value:function(e,t){e={cid:e,envType:this.envType};this.http("305",e,t)}},{key:"captureGameImage",value:function(e,t){e={cid:e.cid,opType:e.opType,txId:e.txId,uploadUrl:e.uploadUrl,size:e.size,interval:e.interval||"",format:e.format||"",pixel:e.pixel||"",uploadType:e.uploadType||""};this.http("306",e,t)}},{key:"startHuangUp",value:function(e,t){this.http("308",e,t)}},{key:"stopHuangUp",value:function(e,t){this.http("309",e,t)}},{key:"getHangUpTime",value:function(e,t){this.http("310",e,t)}},{key:"httpRequestRelease",value:function(){this._ajaxRelease&&this._ajaxRelease()}}]),n}(),eventEmitter=function(){var o={};function n(e){e?delete o[e]:o={}}return{on:function(e,t){o[e]=t},emit:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];o[e]&&o[e].apply(o,n)},off:n,once:function(e,t){return o[e]=t,n(e),this}}}(),loggerEventId={init_sdk_fun_call:12058,init_sdk_fun_call_multi_error:12106,start_sdk_fun_call_multi_error:12107,init_sdk_fun_failed:12066,apply_game_fun_call:10012,apply_game_fun_failed:12233,restart_game_failed:12236,get_did_start:12063,get_did_succeed:12078,get_did_failed:12079,get_config_start:12084,get_config_succeed:12080,get_config_failed:12081,get_stream_info_start:12120,get_stream_info_succeed:12121,get_stream_info_failed:12122,release_cid_start:12091,release_cid_succeed:12076,release_cid_failed:12077,cloud_service_start:12083,cloud_service_succeed:12074,cloud_service_failed:12075,saas_socket_connect:12088,saas_socket_opened:12089,saas_socket_closed:12090,saas_socket_failed:12050,saas_socket_message:12054,saas_socket_message_parse_error:12230,saas_socket_limit_stop:12909,over_time_get_pong:12311,over_limit_get_pong:12313,saas_socket_ping_pong_delay_time:12152,get_operation_5:12242,get_operation_62:12241,input_socket_connect:12085,input_socket_opened:10021,input_socket_closed:10022,input_socket_ping_pong_delay_time:10050,input_socket_ping_pong_delay_max:10033,input_socket_start_im:12094,input_socket_stop_im:12095,input_socket_connect_failed:12049,screen_socket_connect:12401,screen_socket_opened:12402,screen_socket_closed:12403,screen_socket_reconnect:12404,video_stream_connect:12087,video_stream_connected:12034,video_stream_connect_failed:12036,device_un_support:12300,video_get_data_success:13210,video_decode_failed:13211,audio_stream_connect:12086,audio_stream_connected:12033,audio_stream_connect_failed:12035,video_first_frame_time:12045,webrtc_decode_first_frame_end:13249,page_closed:12111,webrtc_begin_connect:13215,webrtc_send_join:13221,webrtc_receive_offer:13222,webrtc_setRemoteDes_success:13223,webrtc_setRemoteDes_error:13233,webrtc_create_answer_error:13235,webrtc_setLocalDes_success:13236,webrtc_send_candidate:13226,webrtc_send_answer:13224,webrtc_setLocalDes_error:13237,webrtc_receive_candidate:13225,webrtc_addIceCandidate_success:13238,webrtc_addIceCandidate_error:13239,webrtc_ontrack:13240,webrtc_connect_success:13216,webrtc_self_connect_success:13250,webrtc_no_self_connect_success:13251,webrtc_connect_status:13252,webrtc_connect_failed:13217,webrtc_reconnect_failed:13219,webrtc_datachannel_receive:13281,webrtc_datachannel_send:13282,webrtc_signal_server_success:13241,webrtc_signal_server_disconnect:13242,webrtc_signal_server_timeout:13220,webrtc_socket_reconnect:13245,webrtc_receive_audio:13253,webrtc_x86_localIcecandidate:13254,webrtc_x86_currentUseRemoteIcecandidate:13255,webrtc_x86_track:13256,webrtc_x86_iceConnectionState:13257,webrtc_x86_icegatheringstatechange:13258,webrtc_x86_signalingstatechange:13259,webrtc_x86_connectionstatechange:13260,webrtc_x86_createOfferError:13261,webrtc_x86_getRemoteSdpBegin:13262,webrtc_x86_getRemoteSdpSuccess:13263,webrtc_x86_getRemoteSdpError:13264,webrtc_x86_setRemoteDescriptionError:13265,webrtc_x86_dataChannel:13266,webrtc_x86_dataChannelNotify:13267,webrtc_x86_sendLocalSdpBegin:13268,webrtc_x86_sendLocalSdpSuccess:13269,webrtc_x86_sendLocalSdpError:13270,webrtc_x86_up_video_collection:16005,x86_control_power_query_start:12250,x86_control_power_query_succeed:12251,x86_control_power_query_failed:12252,x86_control_power_distribute_start:12253,x86_control_power_distribute_succeed:12254,x86_control_power_distribute_failed:12255,x86_capture_game_image_start:12260,x86_capture_game_image_succeed:12261,x86_capture_game_image_failed:12262,x86_game_extra_data_pay:13272,x86_game_extra_data_play:13273,x86_game_extra_data_help:13274,x86_media_devices_request:13275,x86_media_devices_response:13276,x86_media_devices_camera_capabilities:13277,app_report_finish_info:15e3,video_url_got:12044,stop_game_fun_Call:12053,sdk_error_code:13053,collect_delay_data:16003,client_network_status:13247,sdk_reconnect:12104,start_revolution:12039,enter_queue:12019,out_queue:10039,visibility_change_visible:12040,visibility_change_hidden:12041,low_bitrate_detected:12046,auto_resolution_changed_start:12011,frame_delay_info:12042,fullscreen:12001,exit_fullscreen:12002,toolbar_keyboard_btn_clicked:12006,keyboard_setting_set_game_pad:12052,auto_resolution_changed_done:12012,manual_resolution_changed_start:12014,manual_resolution_changed_done:12015,keyboard_setting_clear_all:12051,set_stop_mouse_send_flag:12110,only_apply:12190,play_ready:12191,app_start_palyer:12192,keyboard_setting_reset:12008,keyboard_setting_save:12009,show_error_page:12101,show_loading_view:12099,hide_loading_view:12100,sdk_scene_changed_call:13505,rom_share_link:12621,rom_open_camera:12622,rom_open_gallery:12623,rom_inform_cap:12624,sdk_get_capList:12625,rom_inform_capList:12626,upload_image_start:12601,upload_image_success:12602,upload_image_error:12605,upload_image_end:12606,upload_image_state:12607,downLoad_file_start:12611,downLoad_file_success:12612,downLoad_file_stop:12613,downLoad_file_cancel:12614,downLoad_file_error:12615,downLoad_file_end:12616,downLoad_file_state:12617,big_file_inform:12627,start_hang_up:12634,end_hang_up:12635,hang_up_time_end:12636,hang_up_timeout:12637,get_big_file_list:12646,big_file_list:12647,get_hang_up_time:12652,player_connect_error:13280,sensor_received:13290,sensor_list_received:13297,start_liveing:13301,start_liveing_success:13302,start_liveing_error:13303,end_liveing:13304,end_liveing_success:13305,end_liveing_error:13306,get_pin_code:13307,get_pin_code_success:13308,get_pin_code_error:13309,apply_control_power:13310,apply_control_power_success:13311,apply_control_power_error:13312,get_control_success:13313,lost_control:13315,wsmessage_send_started:12901,wsmessage_send_successed:12902,wsmessage_send_failed:12903,wsmessage_send_recevied:12904,video_camera_connect:13455,video_camera_open:13457,video_camera_first_buffer:13458,video_camera_open_ack:13459,video_camera_message:14004,video_camera_close:13460,video_camera_api_check:14006,video_camera_code_check:14007,video_camera_use_select:14008,signalv2_opened:13641,signalv2_closed:13642,signalv2_setoffer:13644,appSetScreenDirection:12410,audio_connect_open:13201,audio_connect_error:13202,audio_start_msg:13203,audio_start_msg_timeout:13204,audio_user_allow_mike:13205,audio_user_refuse_mike:13206,audio_end_msg_timeout:13207,audio_connect_close:13208,audio_not_support:13209,video_support_freamcallback:13740,video_not_support_freamcallback:13741},SCENE_EVENT_IDS={12058:!0,12106:!0,12059:!0,12107:!0,12063:!0,12078:!0,12079:!0,12084:!0,12080:!0,12081:!0,12056:!0,12057:!0,10012:!0,12082:!0,12072:!0,12088:!0,12089:!0,12044:!0,12112:!0,12113:!0,12114:!0},Logger=function(){function n(e,t){_classCallCheck(this,n),this.accessKeyId=e,this.channelId=t,this.loggerUrl="".concat(loggerConf.logUrl+"/i"),this.appKey=loggerConf.appKey,this.serverTimestamp=loggerConf.timeStamp,this.cache=[],this.clientType=getClientType()}return _createClass(n,[{key:"setGameInfo",value:function(e,t,n,r){this.extraId=e,this.uId=t,this.pkgName=n,this.appChannel=r}},{key:"setLoggerInfo",value:function(e,t,n,r){this.loggerUrl&&this.appKey||(this.loggerUrl="".concat(e,"/i"),this.appKey=t,this.serverTimestamp=n),this.deviceId=r||-1}},{key:"setCid",value:function(e){this.cid=e}},{key:"setClientTransId",value:function(e){this.clientTransId=e}},{key:"send",value:function(e,t){var n=Date.now(),n=String(Math.floor(n)),r=(new Date).getHours(),o=(new Date).getDay(),e=(t&&"object"===_typeof(t)&&(t.eventDataVer="1.0"),SCENE_EVENT_IDS[e]&&eventEmitter.emit("sceneChanged","evnt",{eventId:e}),{key:"HMCPWebEvent",count:1,timestamp:n,hour:r,dow:o,segmentation:{key:this.clientType,timeStamp:n,deviceID:this.deviceId,eventID:e,cloudID:this.cid||"",channel:this.channelId,extraId:this.extraId||"",eventData:t||"",uid:this.uId,accessKeyId:this.accessKeyId,networkType:"WIFI",netStatus:"WIFI",clientTransId:this.clientTransId,serverTimestamp:this.serverTimestamp||-1,extension:{sdkVersion:SDK_VERSION,pkgName:this.pkgName,appChannel:this.appChannel||""}}}),t=[];this.loggerUrl?(this.cache.length?(t=[].concat(_toConsumableArray(this.cache),[e]),this.cache=[]):t=[e],t="events="+JSON.stringify(t)+"&app_key="+encodeURIComponent(this.appKey)+"&device_id="+encodeURIComponent(this.deviceId)+"&sdk_name="+encodeURIComponent("javascript_native_web")+"&sdk_version="+encodeURIComponent("16.12")+"&hour="+r+"&dow="+o+"&timestamp="+n,r=json2url({c:e.segmentation.cloudID||"",e:e.segmentation.eventID,t:e.segmentation.clientTransId,s:e.segmentation.key,u:e.segmentation.uid}),ajax({url:"".concat(this.loggerUrl,"?").concat(r),data:t,method:"POST",contentType:"application/x-www-form-urlencoded",timeout:10,done:function(e){}})):this.cache.push(e)}}]),n}(),SaasSocket=function(){function r(e,t,n){_classCallCheck(this,r),this.socketUrl=e,this.maxRetryCount=t||5,this.currentRetryCount=1,this.pingpongretryCount=0,this.setDataInfo=n,this.saasGetMessage=!1,this.disconnectStatus=!1}return _createClass(r,[{key:"connect",value:function(){this.currentRetryCount>this.maxRetryCount?(this.closeReconnect(),eventEmitter.emit("saasSocket","failed",this.currentRetryCount)):(this.ws=new WebSocket(this.socketUrl),this.ws.onopen=this._open.bind(this),this.ws.onmessage=this._messages.bind(this),this.ws.onclose=this._close.bind(this))}},{key:"_open",value:function(){var e=this;eventEmitter.emit("saasSocket","open",this.currentRetryCount),this.currentRetryCount=1,this.pingpongretryCount=0,"true"==this.setDataInfo.openPingPong?(this.saasTimeOutFn(),this.saasGetMessage=!0):this.heartTimer=setInterval(function(){e.ws.send("")},1e4)}},{key:"_messages",value:function(e){this.saasGetMessage=!0,this.pingpongretryCount=0;e.data.toString().match(/^pong:\d+/gi)?this.saasPingPongCountly(e.data.toString().match(/\d+/gi)[0]):eventEmitter.emit("saasSocket","messages",e.data)}},{key:"_close",value:function(e){var t=this;eventEmitter.emit("saasSocket","close",e),this.closeReconnect(),this.disconnectStatus||(this.reconnectTimer=setTimeout(function(){t.currentRetryCount++,t.connect()},1e3+2e3*this.currentRetryCount))}},{key:"send",value:function(e){return!(!this.ws||this.ws.readyState!=WebSocket.OPEN||(this.ws.send(e),0))}},{key:"saasTimeOutFn",value:function(e){var t=this;e=e||this.setDataInfo.retryPingPongPeriod[this.pingpongretryCount]||10,clearTimeout(this.saasPingPongTimer),this.saasPingPongTimer=setTimeout(function(){if(t.saasGetMessage)t.saasSocketSendPing("ping"),t.saasTimeOutFn();else{if(t.pingpongretryCount++,t.pingpongretryCount>=t.setDataInfo.retryPingPongPeriod.length)return eventEmitter.emit("saasSocket","Countly",{eventId:loggerEventId.over_limit_get_pong,eventDate:t.pingpongretryCount}),void eventEmitter.emit("saasSocket","PingPongTimeOut");t.saasSocketSendPing("ping"),t.saasTimeOutFn(t.setDataInfo.retryPingPongPeriod[t.pingpongretryCount]),eventEmitter.emit("saasSocket","Countly",{eventId:loggerEventId.over_time_get_pong,eventDate:t.pingpongretryCount})}t.saasGetMessage=!1},e)}},{key:"saasSocketSendPing",value:function(e){var t=(new Date).getTime();this.send(e+":"+t)}},{key:"saasPingPongCountly",value:function(e){var t;"true"==this.setDataInfo.openCustomCountly&&(t=Date.now(),eventEmitter.emit("saasSocket","Countly",{eventId:loggerEventId.saas_socket_ping_pong_delay_time,eventDate:t-e}))}},{key:"closeReconnect",value:function(){clearTimeout(this.reconnectTimer),clearInterval(this.heartTimer),clearTimeout(this.saasPingPongTimer),this.ws&&(this.ws.onopen=null,this.ws.onmessage=null,this.ws.onclose=null,this.ws.close(),this.ws=null)}},{key:"disconnect",value:function(){this.disconnectStatus=!0,this.closeReconnect()}}]),r}(),InputSocket=function(){function r(e,t,n){_classCallCheck(this,r),this.socketUrl=e,this.pingPongInterval=t,this.maxPingPongDelay=n}return _createClass(r,[{key:"connect",value:function(){this.ws=new WebSocket(this.socketUrl),this.ws.onopen=this._open.bind(this),this.ws.onmessage=this._messages.bind(this),this.ws.onclose=this._close.bind(this)}},{key:"_open",value:function(){var e=this;eventEmitter.emit("inputSocket","open"),this.pingPongTimer=setInterval(function(){e.ws.send("ping:".concat((new Date).getTime()))},this.pingPongInterval||6e4)}},{key:"_messages",value:function(e){eventEmitter.emit("inputSocket","messages");var t,e=e.data;/^pong:(\d+)/i.test(e)?(t=Date.now()-RegExp.$1,eventEmitter.emit("inputSocket","delay",t),t>=this.maxPingPongDelay&&eventEmitter.emit("inputSocket","delayMax",t)):/^startim/i.test(e)?eventEmitter.emit("inputSocket","startIm",e):/^stopim/i.test(e)&&eventEmitter.emit("inputSocket","stopIm",e)}},{key:"_close",value:function(e){eventEmitter.emit("inputSocket","close",e),this.disconnect()}},{key:"send",value:function(e){this.ws&&this.ws.readyState==WebSocket.OPEN&&this.ws.send(e)}},{key:"disconnect",value:function(){clearInterval(this.pingPongTimer),this.ws&&(this.ws.onopen=null,this.ws.onmessage=null,this.ws.onclose=null,this.ws.close(),this.ws=null)}}]),r}(),ScreenSocket=function(){function n(e,t){_classCallCheck(this,n),this.socketUrl=e,this.screenType=t||"screenSocket",this.maxRetryCount=5,this.currentRetryCount=0}return _createClass(n,[{key:"connect",value:function(){return this.ws=new WebSocket(this.socketUrl),this.ws.onopen=this._open.bind(this),this.ws.onmessage=this._messages.bind(this),this.ws.onclose=this._close.bind(this),this.ws}},{key:"_open",value:function(){eventEmitter.emit(this.screenType,"open")}},{key:"_messages",value:function(e){eventEmitter.emit(this.screenType,"messages",e.data)}},{key:"send",value:function(e){return!(!this.ws||this.ws.readyState!=WebSocket.OPEN||(this.ws.send(e),0))}},{key:"_close",value:function(e){var t=this;eventEmitter.emit(this.screenType,"close",e),this.currentRetryCount>=this.maxRetryCount?eventEmitter.emit(this.screenType,"failed",e):this.reconnectTimer=setTimeout(function(){eventEmitter.emit(t.screenType,"reconnect",e),t.currentRetryCount++,t.disconnect()},3e3)}},{key:"disconnect",value:function(){this.ws&&(clearTimeout(this.reconnectTimer),this.ws.onopen=null,this.ws.onmessage=null,this.ws.onclose=null,this.ws.close(),this.ws=null)}}]),n}(),_applyFailReasonCode,applyFailCode={INIT_PARAMS_VALIDATE_FAILED:100000001,PARAMS_ERROR:100000002,SAAS_WEBSOCKET_CONNECT:100099001,SAAS_WEBSOCKET_DATA:100099005,NETWORK_BROKEN:100099006,VIDEO_STREAME_CONNECT_FAILED:100099007,UNSUPPORTED_DEVICE:100099101,wechat_unsupported:100099102,game_interrupted:100099012,invalid_resolution:100099013,internal_error:100099014,GET_DID_TIMEOUT:100104002,GET_DID_DID_ERROR:100104005,GET_DID_COUNTLY_ERROR:100104006,GET_CONFIG_TIMEOUT:100108002,GET_STREAM_INFO_TIMEOUT:100211002,GET_STREAM_INFO_CID_ERROR:100211005,GET_STREAM_INFO_SAAS_WEBSOCKET_ERROR:100211006,GET_STREAM_INFO_INSTANCE_ERROR:100211007,RELEASE_CID_TIMEOUT:100202002,CHANGE_RESOLUTION_TIMEOUT:100201002,streaming_sdk_candidate_error:100300002,WEBRTC_CONNECT_TIMEOUT:100300005,SAAS_WEBSOCKET_RTCDATE_ERROR:100300006,x86_rtc_player_error:100400001,x86_rtc_ice_connection_failed:100400002,x86_rtc_connection_state_failed:100400003,x86_rtc_create_offer_error:100400004,x86_rtc_create_answer_error:100400004,x86_rtc_get_remote_sdp_error:100400005,x86_rtc_set_remote_desc_error:100400006,x86_rtc_data_channel_error:100400007,NO_CID:100999001,CONNECT_WS_SAAS_FAILED:100999002,WS_SAAS_PING_PONG_ERROR:100999003,WS_SAAS_PING_PONG_SECCESS:100999004,CONNECT_VIDEO_NOT_MSG:100999005,CONNECT_ONLY_AUDIO_OK:100999006,CONNECT_ONLY_INPUT_OK:100999007,CONNECT_ALL_FAILED:100999008},applyFailReason={REQUEST_ERROR:"requestError",INTERNAL_ERROR:"internalError",IS_ERROR:"instanceError",TOKEN_EXPIRE:"tokenExpire",INSTANCE_LIMIT:"instanceLimit",IS_END:"timeLimit",LOG_OUT:"logOff",MULTI_INST:"multiInst",KICK_OFF:"noOperation",QUEUE_LIMIT:"queueLimit",MAINTAIN_SERVER:"maintainServer",TOKEN_FAILED:"tokenFailed",NORMAL:"normal",LOAD_GAME_FAILED:"loadGameFailed",NETWORK_OFF:"networkOff",LINK_LIMIT:"linkLimit",UNSUPPORTED_DEVICE:"unsupportDevice"},applyFailReasonCode=(_applyFailReasonCode={},_defineProperty(_applyFailReasonCode,applyFailReason.KICK_OFF,36),_defineProperty(_applyFailReasonCode,applyFailReason.INTERNAL_ERROR,60),_defineProperty(_applyFailReasonCode,applyFailReason.NORMAL,62),_defineProperty(_applyFailReasonCode,applyFailReason.IS_END,63),_defineProperty(_applyFailReasonCode,applyFailReason.LINK_LIMIT,64),_applyFailReasonCode),GetTouchPositionPoint=function(){function i(e){var t,n,r,o=this;_classCallCheck(this,i),e&&(this.oCanvas=document.getElementById(e),this.oCanvas)&&(t=(e=this.oCanvas.getBoundingClientRect()).top,n=e.right,r=e.bottom,e=e.left,this.x=e,this.y=t,this.width=n-e,this.height=r-t,this.touchstart=function(e){return o._touchEvent(e,"down")},this.touchmove=function(e){return o._touchEvent(e,"move")},this.touchend=function(e){return o._touchEvent(e,"up")},this.touchcancel=function(e){return o._touchEvent(e,"up")},this._addListener())}return _createClass(i,[{key:"_addListener",value:function(){this.oCanvas.addEventListener("touchstart",this.touchstart),this.oCanvas.addEventListener("touchmove",this.touchmove),this.oCanvas.addEventListener("touchend",this.touchend),this.oCanvas.addEventListener("touchcancel",this.touchcancel)}},{key:"removeListener",value:function(){this.oCanvas&&(this.oCanvas.removeEventListener("touchstart",this.touchstart),this.oCanvas.removeEventListener("touchmove",this.touchmove),this.oCanvas.removeEventListener("touchend",this.touchend),this.oCanvas.removeEventListener("touchcancel",this.touchcancel))}},{key:"_touchEvent",value:function(e,t){e.preventDefault(),e.stopPropagation();for(var n=0;n<e.changedTouches.length;++n){var r=e.changedTouches[n],o=this._translateX(r.clientX),r=this._translateY(r.clientY);this.callback(t,{x:o,y:r})}}},{key:"sendPositionPoint",value:function(e){this.callback=e}},{key:"_translateX",value:function(e){e-=this.x;return(e=(e=e<0?0:e)>this.width?this.width:e)/this.width}},{key:"_translateY",value:function(e){e-=this.y;return(e=(e=e<0?0:e)>this.height?this.height:e)/this.height}}]),i}(),logDisabled_=!0,deprecationWarnings_=!0;function extractVersion(e,t,n){e=e.match(t);return e&&e.length>=n&&parseInt(e[n],10)}function wrapPeerConnectionEvent(e,r,o){var i,a;e.RTCPeerConnection&&(e=e.RTCPeerConnection.prototype,i=e.addEventListener,e.addEventListener=function(e,t){var n;return e!==r?i.apply(this,arguments):(n=function(e){e=o(e);e&&(t.handleEvent?t.handleEvent(e):t(e))},this._eventMap=this._eventMap||{},this._eventMap[r]||(this._eventMap[r]=new Map),this._eventMap[r].set(t,n),i.apply(this,[e,n]))},a=e.removeEventListener,e.removeEventListener=function(e,t){var n;return e===r&&this._eventMap&&this._eventMap[r]&&this._eventMap[r].has(t)?(n=this._eventMap[r].get(t),this._eventMap[r].delete(t),0===this._eventMap[r].size&&delete this._eventMap[r],0===Object.keys(this._eventMap).length&&delete this._eventMap,a.apply(this,[e,n])):a.apply(this,arguments)},Object.defineProperty(e,"on"+r,{get:function(){return this["_on"+r]},set:function(e){this["_on"+r]&&(this.removeEventListener(r,this["_on"+r]),delete this["_on"+r]),e&&this.addEventListener(r,this["_on"+r]=e)},enumerable:!0,configurable:!0}))}function disableLog(e){return"boolean"!=typeof e?new Error("Argument type: "+_typeof(e)+". Please use a boolean."):(logDisabled_=e)?"adapter.js logging disabled":"adapter.js logging enabled"}function disableWarnings(e){return"boolean"!=typeof e?new Error("Argument type: "+_typeof(e)+". Please use a boolean."):(deprecationWarnings_=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function log(){"undefined"==typeof window||_typeof(window)}function deprecated(e,t){}function detectBrowser(e){var t={browser:null,version:null};if(void 0!==e&&e.navigator){var n=e.navigator;if(n.mozGetUserMedia)t.browser="firefox",t.version=extractVersion(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=extractVersion(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=extractVersion(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=extractVersion(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}}else t.browser="Not a browser.";return t}function isObject$1(e){return"[object Object]"===Object.prototype.toString.call(e)}function compactObject(o){return isObject$1(o)?Object.keys(o).reduce(function(e,t){var n=isObject$1(o[t]),r=n?compactObject(o[t]):o[t],n=n&&!Object.keys(r).length;return void 0===r||n?e:Object.assign(e,_defineProperty({},t,r))},{}):o}function walkStats(t,n,r){n&&!r.has(n.id)&&(r.set(n.id,n),Object.keys(n).forEach(function(e){e.endsWith("Id")?walkStats(t,t.get(n[e]),r):e.endsWith("Ids")&&n[e].forEach(function(e){walkStats(t,t.get(e),r)})}))}function filterStats(n,t,e){var r,o=e?"outbound-rtp":"inbound-rtp",i=new Map;return null!==t&&(r=[],n.forEach(function(e){"track"===e.type&&e.trackIdentifier===t.id&&r.push(e)}),r.forEach(function(t){n.forEach(function(e){e.type===o&&e.trackId===t.id&&walkStats(n,e,i)})})),i}var logging=log;function shimGetUserMedia$3(e,t){var a,r,o,n,s=e&&e.navigator;s.mediaDevices&&(a=function(o){var i;return"object"!==_typeof(o)||o.mandatory||o.optional?o:(i={},Object.keys(o).forEach(function(t){var n,r,e;"require"!==t&&"advanced"!==t&&"mediaSource"!==t&&(void 0!==(n="object"===_typeof(o[t])?o[t]:{ideal:o[t]}).exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact),r=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t},void 0!==n.ideal&&(i.optional=i.optional||[],e={},"number"==typeof n.ideal?(e[r("min",t)]=n.ideal,i.optional.push(e),(e={})[r("max",t)]=n.ideal):e[r("",t)]=n.ideal,i.optional.push(e)),void 0!==n.exact&&"number"!=typeof n.exact?(i.mandatory=i.mandatory||{},i.mandatory[r("",t)]=n.exact):["min","max"].forEach(function(e){void 0!==n[e]&&(i.mandatory=i.mandatory||{},i.mandatory[r(e,t)]=n[e])}))}),o.advanced&&(i.optional=(i.optional||[]).concat(o.advanced)),i)},r=function(n,r){if(!(61<=t.version)){if((n=JSON.parse(JSON.stringify(n)))&&"object"===_typeof(n.audio)&&((e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])})((n=JSON.parse(JSON.stringify(n))).audio,"autoGainControl","googAutoGainControl"),e(n.audio,"noiseSuppression","googNoiseSuppression"),n.audio=a(n.audio)),n&&"object"===_typeof(n.video)){var o,i=(i=n.video.facingMode)&&("object"===_typeof(i)?i:{ideal:i}),e=t.version<66;if(i&&("user"===i.exact||"environment"===i.exact||"user"===i.ideal||"environment"===i.ideal)&&(!s.mediaDevices.getSupportedConstraints||!s.mediaDevices.getSupportedConstraints().facingMode||e))if(delete n.video.facingMode,"environment"===i.exact||"environment"===i.ideal?o=["back","rear"]:"user"!==i.exact&&"user"!==i.ideal||(o=["front"]),o)return s.mediaDevices.enumerateDevices().then(function(e){var t=(e=e.filter(function(e){return"videoinput"===e.kind})).find(function(t){return o.some(function(e){return t.label.toLowerCase().includes(e)})});return(t=!t&&e.length&&o.includes("back")?e[e.length-1]:t)&&(n.video.deviceId=i.exact?{exact:t.deviceId}:{ideal:t.deviceId}),n.video=a(n.video),logging("chrome: "+JSON.stringify(n)),r(n)});n.video=a(n.video)}logging("chrome: "+JSON.stringify(n))}return r(n)},o=function(e){return 64<=t.version?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},s.getUserMedia=function(e,t,n){r(e,function(e){s.webkitGetUserMedia(e,t,function(e){n&&n(o(e))})})}.bind(s),s.mediaDevices.getUserMedia)&&(n=s.mediaDevices.getUserMedia.bind(s.mediaDevices),s.mediaDevices.getUserMedia=function(e){return r(e,function(t){return n(t).then(function(e){if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return e},function(e){return Promise.reject(o(e))})})})}function shimGetDisplayMedia$2(i,e){i.navigator.mediaDevices&&"getDisplayMedia"in i.navigator.mediaDevices||i.navigator.mediaDevices&&"function"==typeof e&&(i.navigator.mediaDevices.getDisplayMedia=function(o){return e(o).then(function(e){var t=o.video&&o.video.width,n=o.video&&o.video.height,r=o.video&&o.video.frameRate;return o.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxFrameRate:r||3}},t&&(o.video.mandatory.maxWidth=t),n&&(o.video.mandatory.maxHeight=n),i.navigator.mediaDevices.getUserMedia(o)})})}function shimMediaStream(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function shimOnTrack$1(i){var e;"object"!==_typeof(i)||!i.RTCPeerConnection||"ontrack"in i.RTCPeerConnection.prototype?wrapPeerConnectionEvent(i,"track",function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}):(Object.defineProperty(i.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0}),e=i.RTCPeerConnection.prototype.setRemoteDescription,i.RTCPeerConnection.prototype.setRemoteDescription=function(){var o=this;return this._ontrackpoly||(this._ontrackpoly=function(r){r.stream.addEventListener("addtrack",function(t){var e=i.RTCPeerConnection.prototype.getReceivers?o.getReceivers().find(function(e){return e.track&&e.track.id===t.track.id}):{track:t.track},n=new Event("track");n.track=t.track,n.receiver=e,n.transceiver={receiver:e},n.streams=[r.stream],o.dispatchEvent(n)}),r.stream.getTracks().forEach(function(t){var e=i.RTCPeerConnection.prototype.getReceivers?o.getReceivers().find(function(e){return e.track&&e.track.id===t.id}):{track:t},n=new Event("track");n.track=t,n.receiver=e,n.transceiver={receiver:e},n.streams=[r.stream],o.dispatchEvent(n)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)})}function shimGetSendersWithDtmf(e){var r,o,t,n,i,a;"object"===_typeof(e)&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype?(r=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}},e.RTCPeerConnection.prototype.getSenders||(e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()},o=e.RTCPeerConnection.prototype.addTrack,e.RTCPeerConnection.prototype.addTrack=function(e,t){var n=o.apply(this,arguments);return n||(n=r(this,e),this._senders.push(n)),n},t=e.RTCPeerConnection.prototype.removeTrack,e.RTCPeerConnection.prototype.removeTrack=function(e){t.apply(this,arguments);e=this._senders.indexOf(e);-1!==e&&this._senders.splice(e,1)}),n=e.RTCPeerConnection.prototype.addStream,e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach(function(e){t._senders.push(r(t,e))})},i=e.RTCPeerConnection.prototype.removeStream,e.RTCPeerConnection.prototype.removeStream=function(e){var n=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach(function(t){var e=n._senders.find(function(e){return e.track===t});e&&n._senders.splice(n._senders.indexOf(e),1)})}):"object"===_typeof(e)&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&(a=e.RTCPeerConnection.prototype.getSenders,e.RTCPeerConnection.prototype.getSenders=function(){var t=this,e=a.apply(this,[]);return e.forEach(function(e){return e._pc=t}),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}}))}function shimGetStats(e){var a;e.RTCPeerConnection&&(a=e.RTCPeerConnection.prototype.getStats,e.RTCPeerConnection.prototype.getStats=function(){var n,r,o=this,e=Array.prototype.slice.call(arguments),t=e[0],i=e[1],e=e[2];return 0<arguments.length&&"function"==typeof t?a.apply(this,arguments):0!==a.length||0!==arguments.length&&"function"==typeof t?(n=function(e){var r={};return e.result().forEach(function(t){var n={id:t.id,timestamp:t.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[t.type]||t.type};t.names().forEach(function(e){n[e]=t.stat(e)}),r[n.id]=n}),r},r=function(t){return new Map(Object.keys(t).map(function(e){return[e,t[e]]}))},2<=arguments.length?a.apply(this,[function(e){i(r(n(e)))},t]):new Promise(function(t,e){a.apply(o,[function(e){t(r(n(e)))},e])}).then(i,e)):a.apply(this,[])})}function shimSenderReceiverGetStats(e){var n,t,r,i;"object"===_typeof(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver&&("getStats"in e.RTCRtpSender.prototype||((n=e.RTCPeerConnection.prototype.getSenders)&&(e.RTCPeerConnection.prototype.getSenders=function(){var t=this,e=n.apply(this,[]);return e.forEach(function(e){return e._pc=t}),e}),(t=e.RTCPeerConnection.prototype.addTrack)&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=t.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var t=this;return this._pc.getStats().then(function(e){return filterStats(e,t.track,!0)})}),"getStats"in e.RTCRtpReceiver.prototype||((r=e.RTCPeerConnection.prototype.getReceivers)&&(e.RTCPeerConnection.prototype.getReceivers=function(){var t=this,e=r.apply(this,[]);return e.forEach(function(e){return e._pc=t}),e}),wrapPeerConnectionEvent(e,"track",function(e){return e.receiver._pc=e.srcElement,e}),e.RTCRtpReceiver.prototype.getStats=function(){var t=this;return this._pc.getStats().then(function(e){return filterStats(e,t.track,!1)})}),"getStats"in e.RTCRtpSender.prototype)&&"getStats"in e.RTCRtpReceiver.prototype&&(i=e.RTCPeerConnection.prototype.getStats,e.RTCPeerConnection.prototype.getStats=function(){var t,n,r,o;return 0<arguments.length&&arguments[0]instanceof e.MediaStreamTrack?(t=arguments[0],this.getSenders().forEach(function(e){e.track===t&&(n?o=!0:n=e)}),this.getReceivers().forEach(function(e){return e.track===t&&(r?o=!0:r=e),e.track===t}),o||n&&r?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):n?n.getStats():r?r.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))):i.apply(this,arguments)})}function shimAddTrackRemoveTrackWithNative(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(e){return t._shimmedLocalStreams[e][0]})};var r=e.RTCPeerConnection.prototype.addTrack,o=(e.RTCPeerConnection.prototype.addTrack=function(e,t){if(!t)return r.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var n=r.apply(this,arguments);return this._shimmedLocalStreams[t.id]?-1===this._shimmedLocalStreams[t.id].indexOf(n)&&this._shimmedLocalStreams[t.id].push(n):this._shimmedLocalStreams[t.id]=[t,n],n},e.RTCPeerConnection.prototype.addStream),t=(e.RTCPeerConnection.prototype.addStream=function(e){var n=this,t=(this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(function(t){if(n.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError")}),this.getSenders()),r=(o.apply(this,arguments),this.getSenders().filter(function(e){return-1===t.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(r)},e.RTCPeerConnection.prototype.removeStream),i=(e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],t.apply(this,arguments)},e.RTCPeerConnection.prototype.removeTrack);e.RTCPeerConnection.prototype.removeTrack=function(n){var r=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},n&&Object.keys(this._shimmedLocalStreams).forEach(function(e){var t=r._shimmedLocalStreams[e].indexOf(n);-1!==t&&r._shimmedLocalStreams[e].splice(t,1),1===r._shimmedLocalStreams[e].length&&delete r._shimmedLocalStreams[e]}),i.apply(this,arguments)}}function shimAddTrackRemoveTrack(o,e){if(o.RTCPeerConnection){if(o.RTCPeerConnection.prototype.addTrack&&65<=e.version)return shimAddTrackRemoveTrackWithNative(o);var n=o.RTCPeerConnection.prototype.getLocalStreams,r=(o.RTCPeerConnection.prototype.getLocalStreams=function(){var t=this,e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map(function(e){return t._reverseStreams[e.id]})},o.RTCPeerConnection.prototype.addStream),t=(o.RTCPeerConnection.prototype.addStream=function(e){var t,n=this;this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},e.getTracks().forEach(function(t){if(n.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError")}),this._reverseStreams[e.id]||(t=new o.MediaStream(e.getTracks()),this._streams[e.id]=t,this._reverseStreams[t.id]=e,e=t),r.apply(this,[e])},o.RTCPeerConnection.prototype.removeStream),i=(o.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[(this._streams[e.id]||e).id],delete this._streams[e.id]},o.RTCPeerConnection.prototype.addTrack=function(t,e){var n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find(function(e){return e===t}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var r=this._streams[e.id];return r?(r.addTrack(t),Promise.resolve().then(function(){n.dispatchEvent(new Event("negotiationneeded"))})):(r=new o.MediaStream([t]),this._streams[e.id]=r,this._reverseStreams[r.id]=e,this.addStream(r)),this.getSenders().find(function(e){return e.track===t})},["createOffer","createAnswer"].forEach(function(e){var r=o.RTCPeerConnection.prototype[e],t=_defineProperty({},e,function(){var t=this,n=arguments;return arguments.length&&"function"==typeof arguments[0]?r.apply(this,[function(e){e=s(t,e);n[0].apply(null,[e])},function(e){n[1]&&n[1].apply(null,e)},arguments[2]]):r.apply(this,arguments).then(function(e){return s(t,e)})});o.RTCPeerConnection.prototype[e]=t[e]}),o.RTCPeerConnection.prototype.setLocalDescription),a=(o.RTCPeerConnection.prototype.setLocalDescription=function(){var n,e,r;return arguments.length&&arguments[0].type&&(arguments[0]=(n=this,r=(e=arguments[0]).sdp,Object.keys(n._reverseStreams||[]).forEach(function(e){var e=n._reverseStreams[e],t=n._streams[e.id];r=r.replace(new RegExp(e.id,"g"),t.id)}),new RTCSessionDescription({type:e.type,sdp:r}))),i.apply(this,arguments)},Object.getOwnPropertyDescriptor(o.RTCPeerConnection.prototype,"localDescription"));Object.defineProperty(o.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=a.get.apply(this);return""===e.type?e:s(this,e)}}),o.RTCPeerConnection.prototype.removeTrack=function(t){var n,r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!t._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(t._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach(function(e){r._streams[e].getTracks().find(function(e){return t.track===e})&&(n=r._streams[e])}),n&&(1===n.getTracks().length?this.removeStream(this._reverseStreams[n.id]):n.removeTrack(t.track),this.dispatchEvent(new Event("negotiationneeded")))}}function s(n,e){var r=e.sdp;return Object.keys(n._reverseStreams||[]).forEach(function(e){var e=n._reverseStreams[e],t=n._streams[e.id];r=r.replace(new RegExp(t.id,"g"),e.id)}),new RTCSessionDescription({type:e.type,sdp:r})}}function shimPeerConnection$2(r,e){!r.RTCPeerConnection&&r.webkitRTCPeerConnection&&(r.RTCPeerConnection=r.webkitRTCPeerConnection),r.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=r.RTCPeerConnection.prototype[e],n=_defineProperty({},e,function(){return arguments[0]=new("addIceCandidate"===e?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),t.apply(this,arguments)});r.RTCPeerConnection.prototype[e]=n[e]})}function fixNegotiationNeeded(e,n){wrapPeerConnectionEvent(e,"negotiationneeded",function(e){var t=e.target;if(!(n.version<72||t.getConfiguration&&"plan-b"===t.getConfiguration().sdpSemantics)||"stable"===t.signalingState)return e})}var chromeShim=Object.freeze({__proto__:null,shimMediaStream:shimMediaStream,shimOnTrack:shimOnTrack$1,shimGetSendersWithDtmf:shimGetSendersWithDtmf,shimGetStats:shimGetStats,shimSenderReceiverGetStats:shimSenderReceiverGetStats,shimAddTrackRemoveTrackWithNative:shimAddTrackRemoveTrackWithNative,shimAddTrackRemoveTrack:shimAddTrackRemoveTrack,shimPeerConnection:shimPeerConnection$2,fixNegotiationNeeded:fixNegotiationNeeded,shimGetUserMedia:shimGetUserMedia$3,shimGetDisplayMedia:shimGetDisplayMedia$2});function filterIceServers$1(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){var t,n;if(e&&(e.urls||e.url))return n=e.urls||e.url,e.url&&!e.urls&&deprecated("RTCIceServer.url","RTCIceServer.urls"),n=(n=(t="string"==typeof n)?[n]:n).filter(function(e){return 0!==e.indexOf("stun:")&&e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp")&&!r&&(r=!0)}),delete e.url,e.urls=t?n[0]:n,!!n.length})}var sdp=createCommonjsModule(function(e){var l={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};l.localCName=l.generateIdentifier(),l.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},l.splitSections=function(e){return e.split("\nm=").map(function(e,t){return(0<t?"m="+e:e).trim()+"\r\n"})},l.getDescription=function(e){e=l.splitSections(e);return e&&e[0]},l.getMediaSections=function(e){e=l.splitSections(e);return e.shift(),e},l.matchPrefix=function(e,t){return l.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},l.parseCandidate=function(e){for(var t=(0===e.indexOf("a=candidate:")?e.substring(12):e.substring(10)).split(" "),n={foundation:t[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},l.writeCandidate=function(e){var t=[],n=(t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port),e.type);return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},l.parseIceOptions=function(e){return e.substr(14).split(" ")},l.parseRtpMap=function(e){var e=e.substr(9).split(" "),t={payloadType:parseInt(e.shift(),10)},e=e[0].split("/");return t.name=e[0],t.clockRate=parseInt(e[1],10),t.channels=3===e.length?parseInt(e[2],10):1,t.numChannels=t.channels,t},l.writeRtpMap=function(e){var t=e.payloadType,n=(void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType),e.channels||e.numChannels||1);return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},l.parseExtmap=function(e){e=e.substr(9).split(" ");return{id:parseInt(e[0],10),direction:0<e[0].indexOf("/")?e[0].split("/")[1]:"sendrecv",uri:e[1]}},l.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},l.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),o=0;o<r.length;o++)n[(t=r[o].trim().split("="))[0].trim()]=t[1];return n},l.writeFmtp=function(t){var n,e="",r=t.payloadType;return void 0!==t.preferredPayloadType&&(r=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length&&(n=[],Object.keys(t.parameters).forEach(function(e){t.parameters[e]?n.push(e+"="+t.parameters[e]):n.push(e)}),e+="a=fmtp:"+r+" "+n.join(";")+"\r\n"),e},l.parseRtcpFb=function(e){e=e.substr(e.indexOf(" ")+1).split(" ");return{type:e.shift(),parameter:e.join(" ")}},l.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},l.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return-1<r?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},l.parseSsrcGroup=function(e){e=e.substr(13).split(" ");return{semantics:e.shift(),ssrcs:e.map(function(e){return parseInt(e,10)})}},l.getMid=function(e){e=l.matchPrefix(e,"a=mid:")[0];if(e)return e.substr(6)},l.parseFingerprint=function(e){e=e.substr(14).split(" ");return{algorithm:e[0].toLowerCase(),value:e[1]}},l.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:l.matchPrefix(e+t,"a=fingerprint:").map(l.parseFingerprint)}},l.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},l.parseCryptoLine=function(e){e=e.substr(9).split(" ");return{tag:parseInt(e[0],10),cryptoSuite:e[1],keyParams:e[2],sessionParams:e.slice(3)}},l.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"===_typeof(e.keyParams)?l.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},l.parseCryptoKeyParams=function(e){return 0!==e.indexOf("inline:")?null:{keyMethod:"inline",keySalt:(e=e.substr(7).split("|"))[0],lifeTime:e[1],mkiValue:e[2]?e[2].split(":")[0]:void 0,mkiLength:e[2]?e[2].split(":")[1]:void 0}},l.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},l.getCryptoParameters=function(e,t){return l.matchPrefix(e+t,"a=crypto:").map(l.parseCryptoLine)},l.getIceParameters=function(e,t){var n=l.matchPrefix(e+t,"a=ice-ufrag:")[0],e=l.matchPrefix(e+t,"a=ice-pwd:")[0];return n&&e?{usernameFragment:n.substr(12),password:e.substr(10)}:null},l.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},l.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=l.splitLines(e)[0].split(" "),r=3;r<n.length;r++){var o=n[r],i=l.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(i){var a=l.parseRtpMap(i),i=l.matchPrefix(e,"a=fmtp:"+o+" ");switch(a.parameters=i.length?l.parseFmtp(i[0]):{},a.rtcpFeedback=l.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(l.parseRtcpFb),t.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(a.name.toUpperCase())}}}return l.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(l.parseExtmap(e))}),t},l.writeRtpDescription=function(e,t){var n="",r=(n=(n=(n=(n+="m="+e+" ")+(0<t.codecs.length?"9":"0")+" UDP/TLS/RTP/SAVPF ")+(t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n"))+"c=IN IP4 0.0.0.0\r\n"+"a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){n=(n=(n+=l.writeRtpMap(e))+l.writeFmtp(e))+l.writeRtcpFb(e)}),0);return t.codecs.forEach(function(e){e.maxptime>r&&(r=e.maxptime)}),0<r&&(n+="a=maxptime:"+r+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach(function(e){n+=l.writeExtmap(e)}),n},l.parseRtpEncodingParameters=function(e){var t,n=[],r=l.parseRtpParameters(e),o=-1!==r.fecMechanisms.indexOf("RED"),i=-1!==r.fecMechanisms.indexOf("ULPFEC"),a=l.matchPrefix(e,"a=ssrc:").map(function(e){return l.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),s=0<a.length&&a[0].ssrc,a=l.matchPrefix(e,"a=ssrc-group:FID").map(function(e){return e.substr(17).split(" ").map(function(e){return parseInt(e,10)})}),c=(0<a.length&&1<a[0].length&&a[0][0]===s&&(t=a[0][1]),r.codecs.forEach(function(e){"RTX"===e.name.toUpperCase()&&e.parameters.apt&&(e={ssrc:s,codecPayloadType:parseInt(e.parameters.apt,10)},s&&t&&(e.rtx={ssrc:t}),n.push(e),o)&&((e=JSON.parse(JSON.stringify(e))).fec={ssrc:s,mechanism:i?"red+ulpfec":"red"},n.push(e))}),0===n.length&&s&&n.push({ssrc:s}),l.matchPrefix(e,"b="));return c.length&&(c=0===c[0].indexOf("b=TIAS:")?parseInt(c[0].substr(7),10):0===c[0].indexOf("b=AS:")?1e3*parseInt(c[0].substr(5),10)*.95-16e3:void 0,n.forEach(function(e){e.maxBitrate=c})),n},l.parseRtcpParameters=function(e){var t={},n=l.matchPrefix(e,"a=ssrc:").map(function(e){return l.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0],n=(n&&(t.cname=n.value,t.ssrc=n.ssrc),l.matchPrefix(e,"a=rtcp-rsize")),n=(t.reducedSize=0<n.length,t.compound=0===n.length,l.matchPrefix(e,"a=rtcp-mux"));return t.mux=0<n.length,t},l.parseMsid=function(e){var t,n=l.matchPrefix(e,"a=msid:");return 1===n.length?{stream:(t=n[0].substr(7).split(" "))[0],track:t[1]}:0<(n=l.matchPrefix(e,"a=ssrc:").map(function(e){return l.parseSsrcMedia(e)}).filter(function(e){return"msid"===e.attribute})).length?{stream:(t=n[0].value.split(" "))[0],track:t[1]}:void 0},l.parseSctpDescription=function(e){var t,n=l.parseMLine(e),r=l.matchPrefix(e,"a=max-message-size:"),r=(0<r.length&&(t=parseInt(r[0].substr(19),10)),isNaN(t)&&(t=65536),l.matchPrefix(e,"a=sctp-port:"));return 0<r.length?{port:parseInt(r[0].substr(12),10),protocol:n.fmt,maxMessageSize:t}:0<l.matchPrefix(e,"a=sctpmap:").length?(r=l.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" "),{port:parseInt(r[0],10),protocol:r[1],maxMessageSize:t}):void 0},l.writeSctpDescription=function(e,t){var n=[],n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"];return void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},l.generateSessionId=function(){return Math.random().toString().substr(2,21)},l.writeSessionBoilerplate=function(e,t,n){t=void 0!==t?t:2,e=e||l.generateSessionId();return"v=0\r\no="+(n||"thisisadapterortc")+" "+e+" "+t+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},l.writeMediaSection=function(e,t,n,r){t=l.writeRtpDescription(e.kind,t);return t=(t=(t+=l.writeIceParameters(e.iceGatherer.getLocalParameters()))+l.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"))+("a=mid:"+e.mid+"\r\n"),e.direction?t+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?t+="a=sendrecv\r\n":e.rtpSender?t+="a=sendonly\r\n":e.rtpReceiver?t+="a=recvonly\r\n":t+="a=inactive\r\n",e.rtpSender&&(t=t+"a="+(n="msid:"+r.id+" "+e.rtpSender.track.id+"\r\n")+"a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+n,e.sendEncodingParameters[0].rtx)&&(t=(t+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+n)+"a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n"),t+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+l.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(t+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+l.localCName+"\r\n"),t},l.getDirection=function(e,t){for(var n=l.splitLines(e),r=0;r<n.length;r++)switch(n[r]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[r].substr(2)}return t?l.getDirection(t):"sendrecv"},l.getKind=function(e){return l.splitLines(e)[0].split(" ")[0].substr(2)},l.isRejected=function(e){return"0"===e.split(" ",2)[1]},l.parseMLine=function(e){e=l.splitLines(e)[0].substr(2).split(" ");return{kind:e[0],port:parseInt(e[1],10),protocol:e[2],fmt:e.slice(3).join(" ")}},l.parseOLine=function(e){e=l.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:e[0],sessionId:e[1],sessionVersion:parseInt(e[2],10),netType:e[3],addressType:e[4],address:e[5]}},l.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=l.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},e.exports=l});function fixStatsType(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type}function writeMediaSection(e,t,n,r,o){t=sdp.writeRtpDescription(e.kind,t);return t=(t=(t+=sdp.writeIceParameters(e.iceGatherer.getLocalParameters()))+sdp.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":o||"active"))+("a=mid:"+e.mid+"\r\n"),e.rtpSender&&e.rtpReceiver?t+="a=sendrecv\r\n":e.rtpSender?t+="a=sendonly\r\n":e.rtpReceiver?t+="a=recvonly\r\n":t+="a=inactive\r\n",e.rtpSender&&(n=e.rtpSender._initialTrackId||e.rtpSender.track.id,e.rtpSender._initialTrackId=n,t=t+"a="+(o="msid:"+(r?r.id:"-")+" "+n+"\r\n")+"a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+o,e.sendEncodingParameters[0].rtx)&&(t=(t+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+o)+"a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n"),t+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+sdp.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(t+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+sdp.localCName+"\r\n"),t}function filterIceServers(e,r){var o=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){var t,n;if(e&&(e.urls||e.url))return n=e.urls||e.url,e.url&&e.urls,n=(n=(t="string"==typeof n)?[n]:n).filter(function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||o?0===e.indexOf("stun:")&&14393<=r&&-1===e.indexOf("?transport=udp"):o=!0}),delete e.url,e.urls=t?n[0]:n,!!n.length})}function getCommonCapabilities(r,o){function i(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]}var a={codecs:[],headerExtensions:[],fecMechanisms:[]};return r.codecs.forEach(function(n){for(var e=0;e<o.codecs.length;e++){var t=o.codecs[e];if(n.name.toLowerCase()===t.name.toLowerCase()&&n.clockRate===t.clockRate&&("rtx"!==n.name.toLowerCase()||!n.parameters||!t.parameters.apt||function(e,t,n,r){e=i(e.parameters.apt,n),n=i(t.parameters.apt,r);return e&&n&&e.name.toLowerCase()===n.name.toLowerCase()}(n,t,r.codecs,o.codecs))){(t=JSON.parse(JSON.stringify(t))).numChannels=Math.min(n.numChannels,t.numChannels),a.codecs.push(t),t.rtcpFeedback=t.rtcpFeedback.filter(function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1});break}}}),r.headerExtensions.forEach(function(e){for(var t=0;t<o.headerExtensions.length;t++){var n=o.headerExtensions[t];if(e.uri===n.uri){a.headerExtensions.push(n);break}}}),a}function isActionAllowedInSignalingState(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function maybeAddCandidate(e,t){var n=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type});return n||e.addRemoteCandidate(t),!n}function makeError(e,t){t=new Error(t);return t.name=e,t.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],t}var rtcpeerconnection=function(R,I){function D(e,t){t.addTrack(e),t.dispatchEvent(new R.MediaStreamTrackEvent("addtrack",{track:e}))}function o(e,t,n,r){var o=new Event("track");o.track=t,o.receiver=n,o.transceiver={receiver:n},o.streams=r,R.setTimeout(function(){e._dispatchEvent("track",o)})}function r(e){var t=this,n=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){t[e]=n[e].bind(n)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",e=JSON.parse(JSON.stringify(e||{})),this.usingBundle="max-bundle"===e.bundlePolicy,"negotiate"===e.rtcpMuxPolicy)throw makeError("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(e.rtcpMuxPolicy||(e.rtcpMuxPolicy="require"),e.iceTransportPolicy){case"all":case"relay":break;default:e.iceTransportPolicy="all"}switch(e.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:e.bundlePolicy="balanced"}if(e.iceServers=filterIceServers(e.iceServers||[],I),this._iceGatherers=[],e.iceCandidatePoolSize)for(var r=e.iceCandidatePoolSize;0<r;r--)this._iceGatherers.push(new R.RTCIceGatherer({iceServers:e.iceServers,gatherPolicy:e.iceTransportPolicy}));else e.iceCandidatePoolSize=0;this._config=e,this.transceivers=[],this._sdpSessionId=sdp.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1}Object.defineProperty(r.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(r.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),r.prototype.onicecandidate=null,r.prototype.onaddstream=null,r.prototype.ontrack=null,r.prototype.onremovestream=null,r.prototype.onsignalingstatechange=null,r.prototype.oniceconnectionstatechange=null,r.prototype.onconnectionstatechange=null,r.prototype.onicegatheringstatechange=null,r.prototype.onnegotiationneeded=null,r.prototype.ondatachannel=null,r.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},r.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},r.prototype.getConfiguration=function(){return this._config},r.prototype.getLocalStreams=function(){return this.localStreams},r.prototype.getRemoteStreams=function(){return this.remoteStreams},r.prototype._createTransceiver=function(e,t){var n=0<this.transceivers.length,e={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};return this.usingBundle&&n?(e.iceTransport=this.transceivers[0].iceTransport,e.dtlsTransport=this.transceivers[0].dtlsTransport):(n=this._createIceAndDtlsTransports(),e.iceTransport=n.iceTransport,e.dtlsTransport=n.dtlsTransport),t||this.transceivers.push(e),e},r.prototype.addTrack=function(t,e){if(this._isClosed)throw makeError("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var n;if(this.transceivers.find(function(e){return e.track===t}))throw makeError("InvalidAccessError","Track already exists.");for(var r=0;r<this.transceivers.length;r++)this.transceivers[r].track||this.transceivers[r].kind!==t.kind||(n=this.transceivers[r]);return n=n||this._createTransceiver(t.kind),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(e)&&this.localStreams.push(e),n.track=t,n.stream=e,n.rtpSender=new R.RTCRtpSender(t,n.dtlsTransport),n.rtpSender},r.prototype.addStream=function(t){var r,n=this;15025<=I?t.getTracks().forEach(function(e){n.addTrack(e,t)}):(r=t.clone(),t.getTracks().forEach(function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",function(e){n.enabled=e.enabled})}),r.getTracks().forEach(function(e){n.addTrack(e,r)}))},r.prototype.removeTrack=function(t){if(this._isClosed)throw makeError("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof R.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var e=this.transceivers.find(function(e){return e.rtpSender===t});if(!e)throw makeError("InvalidAccessError","Sender was not created by this connection.");var n=e.stream;e.rtpSender.stop(),e.rtpSender=null,e.track=null,e.stream=null,-1===this.transceivers.map(function(e){return e.stream}).indexOf(n)&&-1<this.localStreams.indexOf(n)&&this.localStreams.splice(this.localStreams.indexOf(n),1),this._maybeFireNegotiationNeeded()},r.prototype.removeStream=function(e){var n=this;e.getTracks().forEach(function(t){var e=n.getSenders().find(function(e){return e.track===t});e&&n.removeTrack(e)})},r.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},r.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},r.prototype._createIceGatherer=function(n,e){var r,o=this;return e&&0<n?this.transceivers[0].iceGatherer:this._iceGatherers.length?this._iceGatherers.shift():(r=new R.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy}),Object.defineProperty(r,"state",{value:"new",writable:!0}),this.transceivers[n].bufferedCandidateEvents=[],this.transceivers[n].bufferCandidates=function(e){var t=!e.candidate||0===Object.keys(e.candidate).length;r.state=t?"completed":"gathering",null!==o.transceivers[n].bufferedCandidateEvents&&o.transceivers[n].bufferedCandidateEvents.push(e)},r.addEventListener("localcandidate",this.transceivers[n].bufferCandidates),r)},r.prototype._gather=function(r,o){var e,i=this,a=this.transceivers[o].iceGatherer;a.onlocalcandidate||(e=this.transceivers[o].bufferedCandidateEvents,this.transceivers[o].bufferedCandidateEvents=null,a.removeEventListener("localcandidate",this.transceivers[o].bufferCandidates),a.onlocalcandidate=function(e){var t,n;i.usingBundle&&0<o||((t=new Event("icecandidate")).candidate={sdpMid:r,sdpMLineIndex:o},(n=!(e=e.candidate)||0===Object.keys(e).length)?"new"!==a.state&&"gathering"!==a.state||(a.state="completed"):("new"===a.state&&(a.state="gathering"),e.component=1,e.ufrag=a.getLocalParameters().usernameFragment,e=sdp.writeCandidate(e),t.candidate=Object.assign(t.candidate,sdp.parseCandidate(e)),t.candidate.candidate=e,t.candidate.toJSON=function(){return{candidate:t.candidate.candidate,sdpMid:t.candidate.sdpMid,sdpMLineIndex:t.candidate.sdpMLineIndex,usernameFragment:t.candidate.usernameFragment}}),(e=sdp.getMediaSections(i._localDescription.sdp))[t.candidate.sdpMLineIndex]+=n?"a=end-of-candidates\r\n":"a="+t.candidate.candidate+"\r\n",i._localDescription.sdp=sdp.getDescription(i._localDescription.sdp)+e.join(""),e=i.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}),"gathering"!==i.iceGatheringState&&(i.iceGatheringState="gathering",i._emitGatheringStateChange()),n||i._dispatchEvent("icecandidate",t),e&&(i._dispatchEvent("icecandidate",new Event("icecandidate")),i.iceGatheringState="complete",i._emitGatheringStateChange()))},R.setTimeout(function(){e.forEach(function(e){a.onlocalcandidate(e)})},0))},r.prototype._createIceAndDtlsTransports=function(){var e=this,t=new R.RTCIceTransport(null),n=(t.onicestatechange=function(){e._updateIceConnectionState(),e._updateConnectionState()},new R.RTCDtlsTransport(t));return n.ondtlsstatechange=function(){e._updateConnectionState()},n.onerror=function(){Object.defineProperty(n,"state",{value:"failed",writable:!0}),e._updateConnectionState()},{iceTransport:t,dtlsTransport:n}},r.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer,t=(t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer),this.transceivers[e].iceTransport),t=(t&&(delete t.onicestatechange,delete this.transceivers[e].iceTransport),this.transceivers[e].dtlsTransport);t&&(delete t.ondtlsstatechange,delete t.onerror,delete this.transceivers[e].dtlsTransport)},r.prototype._transceive=function(e,t,n){var r=getCommonCapabilities(e.localCapabilities,e.remoteCapabilities);t&&e.rtpSender&&(r.encodings=e.sendEncodingParameters,r.rtcp={cname:sdp.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(r.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(r)),n&&e.rtpReceiver&&0<r.codecs.length&&("video"===e.kind&&e.recvEncodingParameters&&I<15019&&e.recvEncodingParameters.forEach(function(e){delete e.rtx}),e.recvEncodingParameters.length?r.encodings=e.recvEncodingParameters:r.encodings=[{}],r.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(r.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(r.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(r))},r.prototype.setLocalDescription=function(e){var t,l,d,u=this;return-1===["offer","answer"].indexOf(e.type)?Promise.reject(makeError("TypeError",'Unsupported type "'+e.type+'"')):!isActionAllowedInSignalingState("setLocalDescription",e.type,u.signalingState)||u._isClosed?Promise.reject(makeError("InvalidStateError","Can not set local "+e.type+" in state "+u.signalingState)):("offer"===e.type?(t=sdp.splitSections(e.sdp),l=t.shift(),t.forEach(function(e,t){e=sdp.parseRtpParameters(e);u.transceivers[t].localCapabilities=e}),u.transceivers.forEach(function(e,t){u._gather(e.mid,t)})):"answer"===e.type&&(l=(t=sdp.splitSections(u._remoteDescription.sdp)).shift(),d=0<sdp.matchPrefix(l,"a=ice-lite").length,t.forEach(function(e,t){var n,r=u.transceivers[t],o=r.iceGatherer,i=r.iceTransport,a=r.dtlsTransport,s=r.localCapabilities,c=r.remoteCapabilities;sdp.isRejected(e)&&0===sdp.matchPrefix(e,"a=bundle-only").length||r.rejected||(n=sdp.getIceParameters(e,l),e=sdp.getDtlsParameters(e,l),d&&(e.role="server"),u.usingBundle&&0!==t||(u._gather(r.mid,t),"new"===i.state&&i.start(o,n,d?"controlling":"controlled"),"new"===a.state&&a.start(e)),t=getCommonCapabilities(s,c),u._transceive(r,0<t.codecs.length,!1))})),u._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?u._updateSignalingState("have-local-offer"):u._updateSignalingState("stable"),Promise.resolve())},r.prototype.setRemoteDescription=function(S){var b,w,e,C,k,E,t,T=this;return-1===["offer","answer"].indexOf(S.type)?Promise.reject(makeError("TypeError",'Unsupported type "'+S.type+'"')):!isActionAllowedInSignalingState("setRemoteDescription",S.type,T.signalingState)||T._isClosed?Promise.reject(makeError("InvalidStateError","Can not set remote "+S.type+" in state "+T.signalingState)):(b={},T.remoteStreams.forEach(function(e){b[e.id]=e}),w=[],e=sdp.splitSections(S.sdp),C=e.shift(),k=0<sdp.matchPrefix(C,"a=ice-lite").length,E=0<sdp.matchPrefix(C,"a=group:BUNDLE ").length,T.usingBundle=E,t=sdp.matchPrefix(C,"a=ice-options:")[0],T.canTrickleIceCandidates=!!t&&0<=t.substr(14).split(" ").indexOf("trickle"),e.forEach(function(e,t){var n,r,o,i,a,s,c,l,d,u,p,h,f,m=sdp.splitLines(e),A=sdp.getKind(e),y=sdp.isRejected(e)&&0===sdp.matchPrefix(e,"a=bundle-only").length,m=m[0].substr(2).split(" ")[2],_=sdp.getDirection(e,C),g=sdp.parseMsid(e),v=sdp.getMid(e)||sdp.generateIdentifier();y||"application"===A&&("DTLS/SCTP"===m||"UDP/DTLS/SCTP"===m)?T.transceivers[t]={mid:v,kind:A,protocol:m,rejected:!0}:(!y&&T.transceivers[t]&&T.transceivers[t].rejected&&(T.transceivers[t]=T._createTransceiver(A,!0)),m=sdp.parseRtpParameters(e),y||(i=sdp.getIceParameters(e,C),(a=sdp.getDtlsParameters(e,C)).role="client"),r=sdp.parseRtpEncodingParameters(e),s=sdp.parseRtcpParameters(e),c=0<sdp.matchPrefix(e,"a=end-of-candidates",C).length,e=sdp.matchPrefix(e,"a=candidate:").map(function(e){return sdp.parseCandidate(e)}).filter(function(e){return 1===e.component}),("offer"===S.type||"answer"===S.type)&&!y&&E&&0<t&&T.transceivers[t]&&(T._disposeIceAndDtlsTransports(t),T.transceivers[t].iceGatherer=T.transceivers[0].iceGatherer,T.transceivers[t].iceTransport=T.transceivers[0].iceTransport,T.transceivers[t].dtlsTransport=T.transceivers[0].dtlsTransport,T.transceivers[t].rtpSender&&T.transceivers[t].rtpSender.setTransport(T.transceivers[0].dtlsTransport),T.transceivers[t].rtpReceiver)&&T.transceivers[t].rtpReceiver.setTransport(T.transceivers[0].dtlsTransport),"offer"!==S.type||y?"answer"!==S.type||y||(y=(n=T.transceivers[t]).iceGatherer,h=n.iceTransport,l=n.dtlsTransport,f=n.rtpReceiver,d=n.sendEncodingParameters,o=n.localCapabilities,T.transceivers[t].recvEncodingParameters=r,T.transceivers[t].remoteCapabilities=m,T.transceivers[t].rtcpParameters=s,e.length&&"new"===h.state&&(!k&&!c||E&&0!==t?e.forEach(function(e){maybeAddCandidate(n.iceTransport,e)}):h.setRemoteCandidates(e)),E&&0!==t||("new"===h.state&&h.start(y,i,"controlling"),"new"===l.state&&l.start(a)),!getCommonCapabilities(n.localCapabilities,n.remoteCapabilities).codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&n.sendEncodingParameters[0].rtx&&delete n.sendEncodingParameters[0].rtx,T._transceive(n,"sendrecv"===_||"recvonly"===_,"sendrecv"===_||"sendonly"===_),!f||"sendrecv"!==_&&"sendonly"!==_?delete n.rtpReceiver:(p=f.track,g?(b[g.stream]||(b[g.stream]=new R.MediaStream),D(p,b[g.stream]),w.push([p,f,b[g.stream]])):(b.default||(b.default=new R.MediaStream),D(p,b.default),w.push([p,f,b.default])))):((n=T.transceivers[t]||T._createTransceiver(A)).mid=v,n.iceGatherer||(n.iceGatherer=T._createIceGatherer(t,E)),e.length&&"new"===n.iceTransport.state&&(!c||E&&0!==t?e.forEach(function(e){maybeAddCandidate(n.iceTransport,e)}):n.iceTransport.setRemoteCandidates(e)),o=R.RTCRtpReceiver.getCapabilities(A),I<15019&&(o.codecs=o.codecs.filter(function(e){return"rtx"!==e.name})),d=n.sendEncodingParameters||[{ssrc:1001*(2*t+2)}],h=!1,"sendrecv"===_||"sendonly"===_?(h=!n.rtpReceiver,f=n.rtpReceiver||new R.RTCRtpReceiver(n.dtlsTransport,A),h&&(p=f.track,(u=g&&"-"===g.stream?u:g?(b[g.stream]||(b[g.stream]=new R.MediaStream,Object.defineProperty(b[g.stream],"id",{get:function(){return g.stream}})),Object.defineProperty(p,"id",{get:function(){return g.track}}),b[g.stream]):(b.default||(b.default=new R.MediaStream),b.default))&&(D(p,u),n.associatedRemoteMediaStreams.push(u)),w.push([p,f,u]))):n.rtpReceiver&&n.rtpReceiver.track&&(n.associatedRemoteMediaStreams.forEach(function(e){var t=e.getTracks().find(function(e){return e.id===n.rtpReceiver.track.id});t&&(t=t,(e=e).removeTrack(t),e.dispatchEvent(new R.MediaStreamTrackEvent("removetrack",{track:t})))}),n.associatedRemoteMediaStreams=[]),n.localCapabilities=o,n.remoteCapabilities=m,n.rtpReceiver=f,n.rtcpParameters=s,n.sendEncodingParameters=d,n.recvEncodingParameters=r,T._transceive(T.transceivers[t],!1,h)))}),void 0===T._dtlsRole&&(T._dtlsRole="offer"===S.type?"active":"passive"),T._remoteDescription={type:S.type,sdp:S.sdp},"offer"===S.type?T._updateSignalingState("have-remote-offer"):T._updateSignalingState("stable"),Object.keys(b).forEach(function(e){var t,r=b[e];r.getTracks().length&&(-1===T.remoteStreams.indexOf(r)&&(T.remoteStreams.push(r),(t=new Event("addstream")).stream=r,R.setTimeout(function(){T._dispatchEvent("addstream",t)})),w.forEach(function(e){var t=e[0],n=e[1];r.id===e[2].id&&o(T,t,n,[r])}))}),w.forEach(function(e){e[2]||o(T,e[0],e[1],[])}),R.setTimeout(function(){T&&T.transceivers&&T.transceivers.forEach(function(e){e.iceTransport&&"new"===e.iceTransport.state&&0<e.iceTransport.getRemoteCandidates().length&&e.iceTransport.addRemoteCandidate({})})},4e3),Promise.resolve())},r.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},r.prototype._updateSignalingState=function(e){this.signalingState=e;e=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",e)},r.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,R.setTimeout(function(){var e;t.needNegotiation&&(t.needNegotiation=!1,e=new Event("negotiationneeded"),t._dispatchEvent("negotiationneeded",e))},0))},r.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};this.transceivers.forEach(function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++}),e="new",0<t.failed?e="failed":0<t.checking?e="checking":0<t.disconnected?e="disconnected":0<t.new?e="new":0<t.connected?e="connected":0<t.completed&&(e="completed"),e!==this.iceConnectionState&&(this.iceConnectionState=e,e=new Event("iceconnectionstatechange"),this._dispatchEvent("iceconnectionstatechange",e))},r.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};this.transceivers.forEach(function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)}),t.connected+=t.completed,e="new",0<t.failed?e="failed":0<t.connecting?e="connecting":0<t.disconnected?e="disconnected":0<t.new?e="new":0<t.connected&&(e="connected"),e!==this.connectionState&&(this.connectionState=e,e=new Event("connectionstatechange"),this._dispatchEvent("connectionstatechange",e))},r.prototype.createOffer=function(){var i=this;if(i._isClosed)return Promise.reject(makeError("InvalidStateError","Can not call createOffer after close"));var t=i.transceivers.filter(function(e){return"audio"===e.kind}).length,n=i.transceivers.filter(function(e){return"video"===e.kind}).length,e=arguments[0];if(e){if(e.mandatory||e.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==e.offerToReceiveAudio&&(t=!0===e.offerToReceiveAudio?1:!1===e.offerToReceiveAudio?0:e.offerToReceiveAudio),void 0!==e.offerToReceiveVideo&&(n=!0===e.offerToReceiveVideo?1:!1===e.offerToReceiveVideo?0:e.offerToReceiveVideo)}for(i.transceivers.forEach(function(e){"audio"===e.kind?--t<0&&(e.wantReceive=!1):"video"===e.kind&&--n<0&&(e.wantReceive=!1)});0<t||0<n;)0<t&&(i._createTransceiver("audio"),t--),0<n&&(i._createTransceiver("video"),n--);var r=sdp.writeSessionBoilerplate(i._sdpSessionId,i._sdpSessionVersion++),e=(i.transceivers.forEach(function(e,t){var n=e.track,r=e.kind,o=e.mid||sdp.generateIdentifier(),o=(e.mid=o,e.iceGatherer||(e.iceGatherer=i._createIceGatherer(t,i.usingBundle)),R.RTCRtpSender.getCapabilities(r)),t=(I<15019&&(o.codecs=o.codecs.filter(function(e){return"rtx"!==e.name})),o.codecs.forEach(function(t){"H264"===t.name&&void 0===t.parameters["level-asymmetry-allowed"]&&(t.parameters["level-asymmetry-allowed"]="1"),e.remoteCapabilities&&e.remoteCapabilities.codecs&&e.remoteCapabilities.codecs.forEach(function(e){t.name.toLowerCase()===e.name.toLowerCase()&&t.clockRate===e.clockRate&&(t.preferredPayloadType=e.payloadType)})}),o.headerExtensions.forEach(function(t){(e.remoteCapabilities&&e.remoteCapabilities.headerExtensions||[]).forEach(function(e){t.uri===e.uri&&(t.id=e.id)})}),e.sendEncodingParameters||[{ssrc:1001*(2*t+1)}]);n&&15019<=I&&"video"===r&&!t[0].rtx&&(t[0].rtx={ssrc:t[0].ssrc+1}),e.wantReceive&&(e.rtpReceiver=new R.RTCRtpReceiver(e.dtlsTransport,r)),e.localCapabilities=o,e.sendEncodingParameters=t}),"max-compat"!==i._config.bundlePolicy&&(r+="a=group:BUNDLE "+i.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),r+="a=ice-options:trickle\r\n",i.transceivers.forEach(function(e,t){r=r+writeMediaSection(e,e.localCapabilities,"offer",e.stream,i._dtlsRole)+"a=rtcp-rsize\r\n",!e.iceGatherer||"new"===i.iceGatheringState||0!==t&&i.usingBundle||(e.iceGatherer.getLocalCandidates().forEach(function(e){e.component=1,r+="a="+sdp.writeCandidate(e)+"\r\n"}),"completed"===e.iceGatherer.state&&(r+="a=end-of-candidates\r\n"))}),new R.RTCSessionDescription({type:"offer",sdp:r}));return Promise.resolve(e)},r.prototype.createAnswer=function(){var r,o,e,i=this;return i._isClosed?Promise.reject(makeError("InvalidStateError","Can not call createAnswer after close")):"have-remote-offer"!==i.signalingState&&"have-local-pranswer"!==i.signalingState?Promise.reject(makeError("InvalidStateError","Can not call createAnswer in signalingState "+i.signalingState)):(r=sdp.writeSessionBoilerplate(i._sdpSessionId,i._sdpSessionVersion++),i.usingBundle&&(r+="a=group:BUNDLE "+i.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),r+="a=ice-options:trickle\r\n",o=sdp.getMediaSections(i._remoteDescription.sdp).length,i.transceivers.forEach(function(e,t){var n;o<t+1||(e.rejected?("application"===e.kind?"DTLS/SCTP"===e.protocol?r+="m=application 0 DTLS/SCTP 5000\r\n":r+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?r+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(r+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),r+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n"):(e.stream&&("audio"===e.kind?n=e.stream.getAudioTracks()[0]:"video"===e.kind&&(n=e.stream.getVideoTracks()[0]),n)&&15019<=I&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}),!(t=getCommonCapabilities(e.localCapabilities,e.remoteCapabilities)).codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,r+=writeMediaSection(e,t,"answer",e.stream,i._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(r+="a=rtcp-rsize\r\n")))}),e=new R.RTCSessionDescription({type:"answer",sdp:r}),Promise.resolve(e))},r.prototype.addIceCandidate=function(s){var c,l=this;return s&&void 0===s.sdpMLineIndex&&!s.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(e,t){if(!l._remoteDescription)return t(makeError("InvalidStateError","Can not add ICE candidate without a remote description"));if(s&&""!==s.candidate){var n=s.sdpMLineIndex;if(s.sdpMid)for(var r=0;r<l.transceivers.length;r++)if(l.transceivers[r].mid===s.sdpMid){n=r;break}var o=l.transceivers[n];if(!o)return t(makeError("OperationError","Can not add ICE candidate"));if(o.rejected)return e();var i=0<Object.keys(s.candidate).length?sdp.parseCandidate(s.candidate):{};if("tcp"===i.protocol&&(0===i.port||9===i.port))return e();if(i.component&&1!==i.component)return e();if((0===n||0<n&&o.iceTransport!==l.transceivers[0].iceTransport)&&!maybeAddCandidate(o.iceTransport,i))return t(makeError("OperationError","Can not add ICE candidate"));o=s.candidate.trim();0===o.indexOf("a=")&&(o=o.substr(2)),(c=sdp.getMediaSections(l._remoteDescription.sdp))[n]+="a="+(i.type?o:"end-of-candidates")+"\r\n",l._remoteDescription.sdp=sdp.getDescription(l._remoteDescription.sdp)+c.join("")}else for(var a=0;a<l.transceivers.length&&(l.transceivers[a].rejected||(l.transceivers[a].iceTransport.addRemoteCandidate({}),(c=sdp.getMediaSections(l._remoteDescription.sdp))[a]+="a=end-of-candidates\r\n",l._remoteDescription.sdp=sdp.getDescription(l._remoteDescription.sdp)+c.join(""),!l.usingBundle));a++);e()})},r.prototype.getStats=function(t){if(t&&t instanceof R.MediaStreamTrack){var n=null;if(this.transceivers.forEach(function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)}),n)return n.getStats();throw makeError("InvalidAccessError","Invalid selector.")}var r=[];return this.transceivers.forEach(function(t){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(e){t[e]&&r.push(t[e].getStats())})}),Promise.all(r).then(function(e){var t=new Map;return e.forEach(function(e){e.forEach(function(e){t.set(e.id,e)})}),t})};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(e){var t,e=R[e];e&&e.prototype&&e.prototype.getStats&&(t=e.prototype.getStats,e.prototype.getStats=function(){return t.apply(this).then(function(t){var n=new Map;return Object.keys(t).forEach(function(e){t[e].type=fixStatsType(t[e]),n.set(e,t[e])}),n})})});var e=["createOffer","createAnswer"];return e.forEach(function(e){var n=r.prototype[e];r.prototype[e]=function(){var t=arguments;return"function"==typeof t[0]||"function"==typeof t[1]?n.apply(this,[arguments[2]]).then(function(e){"function"==typeof t[0]&&t[0].apply(null,[e])},function(e){"function"==typeof t[1]&&t[1].apply(null,[e])}):n.apply(this,arguments)}}),(e=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(e){var n=r.prototype[e];r.prototype[e]=function(){var t=arguments;return"function"==typeof t[1]||"function"==typeof t[2]?n.apply(this,arguments).then(function(){"function"==typeof t[1]&&t[1].apply(null)},function(e){"function"==typeof t[2]&&t[2].apply(null,[e])}):n.apply(this,arguments)}}),["getStats"].forEach(function(e){var t=r.prototype[e];r.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)}):t.apply(this,arguments)}}),r};function shimGetUserMedia$2(e){var e=e&&e.navigator,t=e.mediaDevices.getUserMedia.bind(e.mediaDevices);e.mediaDevices.getUserMedia=function(e){return t(e).catch(function(e){return Promise.reject({name:{PermissionDeniedError:"NotAllowedError"}[(e=e).name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}})})}}function shimGetDisplayMedia$1(e){"getDisplayMedia"in e.navigator&&(!e.navigator.mediaDevices||e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function shimPeerConnection$1(e,t){e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)&&(n=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled"),Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){n.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})),!e.RTCRtpSender||"dtmf"in e.RTCRtpSender.prototype||Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var n,r=rtcpeerconnection(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=filterIceServers$1(e.iceServers,t.version),log("ICE servers after filtering:",e.iceServers)),new r(e)},e.RTCPeerConnection.prototype=r.prototype}function shimReplaceTrack(e){!e.RTCRtpSender||"replaceTrack"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}var edgeShim=Object.freeze({__proto__:null,shimPeerConnection:shimPeerConnection$1,shimReplaceTrack:shimReplaceTrack,shimGetUserMedia:shimGetUserMedia$2,shimGetDisplayMedia:shimGetDisplayMedia$1});function shimGetUserMedia$1(e,t){var n,r,o,i,a=e&&e.navigator,e=e&&e.MediaStreamTrack;a.getUserMedia=function(e,t,n){deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),a.mediaDevices.getUserMedia(e).then(t,n)},55<t.version&&"autoGainControl"in a.mediaDevices.getSupportedConstraints()||(n=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},r=a.mediaDevices.getUserMedia.bind(a.mediaDevices),a.mediaDevices.getUserMedia=function(e){return"object"===_typeof(e)&&"object"===_typeof(e.audio)&&(e=JSON.parse(JSON.stringify(e)),n(e.audio,"autoGainControl","mozAutoGainControl"),n(e.audio,"noiseSuppression","mozNoiseSuppression")),r(e)},e&&e.prototype.getSettings&&(o=e.prototype.getSettings,e.prototype.getSettings=function(){var e=o.apply(this,arguments);return n(e,"mozAutoGainControl","autoGainControl"),n(e,"mozNoiseSuppression","noiseSuppression"),e}),e&&e.prototype.applyConstraints&&(i=e.prototype.applyConstraints,e.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===_typeof(e)&&(e=JSON.parse(JSON.stringify(e)),n(e,"autoGainControl","mozAutoGainControl"),n(e,"noiseSuppression","mozNoiseSuppression")),i.apply(this,[e])}))}function shimGetDisplayMedia(t,n){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(e){return e&&e.video?(!0===e.video?e.video={mediaSource:n}:e.video.mediaSource=n,t.navigator.mediaDevices.getUserMedia(e)):((e=new DOMException("getDisplayMedia without video constraints is undefined")).name="NotFoundError",e.code=8,Promise.reject(e))})}function shimOnTrack(e){"object"===_typeof(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function shimPeerConnection(r,o){var i,n;"object"===_typeof(r)&&(r.RTCPeerConnection||r.mozRTCPeerConnection)&&(!r.RTCPeerConnection&&r.mozRTCPeerConnection&&(r.RTCPeerConnection=r.mozRTCPeerConnection),o.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=r.RTCPeerConnection.prototype[e],n=_defineProperty({},e,function(){return arguments[0]=new("addIceCandidate"===e?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),t.apply(this,arguments)});r.RTCPeerConnection.prototype[e]=n[e]}),i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=r.RTCPeerConnection.prototype.getStats,r.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),t=e[0],r=e[1],e=e[2];return n.apply(this,[t||null]).then(function(n){if(o.version<53&&!r)try{n.forEach(function(e){e.type=i[e.type]||e.type})}catch(e){if("TypeError"!==e.name)throw e;n.forEach(function(e,t){n.set(t,Object.assign({},e,{type:i[e.type]||e.type}))})}return n}).then(r,e)})}function shimSenderGetStats(e){var n,t;"object"===_typeof(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype||((n=e.RTCPeerConnection.prototype.getSenders)&&(e.RTCPeerConnection.prototype.getSenders=function(){var t=this,e=n.apply(this,[]);return e.forEach(function(e){return e._pc=t}),e}),(t=e.RTCPeerConnection.prototype.addTrack)&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=t.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}))}function shimReceiverGetStats(e){var n;"object"===_typeof(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype||((n=e.RTCPeerConnection.prototype.getReceivers)&&(e.RTCPeerConnection.prototype.getReceivers=function(){var t=this,e=n.apply(this,[]);return e.forEach(function(e){return e._pc=t}),e}),wrapPeerConnectionEvent(e,"track",function(e){return e.receiver._pc=e.srcElement,e}),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}))}function shimRemoveStream(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(t){var n=this;deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(e){e.track&&t.getTracks().includes(e.track)&&n.removeTrack(e)})})}function shimRTCDataChannel(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function shimAddTransceiver(e){var o;"object"===_typeof(e)&&e.RTCPeerConnection&&(o=e.RTCPeerConnection.prototype.addTransceiver)&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e,t=arguments[1],n=t&&"sendEncodings"in t,r=(n&&t.sendEncodings.forEach(function(e){if("rid"in e)if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(1<=parseFloat(e.scaleResolutionDownBy)))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(0<=parseFloat(e.maxFramerate)))throw new RangeError("max_framerate must be >= 0.0")}),o.apply(this,arguments));return!n||"encodings"in(n=(e=r.sender).getParameters())&&(1!==n.encodings.length||0!==Object.keys(n.encodings[0]).length)||(n.encodings=t.sendEncodings,e.sendEncodings=t.sendEncodings,this.setParametersPromises.push(e.setParameters(n).then(function(){delete e.sendEncodings}).catch(function(){delete e.sendEncodings}))),r})}function shimGetParameters(e){var t;"object"===_typeof(e)&&e.RTCRtpSender&&(t=e.RTCRtpSender.prototype.getParameters)&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function shimCreateOffer(e){var n;"object"===_typeof(e)&&e.RTCPeerConnection&&(n=e.RTCPeerConnection.prototype.createOffer,e.RTCPeerConnection.prototype.createOffer=function(){var e=arguments,t=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return n.apply(t,e)}).finally(function(){t.setParametersPromises=[]}):n.apply(this,arguments)})}function shimCreateAnswer(e){var n;"object"===_typeof(e)&&e.RTCPeerConnection&&(n=e.RTCPeerConnection.prototype.createAnswer,e.RTCPeerConnection.prototype.createAnswer=function(){var e=arguments,t=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return n.apply(t,e)}).finally(function(){t.setParametersPromises=[]}):n.apply(this,arguments)})}var firefoxShim=Object.freeze({__proto__:null,shimOnTrack:shimOnTrack,shimPeerConnection:shimPeerConnection,shimSenderGetStats:shimSenderGetStats,shimReceiverGetStats:shimReceiverGetStats,shimRemoveStream:shimRemoveStream,shimRTCDataChannel:shimRTCDataChannel,shimAddTransceiver:shimAddTransceiver,shimGetParameters:shimGetParameters,shimCreateOffer:shimCreateOffer,shimCreateAnswer:shimCreateAnswer,shimGetUserMedia:shimGetUserMedia$1,shimGetDisplayMedia:shimGetDisplayMedia});function shimLocalStreamsAPI(e){var i;"object"===_typeof(e)&&e.RTCPeerConnection&&("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),"addStream"in e.RTCPeerConnection.prototype||(i=e.RTCPeerConnection.prototype.addTrack,e.RTCPeerConnection.prototype.addStream=function(t){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(t)||this._localStreams.push(t),t.getAudioTracks().forEach(function(e){return i.call(n,e,t)}),t.getVideoTracks().forEach(function(e){return i.call(n,e,t)})},e.RTCPeerConnection.prototype.addTrack=function(e){for(var t=this,n=arguments.length,r=new Array(1<n?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r&&r.forEach(function(e){t._localStreams?t._localStreams.includes(e)||t._localStreams.push(e):t._localStreams=[e]}),i.apply(this,arguments)}),"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t,n=this,r=(this._localStreams||(this._localStreams=[]),this._localStreams.indexOf(e));-1!==r&&(this._localStreams.splice(r,1),t=e.getTracks(),this.getSenders().forEach(function(e){t.includes(e.track)&&n.removeTrack(e)}))}))}function shimRemoteStreamsAPI(e){var t;"object"===_typeof(e)&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams||[]}),"onaddstream"in e.RTCPeerConnection.prototype||(Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var n=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach(function(e){var t;n._remoteStreams||(n._remoteStreams=[]),n._remoteStreams.includes(e)||(n._remoteStreams.push(e),(t=new Event("addstream")).stream=e,n.dispatchEvent(t))})})}}),t=e.RTCPeerConnection.prototype.setRemoteDescription,e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach(function(e){var t;n._remoteStreams||(n._remoteStreams=[]),0<=n._remoteStreams.indexOf(e)||(n._remoteStreams.push(e),(t=new Event("addstream")).stream=e,n.dispatchEvent(t))})}),t.apply(n,arguments)}))}function shimCallbacksAPI(e){var r,o,i,a,s;"object"===_typeof(e)&&e.RTCPeerConnection&&(e=e.RTCPeerConnection.prototype,r=e.createOffer,o=e.createAnswer,i=e.setLocalDescription,a=e.setRemoteDescription,s=e.addIceCandidate,e.createOffer=function(e,t){var n=r.apply(this,[2<=arguments.length?arguments[2]:e]);return t?(n.then(e,t),Promise.resolve()):n},e.createAnswer=function(e,t){var n=o.apply(this,[2<=arguments.length?arguments[2]:e]);return t?(n.then(e,t),Promise.resolve()):n},e.setLocalDescription=function(e,t,n){e=i.apply(this,[e]);return n?(e.then(t,n),Promise.resolve()):e},e.setRemoteDescription=function(e,t,n){e=a.apply(this,[e]);return n?(e.then(t,n),Promise.resolve()):e},e.addIceCandidate=function(e,t,n){e=s.apply(this,[e]);return n?(e.then(t,n),Promise.resolve()):e})}function shimGetUserMedia(e){var t,r=e&&e.navigator;r.mediaDevices&&r.mediaDevices.getUserMedia&&(e=r.mediaDevices,t=e.getUserMedia.bind(e),r.mediaDevices.getUserMedia=function(e){return t(shimConstraints(e))}),!r.getUserMedia&&r.mediaDevices&&r.mediaDevices.getUserMedia&&(r.getUserMedia=function(e,t,n){r.mediaDevices.getUserMedia(e).then(t,n)}.bind(r))}function shimConstraints(e){return e&&void 0!==e.video?Object.assign({},e,{video:compactObject(e.video)}):e}function shimRTCIceServerUrls(e){var i;e.RTCPeerConnection&&(i=e.RTCPeerConnection,e.RTCPeerConnection=function(e,t){if(e&&e.iceServers){for(var n=[],r=0;r<e.iceServers.length;r++){var o=e.iceServers[r];!o.hasOwnProperty("urls")&&o.hasOwnProperty("url")?(deprecated("RTCIceServer.url","RTCIceServer.urls"),(o=JSON.parse(JSON.stringify(o))).urls=o.url,delete o.url,n.push(o)):n.push(e.iceServers[r])}e.iceServers=n}return new i(e,t)},e.RTCPeerConnection.prototype=i.prototype,"generateCertificate"in i)&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return i.generateCertificate}})}function shimTrackEventTransceiver(e){"object"===_typeof(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function shimCreateOfferLegacy(e){var n=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){var t;return e&&(void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio),t=this.getTransceivers().find(function(e){return"audio"===e.receiver.track.kind}),!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo),t=this.getTransceivers().find(function(e){return"video"===e.receiver.track.kind}),!1===e.offerToReceiveVideo&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveVideo||t||this.addTransceiver("video")),n.apply(this,arguments)}}function shimAudioContext(e){"object"!==_typeof(e)||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var safariShim=Object.freeze({__proto__:null,shimLocalStreamsAPI:shimLocalStreamsAPI,shimRemoteStreamsAPI:shimRemoteStreamsAPI,shimCallbacksAPI:shimCallbacksAPI,shimGetUserMedia:shimGetUserMedia,shimConstraints:shimConstraints,shimRTCIceServerUrls:shimRTCIceServerUrls,shimTrackEventTransceiver:shimTrackEventTransceiver,shimCreateOfferLegacy:shimCreateOfferLegacy,shimAudioContext:shimAudioContext});function shimRTCIceCandidate(t){var o;!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype||(o=t.RTCIceCandidate,t.RTCIceCandidate=function(e){var t,n,r;return"object"===_typeof(e)&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length?(t=new o(e),n=sdp.parseCandidate(e.candidate),(r=Object.assign(t,n)).toJSON=function(){return{candidate:r.candidate,sdpMid:r.sdpMid,sdpMLineIndex:r.sdpMLineIndex,usernameFragment:r.usernameFragment}},r):new o(e)},t.RTCIceCandidate.prototype=o.prototype,wrapPeerConnectionEvent(t,"icecandidate",function(e){return e.candidate&&Object.defineProperty(e,"candidate",{value:new t.RTCIceCandidate(e.candidate),writable:"false"}),e}))}function shimMaxMessageSize(e,i){var a;e.RTCPeerConnection&&("sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}}),a=e.RTCPeerConnection.prototype.setRemoteDescription,e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e,t,n,r,o;return this._sctp=null,"chrome"===i.browser&&76<=i.version&&"plan-b"===this.getConfiguration().sdpSemantics&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0}),(o=arguments[0])&&o.sdp&&((o=sdp.splitSections(o.sdp)).shift(),o.some(function(e){e=sdp.parseMLine(e);return e&&"application"===e.kind&&-1!==e.protocol.indexOf("SCTP")}))&&(o=null===(o=(o=arguments[0]).sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/))||o.length<2||(o=parseInt(o[1],10))!=o?-1:o,n=o,r=65536,n=r="firefox"===i.browser?i.version<57?-1===n?16384:2147483637:i.version<60?57===i.version?65535:65536:2147483637:r,r=arguments[0],o=o,t=65536,"firefox"===i.browser&&57===i.version&&(t=65535),0<(r=sdp.matchPrefix(r.sdp,"a=max-message-size:")).length?t=parseInt(r[0].substr(19),10):"firefox"===i.browser&&-1!==o&&(t=2147483637),r=t,e=0===n&&0===r?Number.POSITIVE_INFINITY:0===n||0===r?Math.max(n,r):Math.min(n,r),o={},Object.defineProperty(o,"maxMessageSize",{get:function(){return e}}),this._sctp=o),a.apply(this,arguments)})}function shimSendThrowTypeError(e){var t;function n(t,n){var r=t.send;t.send=function(){var e=arguments[0],e=e.length||e.size||e.byteLength;if("open"===t.readyState&&n.sctp&&e>n.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+n.sctp.maxMessageSize+" bytes)");return r.apply(t,arguments)}}e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype&&(t=e.RTCPeerConnection.prototype.createDataChannel,e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},wrapPeerConnectionEvent(e,"datachannel",function(e){return n(e.channel,e.target),e}))}function shimConnectionState(e){var n;!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype||(n=e.RTCPeerConnection.prototype,Object.defineProperty(n,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(n,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(function(e){var t=n[e];n[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t,n=e.target;return n._lastConnectionState!==n.connectionState&&(n._lastConnectionState=n.connectionState,t=new Event("connectionstatechange",e),n.dispatchEvent(t)),e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),t.apply(this,arguments)}}))}function removeExtmapAllowMixed(n,e){var r;!n.RTCPeerConnection||"chrome"===e.browser&&71<=e.version||"safari"===e.browser&&605<=e.version||(r=n.RTCPeerConnection.prototype.setRemoteDescription,n.RTCPeerConnection.prototype.setRemoteDescription=function(e){var t;return e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")&&(t=e.sdp.split("\n").filter(function(e){return"a=extmap-allow-mixed"!==e.trim()}).join("\n"),n.RTCSessionDescription&&e instanceof n.RTCSessionDescription?arguments[0]=new n.RTCSessionDescription({type:e.type,sdp:t}):e.sdp=t),r.apply(this,arguments)})}function shimAddIceCandidateNullOrEmpty(e,t){var n;e.RTCPeerConnection&&e.RTCPeerConnection.prototype&&(n=e.RTCPeerConnection.prototype.addIceCandidate)&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}var commonShim=Object.freeze({__proto__:null,shimRTCIceCandidate:shimRTCIceCandidate,shimMaxMessageSize:shimMaxMessageSize,shimSendThrowTypeError:shimSendThrowTypeError,shimConnectionState:shimConnectionState,removeExtmapAllowMixed:removeExtmapAllowMixed,shimAddIceCandidateNullOrEmpty:shimAddIceCandidateNullOrEmpty});function adapterFactory(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).window,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},n=log,r=detectBrowser(e),o={browserDetails:r,commonShim:commonShim,extractVersion:extractVersion,disableLog:disableLog,disableWarnings:disableWarnings};switch(r.browser){case"chrome":if(!chromeShim||!shimPeerConnection$2||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),o;if(null===r.version)return n("Chrome shim can not determine version, not shimming."),o;n("adapter.js shimming chrome."),o.browserShim=chromeShim,shimAddIceCandidateNullOrEmpty(e,r),shimGetUserMedia$3(e,r),shimMediaStream(e),shimPeerConnection$2(e,r),shimOnTrack$1(e),shimAddTrackRemoveTrack(e,r),shimGetSendersWithDtmf(e),shimGetStats(e),shimSenderReceiverGetStats(e),fixNegotiationNeeded(e,r),shimRTCIceCandidate(e),shimConnectionState(e),shimMaxMessageSize(e,r),shimSendThrowTypeError(e),removeExtmapAllowMixed(e,r);break;case"firefox":if(!firefoxShim||!shimPeerConnection||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),o;n("adapter.js shimming firefox."),o.browserShim=firefoxShim,shimAddIceCandidateNullOrEmpty(e,r),shimGetUserMedia$1(e,r),shimPeerConnection(e,r),shimOnTrack(e),shimRemoveStream(e),shimSenderGetStats(e),shimReceiverGetStats(e),shimRTCDataChannel(e),shimAddTransceiver(e),shimGetParameters(e),shimCreateOffer(e),shimCreateAnswer(e),shimRTCIceCandidate(e),shimConnectionState(e),shimMaxMessageSize(e,r),shimSendThrowTypeError(e);break;case"edge":if(!edgeShim||!shimPeerConnection$1||!t.shimEdge)return n("MS edge shim is not included in this adapter release."),o;n("adapter.js shimming edge."),o.browserShim=edgeShim,shimGetUserMedia$2(e),shimGetDisplayMedia$1(e),shimPeerConnection$1(e,r),shimReplaceTrack(e),shimMaxMessageSize(e,r),shimSendThrowTypeError(e);break;case"safari":if(!safariShim||!t.shimSafari)return n("Safari shim is not included in this adapter release."),o;n("adapter.js shimming safari."),o.browserShim=safariShim,shimAddIceCandidateNullOrEmpty(e,r),shimRTCIceServerUrls(e),shimCreateOfferLegacy(e),shimCallbacksAPI(e),shimLocalStreamsAPI(e),shimRemoteStreamsAPI(e),shimTrackEventTransceiver(e),shimGetUserMedia(e),shimAudioContext(e),shimRTCIceCandidate(e),shimMaxMessageSize(e,r),shimSendThrowTypeError(e),removeExtmapAllowMixed(e,r);break;default:n("Unsupported browser!")}return o}var adapter=adapterFactory({window:"undefined"==typeof window?void 0:window}),re$1=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts$1=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],_parseuri_0_0_5_parseuri=function(e){for(var t=e,n=e.indexOf("["),r=e.indexOf("]"),o=(-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length)),re$1.exec(e||"")),i={},a=14;a--;)i[parts$1[a]]=o[a]||"";return-1!=n&&-1!=r&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i},s$1=1e3,m$1=60*s$1,h$1=60*m$1,d$1=24*h$1,w=7*d$1,y$1=365.25*d$1,_ms_2_1_3_ms=function(e,t){t=t||{};var n=_typeof(e);if("string"===n&&0<e.length)return parse$2(e);if("number"===n&&isFinite(e))return(t.long?fmtLong$1:fmtShort$1)(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse$2(e){if(!(100<(e=String(e)).length)){e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(e){var t=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return t*y$1;case"weeks":case"week":case"w":return t*w;case"days":case"day":case"d":return t*d$1;case"hours":case"hour":case"hrs":case"hr":case"h":return t*h$1;case"minutes":case"minute":case"mins":case"min":case"m":return t*m$1;case"seconds":case"second":case"secs":case"sec":case"s":return t*s$1;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function fmtShort$1(e){var t=Math.abs(e);return d$1<=t?Math.round(e/d$1)+"d":h$1<=t?Math.round(e/h$1)+"h":m$1<=t?Math.round(e/m$1)+"m":s$1<=t?Math.round(e/s$1)+"s":e+"ms"}function fmtLong$1(e){var t=Math.abs(e);return d$1<=t?plural$1(e,t,d$1,"day"):h$1<=t?plural$1(e,t,h$1,"hour"):m$1<=t?plural$1(e,t,m$1,"minute"):s$1<=t?plural$1(e,t,s$1,"second"):e+" ms"}function plural$1(e,t,n,r){t=1.5*n<=t;return Math.round(e/n)+" "+r+(t?"s":"")}function setup(t){function n(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return l.colors[Math.abs(t)%l.colors.length]}function l(e){var s;function c(){for(var r,e,t,o,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];c.enabled&&(r=c,t=(e=Number(new Date))-(s||e),r.diff=t,r.prev=s,r.curr=e,s=e,i[0]=l.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O"),i[o=0]=i[0].replace(/%([a-zA-Z%])/g,function(e,t){var n;return"%%"!==e&&(o++,"function"==typeof(t=l.formatters[t]))&&(n=i[o],e=t.call(r,n),i.splice(o,1),o--),e}),l.formatArgs.call(r,i),(r.log||l.log).apply(r,i))}return c.namespace=e,c.enabled=l.enabled(e),c.useColors=l.useColors(),c.color=n(e),c.destroy=r,c.extend=o,"function"==typeof l.init&&l.init(c),l.instances.push(c),c}function r(){var e=l.instances.indexOf(this);return-1!==e&&(l.instances.splice(e,1),!0)}function o(e,t){t=l(this.namespace+(void 0===t?":":t)+e);return t.log=this.log,t}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return((l.debug=l).default=l).coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},l.disable=function(){var e=[].concat(_toConsumableArray(l.names.map(i)),_toConsumableArray(l.skips.map(i).map(function(e){return"-"+e}))).join(",");return l.enable(""),e},l.enable=function(e){l.save(e),l.names=[],l.skips=[];var t,n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length;for(t=0;t<r;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?l.skips.push(new RegExp("^"+e.substr(1)+"$")):l.names.push(new RegExp("^"+e+"$")));for(t=0;t<l.instances.length;t++){var o=l.instances[t];o.enabled=l.enabled(o.namespace)}},l.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=l.skips.length;t<n;t++)if(l.skips[t].test(e))return!1;for(t=0,n=l.names.length;t<n;t++)if(l.names[t].test(e))return!0;return!1},l.humanize=_ms_2_1_3_ms,Object.keys(t).forEach(function(e){l[e]=t[e]}),l.instances=[],l.names=[],l.skips=[],l.formatters={},l.selectColor=n,l.enable(l.load()),l}var common=setup,browser$2=createCommonjsModule(function(o,t){t.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":_typeof(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(e){var t,n,r;e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+o.exports.humanize(this.diff),this.useColors&&(t="color: "+this.color,e.splice(1,0,t,"color: inherit"),e[r=n=0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e)&&(r=n)}),e.splice(r,0,t))},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],o.exports=common(t),o.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}),debug$6=browser$2("socket.io-client:url"),url_1=url;function url(e,t){var n=e;t=t||"undefined"!=typeof location&&location,"string"==typeof(e=null==e?t.protocol+"//"+t.host:e)&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(debug$6("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),debug$6("parse %s",e),n=_parseuri_0_0_5_parseuri(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";e=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+e+":"+n.port,n.href=n.protocol+"://"+e+(t&&t.port===n.port?"":":"+n.port),n}var s=1e3,m=60*s,h=60*m,d=24*h,y=365.25*d,_ms_2_0_0_ms=function(e,t){t=t||{};var n=_typeof(e);if("string"===n&&0<e.length)return parse$1(e);if("number"===n&&!1===isNaN(e))return(t.long?fmtLong:fmtShort)(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse$1(e){if(!(100<(e=String(e)).length)){e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(e){var t=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return t*y;case"days":case"day":case"d":return t*d;case"hours":case"hour":case"hrs":case"hr":case"h":return t*h;case"minutes":case"minute":case"mins":case"min":case"m":return t*m;case"seconds":case"second":case"secs":case"sec":case"s":return t*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function fmtShort(e){return d<=e?Math.round(e/d)+"d":h<=e?Math.round(e/h)+"h":m<=e?Math.round(e/m)+"m":s<=e?Math.round(e/s)+"s":e+"ms"}function fmtLong(e){return plural(e,d,"day")||plural(e,h,"hour")||plural(e,m,"minute")||plural(e,s,"second")||e+" ms"}function plural(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var debug$5=createCommonjsModule(function(e,c){function t(e){var a;function s(){if(s.enabled){for(var r=s,e=+new Date,t=e-(a||e),o=(r.diff=t,r.prev=a,r.curr=e,a=e,new Array(arguments.length)),n=0;n<o.length;n++)o[n]=arguments[n];o[0]=c.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var i=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(e,t){var n;return"%%"!==e&&(i++,"function"==typeof(t=c.formatters[t]))&&(n=o[i],e=t.call(r,n),o.splice(i,1),i--),e}),c.formatArgs.call(r,o),(s.log||c.log||void 0).apply(r,o)}}return s.namespace=e,s.enabled=c.enabled(e),s.useColors=c.useColors(),s.color=function(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return c.colors[Math.abs(n)%c.colors.length]}(e),s.destroy=n,"function"==typeof c.init&&c.init(s),c.instances.push(s),s}function n(){var e=c.instances.indexOf(this);return-1!==e&&(c.instances.splice(e,1),!0)}(c=e.exports=t.debug=t.default=t).coerce=function(e){return e instanceof Error?e.stack||e.message:e},c.disable=function(){c.enable("")},c.enable=function(e){c.save(e),c.names=[],c.skips=[];var t,n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length;for(t=0;t<r;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?c.skips.push(new RegExp("^"+e.substr(1)+"$")):c.names.push(new RegExp("^"+e+"$")));for(t=0;t<c.instances.length;t++){var o=c.instances[t];o.enabled=c.enabled(o.namespace)}},c.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=c.skips.length;t<n;t++)if(c.skips[t].test(e))return!1;for(t=0,n=c.names.length;t<n;t++)if(c.names[t].test(e))return!0;return!1},c.humanize=_ms_2_0_0_ms,c.instances=[],c.names=[],c.skips=[],c.formatters={}}),browser$1=createCommonjsModule(function(e,o){function t(){var e;try{e=o.storage.debug}catch(e){}return e=!e&&"undefined"!=typeof process&&"env"in process?process.env.DEBUG:e}(o=e.exports=debug$5).log=function(){return"object"===("undefined"==typeof console?"undefined":_typeof(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},o.formatArgs=function(e){var t,n,r=this.useColors;e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+o.humanize(this.diff),r&&(r="color: "+this.color,e.splice(1,0,r,"color: inherit"),e[n=t=0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(t++,"%c"===e)&&(n=t)}),e.splice(n,0,r))},o.save=function(e){try{null==e?o.storage.removeItem("debug"):o.storage.debug=e}catch(e){}},o.load=t,o.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},o.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),o.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],o.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},o.enable(t())}),_componentEmitter_1_3_0_componentEmitter=createCommonjsModule(function(e){function r(e){if(e){var t,n=e;for(t in r.prototype)n[t]=r.prototype[t];return n}}(e.exports=r).prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)this._callbacks={};else{var n=this._callbacks["$"+e];if(n)if(1==arguments.length)delete this._callbacks["$"+e];else{for(var r,o=0;o<n.length;o++)if((r=n[o])===t||r.fn===t){n.splice(o,1);break}0===n.length&&delete this._callbacks["$"+e]}}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n)for(var r=0,o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}}),toString$3={}.toString,_isarray_2_0_1_isarray=Array.isArray||function(e){return"[object Array]"==toString$3.call(e)},isBuffer=isBuf,withNativeBuffer="function"==typeof Buffer&&"function"==typeof Buffer.isBuffer,withNativeArrayBuffer="function"==typeof ArrayBuffer,isView=function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer};function isBuf(e){return withNativeBuffer&&Buffer.isBuffer(e)||withNativeArrayBuffer&&(e instanceof ArrayBuffer||isView(e))}var toString$2=Object.prototype.toString,withNativeBlob$1="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===toString$2.call(Blob),withNativeFile$1="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===toString$2.call(File),deconstructPacket=function(e){var t=[],n=e.data;return e.data=_deconstructPacket(n,t),e.attachments=t.length,{packet:e,buffers:t}};function _deconstructPacket(e,t){if(!e)return e;var n;if(isBuffer(e))return n={_placeholder:!0,num:t.length},t.push(e),n;if(_isarray_2_0_1_isarray(e))for(var r=new Array(e.length),o=0;o<e.length;o++)r[o]=_deconstructPacket(e[o],t);else{if("object"!==_typeof(e)||e instanceof Date)return e;var i,r={};for(i in e)r[i]=_deconstructPacket(e[i],t)}return r}var reconstructPacket=function(e,t){return e.data=_reconstructPacket(e.data,t),e.attachments=void 0,e};function _reconstructPacket(e,t){if(e){if(e&&!0===e._placeholder){if("number"==typeof e.num&&0<=e.num&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(_isarray_2_0_1_isarray(e))for(var n=0;n<e.length;n++)e[n]=_reconstructPacket(e[n],t);else if("object"===_typeof(e))for(var r in e)e[r]=_reconstructPacket(e[r],t)}return e}var removeBlobs=function(e,s){var c=0,l=e;!function e(t,n,r){if(t)if(withNativeBlob$1&&t instanceof Blob||withNativeFile$1&&t instanceof File){c++;var o=new FileReader;o.onload=function(){r?r[n]=this.result:l=this.result,--c||s(l)},o.readAsArrayBuffer(t)}else if(_isarray_2_0_1_isarray(t))for(var i=0;i<t.length;i++)e(t[i],i,t);else if("object"===_typeof(t)&&!isBuffer(t))for(var a in t)e(t[a],a,t)}(l),c||s(l)},binary={deconstructPacket:deconstructPacket,reconstructPacket:reconstructPacket,removeBlobs:removeBlobs},_socket_ioParser_3_3_3_socket_ioParser=createCommonjsModule(function(e,a){var s=browser$1("socket.io-parser");function t(){}a.protocol=4,a.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],a.CONNECT=0,a.DISCONNECT=1,a.EVENT=2,a.ACK=3,a.ERROR=4,a.BINARY_EVENT=5,a.BINARY_ACK=6,a.Encoder=t,a.Decoder=n;var r=a.ERROR+'"encode error"';function o(e){var t=""+e.type;if(a.BINARY_EVENT!==e.type&&a.BINARY_ACK!==e.type||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data){var n=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===n)return r;t+=n}return s("encoded %j as %s",e,t),t}function n(){this.reconstructor=null}function i(e){this.reconPack=e,this.buffers=[]}function c(e){return{type:a.ERROR,data:"parser error: "+e}}t.prototype.encode=function(e,t){var n;s("encoding packet %j",e),a.BINARY_EVENT===e.type||a.BINARY_ACK===e.type?(n=t,binary.removeBlobs(e,function(e){var t=o((e=binary.deconstructPacket(e)).packet);(e=e.buffers).unshift(t),n(e)})):t([o(e)])},_componentEmitter_1_3_0_componentEmitter(n.prototype),n.prototype.add=function(e){var t;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=function(e){var t=0,n={type:Number(e.charAt(0))};if(null==a.types[n.type])return c("unknown packet type "+n.type);if(a.BINARY_EVENT===n.type||a.BINARY_ACK===n.type){for(var r=t+1;"-"!==e.charAt(++t)&&t!=e.length;);var o=e.substring(r,t);if(o!=Number(o)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(o)}if("/"===e.charAt(t+1)){for(r=t+1;++t;){if(","===(i=e.charAt(t)))break;if(t===e.length)break}n.nsp=e.substring(r,t)}else n.nsp="/";o=e.charAt(t+1);if(""!==o&&Number(o)==o){for(var i,r=t+1;++t;){if(null==(i=e.charAt(t))||Number(i)!=i){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){o=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(t));if(!(!1!==o&&(n.type===a.ERROR||_isarray_2_0_1_isarray(o))))return c("invalid payload");n.data=o}return s("decoded %s as %j",e,n),n}(e),(a.BINARY_EVENT!==t.type&&a.BINARY_ACK!==t.type||(this.reconstructor=new i(t),0===this.reconstructor.reconPack.attachments))&&this.emit("decoded",t)}else{if(!isBuffer(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",t))}},n.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},i.prototype.takeBinaryData=function(e){return this.buffers.push(e),this.buffers.length===this.reconPack.attachments?(e=binary.reconstructPacket(this.reconPack,this.buffers),this.finishedReconstruction(),e):null},i.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}}),_hasCors_1_1_0_hasCors=createCommonjsModule(function(t){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}}),globalThis_browser="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")(),xmlhttprequest=function(e){var t=e.xdomain,n=e.xscheme,e=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||_hasCors_1_1_0_hasCors))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&e)return new XDomainRequest}catch(e){}if(!t)try{return new globalThis_browser[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(e){}},keys=Object.keys||function(e){var t,n=[],r=Object.prototype.hasOwnProperty;for(t in e)r.call(e,t)&&n.push(t);return n},toString$1=Object.prototype.toString,withNativeBlob="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===toString$1.call(Blob),withNativeFile="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===toString$1.call(File),_hasBinary2_1_0_3_hasBinary2=hasBinary;function hasBinary(e){if(e&&"object"===_typeof(e))if(_isarray_2_0_1_isarray(e)){for(var t=0,n=e.length;t<n;t++)if(hasBinary(e[t]))return!0}else{if("function"==typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(e)||"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||withNativeBlob&&e instanceof Blob||withNativeFile&&e instanceof File)return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return hasBinary(e.toJSON(),!0);for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&hasBinary(e[r]))return!0}return!1}var _arraybuffer_slice_0_0_7_arraybuffer_slice=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),r<n&&(n=r),r<=t||n<=t||0===r)return new ArrayBuffer(0);for(var o=new Uint8Array(e),i=new Uint8Array(n-t),a=t,s=0;a<n;a++,s++)i[s]=o[a];return i.buffer},_after_0_8_2_after=after$1;function after$1(e,n,r){var o=!1;return r=r||noop,0===(i.count=e)?n():i;function i(e,t){if(i.count<=0)throw new Error("after called too many times");--i.count,e?(o=!0,n(e),n=r):0!==i.count||o||n(null,t)}}function noop(){}var stringFromCharCode=String.fromCharCode,byteArray,byteCount,byteIndex;function ucs2decode(e){for(var t,n,r=[],o=0,i=e.length;o<i;)55296<=(t=e.charCodeAt(o++))&&t<=56319&&o<i?56320==(64512&(n=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}function ucs2encode(e){for(var t,n=e.length,r=-1,o="";++r<n;)65535<(t=e[r])&&(o+=stringFromCharCode((t-=65536)>>>10&1023|55296),t=56320|1023&t),o+=stringFromCharCode(t);return o}function checkScalarValue(e,t){if(!(55296<=e&&e<=57343))return 1;if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function createByte(e,t){return stringFromCharCode(e>>t&63|128)}function encodeCodePoint(e,t){var n;return 0==(4294967168&e)?stringFromCharCode(e):(n="",0==(4294965248&e)?n=stringFromCharCode(e>>6&31|192):0==(4294901760&e)?(checkScalarValue(e,t)||(e=65533),n=stringFromCharCode(e>>12&15|224),n+=createByte(e,6)):0==(4292870144&e)&&(n=stringFromCharCode(e>>18&7|240),n=(n+=createByte(e,12))+createByte(e,6)),n+stringFromCharCode(63&e|128))}function utf8encode(e,t){for(var n=!1!==(t=t||{}).strict,r=ucs2decode(e),o=r.length,i=-1,a="";++i<o;)a+=encodeCodePoint(r[i],n);return a}function readContinuationByte(){if(byteCount<=byteIndex)throw Error("Invalid byte index");var e=255&byteArray[byteIndex];if(byteIndex++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function decodeSymbol(e){var t,n;if(byteCount<byteIndex)throw Error("Invalid byte index");if(byteIndex==byteCount)return!1;if(t=255&byteArray[byteIndex],byteIndex++,0==(128&t))return t;if(192==(224&t)){if(128<=(n=(31&t)<<6|readContinuationByte()))return n;throw Error("Invalid continuation byte")}if(224==(240&t)){if(2048<=(n=(15&t)<<12|readContinuationByte()<<6|readContinuationByte()))return checkScalarValue(n,e)?n:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&65536<=(n=(7&t)<<18|readContinuationByte()<<12|readContinuationByte()<<6|readContinuationByte())&&n<=1114111)return n;throw Error("Invalid UTF-8 detected")}function utf8decode(e,t){for(var n,r=!1!==(t=t||{}).strict,o=(byteArray=ucs2decode(e),byteCount=byteArray.length,byteIndex=0,[]);!1!==(n=decodeSymbol(r));)o.push(n);return ucs2encode(o)}var utf8={version:"2.1.2",encode:utf8encode,decode:utf8decode},base64Arraybuffer=createCommonjsModule(function(e,t){var d;d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t.encode=function(e){for(var t=new Uint8Array(e),n=t.length,r="",o=0;o<n;o+=3)r=(r=(r=(r+=d[t[o]>>2])+d[(3&t[o])<<4|t[o+1]>>4])+d[(15&t[o+1])<<2|t[o+2]>>6])+d[63&t[o+2]];return n%3==2?r=r.substring(0,r.length-1)+"=":n%3==1&&(r=r.substring(0,r.length-2)+"=="),r},t.decode=function(e){for(var t,n,r,o,i=.75*e.length,a=e.length,s=0,i=("="===e[e.length-1]&&(i--,"="===e[e.length-2])&&i--,new ArrayBuffer(i)),c=new Uint8Array(i),l=0;l<a;l+=4)t=d.indexOf(e[l]),n=d.indexOf(e[l+1]),r=d.indexOf(e[l+2]),o=d.indexOf(e[l+3]),c[s++]=t<<2|n>>4,c[s++]=(15&n)<<4|r>>2,c[s++]=(3&r)<<6|63&o;return i}}),BlobBuilder=void 0!==BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,blobSupported=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),blobSupportsArrayBufferView=blobSupported&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),blobBuilderSupported=BlobBuilder&&BlobBuilder.prototype.append&&BlobBuilder.prototype.getBlob;function mapArrayBufferViews(e){return e.map(function(e){var t,n;return e.buffer instanceof ArrayBuffer?(t=e.buffer,e.byteLength!==t.byteLength&&((n=new Uint8Array(e.byteLength)).set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=n.buffer),t):e})}function BlobBuilderConstructor(e,t){t=t||{};var n=new BlobBuilder;return mapArrayBufferViews(e).forEach(function(e){n.append(e)}),t.type?n.getBlob(t.type):n.getBlob()}function BlobConstructor(e,t){return new Blob(mapArrayBufferViews(e),t||{})}"undefined"!=typeof Blob&&(BlobBuilderConstructor.prototype=Blob.prototype,BlobConstructor.prototype=Blob.prototype);var _blob_0_0_5_blob=blobSupported?blobSupportsArrayBufferView?Blob:BlobConstructor:blobBuilderSupported?BlobBuilderConstructor:void 0,browser=createCommonjsModule(function(e,m){"undefined"!=typeof ArrayBuffer&&(o=base64Arraybuffer);var o,t="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),n="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),A=t||n,y=(m.protocol=3,m.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6}),i=keys(y),p={type:"error",data:"parser error"};function a(e,t,n){for(var o=new Array(e.length),r=_after_0_8_2_after(e.length,n),i=0;i<e.length;i++)!function(n,e,r){t(e,function(e,t){o[n]=t,r(e,o)})}(i,e[i],r)}m.encodePacket=function(e,t,n,r){"function"==typeof t&&(r=t,t=!1),"function"==typeof n&&(r=n,n=null);var o=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!=typeof ArrayBuffer&&o instanceof ArrayBuffer){var i=e,a=r;if(!(s=t))return m.encodeBase64Packet(i,a);var s=i.data,c=new Uint8Array(s),l=new Uint8Array(1+s.byteLength);l[0]=y[i.type];for(var d=0;d<c.length;d++)l[d+1]=c[d];return a(l.buffer)}if(void 0!==_blob_0_0_5_blob&&o instanceof _blob_0_0_5_blob){var u,s=e,i=t,a=r;if(!i)return m.encodeBase64Packet(s,a);if(A){var p=s;var h=i;var f=a;return h?((u=new FileReader).onload=function(){m.encodePacket({type:p.type,data:u.result},h,!0,f)},u.readAsArrayBuffer(p.data)):m.encodeBase64Packet(p,f);return}return(i=new Uint8Array(1))[0]=y[s.type],i=new _blob_0_0_5_blob([i.buffer,s.data]),a(i)}return o&&o.base64?(t=e,o=r,t="b"+m.packets[e.type]+e.data.data,o(t)):(o=y[e.type],void 0!==e.data&&(o+=n?utf8.encode(String(e.data),{strict:!1}):String(e.data)),r(""+o))},m.encodeBase64Packet=function(t,n){var r,o,i="b"+m.packets[t.type];if(void 0!==_blob_0_0_5_blob&&t.data instanceof _blob_0_0_5_blob)return(r=new FileReader).onload=function(){var e=r.result.split(",")[1];n(i+e)},r.readAsDataURL(t.data);try{o=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(e){for(var a=new Uint8Array(t.data),s=new Array(a.length),c=0;c<a.length;c++)s[c]=a[c];o=String.fromCharCode.apply(null,s)}return i+=btoa(o),n(i)},m.decodePacket=function(e,t,n){var r;return void 0===e?p:"string"==typeof e?"b"===e.charAt(0)?m.decodeBase64Packet(e.substr(1),t):(!n||!1!==(e=function(e){try{e=utf8.decode(e,{strict:!1})}catch(e){return!1}return e}(e)))&&(r=e.charAt(0),Number(r)==r)&&i[r]?1<e.length?{type:i[r],data:e.substring(1)}:{type:i[r]}:p:(r=new Uint8Array(e)[0],n=_arraybuffer_slice_0_0_7_arraybuffer_slice(e,1),_blob_0_0_5_blob&&"blob"===t&&(n=new _blob_0_0_5_blob([n])),{type:i[r],data:n})},m.decodeBase64Packet=function(e,t){var n,r=i[e.charAt(0)];return o?(n=o.decode(e.substr(1)),{type:r,data:n="blob"===t&&_blob_0_0_5_blob?new _blob_0_0_5_blob([n]):n}):{type:r,data:{base64:!0,data:e.substr(1)}}},m.encodePayload=function(e,n,r){"function"==typeof n&&(r=n,n=null);var o=_hasBinary2_1_0_3_hasBinary2(e);return n&&o?_blob_0_0_5_blob&&!A?m.encodePayloadAsBlob(e,r):m.encodePayloadAsArrayBuffer(e,r):e.length?void a(e,function(e,t){m.encodePacket(e,!!o&&n,!1,function(e){t(null,e.length+":"+e)})},function(e,t){return r(t.join(""))}):r("0:")},m.decodePayload=function(e,t,n){if("string"!=typeof e)return m.decodePayloadAsBinary(e,t,n);if("function"==typeof t&&(n=t,t=null),""===e)return n(p,0,1);for(var r,o="",i=0,a=e.length;i<a;i++){var s=e.charAt(i);if(":"!==s)o+=s;else{if(""===o||o!=(r=Number(o)))return n(p,0,1);if(o!=(s=e.substr(i+1,r)).length)return n(p,0,1);if(s.length){if(s=m.decodePacket(s,t,!1),p.type===s.type&&p.data===s.data)return n(p,0,1);if(!1===n(s,i+r,a))return}i+=r,o=""}}return""!==o?n(p,0,1):void 0},m.encodePayloadAsArrayBuffer=function(e,r){if(!e.length)return r(new ArrayBuffer(0));a(e,function(e,t){m.encodePacket(e,!0,!0,function(e){return t(null,e)})},function(e,t){var n=t.reduce(function(e,t){t="string"==typeof t?t.length:t.byteLength;return e+t.toString().length+t+2},0),a=new Uint8Array(n),s=0;return t.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),o=0;o<e.length;o++)r[o]=e.charCodeAt(o);n=r.buffer}a[s++]=t?0:1;for(var i=n.byteLength.toString(),o=0;o<i.length;o++)a[s++]=parseInt(i[o]);a[s++]=255;for(r=new Uint8Array(n),o=0;o<r.length;o++)a[s++]=r[o]}),r(a.buffer)})},m.encodePayloadAsBlob=function(e,n){a(e,function(e,a){m.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);e=n.buffer,t[0]=0}for(var o=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),i=new Uint8Array(o.length+1),r=0;r<o.length;r++)i[r]=parseInt(o[r]);i[o.length]=255,_blob_0_0_5_blob&&(t=new _blob_0_0_5_blob([t.buffer,i.buffer,e]),a(null,t))})},function(e,t){return n(new _blob_0_0_5_blob(t))})},m.decodePayloadAsBinary=function(e,n,r){"function"==typeof n&&(r=n,n=null);for(var t=e,o=[];0<t.byteLength;){for(var i=new Uint8Array(t),a=0===i[0],s="",c=1;255!==i[c];c++){if(310<s.length)return r(p,0,1);s+=i[c]}var t=_arraybuffer_slice_0_0_7_arraybuffer_slice(t,2+s.length),s=parseInt(s),l=_arraybuffer_slice_0_0_7_arraybuffer_slice(t,0,s);if(a)try{l=String.fromCharCode.apply(null,new Uint8Array(l))}catch(e){for(var d=new Uint8Array(l),l="",c=0;c<d.length;c++)l+=String.fromCharCode(d[c])}o.push(l),t=_arraybuffer_slice_0_0_7_arraybuffer_slice(t,s)}var u=o.length;o.forEach(function(e,t){r(m.decodePacket(e,n,!0),t,u)})}}),transport=Transport;function Transport(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}_componentEmitter_1_3_0_componentEmitter(Transport.prototype),Transport.prototype.onError=function(e,t){e=new Error(e);return e.type="TransportError",e.description=t,this.emit("error",e),this},Transport.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},Transport.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},Transport.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},Transport.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},Transport.prototype.onData=function(e){e=browser.decodePacket(e,this.socket.binaryType);this.onPacket(e)},Transport.prototype.onPacket=function(e){this.emit("packet",e)},Transport.prototype.onClose=function(){this.readyState="closed",this.emit("close")};var encode$2=function(e){var t,n="";for(t in e)e.hasOwnProperty(t)&&(n.length&&(n+="&"),n+=encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n},decode$2=function(e){for(var t={},n=e.split("&"),r=0,o=n.length;r<o;r++){var i=n[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t},_parseqs_0_0_6_parseqs={encode:encode$2,decode:decode$2},_componentInherit_0_0_3_componentInherit=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},alphabet="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),length=64,map={},seed=0,i=0,prev;function encode$1(e){for(var t="";t=alphabet[e%length]+t,0<(e=Math.floor(e/length)););return t}function decode$1(e){var t=0;for(i=0;i<e.length;i++)t=t*length+map[e.charAt(i)];return t}function yeast(){var e=encode$1(+new Date);return e!==prev?(seed=0,prev=e):e+"."+encode$1(seed++)}for(;i<length;i++)map[alphabet[i]]=i;yeast.encode=encode$1,yeast.decode=decode$1;var _yeast_0_1_2_yeast=yeast,debug$4=browser$1("engine.io-client:polling"),polling$1=Polling,hasXHR2=null!=new xmlhttprequest({xdomain:!1}).responseType;function Polling(e){var t=e&&e.forceBase64;hasXHR2&&!t||(this.supportsBinary=!1),transport.call(this,e)}_componentInherit_0_0_3_componentInherit(Polling,transport),Polling.prototype.name="polling",Polling.prototype.doOpen=function(){this.poll()},Polling.prototype.pause=function(e){var t,n=this;function r(){debug$4("paused"),n.readyState="paused",e()}this.readyState="pausing",this.polling||!this.writable?(t=0,this.polling&&(debug$4("we are currently polling - waiting to pause"),t++,this.once("pollComplete",function(){debug$4("pre-pause polling complete"),--t||r()})),this.writable||(debug$4("we are currently writing - waiting to pause"),t++,this.once("drain",function(){debug$4("pre-pause writing complete"),--t||r()}))):r()},Polling.prototype.poll=function(){debug$4("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},Polling.prototype.onData=function(e){var r=this;debug$4("polling got data %s",e);browser.decodePayload(e,this.socket.binaryType,function(e,t,n){if("opening"===r.readyState&&r.onOpen(),"close"===e.type)return r.onClose(),!1;r.onPacket(e)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():debug$4('ignoring poll - transport state "%s"',this.readyState))},Polling.prototype.doClose=function(){var e=this;function t(){debug$4("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(debug$4("transport open - closing"),t()):(debug$4("transport not open - deferring close"),this.once("open",t))},Polling.prototype.write=function(e){function t(){n.writable=!0,n.emit("drain")}var n=this;this.writable=!1;browser.encodePayload(e,this.supportsBinary,function(e){n.doWrite(e,t)})},Polling.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=_yeast_0_1_2_yeast()),this.supportsBinary||e.sid||(e.b64=1),e=_parseqs_0_0_6_parseqs.encode(e),this.port&&("https"==t&&443!==Number(this.port)||"http"==t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e};var debug$3=browser$1("engine.io-client:polling-xhr"),pollingXhr=XHR,Request_1=Request,terminationEvent;function empty$2(){}function XHR(e){var t,n;polling$1.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,"undefined"!=typeof location&&(t="https:"===location.protocol,n=(n=location.port)||(t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t)}function Request(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function unloadHandler(){for(var e in Request.requests)Request.requests.hasOwnProperty(e)&&Request.requests[e].abort()}_componentInherit_0_0_3_componentInherit(XHR,polling$1),XHR.prototype.supportsBinary=!0,XHR.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.withCredentials=this.withCredentials,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new Request(e)},XHR.prototype.doWrite=function(e,t){var e=this.request({method:"POST",data:e,isBinary:"string"!=typeof e&&void 0!==e}),n=this;e.on("success",t),e.on("error",function(e){n.onError("xhr post error",e)}),this.sendXhr=e},XHR.prototype.doPoll=function(){debug$3("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},_componentEmitter_1_3_0_componentEmitter(Request.prototype),Request.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR},t=(e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,this.xhr=new xmlhttprequest(e)),n=this;try{debug$3("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var r in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(r)&&t.setRequestHeader(r,this.extraHeaders[r])}catch(e){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.withCredentials),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");(n.supportsBinary&&"application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&(t.responseType="arraybuffer")}catch(e){}4===t.readyState&&(200===t.status||1223===t.status?n.onLoad():setTimeout(function(){n.onError("number"==typeof t.status?t.status:0)},0))},debug$3("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout(function(){n.onError(e)},0)}"undefined"!=typeof document&&(this.index=Request.requestsCount++,Request.requests[this.index]=this)},Request.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},Request.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},Request.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},Request.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=empty$2:this.xhr.onreadystatechange=empty$2,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete Request.requests[this.index],this.xhr=null}},Request.prototype.onLoad=function(){var e,t;try{try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e=("application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},Request.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},Request.prototype.abort=function(){this.cleanup()},Request.requestsCount=0,Request.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",unloadHandler):"function"==typeof addEventListener&&(terminationEvent="onpagehide"in globalThis_browser?"pagehide":"unload",addEventListener(terminationEvent,unloadHandler,!1))),pollingXhr.Request=Request_1;var pollingJsonp=JSONPPolling,rNewline=/\n/g,rEscapedNewline=/\\n/g,callbacks;function empty$1(){}function JSONPPolling(e){polling$1.call(this,e),this.query=this.query||{},callbacks=callbacks||(globalThis_browser.___eio=globalThis_browser.___eio||[]),this.index=callbacks.length;var t=this;callbacks.push(function(e){t.onData(e)}),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",function(){t.script&&(t.script.onerror=empty$1)},!1)}_componentInherit_0_0_3_componentInherit(JSONPPolling,polling$1),JSONPPolling.prototype.supportsBinary=!1,JSONPPolling.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),polling$1.prototype.doClose.call(this)},JSONPPolling.prototype.doPoll=function(){var t=this,e=document.createElement("script"),n=(this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)},document.getElementsByTagName("script")[0]);n?n.parentNode.insertBefore(e,n):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},JSONPPolling.prototype.doWrite=function(e,t){var n,r,o,i,a=this;function s(){c(),t()}function c(){if(a.iframe)try{a.form.removeChild(a.iframe)}catch(e){a.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+a.iframeId+'">';i=document.createElement(e)}catch(e){(i=document.createElement("iframe")).name=a.iframeId,i.src="javascript:0"}i.id=a.iframeId,a.form.appendChild(i),a.iframe=i}this.form||(n=document.createElement("form"),r=document.createElement("textarea"),o=this.iframeId="eio_iframe_"+this.index,n.className="socketio",n.style.position="absolute",n.style.top="-1000px",n.style.left="-1000px",n.target=o,n.method="POST",n.setAttribute("accept-charset","utf-8"),r.name="d",n.appendChild(r),document.body.appendChild(n),this.form=n,this.area=r),this.form.action=this.uri(),c(),e=e.replace(rEscapedNewline,"\\\n"),this.area.value=e.replace(rNewline,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===a.iframe.readyState&&s()}:this.iframe.onload=s};var _nodeResolve_empty={},_nodeResolve_empty$1=Object.freeze({__proto__:null,default:_nodeResolve_empty}),require$$1=getAugmentedNamespace(_nodeResolve_empty$1),debug$2=browser$1("engine.io-client:websocket"),BrowserWebSocket,NodeWebSocket;if("undefined"!=typeof WebSocket?BrowserWebSocket=WebSocket:"undefined"!=typeof self&&(BrowserWebSocket=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{NodeWebSocket=require$$1}catch(e){}var WebSocketImpl=BrowserWebSocket||NodeWebSocket,websocket=WS;function WS(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=BrowserWebSocket&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(WebSocketImpl=NodeWebSocket),transport.call(this,e)}_componentInherit_0_0_3_componentInherit(WS,transport),WS.prototype.name="websocket",WS.prototype.supportsBinary=!0,WS.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,n={};this.isReactNative||(n.agent=this.agent,n.perMessageDeflate=this.perMessageDeflate,n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new WebSocketImpl(e,t):new WebSocketImpl(e):new WebSocketImpl(e,t,n)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},WS.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},WS.prototype.write=function(e){for(var r=this,o=(this.writable=!1,e.length),t=0,n=o;t<n;t++)!function(n){browser.encodePacket(n,r.supportsBinary,function(e){var t;r.usingBrowserWebSocket||(t={},n.options&&(t.compress=n.options.compress),r.perMessageDeflate&&("string"==typeof e?Buffer.byteLength(e):e.length)<r.perMessageDeflate.threshold&&(t.compress=!1));try{r.usingBrowserWebSocket?r.ws.send(e):r.ws.send(e,t)}catch(e){debug$2("websocket closed before onclose event")}--o||(r.emit("flush"),setTimeout(function(){r.writable=!0,r.emit("drain")},0))})}(e[t])},WS.prototype.onClose=function(){transport.prototype.onClose.call(this)},WS.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},WS.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"==t&&443!==Number(this.port)||"ws"==t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=_yeast_0_1_2_yeast()),this.supportsBinary||(e.b64=1),(e=_parseqs_0_0_6_parseqs.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},WS.prototype.check=function(){return!(!WebSocketImpl||"__initialize"in WebSocketImpl&&this.name===WS.prototype.name)};var polling_1=polling,websocket_1=websocket;function polling(e){var t,n,r=!1,o=!1,i=!1!==e.jsonp;if("undefined"!=typeof location&&(t="https:"===location.protocol,n=(n=location.port)||(t?443:80),r=e.hostname!==location.hostname||n!==e.port,o=e.secure!==t),e.xdomain=r,e.xscheme=o,"open"in new xmlhttprequest(e)&&!e.forceJSONP)return new pollingXhr(e);if(i)return new pollingJsonp(e);throw new Error("JSONP disabled")}var transports={polling:polling_1,websocket:websocket_1},indexOf=[].indexOf,_indexof_0_0_1_indexof=function(e,t){if(indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1},re=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],_parseuri_0_0_6_parseuri=function(e){for(var t=e,n=e.indexOf("["),r=e.indexOf("]"),o=(-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length)),re.exec(e||"")),i={},a=14;a--;)i[parts[a]]=o[a]||"";return-1!=n&&-1!=r&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=pathNames(i,i.path),i.queryKey=queryKey(i,i.query),i};function pathNames(e,t){var n=t.replace(/\/{2,9}/g,"/").split("/");return"/"!=t.substr(0,1)&&0!==t.length||n.splice(0,1),"/"==t.substr(t.length-1,1)&&n.splice(n.length-1,1),n}function queryKey(e,t){var r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,n){t&&(r[t]=n)}),r}var debug$1=browser$1("engine.io-client:socket"),socket$1=Socket;function Socket(e,t){if(!(this instanceof Socket))return new Socket(e,t);t=t||{},e&&"object"===_typeof(e)&&(t=e,e=null),e?(e=_parseuri_0_0_6_parseuri(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=_parseuri_0_0_6_parseuri(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=_parseqs_0_0_6_parseqs.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.withCredentials=!1!==t.withCredentials,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(t.extraHeaders&&0<Object.keys(t.extraHeaders).length&&(this.extraHeaders=t.extraHeaders),t.localAddress)&&(this.localAddress=t.localAddress),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function clone(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}Socket.priorWebsocketSuccess=!1,_componentEmitter_1_3_0_componentEmitter(Socket.prototype),Socket.protocol=browser.protocol,Socket.Socket=Socket,Socket.Transport=transport,Socket.transports=transports,Socket.parser=browser,Socket.prototype.createTransport=function(e){debug$1('creating transport "%s"',e);var t=clone(this.query),n=(t.EIO=browser.protocol,t.transport=e,this.transportOptions[e]||{});return this.id&&(t.sid=this.id),new transports[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,withCredentials:n.withCredentials||this.withCredentials,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},Socket.prototype.open=function(){var e,t;if(this.rememberUpgrade&&Socket.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return t=this,void setTimeout(function(){t.emit("error","No transports available")},0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},Socket.prototype.setTransport=function(e){debug$1("setting transport %s",e.name);var t=this;this.transport&&(debug$1("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),(this.transport=e).on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},Socket.prototype.probe=function(n){debug$1('probing transport "%s"',n);var r=this.createTransport(n,{probe:1}),t=!1,o=this;function e(){var e;o.onlyBinaryUpgrades&&(e=!this.supportsBinary&&o.transport.supportsBinary,t=t||e),t||(debug$1('probe transport "%s" opened',n),r.send([{type:"ping",data:"probe"}]),r.once("packet",function(e){t||("pong"===e.type&&"probe"===e.data?(debug$1('probe transport "%s" pong',n),o.upgrading=!0,o.emit("upgrading",r),r&&(Socket.priorWebsocketSuccess="websocket"===r.name,debug$1('pausing current transport "%s"',o.transport.name),o.transport.pause(function(){t||"closed"!==o.readyState&&(debug$1("changing transport and sending upgrade packet"),d(),o.setTransport(r),r.send([{type:"upgrade"}]),o.emit("upgrade",r),r=null,o.upgrading=!1,o.flush())}))):(debug$1('probe transport "%s" failed',n),(e=new Error("probe error")).transport=r.name,o.emit("upgradeError",e)))}))}function i(){t||(t=!0,d(),r.close(),r=null)}function a(e){var t=new Error("probe error: "+e);t.transport=r.name,i(),debug$1('probe transport "%s" failed because of error: %s',n,e),o.emit("upgradeError",t)}function s(){a("transport closed")}function c(){a("socket closed")}function l(e){r&&e.name!==r.name&&(debug$1('"%s" works - aborting "%s"',e.name,r.name),i())}function d(){r.removeListener("open",e),r.removeListener("error",a),r.removeListener("close",s),o.removeListener("close",c),o.removeListener("upgrading",l)}Socket.priorWebsocketSuccess=!1,r.once("open",e),r.once("error",a),r.once("close",s),this.once("close",c),this.once("upgrading",l),r.open()},Socket.prototype.onOpen=function(){if(debug$1("socket open"),this.readyState="open",Socket.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){debug$1("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},Socket.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(debug$1('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else debug$1('packet received with socket readyState "%s"',this.readyState)},Socket.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},Socket.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},Socket.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){debug$1("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},Socket.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},Socket.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),(this.prevBufferLen=0)===this.writeBuffer.length?this.emit("drain"):this.flush()},Socket.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(debug$1("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},Socket.prototype.write=Socket.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},Socket.prototype.sendPacket=function(e,t,n,r){"function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState&&((n=n||{}).compress=!1!==n.compress,this.emit("packetCreate",e={type:e,data:t,options:n}),this.writeBuffer.push(e),r&&this.once("flush",r),this.flush())},Socket.prototype.close=function(){var e;function t(){e.onClose("forced close"),debug$1("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function r(){e.once("upgrade",n),e.once("upgradeError",n)}return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",(e=this).writeBuffer.length?this.once("drain",function(){(this.upgrading?r:t)()}):(this.upgrading?r:t)()),this},Socket.prototype.onError=function(e){debug$1("socket error %j",e),Socket.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},Socket.prototype.onClose=function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(debug$1('socket close with reason: "%s"',e),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)},Socket.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~_indexof_0_0_1_indexof(this.transports,e[n])&&t.push(e[n]);return t};var lib$1=socket$1,parser=browser,_componentEmitter_1_2_1_componentEmitter=(lib$1.parser=parser,createCommonjsModule(function(e){function r(e){if(e){var t,n=e;for(t in r.prototype)n[t]=r.prototype[t];return n}}(e.exports=r).prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)this._callbacks={};else{var n=this._callbacks["$"+e];if(n)if(1==arguments.length)delete this._callbacks["$"+e];else for(var r,o=0;o<n.length;o++)if((r=n[o])===t||r.fn===t){n.splice(o,1);break}}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}})),_toArray_0_1_4_toArray=toArray;function toArray(e,t){for(var n=[],r=(t=t||0)||0;r<e.length;r++)n[r-t]=e[r];return n}var on_1=on$1;function on$1(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}var slice$1=[].slice,_componentBind_1_0_0_componentBind=function(e,t){if("function"!=typeof(t="string"==typeof t?e[t]:t))throw new Error("bind() requires a function");var n=slice$1.call(arguments,2);return function(){return t.apply(e,n.concat(slice$1.call(arguments)))}},encode=function(e){var t,n="";for(t in e)e.hasOwnProperty(t)&&(n.length&&(n+="&"),n+=encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n},decode=function(e){for(var t={},n=e.split("&"),r=0,o=n.length;r<o;r++){var i=n[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t},_parseqs_0_0_5_parseqs={encode:encode,decode:decode},socket=createCommonjsModule(function(e,t){var o=browser$2("socket.io-client:socket"),n=(e.exports=i,{connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1}),r=_componentEmitter_1_2_1_componentEmitter.prototype.emit;function i(e,t,n){this.io=e,this.nsp=t,(this.json=this).ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}_componentEmitter_1_2_1_componentEmitter(i.prototype),i.prototype.subEvents=function(){var e;this.subs||(e=this.io,this.subs=[on_1(e,"open",_componentBind_1_0_0_componentBind(this,"onopen")),on_1(e,"packet",_componentBind_1_0_0_componentBind(this,"onpacket")),on_1(e,"close",_componentBind_1_0_0_componentBind(this,"onclose"))])},i.prototype.open=i.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},i.prototype.send=function(){var e=_toArray_0_1_4_toArray(arguments);return e.unshift("message"),this.emit.apply(this,e),this},i.prototype.emit=function(e){var t;return n.hasOwnProperty(e)?r.apply(this,arguments):(e=_toArray_0_1_4_toArray(arguments),(t={type:(void 0!==this.flags.binary?this.flags.binary:_hasBinary2_1_0_3_hasBinary2(e))?_socket_ioParser_3_3_3_socket_ioParser.BINARY_EVENT:_socket_ioParser_3_3_3_socket_ioParser.EVENT,data:e,options:{}}).options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(o("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),t.id=this.ids++),this.connected?this.packet(t):this.sendBuffer.push(t),this.flags={}),this},i.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},i.prototype.onopen=function(){var e;o("transport is open - connecting"),"/"!==this.nsp&&(this.query?(e="object"===_typeof(this.query)?_parseqs_0_0_5_parseqs.encode(this.query):this.query,o("sending connect packet with query %s",e),this.packet({type:_socket_ioParser_3_3_3_socket_ioParser.CONNECT,query:e})):this.packet({type:_socket_ioParser_3_3_3_socket_ioParser.CONNECT}))},i.prototype.onclose=function(e){o("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},i.prototype.onpacket=function(e){var t=e.nsp===this.nsp,n=e.type===_socket_ioParser_3_3_3_socket_ioParser.ERROR&&"/"===e.nsp;if(t||n)switch(e.type){case _socket_ioParser_3_3_3_socket_ioParser.CONNECT:this.onconnect();break;case _socket_ioParser_3_3_3_socket_ioParser.EVENT:case _socket_ioParser_3_3_3_socket_ioParser.BINARY_EVENT:this.onevent(e);break;case _socket_ioParser_3_3_3_socket_ioParser.ACK:case _socket_ioParser_3_3_3_socket_ioParser.BINARY_ACK:this.onack(e);break;case _socket_ioParser_3_3_3_socket_ioParser.DISCONNECT:this.ondisconnect();break;case _socket_ioParser_3_3_3_socket_ioParser.ERROR:this.emit("error",e.data)}},i.prototype.onevent=function(e){var t=e.data||[];o("emitting event %j",t),null!=e.id&&(o("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?r.apply(this,t):this.receiveBuffer.push(t)},i.prototype.ack=function(t){var n=this,r=!1;return function(){var e;r||(r=!0,e=_toArray_0_1_4_toArray(arguments),o("sending ack %j",e),n.packet({type:_hasBinary2_1_0_3_hasBinary2(e)?_socket_ioParser_3_3_3_socket_ioParser.BINARY_ACK:_socket_ioParser_3_3_3_socket_ioParser.ACK,id:t,data:e}))}},i.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(o("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):o("bad ack %s",e.id)},i.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},i.prototype.emitBuffered=function(){for(var e=0;e<this.receiveBuffer.length;e++)r.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},i.prototype.ondisconnect=function(){o("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},i.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},i.prototype.close=i.prototype.disconnect=function(){return this.connected&&(o("performing disconnect (%s)",this.nsp),this.packet({type:_socket_ioParser_3_3_3_socket_ioParser.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},i.prototype.compress=function(e){return this.flags.compress=e,this},i.prototype.binary=function(e){return this.flags.binary=e,this}}),_backo2_1_0_2_backo2=Backoff;function Backoff(e){this.ms=(e=e||{}).min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=0<e.jitter&&e.jitter<=1?e.jitter:0,this.attempts=0}Backoff.prototype.duration=function(){var e,t,n=this.ms*Math.pow(this.factor,this.attempts++);return this.jitter&&(e=Math.random(),t=Math.floor(e*this.jitter*n),n=0==(1&Math.floor(10*e))?n-t:n+t),0|Math.min(n,this.max)},Backoff.prototype.reset=function(){this.attempts=0},Backoff.prototype.setMin=function(e){this.ms=e},Backoff.prototype.setMax=function(e){this.max=e},Backoff.prototype.setJitter=function(e){this.jitter=e};var debug=browser$2("socket.io-client:manager"),has=Object.prototype.hasOwnProperty,manager=Manager;function Manager(e,t){if(!(this instanceof Manager))return new Manager(e,t);e&&"object"===_typeof(e)&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new _backo2_1_0_2_backo2({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];e=t.parser||_socket_ioParser_3_3_3_socket_ioParser;this.encoder=new e.Encoder,this.decoder=new e.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}Manager.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)has.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},Manager.prototype.updateSocketIds=function(){for(var e in this.nsps)has.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},Manager.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},_componentEmitter_1_2_1_componentEmitter(Manager.prototype),Manager.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},Manager.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},Manager.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},Manager.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},Manager.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},Manager.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},Manager.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},Manager.prototype.open=Manager.prototype.connect=function(n,e){var t,r,o,i,a,s;return debug("readyState %s",this.readyState),~this.readyState.indexOf("open")||(debug("opening %s",this.uri),this.engine=lib$1(this.uri,this.opts),t=this.engine,(r=this).readyState="opening",this.skipReconnect=!1,o=on_1(t,"open",function(){r.onopen(),n&&n()}),i=on_1(t,"error",function(e){var t;debug("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",e),n?((t=new Error("Connection error")).data=e,n(t)):r.maybeReconnectOnOpen()}),!1!==this._timeout&&(a=this._timeout,debug("connect attempt will timeout after %d",a),s=setTimeout(function(){debug("connect attempt timed out after %d",a),o.destroy(),t.close(),t.emit("error","timeout"),r.emitAll("connect_timeout",a)},a),this.subs.push({destroy:function(){clearTimeout(s)}})),this.subs.push(o),this.subs.push(i)),this},Manager.prototype.onopen=function(){debug("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(on_1(e,"data",_componentBind_1_0_0_componentBind(this,"ondata"))),this.subs.push(on_1(e,"ping",_componentBind_1_0_0_componentBind(this,"onping"))),this.subs.push(on_1(e,"pong",_componentBind_1_0_0_componentBind(this,"onpong"))),this.subs.push(on_1(e,"error",_componentBind_1_0_0_componentBind(this,"onerror"))),this.subs.push(on_1(e,"close",_componentBind_1_0_0_componentBind(this,"onclose"))),this.subs.push(on_1(this.decoder,"decoded",_componentBind_1_0_0_componentBind(this,"ondecoded")))},Manager.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},Manager.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},Manager.prototype.ondata=function(e){this.decoder.add(e)},Manager.prototype.ondecoded=function(e){this.emit("packet",e)},Manager.prototype.onerror=function(e){debug("error",e),this.emitAll("error",e)},Manager.prototype.socket=function(e,t){var n,r=this.nsps[e];function o(){~_indexof_0_0_1_indexof(n.connecting,r)||n.connecting.push(r)}return r||(r=new socket(this,e,t),this.nsps[e]=r,n=this,r.on("connecting",o),r.on("connect",function(){r.id=n.generateId(e)}),this.autoConnect&&o()),r},Manager.prototype.destroy=function(e){e=_indexof_0_0_1_indexof(this.connecting,e);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},Manager.prototype.packet=function(n){debug("writing packet %j",n);var r=this;n.query&&0===n.type&&(n.nsp+="?"+n.query),r.encoding?r.packetBuffer.push(n):(r.encoding=!0,this.encoder.encode(n,function(e){for(var t=0;t<e.length;t++)r.engine.write(e[t],n.options);r.encoding=!1,r.processPacketQueue()}))},Manager.prototype.processPacketQueue=function(){var e;0<this.packetBuffer.length&&!this.encoding&&(e=this.packetBuffer.shift(),this.packet(e))},Manager.prototype.cleanup=function(){debug("cleanup");for(var e=this.subs.length,t=0;t<e;t++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},Manager.prototype.close=Manager.prototype.disconnect=function(){debug("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},Manager.prototype.onclose=function(e){debug("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},Manager.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e,t,n=this;this.backoff.attempts>=this._reconnectionAttempts?(debug("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1):(e=this.backoff.duration(),debug("will wait %dms before reconnect attempt",e),this.reconnecting=!0,t=setTimeout(function(){n.skipReconnect||(debug("attempting reconnect"),n.emitAll("reconnect_attempt",n.backoff.attempts),n.emitAll("reconnecting",n.backoff.attempts),n.skipReconnect)||n.open(function(e){e?(debug("reconnect attempt error"),n.reconnecting=!1,n.reconnect(),n.emitAll("reconnect_error",e.data)):(debug("reconnect success"),n.onreconnect())})},e),this.subs.push({destroy:function(){clearTimeout(t)}}))},Manager.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)};var lib=createCommonjsModule(function(e,t){var i=browser$2("socket.io-client"),a=(e.exports=t=n,t.managers={});function n(e,t){"object"===_typeof(e)&&(t=e,e=void 0),t=t||{};var e=url_1(e),n=e.source,r=e.id,o=e.path,o=a[r]&&o in a[r].nsps,o=t.forceNew||t["force new connection"]||!1===t.multiplex||o?(i("ignoring socket cache for %s",n),manager(n,t)):(a[r]||(i("new io instance for %s",n),a[r]=manager(n,t)),a[r]);return e.query&&!t.query&&(t.query=e.query),o.socket(e.path,t)}t.protocol=_socket_ioParser_3_3_3_socket_ioParser.protocol,t.connect=n,t.Manager=manager,t.Socket=socket}),CaptureMediaDevice=function(){function n(e,t){_classCallCheck(this,n),this._localMediaStream=void 0,this._player=e,this._pc=this._player._pc,this._maxBitrate=t.rtc_upload_video_max_bitrate||30,this._frameRate=t.rtc_upload_video_fps||30;e=(t.rtc_upload_video_resolution||"1280x720").split("x");this._frameWidth=e[0],this._frameHeight=e[1],this._cacheReceiveMsg={},this._addLocalMediaStream()}return _createClass(n,[{key:"receiveMsg",value:function(e){var t=e.action;this._cacheReceiveMsg[t]=JSON.parse(JSON.stringify(e))}},{key:"_addLocalMediaStream",value:function(){var t=this;this._localMediaStream||this._createPredefineMediaStream(),this._localMediaStream.getTracks().forEach(function(e){t._pc.addTrack(e,t._localMediaStream)})}},{key:"_createPredefineMediaStream",value:function(){var t=this;this._localMediaStream=new MediaStream;(new(window.AudioContext||window.webkitAudioContext)).createMediaStreamDestination().stream.getAudioTracks().forEach(function(e){t._localMediaStream.addTrack(e)});var e=document.createElement("canvas"),n=e.getContext("2d");n.fillStyle="#ffffff",n.fillRect(0,0,1,1);n=(e.captureStream()||e.mozCaptureStream()).getVideoTracks()[0];this._localMediaStream.addTrack(n)}},{key:"_replaceMediaTrack",value:function(e){var t=this,n=(this._localMediaStream=new MediaStream(e),this._pc.getSenders().find(function(e){e=e.track;return e&&"audio"===e.kind})),e=this._localMediaStream.getAudioTracks(),r=(e.forEach(function(e){n?n.replaceTrack(e).then(function(e){}):t._pc.addTrack(e,t._localMediaStream)}),this._pc.getSenders().find(function(e){e=e.track;return e&&"video"===e.kind}));this._localMediaStream.getVideoTracks().forEach(function(e){r?r.replaceTrack(e).then(function(e){}):t._pc.addTrack(e,t._localMediaStream)}),this._changeResolution()}},{key:"_changeResolution",value:function(){var e,t=this._pc.getSenders(),t=t&&t.find(function(e){e=e.track;return e&&"video"===e.kind});t&&(e=t.getParameters(),this._maxBitrate&&e.encodings.length&&(e.encodings[0].active=!0,e.encodings[0].priority="high",e.encodings[0].maxBitrate=parseInt(1e3*this._maxBitrate)),e.degradationPreference="maintain-resolution",t.setParameters(e).then(function(e){}).catch(function(e){}))}},{key:"openMediaDevices",value:function(e,t){var n,r,o,i,a=this,s=e.video,e=e.audio,c={video:!1,audio:!1};"object"===typeCheck(s)&&s.deviceId&&(n=s.width,r=s.height,o=s.frameRate,s=s.deviceId,c.video={},c.video.width=n||this._frameWidth,c.video.height=r||this._frameHeight,c.video.frameRate=o||this._frameRate,s)&&(c.video.deviceId=s),"object"===typeCheck(e)&&e.deviceId&&(n=e.channelCount,r=e.sampleRate,o=e.echoCancellation,s=e.noiseSuppression,i=e.autoGainControl,e=e.deviceId,c.audio={},c.audio.channelCount=n||2,c.audio.sampleRate=r||48e3,c.audio.echoCancellation=o||!0,c.audio.noiseSuppression=s||!0,c.audio.autoGainControl=i||!1,e)&&(c.audio.deviceId=e),navigator.mediaDevices.getUserMedia(_objectSpread2({},c)).then(function(e){a.closeMediaDevices(null),a._replaceMediaTrack(e),t&&t("",e)}).catch(function(e){t&&t(e,"")})}},{key:"closeMediaDevices",value:function(t){this._localMediaStream.getTracks().forEach(function(e){e&&(!t||"Camera"===t&&"video"===e.kind||"Microphone"===t&&"audio"===e.kind)&&e.stop()})}},{key:"mediaDevicesResponseNotify",value:function(e,t){return!(Object.keys(this._cacheReceiveMsg).indexOf(e)<0||!t||"number"!=typeof t.op||"number"!=typeof t.code||(this._cacheReceiveMsg[e].data.op=t.op,this._cacheReceiveMsg[e].data.code=t.code,this._cacheReceiveMsg[e].method="response",this._cacheReceiveMsg[e].data.reason="Success",this._cacheReceiveMsg[e].data.msg="",this._player.sendData(JSON.stringify(this._cacheReceiveMsg[e])),0))}}]),n}(),WebRTCPlayer=function(){function e(){_classCallCheck(this,e),this._webRTCStatsJSON={},this._candidateCache=[],this._setRemoteOfferFlag=!1,this._signalV2Socket=null,this._signalV2Timer=null,this._setOfferFlag=!1,this.cid=null,this._setDataInfo=null,this.mediaParam={rotate:-1,flip:-1}}return _createClass(e,[{key:"create",value:function(e){var t,n=Math.floor((new Date).getTime()+1e8*Math.random()),r="canvas".concat(n).concat(adapter.browserDetails.version||0),o="video".concat(n),i="audio".concat(n),n="cover".concat(n);return document.querySelector(".HMplayerBox")||((t=document.createElement("div")).setAttribute("class","HMplayerBox"),e.insertBefore(t,e.childNodes[0])),document.querySelector(".HMplayerBox").innerHTML='\n            <canvas id="'.concat(r,'" style="width: 100%; height: 100%; position:absolute; left: 0; top: 0; z-index: 10;"></canvas>\n            <video\n                id="').concat(o,'"\n                muted\n                autoplay\n                playsinline\n                webkit-playsinline\n                x5-playsinline\n                x5-video-player-type="h5"\n                x5-video-orientation="landscape"\n                x-webkit-airplay="allow"\n                preload\n                poster="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"\n                style="width: 100%; height: 100%; object-fit: fill;"\n                ></video>\n            <audio id="').concat(i,'" playsinline webkit-playsinline style="position:absolute; z-index:-1; width:50px; height:10px;"></audio>\n            <div id="').concat(n,'" style="position: absolute; top: 0; left: 0; z-index: 11; width: 100%; padding-top: 56.25%; background: #000000;"></div>\n        '),this.oVideoLabel=document.getElementById(o),this.oAudioLabel=document.getElementById(i),this.oVideoLabel.addEventListener("playing",function(e){eventEmitter.emit("webrtc","webrtc_decode_first_frame_end")}),this.oVideoLabel.addEventListener("loadstart",function(e){eventEmitter.emit("webrtc","webrtc_decode_first_frame_end","loadstart")}),this.oVideoLabel.addEventListener("loadedmetadata",function(e){eventEmitter.emit("webrtc","webrtc_decode_first_frame_end","loadedmetadata")}),this.oVideoLabel.addEventListener("loadeddata",function(e){eventEmitter.emit("webrtc","rtc_connect_vibf","loadeddata")}),this.oVideoLabel.addEventListener("canplay",function(e){eventEmitter.emit("webrtc","webrtc_decode_first_frame_end","canplay")}),{canvasId:r,videoId:o,coverId:n}}},{key:"connect",value:function(e,t,n){this.cid=n;var n=e.webRtcInfo.roomId,r=e.signalV2Url;this._roomId=n,this._setDataInfo=t,this._setRemoteOfferFlag=!1,this._signalV2Socket=null,this._signalV2Timer=null,this._setOfferFlag=!1,this._addPeerConnect(),r?this._connectV2(e,t):this._connectV1(e,t)}},{key:"_connectV1",value:function(e,t){var n=t.webrtc_socket_timeout,n=void 0===n?2e3:n,r=t.webrtc_reconnection_delayMax,r=void 0===r?1:r,t=t.webrtc_reconnection_attempts,t=void 0===t?5:t,e=e.webRtcInfo.signalUrl;eventEmitter.emit("webrtc","begin_connect",e),this._io&&this._io.connected?this._socketSendMessage("join"):this._socketConnect(e,{webrtc_socket_timeout:n,webrtc_reconnection_delayMax:r,webrtc_reconnection_attempts:t})}},{key:"_connectV2",value:function(n,r){var o=this,e=r.rtc_signalv2_signalv1delaytime,e=void 0===e?1e3:e,t=n.signalV2Url;eventEmitter.emit("webrtc","begin_connect",t),this._signalV2Socket?this.sendHandShakeToSignalV2Server():(eventEmitter.on("signalV2Socket",function(e,t){switch(e){case"open":o._setOfferFlag||(eventEmitter.emit("webrtc","signalv2_opened"),o.sendHandShakeToSignalV2Server());break;case"messages":o.handleV2Message(t);break;case"close":o._connectV2(n,r);break;case"reconnect":break;case"failed":o._connectV2(n,r)}}),this._signalV2Socket=new ScreenSocket(t+"&act=1&proto=6","signalV2Socket"),this._signalV2Socket.connect(),clearTimeout(this._signalV2Timer),this._signalV2Timer=setTimeout(function(){o._setOfferFlag||o._connectV1(n,r)},e))}},{key:"handleV2Message",value:function(e){var t,n,r,o,i,a,s;try{null==(s=JSON.parse(e)).head&&null==s.body||(t=s.head,n=s.body,this.cid==t.cid&&"request"==t.type&&("setoffer"==t.method?(r=n.media_description,eventEmitter.emit("webrtc","signalv2_setoffer"),null!=r&&(this._setOfferFlag?this._signalV2Socket.close():(this._io&&this._io.close(),this._io=null,o={type:r.type,sdp:r.sdp},this._remoteOffer(o)))):"candidate"==t.method?(a={label:(i=n.candidate_info).label,id:i.id,candidate:i.candidate},this._remoteCandidate(a)):"reconnect"==t.method&&(this._setOfferFlag=!1,this.sendHandShakeToSignalV2Server())))}catch(e){}}},{key:"sendAnswerToSignalV2Server",value:function(e){e={head:{type:"request",method:"setanswer",cid:this.cid},body:{media_description:{type:"answer",sdp:e}}};return this._signalV2Socket.send(JSON.stringify(e))}},{key:"sendHandShakeToSignalV2Server",value:function(){var e;if(this._signalV2Socket)return e={head:{type:"request",method:"handshake",cid:this.cid},body:{sdk_info:{version:SDK_VERSION}}},this._signalV2Socket.send(JSON.stringify(e))}},{key:"_socketConnect",value:function(e,t){var n=this;this._io=lib(e,{transports:["websocket"],reconnectionAttempts:t.webrtc_reconnection_attempts,reconnectionDelayMax:t.webrtc_reconnection_delayMax,timeout:t.webrtc_socket_timeout}),this._io.on("connect",function(){eventEmitter.emit("socket.io","connect");var e=n._pc&&n._pc.connectionState?n._pc.connectionState:n._pc&&n._pc.iceConnectionState?n._pc.iceConnectionState:"";n._pc&&"connected"!=e&&n._socketSendMessage("join"),n._heartTimer&&clearInterval(n._heartTimer),n._heartTimer=setInterval(function(){clearInterval(n._heartTimer),n._socketSendMessage("heartbeat",{time:(new Date).getTime()})},1e4)}),this._io.on("onMessage",function(e){if("offer"===e.type)return n._setOfferFlag?void n._io.close():(n._signalV2Socket&&(eventEmitter.emit("webrtc","signalv2_closed"),n._signalV2Socket.disconnect(),n._signalV2Socket=null),void n._remoteOffer(e.payload));if("candidate"===e.type&&(n._candidateCache.push(e.payload),n._setRemoteOfferFlag))for(;0<n._candidateCache.length;)n._remoteCandidate(n._candidateCache[0]),n._candidateCache.shift()}),this._io.on("disconnect",function(){n._candidateCache=[],n._setRemoteOfferFlag=!1,eventEmitter.emit("socket.io","disconnect")}),this._io.on("reconnectfailed",function(){eventEmitter.emit("socket.io","reconnectFailed")}),this._io.on("reconnect",function(){eventEmitter.emit("socket.io","reconnectSuccess")}),this._io.on("reconnecterror",function(){eventEmitter.emit("socket.io","reconnectError")}),this._io.on("connecttimeout",function(){eventEmitter.emit("socket.io","connectTimeout")})}},{key:"_socketSendMessage",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this._io?("join"==e?eventEmitter.emit("webrtc","send_join"):"answer"==e&&eventEmitter.emit("webrtc","send_answer",t),this._io.emit(e,{to:this._roomId,type:e,payload:t})):this._heartTimer&&clearInterval(this._heartTimer)}},{key:"_remoteOffer",value:function(e){var t=this;this._setOfferFlag=!0,eventEmitter.emit("webrtc","receive_offer",JSON.stringify(e)),"new"!==this._pc.iceConnectionState&&/firefox/gi.test(navigator.userAgent)?(this._addPeerConnect(),this._socketSendMessage("join")):this._pc.setRemoteDescription(new RTCSessionDescription({type:e.type,sdp:e.sdp})).then(function(){t._setRemoteOfferFlag=!0,eventEmitter.emit("webrtc","setRemoteDescription_success"),t._creatAnswer()}).catch(function(e){e="error_name:".concat(e.name,"; message:").concat(e.message);eventEmitter.emit("webrtc","setRemoteDescription_failed",e)})}},{key:"_removeNoneed",value:function(i,e){for(var a=e,t=function(){for(var e=/\d+/gi.exec(i[s]),t=new RegExp("(rtpmap|rtcp-fb|fmtp):"+e),n=(a=a.filter(function(e){return!t.test(e)}),new RegExp("apt="+e)),r=a.filter(function(e){return n.test(e)}),o=0;o<r.length;o++)!function(){var e=/\d+/gi.exec(r[o]),t=new RegExp("(rtpmap|fmtp):"+e);a=a.filter(function(e){return!t.test(e)})}()},s=0;s<i.length;s++)t();return a}},{key:"_creatAnswer",value:function(){var o=this;this._pc.createAnswer().then(function(e){var t,n,r;e.sdp=e.sdp.replace("useinbandfec=1","useinbandfec=1;stereo=1"),"true"!==o._setDataInfo.is_filter_sdp_h264_decode&&7==getClientType()&&0<(n=e.sdp.split("\r\n")).filter(function(e){return/VP8\/[0-9]/.test(e)}).length&&(t=n.filter(function(e){return/H264\/[0-9]/.test(e)}),t=(n=o._removeNoneed(t,n)).filter(function(e){return/VP9\/[0-9]/.test(e)}),n=o._removeNoneed(t,n),e.sdp=n.join("\r\n"));try{navigator.userAgent.length<=255&&(r="\r\na=haima_extern_begin\r\na=hm_ua:".concat(btoa(navigator.userAgent),"\r\na=hm_os:").concat(getClientType(),"\r\na=haima_extern_end"),e.sdp=e.sdp.replace(/a=(.*)/,"a=$1".concat(r)))}catch(e){}e.sdp=e.sdp.replace(/(a=rtcp-fb:[0-9]+ )nack\r\n/g,function(e,t){return"".concat(t,"nack\r\n").concat(t,"rrtr\r\n")}),o._pc.setLocalDescription(e).then(function(){for(;0<o._candidateCache.length;)o._remoteCandidate(o._candidateCache[0]),o._candidateCache.shift();eventEmitter.emit("webrtc","setLocalDescription_success",e.sdp.split("\r\n").join(",")),o._io?o._socketSendMessage("answer",e):o.sendAnswerToSignalV2Server(e.sdp)}).catch(function(e){e="error_name:".concat(e.name,"; message:").concat(e.message);eventEmitter.emit("webrtc","setLocalDescription_failed",e)})}).catch(function(e){e="error_name:".concat(e.name,"; message:").concat(e.message);eventEmitter.emit("webrtc","createAnswer_failed",e)})}},{key:"_remoteCandidate",value:function(e){eventEmitter.emit("webrtc","receive_candidate",JSON.stringify(e)),this._pc.addIceCandidate(new RTCIceCandidate({sdpMLineIndex:e.label,sdpMid:e.id,candidate:e.candidate})).then(function(){eventEmitter.emit("webrtc","addIceCandidate_success")}).catch(function(e){e="error_name:".concat(e.name,"; message:").concat(e.message);eventEmitter.emit("webrtc","addIceCandidate_failed",e)})}},{key:"_addPeerConnect",value:function(){this._pc&&(this._pc.close(),this._pc.ontrack=null,this._pc.onicecandidate=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null);try{var t=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;this._pc=new t(null)}catch(e){t={code:0,status:{socket:0,video:0,audio:0},errorMsg:JSON.stringify(e),errorCode:"HMWRTCSDK010"};throw eventEmitter.emit("webrtc","rtc_create_error",t),e}this._captureMediaDevice=new CaptureMediaDevice(this,this._setDataInfo),this._pcOnchangeManage()}},{key:"_pcOnchangeManage",value:function(){var t=this;this._pc.ontrack=function(e){"audio"==e.track.kind?(t.oAudioLabel.srcObject=e.streams[0],t._remoteAudioStream=e.streams[0]):(t.oVideoLabel.srcObject=e.streams[0],t._remoteVideoStream=e.streams[0]),eventEmitter.emit("webrtc","ontrack",e.track.kind),t._pc.id=(new Date).getTime()},this._pc.onicecandidate=function(e){e=e.candidate&&e.candidate.candidate;eventEmitter.emit("webrtc","onIceCandidate_success",e)},this._pc.onconnectionstatechange=function(){eventEmitter.emit("webrtc","connectionState",t._pc.connectionState),/firefox/gi.test(navigator.userAgent)||/opera/gi.test(navigator.userAgent)||t._connectionStateChange(t._pc.connectionState)},this._pc.oniceconnectionstatechange=function(){eventEmitter.emit("webrtc","iceConnectionState",t._pc.iceConnectionState),(/firefox/gi.test(navigator.userAgent)||/opera/gi.test(navigator.userAgent))&&t._connectionStateChange(t._pc.iceConnectionState)},this._pc.onicegatheringstatechange=function(){},this._pc.onsignalingstatechange=function(e){},this._pc.ondatachannel=function(e){eventEmitter.emit("webrtc","rtc_data_channel",e),t._datachannelHandle(e)}}},{key:"_datachannelHandle",value:function(e){var n=this;"HaimaRemoteDevice"===e.channel.label&&(this._mediaDeviceDataChannelInstance=e.channel,this._mediaDeviceDataChannelInstance.binaryType="arraybuffer",this._mediaDeviceDataChannelInstance.onopen=function(){},this._mediaDeviceDataChannelInstance.onmessage=function(e){try{var t=JSON.parse(e.data);n._captureMediaDevice.receiveMsg(t),eventEmitter.emit("webrtc","rtc_data_channel",{type:"media_device_request",data:t})}catch(e){eventEmitter.emit("webrtc","rtc_data_channel",{type:"media_device_request",data:e.message})}},this._mediaDeviceDataChannelInstance.onclose=function(){},this._mediaDeviceDataChannelInstance.onerror=function(){})}},{key:"_connectionStateChange",value:function(e){switch(e){case"connected":this._successCallbackToSDK();break;case"disconnected":this._statusForDisToCon=!0;break;case"failed":this._statusForDisToCon=!1,this._failedCallbackToSDK()}}},{key:"_successCallbackToSDK",value:function(){var r,o=this;eventEmitter.emit("webrtc","peer_connect_success"),this._statusForDisToCon?(this._statusForDisToCon=!1,eventEmitter.emit("webrtc","self_connect_success")):eventEmitter.emit("webrtc","other_connect_success"),this._initSuccessStatus||(r=0,(this._io&&this._io.connected||this._signalV2Socket&&1==this._signalV2Socket.readyState)&&(r=1),this._getTrackEnabled(function(e,t){var n={code:e&&t?1:0,status:{socket:r,video:e?1:0,audio:t?1:0},errorCode:""};clearTimeout(o._reconnect_timeID),e&&t?o._initSuccessStatus||(o._initSuccessStatus=!0,eventEmitter.emit("webrtc","rtc_connect_result",n)):eventEmitter.emit("webrtc","rtc_connect_result",n)}))}},{key:"_getTrackEnabled",value:function(e){var t,n,r=this;this._remoteVideoStream&&this._remoteAudioStream&&(t=!!(t=this._remoteVideoStream.getVideoTracks()[0])&&t.enabled,n=!!(n=this._remoteAudioStream.getAudioTracks()[0])&&n.enabled,t&&n?e(t,n):setTimeout(function(){r._getTrackEnabled(e)},100))}},{key:"_getFirstFrameStatus",value:function(e){var t=this;!this._pc||!this._pc.getReceivers()||this._pc.getReceivers().length<2?setTimeout(function(){t._getFirstFrameStatus(e)},100):e(!0,!0)}},{key:"_failedCallbackToSDK",value:function(){var e=0,e={code:0,status:{socket:e=this._io&&this._io.connected||this._signalV2Socket&&1==this._signalV2Socket.readyState?1:e,video:0,audio:0},errorCode:e?"HMWRTCSDK003":"HMWRTCSDK001,HMWRTCSDK003"};eventEmitter.emit("webrtc","rtc_connect_result",e),this._io&&this._io.close()}},{key:"getWebrtcStats",value:function(e){/chrome/gi.test(navigator.userAgent)?this._getGoogAndStandardStats(e):this._getStandardState(e)}},{key:"_getGoogAndStandardStats",value:function(t){var o=this;this._pc.getStats(function(e){e.result().forEach(function(t){var n,r;"ssrc"==t.type&&(r=!(n={}),t.names().forEach(function(e){n[e]=t.stat(e),"video"==t.stat(e)&&(r=!0)}),r)&&(o._webRTCStatsJSON=JSON.parse(JSON.stringify(n)))}),o._getStandardState(t)})}},{key:"_getStandardState",value:function(n){var r=this;this._pc.getStats(null).then(function(e){var t=[];e.forEach(function(e){t.push(e),"inbound-rtp"==e.type&&"video"==e.kind&&(e.packetsReceived&&(r._webRTCStatsJSON.packetsReceived=e.packetsReceived),e.packetsLost&&(r._webRTCStatsJSON.packetsLost=e.packetsLost),e.bytesReceived&&(r._webRTCStatsJSON.bytesReceived=e.bytesReceived),e.framesDecoded&&(r._webRTCStatsJSON.framesDecoded=e.framesDecoded),e.totalDecodeTime&&(r._webRTCStatsJSON.totalDecodeTime=e.totalDecodeTime),e.frameWidth&&(r._webRTCStatsJSON.frameWidth=e.frameWidth),e.frameHeight&&(r._webRTCStatsJSON.frameHeight=e.frameHeight),e.framesReceived&&(r._webRTCStatsJSON.framesReceived=e.framesReceived),/firefox/gi.test(navigator.userAgent)&&(r._webRTCStatsJSON.currentRoundTripTime=e.jitter),r._webRTCStatsJSON.totalFreezesDuration=e.totalFreezesDuration,r._webRTCStatsJSON.freezeCount=e.freezeCount),"candidate-pair"===e.type&&-1<["succeeded","in-progress"].indexOf(e.state)&&(r._webRTCStatsJSON.currentRoundTripTime=e.currentRoundTripTime,r._webRTCStatsJSON.totalRoundTripTime=e.totalRoundTripTime,r._webRTCStatsJSON.responsesReceived=e.responsesReceived)}),n(r._webRTCStatsJSON,t)})}},{key:"disconnect",value:function(){this._remoteVideoStream&&this._remoteVideoStream.getTracks().forEach(function(e){e.stop()}),this._remoteAudioStream&&this._remoteAudioStream.getTracks().forEach(function(e){e.stop()}),this.oAudioLabel&&(this.oAudioLabel.srcObject=null),this.oVideoLabel&&(this.oVideoLabel.srcObject=null),this._candidateCache=[],this._setRemoteOfferFlag=!1,this._pc&&(this._pc.close(),this._pc.ontrack=null,this._pc.onicecandidate=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null),this._io&&(this._io.close(),this._io=null),this._signalV2Socket&&(this._signalV2Socket.disconnect(),this._signalV2Socket=null),this._signalV2Timer&&clearTimeout(this._signalV2Timer),this._reconnect_timeID&&clearTimeout(this._reconnect_timeID),this._heartTimer&&clearInterval(this._heartTimer)}},{key:"enableAudio",value:function(e){e?this.oAudioLabel.play():this.oAudioLabel.pause()}},{key:"openMediaDevices",value:function(e,t){this._captureMediaDevice&&this._captureMediaDevice.openMediaDevices(e,t)}},{key:"closeMediaDevices",value:function(e){this._captureMediaDevice&&this._captureMediaDevice.closeMediaDevices(e)}},{key:"mediaDevicesResponseNotify",value:function(e,t){this._captureMediaDevice&&this._captureMediaDevice.mediaDevicesResponseNotify(e,t)}},{key:"sendData",value:function(e){this._mediaDeviceDataChannelInstance&&"open"===this._mediaDeviceDataChannelInstance.readyState&&this._mediaDeviceDataChannelInstance.send(e)}},{key:"cameraParamsSet",value:function(e){switch(e.rotate){case 0:this.mediaParam.rotate=0;break;case 1:this.mediaParam.rotate=90;break;case 2:this.mediaParam.rotate=180;break;case 3:this.mediaParam.rotate=270}0<=e.flip&&(this.mediaParam.flip=e.flip),this.sendData(JSON.stringify({action:"mediaParam",data:_objectSpread2({},this.mediaParam)}))}}]),e}(),RTC_MovingAverageInit=function(e){var n=0,r=0,o=null,i=e;function t(){return Math.min(n,i)}return o=new Array,{addSample:function(e){var t=++n%i;i<n&&(r-=o[t]),r+=e,o[t]=e},getAverageRoundedDown:function(){return 0==n?0:Math.round(r/t())},size:t,reset:function(){r=n=0,o=[]}}},moving_average=RTC_MovingAverageInit,RTC_SampleCounterInit=function(){var t=0,n=0;return{add:function(e){t+=e,++n},numSamples:function(){return n},sum:function(e){return n<e?0:t},reset:function(){n=t=0}}},sample_counter=RTC_SampleCounterInit,RTC_PerfdogToolInit=function(e,o){var i=0,a=0,s=0,c=0,l=0,d=0,u=e;return{calcJank:function(e,t){var n,r=!1;return d++,l+=e,0<i&&0<--i?null:(t=2*t+u,(n=e>Math.max(t,125))||(r=e>Math.max(t,84)),i=n||r?4:0,o&&(r?(a++,c+=e):n&&(s++,c+=e),1e4<=l)&&(t=" perfdog Jank:"+a,t=(t=(t+=" bigJank:"+s)+" JankDurationMs:"+c+" DrationMs:"+l)+" fps:"+Math.round(1e3*d/l),d=l=c=s=a=0),{was_freeze:n,was_jank:r})},reset:function(){d=l=c=s=a=0}}},perfdog_tool=RTC_PerfdogToolInit,kMinRequiredSamples=1,kMinFrameSamplesToDetectFreeze=3,num_frames_rendered_=0,last_frame_rendered_ms_=0,firstInsertTimerId_=0,followInsertTimerId_=0,firstInsertTimeStamp_=0,render_interframe_delays_=moving_average(3),jank_durations_=sample_counter(),freezes_durations_=sample_counter(),perfdog_tool_=perfdog_tool(8,!1),insertFrameOption_={enable:!1,first_insert_interval:100,following_insert_interval:50,insert_top_limit:0},inserFramecallback_=null;function onStatisFrame(e){var t,n,r,o;0==num_frames_rendered_?last_frame_rendered_ms_=e:0<num_frames_rendered_&&(t=Math.round(e-last_frame_rendered_ms_),r=n=!1,render_interframe_delays_.size()>=kMinFrameSamplesToDetectFreeze&&(o=render_interframe_delays_.getAverageRoundedDown(),null!=(o=perfdog_tool_.calcJank(t,o)))&&(r=o.was_freeze,n=o.was_jank),n&&jank_durations_.add(t),r&&freezes_durations_.add(t),render_interframe_delays_.addSample(t),last_frame_rendered_ms_=e),num_frames_rendered_++}function onInsertFrame(){var e=performance.now();onStatisFrame(e),null!=inserFramecallback_&&inserFramecallback_(e),0==followInsertTimerId_?followInsertTimerId_=setInterval(onInsertFrame,insertFrameOption_.following_insert_interval):0<insertFrameOption_.insert_top_limit&&e-firstInsertTimeStamp_>insertFrameOption_.insert_top_limit&&(0!=followInsertTimerId_&&clearTimeout(followInsertTimerId_),followInsertTimerId_=0)}var videFrameJankStatisInit=function(e){e&&(insertFrameOption_={first_insert_interval:e.rtc_first_frame_interpolation_interval&&0<e.rtc_first_frame_interpolation_interval?e.rtc_first_frame_interpolation_interval:100,following_insert_interval:e.rtc_following_frame_interpolation_interval&&0<e.rtc_following_frame_interpolation_interval?e.rtc_following_frame_interpolation_interval:50,insert_top_limit:e.rtc_frame_interpolation_top_limit&&0<e.rtc_frame_interpolation_top_limit?e.rtc_frame_interpolation_top_limit:0},e.rtc_enable_frame_interpolation&&0<e.rtc_enable_frame_interpolation?insertFrameOption_.enable=!0:insertFrameOption_.enable=!1)},videFrameJankStatisRegInsertFrameCallback=function(e){inserFramecallback_=e},videFrameJankStatisRender=function(e){insertFrameOption_.enable&&(0!=firstInsertTimerId_&&clearTimeout(firstInsertTimerId_),(firstInsertTimerId_=0)!=followInsertTimerId_&&clearTimeout(followInsertTimerId_),followInsertTimerId_=0),onStatisFrame(e),insertFrameOption_.enable&&(firstInsertTimeStamp_=e,firstInsertTimerId_=setTimeout(onInsertFrame,insertFrameOption_.first_insert_interval))},videFrameJankStatisReset=function(){render_interframe_delays_.reset(),jank_durations_.reset(),freezes_durations_.reset(),perfdog_tool_.reset(),(last_frame_rendered_ms_=num_frames_rendered_=0)!=firstInsertTimerId_&&clearTimeout(firstInsertTimerId_),(firstInsertTimerId_=0)!=followInsertTimerId_&&clearTimeout(followInsertTimerId_),firstInsertTimeStamp_=followInsertTimerId_=0},videFrameJankStatisGetJanksCount=function(){return jank_durations_.numSamples()},videFrameJankStatisGetJankDuration=function(){return jank_durations_.sum(kMinRequiredSamples)},videFrameJankStatisGetFreezeCount=function(){return freezes_durations_.numSamples()},videFrameJankStatisGetFreezeDuration=function(){return freezes_durations_.sum(kMinRequiredSamples)},videFrameJankStatisInit_1=videFrameJankStatisInit,videFrameJankStatisRegInsertFrameCallback_1=videFrameJankStatisRegInsertFrameCallback,videFrameJankStatisRender_1=videFrameJankStatisRender,videFrameJankStatisReset_1=videFrameJankStatisReset,videFrameJankStatisGetJanksCount_1=videFrameJankStatisGetJanksCount,videFrameJankStatisGetJankDuration_1=videFrameJankStatisGetJankDuration,videFrameJankStatisGetFreezeCount_1=videFrameJankStatisGetFreezeCount,videFrameJankStatisGetFreezeDuration_1=videFrameJankStatisGetFreezeDuration,VideoFrameCallback=function(){function e(){var t=this;_classCallCheck(this,e),this.videoFrameNo=1,this.video=null,this.currentHandleId=null,this.firstFrameTimeStampDiff=0,this.id="",this.enableVideoFrameCallback=!0;videFrameJankStatisRegInsertFrameCallback_1(function(e){t.callback({code:0,number:t.videoFrameNo++,timestamp:Math.round(t.firstFrameTimeStampDiff+e),isRestart:!1},null)})}return _createClass(e,[{key:"removeRequestVideoFrameCallback",value:function(){var e;this.currentHandleId&&(this.id&&this.video.requestVideoFrameCallback&&this.enableVideoFrameCallback?e=this.video.cancelVideoFrameCallback.bind(this.video):window.requestAnimationFrame&&(e=window.cancelAnimationFrame.bind(window)),e(this.currentHandleId),this.currentHandleId=null,this.video=null),videFrameJankStatisReset_1()}},{key:"requestVideoFrameCallback",value:function(e){var r,o=this,i=(this.id=e,this.removeRequestVideoFrameCallback(),!0);if(this.video=document.getElementById(this.id),this.id&&this.video.requestVideoFrameCallback&&this.enableVideoFrameCallback)r=this.video.requestVideoFrameCallback.bind(this.video);else{if(!window.requestAnimationFrame)return void this.callback({code:2,msg:"the streamType not supported"});r=window.requestAnimationFrame.bind(window)}r?(this.removeRequestVideoFrameCallback(),this.currentHandleId=r(function e(t,n){o.firstFrameTimeStampDiff||(o.firstFrameTimeStampDiff=+new Date-t),o.callback({code:0,number:o.videoFrameNo++,timestamp:Math.round(o.firstFrameTimeStampDiff+t),isRestart:i},n),i=!1,o.currentHandleId&&(videFrameJankStatisRender_1(t),o.currentHandleId=r(e))})):this.callback({code:1,msg:"the browser not supported"})}},{key:"supportRequestVideoFrameCallback",value:function(e){e=document.getElementById(e);return!!(this.enableVideoFrameCallback&&e&&e.requestVideoFrameCallback)}},{key:"enableRequestVideoFrameCallback",value:function(e){this.enableVideoFrameCallback=e}},{key:"callback",value:function(e,t){eventEmitter.emit("VideoFrame","callback",e,t)}}]),e}(),D=function e(t,n){return new e.fn.init(t,n)},document$1=window.document,emptyArray=[],concat=emptyArray.concat,filter$1=emptyArray.filter,slice=emptyArray.slice,classCache={},cssNumber={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},fragmentRE=/^\s*<(\w+|!)[^>]*>/,singleTagRE=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,tagExpanderRE=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rootNodeRE=/^(?:body|html)$/i,methodAttributes=["val","css","html","text","data","width","height","offset"],table=document$1.createElement("table"),tableRow=document$1.createElement("tr"),containers={tr:document$1.createElement("tbody"),tbody:table,thead:table,tfoot:table,td:tableRow,th:tableRow,"*":document$1.createElement("div")},simpleSelectorRE=/^[\w-]*$/,class2type={},toString=class2type.toString,tempParent=document$1.createElement("div"),isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},contains=document$1.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t=t&&t.parentNode;)if(t===e)return!0;return!1};function type(e){return null==e?String(e):class2type[toString.call(e)]||"object"}function isString(e){return"string"==typeof e}function isFunction(e){return"function"==type(e)}function isWindow(e){return null!=e&&e==e.window}function isDocument(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function isObject(e){return"object"==type(e)}function isPlainObject(e){return isObject(e)&&!isWindow(e)&&Object.getPrototypeOf(e)==Object.prototype}function likeArray(e){var t=!!e&&"length"in e&&e.length,n=type(e);return"function"!=n&&!isWindow(e)&&("array"==n||0===t||"number"==typeof t&&0<t&&t-1 in e)}function compact(e){return filter$1.call(e,function(e){return null!=e})}function dasherize$1(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function maybeAddPx(e,t){return"number"!=typeof t||cssNumber[dasherize$1(e)]?t:t+"px"}function uniq(n){return filter$1.call(n,function(e,t){return n.indexOf(e)==t})}function camelize(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})}function classRE(e){return e in classCache?classCache[e]:classCache[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function flatten(e){return 0<e.length?D.fn.concat.apply([],e):e}function isD(e){return e instanceof D}function filtered(e,t){return null==t?D(e):D(e).filter(t)}function funcArg(e,t,n,r){return isFunction(t)?t.call(e,n,r):t}function setAttribute(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function className(e,t){var n=e.className||"",r=n&&void 0!==n.baseVal;if(void 0===t)return r?n.baseVal:n;r?n.baseVal=t:e.className=t}function trim(e){return null==e?"":String.prototype.trim.call(e)}function nodeName(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function css(e,t){if(arguments.length<2){var n,r,o=this[0];if("string"==typeof e)return o?o.style[camelize(e)]||getComputedStyle(o,"").getPropertyValue(e):void 0;if(isArray(e))return o?(n={},r=getComputedStyle(o,""),D.each(e,function(e,t){n[t]=o.style[camelize(t)]||r.getPropertyValue(t)}),n):void 0}var i="";if("string"==type(e))t||0===t?i=dasherize$1(e)+":"+maybeAddPx(e,t):this.each(function(){this.style.removeProperty(dasherize$1(e))});else for(var a in e)e[a]||0===e[a]?i+=dasherize$1(a)+":"+maybeAddPx(a,e[a])+";":this.each(function(){this.style.removeProperty(dasherize$1(a))});return this.each(function(){this.style.cssText+=";"+i})}function hasClass(e){return!!e&&emptyArray.some.call(this,function(e){return this.test(className(e))},classRE(e))}function addClass(n){var r=[];return n?this.each(function(e){var t;"className"in this&&(r=[],t=className(this),funcArg(this,n,e,t).split(/\s+/g).forEach(function(e){D(this).hasClass(e)||r.push(e)},this),r.length)&&className(this,t+(t?" ":"")+r.join(" "))}):this}function removeClass(t){var n=[];return this.each(function(e){if("className"in this){if(void 0===t)return className(this,"");n=className(this),funcArg(this,t,e,n).split(/\s+/g).forEach(function(e){n=n.replace(classRE(e)," ")}),className(this,n.trim())}})}function offset(r){var e;return r?this.each(function(e){var t=D(this),e=funcArg(this,r,e,t.offset()),n=t.offsetParent().offset(),e={top:e.top-n.top,left:e.left-n.left};"static"==t.css("position")&&(e.position="relative"),t.css(e)}):this.length?document$1.documentElement===this[0]||contains(document$1.documentElement,this[0])?{left:(e=this[0].getBoundingClientRect()).left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}:{top:0,left:0}:null}function position(){var e,t,n,r;if(this.length)return e=this[0],n=this.offsetParent(),r=rootNodeRE.test(n[0].nodeName)?{top:0,left:0}:n.offset(),"fixed"===D(e).css("position")?t=e.getBoundingClientRect():(t=this.offset(),r.top+=parseFloat(D(n[0]).css("border-top-width"))||0,r.left+=parseFloat(D(n[0]).css("border-left-width"))||0),{top:t.top-r.top-parseFloat(D(e).css("margin-top"))||0,left:t.left-r.left-parseFloat(D(e).css("margin-left"))||0}}function scrollTop(e){var t;if(this.length)return t="scrollTop"in this[0],void 0===e?t?this[0].scrollTop:(isWindow(this[0])?this[0]:this[0].defaultView).pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}function offsetParent(){return this.map(function(){for(var e=this.offsetParent||document$1.body;e&&!rootNodeRE.test(e.nodeName)&&"static"==D(e).css("position");)e=e.offsetParent;return e})}function attr(n,r){var e;return"string"!=typeof n||1 in arguments?this.each(function(e){if(1===this.nodeType)if(isObject(n))for(var t in n)setAttribute(this,t,n[t]);else setAttribute(this,n,funcArg(this,r,e,this.getAttribute(n)))}):0 in this&&1==this[0].nodeType&&null!=(e=this[0].getAttribute(n))?e:void 0}function removeAttr(e){return this.each(function(){1===this.nodeType&&e.split(" ").forEach(function(e){setAttribute(this,e)},this)})}function val(t){return 0 in arguments?(null==t&&(t=""),this.each(function(e){this.value=funcArg(this,t,e,this.value)})):this[0]&&(this[0].multiple?D(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)}function find(e){var n=this,t=e?"object"==_typeof(e)?D(e).filter(function(){var t=this;return emptyArray.some.call(n,function(e){return contains(e,t)})}):1==this.length?D(D.qsa(this[0],e)):this.map(function(){return D.qsa(this,e)}):D();return t}function filter(t){return isFunction(t)?this.not(this.not(t)):D(filter$1.call(this,function(e){return D.matches(e,t)}))}function closest(n,r){var o=[],i="object"==_typeof(n)&&D(n);return this.each(function(e,t){for(;t&&!(i?0<=i.indexOf(t):D.matches(t,n));)t=t!==r&&!isDocument(t)&&t.parentNode;t&&o.indexOf(t)<0&&o.push(t)}),D(o)}function parents(e){for(var t=[],n=this;0<n.length;)n=D.map(n,function(e){if((e=e.parentNode)&&!isDocument(e)&&t.indexOf(e)<0)return t.push(e),e});return filtered(t,e)}function parent(e){return filtered(uniq(this.pluck("parentNode")),e)}function index(e){return e?this.indexOf(D(e)[0]):this.parent().children().indexOf(this[0])}D.fn=D.prototype={constuctor:D,length:0,forEach:emptyArray.forEach,reduce:emptyArray.reduce,push:emptyArray.push,sort:emptyArray.sort,splice:emptyArray.splice,indexOf:emptyArray.indexOf,init:function(e,t){var n;if(!e)return this;if("string"==typeof e)if("<"==(e=e.trim())[0]&&fragmentRE.test(e))n=D.fragment(e,RegExp.$1,t),e=null;else{if(void 0!==t)return D(t).find(e);n=D.qsa(document$1,e)}else{if(isFunction(e))return D(document$1).ready(e);if(isD(e))return e;if(isArray(e))n=compact(e);else if(isObject(e))n=[e],e=null;else{if(void 0!==t)return D(t).find(e);n=D.qsa(document$1,e)}}return D.makeArray(n,e,this)},concat:function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=isD(e=arguments[n])?e.toArray():e;return concat.apply(isD(this)?this.toArray():this,t)},pluck:function(t){return D.map(this,function(e){return e[t]})},toArray:function(){return this.get()},get:function(e){return void 0===e?slice.call(this):this[0<=e?e:e+this.length]},size:function(){return this.length},each:function(n){return emptyArray.every.call(this,function(e,t){return!1!==n.call(e,t,e)}),this},map:function(n){return D(D.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return D(slice.apply(this,arguments))},first:function(){var e=this[0];return e&&!isObject(e)?e:D(e)},last:function(){var e=this[this.length-1];return e&&!isObject(e)?e:D(e)},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)}},D.extend=D.fn.extend=function(){var e,t,n,r,o,i=arguments[0]||{},a=1,s=arguments.length,c=!1;for("boolean"==typeof i&&(c=i,i=arguments[a]||{},a++),"object"===_typeof(i)||isFunction(i)||(i={}),a===s&&(i=this,a--);a<s;a++)if(null!=(e=arguments[a]))for(t in e)o=i[t],i!==(n=e[t])&&(c&&n&&(isPlainObject(n)||(r=isArray(n)))?(o=r?(r=!1,o&&isArray(o)?o:[]):o&&isPlainObject(o)?o:{},i[t]=D.extend(c,o,n)):void 0!==n&&(i[t]=n));return i},D.extend({makeArray:function(e,t,n){for(var r=e?e.length:0,o=0;o<r;o++)n[o]=e[o];return n.length=r,n.selector=t||"",n},merge:function(e,t){for(var n=+t.length,r=0,o=e.length;r<n;r++)e[o++]=t[r];return e.length=o,e},qsa:function(e,t){var n,r="#"==t[0],o=!r&&"."==t[0],i=r||o?t.slice(1):t,a=simpleSelectorRE.test(i);return e.getElementById&&a&&r?(n=e.getElementById(i))?[n]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:slice.call(a&&!r&&e.getElementsByClassName?o?e.getElementsByClassName(i):e.getElementsByTagName(t):e.querySelectorAll(t))},fragment:function(e,t,n){var r,o,i;return(r=singleTagRE.test(e)?D(document$1.createElement(RegExp.$1)):r)||(e.replace&&(e=e.replace(tagExpanderRE,"<$1></$2>")),(t=void 0===t?fragmentRE.test(e)&&RegExp.$1:t)in containers||(t="*"),(i=containers[t]).innerHTML=""+e,r=D.each(slice.call(i.childNodes),function(){i.removeChild(this)})),isPlainObject(n)&&(o=D(r),D.each(n,function(e,t){-1<methodAttributes.indexOf(e)?o[e](t):o.attr(e,t)})),r},matches:function(e,t){var n,r;return!(!t||!e||1!==e.nodeType)&&((n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector)?n.call(e,t):((r=!(n=e.parentNode))&&(n=tempParent).appendChild(e),n=~D.qsa(n,t).indexOf(e),r&&tempParent.removeChild(e),n))},each:function(e,t){var n,r;if(likeArray(e)){for(n=0;n<e.length;n++)if(!1===t.call(e[n],n,e[n]))return e}else for(r in e)if(!1===t.call(e[r],r,e[r]))return e;return e},map:function(e,t){var n,r,o,i=[];if(likeArray(e))for(r=0;r<e.length;r++)null!=(n=t(e[r],r))&&i.push(n);else for(o in e)null!=(n=t(e[o],o))&&i.push(n);return flatten(i)}}),D.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){class2type["[object "+t+"]"]=t.toLowerCase()}),D.fn.init.prototype=D.fn;var _zid=1,handlers={},focusinSupported="onfocusin"in window,focus$1={focus:"focusin",blur:"focusout"},hover={mouseenter:"mouseover",mouseleave:"mouseout"},ignoreProperties=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,returnTrue=function(){return!0},returnFalse=function(){return!1},eventMethods={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function zid(e){return e._zid||(e._zid=_zid++)}function compatible(r,o){if(o||!r.isDefaultPrevented){o=o||r,D.each(eventMethods,function(e,t){var n=o[e];r[e]=function(){return this[t]=returnTrue,n&&n.apply(o,arguments)},r[t]=returnFalse});try{r.timeStamp||(r.timeStamp=Date.now())}catch(e){}(void 0!==o.defaultPrevented?o.defaultPrevented:"returnValue"in o?!1===o.returnValue:o.getPreventDefault&&o.getPreventDefault())&&(r.isDefaultPrevented=returnTrue)}return r}function parse(e){e=(""+e).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function matcherFor(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function findHandlers(e,t,n,r){var o;return(t=parse(t)).ns&&(o=matcherFor(t.ns)),(handlers[zid(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||o.test(e.ns))&&(!n||zid(e.fn)===zid(n))&&(!r||e.sel==r)})}function eventCapture(e,t){return e.del&&!focusinSupported&&e.e in focus$1||!!t}function realEvent(e){return hover[e]||focusinSupported&&focus$1[e]||e}function addEvent(r,e,o,i,a,s,c){var t=zid(r),l=handlers[t]||(handlers[t]=[]);e.split(/\s/).forEach(function(e){if("ready"==e)return D(document$1).ready(o);var t=parse(e),n=(t.fn=o,t.sel=a,t.e in hover&&(o=function(e){e=e.relatedTarget;if(!e||e!==this&&!contains(this,e))return t.fn.apply(this,arguments)}),(t.del=s)||o);t.proxy=function(e){var t;if(!(e=compatible(e)).isImmediatePropagationStopped())return e.data=i,!1===(t=n.apply(r,null==e._args?[e]:[e].concat(e._args)))&&(e.preventDefault(),e.stopPropagation()),t},t.i=l.length,l.push(t),"addEventListener"in r&&r.addEventListener(realEvent(t.e),t.proxy,eventCapture(t,c))})}function removeEvent(t,e,n,r,o){var i=zid(t);(e||"").split(/\s/).forEach(function(e){findHandlers(t,e,n,r).forEach(function(e){delete handlers[i][e.i],"removeEventListener"in t&&t.removeEventListener(realEvent(e.e),e.proxy,eventCapture(e,o))})})}function createProxy(e){var t,n={originalEvent:e};for(t in e)ignoreProperties.test(t)||void 0===e[t]||(n[t]=e[t]);return compatible(n,e)}function traverseNode(e,t){t(e);for(var n=0,r=e.childNodes.length;n<r;n++)traverseNode(e.childNodes[n],t)}function domMani(e,t,r,o){var n,i,a=D.map(t,function(e){var t=[];return"array"==(n=type(e))?(e.forEach(function(e){return void 0!==e.nodeType?t.push(e):isD(e)?t=t.concat(e.get()):void(t=t.concat(D.fragment(e)))}),t):"object"==n||null==e?e:D.fragment(e)}),s=1<e.length;return a.length<1?e:e.each(function(e,t){i=o?t:t.parentNode;var n=contains(document$1.documentElement,i);a.forEach(function(e){if(s)e=e.cloneNode(!0);else if(!i)return D(e).remove();r.call(t,e),n&&traverseNode(e,function(e){var t;null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src||(t=e.ownerDocument?e.ownerDocument.defaultView:window).eval.call(t,e.innerHTML)})})})}function getAll(e,t){var n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&nodeName(e,t)?D.merge([e],n):n}function cleanData(e){for(var t,n,r=0;void 0!==(n=e[r]);r++)n._zid&&(t=handlers[n._zid])&&t.forEach(function(e){var t=e.e+"."+e.ns.split(" ").join(".");removeEvent(n,t,e.fn,e.sel)})}function remove(){return this.each(function(){1===this.nodeType&&cleanData(getAll(this)),null!=this.parentNode&&this.parentNode.removeChild(this)})}function empty(){return this.each(function(){this.innerHTML=""})}function html(n){return 0 in arguments?this.each(function(e){var t=this.innerHTML;D(this).empty().append(funcArg(this,n,e,t))}):0 in this?this[0].innerHTML:null}function text(t){return 0 in arguments?this.each(function(e){e=funcArg(this,t,e,this.textContent);this.textContent=null==e?"":""+e}):0 in this?this.pluck("textContent").join(""):null}function append(){return domMani(this,arguments,function(e){this.insertBefore(e,null)},!0)}function prepend(){return domMani(this,arguments,function(e){this.insertBefore(e,this.firstChild)},!0)}function after(){return domMani(this,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!1)}function before(){return domMani(this,arguments,function(e){this.parentNode.insertBefore(e,this)},!1)}function on(t,r,o,i,a){var s,c,n=this;return t&&!isString(t)?(D.each(t,function(e,t){n.on(e,r,o,t,a)}),n):(isString(r)||isFunction(i)||!1===i||(i=o,o=r,r=void 0),void 0!==i&&!1!==o||(i=o,o=void 0),!1===i&&(i=returnFalse),n.each(function(e,n){a&&(s=function(e){return removeEvent(n,e.type,i),i.apply(this,arguments)}),addEvent(n,t,i,o,r,(c=r?function(e){var t=D(e.target).closest(r,n).get(0);if(t&&t!==n)return e=D.extend(createProxy(e),{currentTarget:t,liveFired:n}),(s||i).apply(t,[e].concat(slice.call(arguments,1)))}:c)||s)}))}function off(e,n,t){var r=this;return e&&!isString(e)?(D.each(e,function(e,t){r.off(e,n,t)}),r):(isString(n)||isFunction(t)||!1===t||(t=n,n=void 0),!1===t&&(t=returnFalse),r.each(function(){removeEvent(this,e,t,n)}))}var specialEvents={click:"MouseEvents",mousedown:"MouseEvents",mouseup:"MouseEvents",mousemove:"MouseEvents"};function Event$1(e,t){isString(e)||(e=(t=e).type);var n=document$1.createEvent(specialEvents[e]||"Events"),r=!0;if(t)for(var o in t)"bubbles"==o?r=!!t[o]:n[o]=t[o];return n.initEvent(e,r,!0),compatible(n)}var prefix="",eventPrefix,vendors={Webkit:"webkit",Moz:"",O:"o"},testEl=document$1.createElement("div"),testTransitionProperty=testEl.style.transitionProperty;function normalizeEvent(e){return eventPrefix?eventPrefix+e:e.toLowerCase()}void 0===testEl.style.transform&&D.each(vendors,function(e,t){if(void 0!==testEl.style[e+"TransitionProperty"])return prefix="-"+e.toLowerCase()+"-",eventPrefix=t,!1}),testEl=null,D.fx={off:void 0===eventPrefix&&void 0===testTransitionProperty,speeds:{_default:400,fast:200,slow:600},cssPrefix:prefix,transitionEnd:normalizeEvent("TransitionEnd"),animationEnd:normalizeEvent("AnimationEnd")};var supportedTransforms=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,transform,transitionProperty,transitionDuration,transitionTiming,transitionDelay,animationName,animationDuration,animationTiming,animationDelay,cssReset={};function dasherize(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}function anim$2(e,t,n,r,o){var i,a,s,c={},l="",d=this,u=D.fx.transitionEnd,p=!1;if(void 0===t&&(t=D.fx.speeds._default/1e3),void 0===o&&(o=0),D.fx.off&&(t=0),"string"==typeof e)c[animationName]=e,c[animationDuration]=t+"s",c[animationDelay]=o+"s",c[animationTiming]=n||"linear",u=D.fx.animationEnd;else{for(i in a=[],e)supportedTransforms.test(i)?l+=i+"("+e[i]+") ":(c[i]=e[i],a.push(dasherize(i)));l&&(c[transform]=l,a.push(transform)),0<t&&"object"===_typeof(e)&&(c[transitionProperty]=a.join(", "),c[transitionDuration]=t+"s",c[transitionDelay]=o+"s",c[transitionTiming]=n||"linear")}return s=function(e){if(void 0!==e){if(e.target!==e.currentTarget)return;D(e.target).off(u,s)}else D(this).off(u,s);p=!0,D(this).css(cssReset),r&&r.call(this)},0<t&&(this.on(u,s),setTimeout(function(){p||s.call(d)},1e3*(t+o)+25)),this.size()&&this.get(0).clientLeft,this.css(c),t<=0&&setTimeout(function(){d.each(function(){s.call(this)})},0),this}function animate(e,t,n,r,o){return isFunction(t)&&(r=t,t=n=void 0),isFunction(n)&&(r=n,n=void 0),isPlainObject(t)&&(n=t.easing,r=t.complete,o=t.delay,t=t.duration),t=t&&("number"==typeof t?t:D.fx.speeds[t]||D.fx.speeds._default)/1e3,o=o&&parseFloat(o)/1e3,this.anim(e,t,n,r,o)}function origHide$1(){return this.css("display","none")}function anim(e,t,n,r,o){"function"!=typeof t||o||(o=t,t=void 0);n={opacity:n};return r&&(n.scale=r,e.css(D.fx.cssPrefix+"transform-origin","0 0")),e.animate(n,t,null,o)}function hideHelper$1(e,t,n,r){return anim(e,t,0,n,function(){origHide$1.call(D(this)),r&&r.call(this)})}function fadeOut(e,t){return hideHelper$1(this,e,null,t)}transform=prefix+"transform",cssReset[transitionProperty=prefix+"transition-property"]=cssReset[transitionDuration=prefix+"transition-duration"]=cssReset[transitionDelay=prefix+"transition-delay"]=cssReset[transitionTiming=prefix+"transition-timing-function"]=cssReset[animationName=prefix+"animation-name"]=cssReset[animationDuration=prefix+"animation-duration"]=cssReset[animationDelay=prefix+"animation-delay"]=cssReset[animationTiming=prefix+"animation-timing-function"]="";var attrObj={isArray:isArray,trim:trim},FNObj={css:css,attr:attr,remove:remove,append:append,removeClass:removeClass,addClass:addClass,prepend:prepend,after:after,before:before,on:on,off:off,trigger:trigger,val:val,find:find,height:height,width:width,offset:offset,scrollTop:scrollTop,hasClass:hasClass,isShow:isShow,show:show,animate:animate,anim:anim$2,hide:hide,closest:closest,HmDrage:HmDrage,HmTitles:HmTitles,parent:parent,parents:parents,dragDivResize:dragDivResize,Event:Event$1,removeAttr:removeAttr,blur:blur,focus:focus,html:html,empty:empty,filter:filter,text:text,fadeOut:fadeOut,index:index,position:position,offsetParent:offsetParent},$=(D.extend(attrObj),D.fn.extend(FNObj),D);function width(e){if(!e)return this[0].offsetWidth;this.css("width",e)}function height(e){if(!e)return this[0].offsetHeight;this.css("height",e)}function isShow(){return"block"===this.css("display")}function show(e,t){return origShow.call(this),void 0===e?e=0:this.css("opacity",0),anim$1(this,e,1,t)}function origShow(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=defaultDisplay(this.nodeName))})}function hide(e,t){return void 0===e?origHide.call(this):hideHelper(this,e,t)}function defaultDisplay(e){var t,n,r={};return r[e]||(t=document.createElement(e),document.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),r[e]=n="none"==n?"block":n),r[e]}function origHide(){return this.css("display","none")}function hideHelper(e,t,n){return anim$1(e,t,0,function(){origHide.call(D(this)),n&&n.call(this)})}function anim$1(e,t,n,r){return"function"!=typeof t||r||(r=t,t=void 0),e.animate({opacity:n},t,null,r)}function blur(){this[0].blur()}function focus(){this[0].focus()}function trigger(e){this[0].dispatchEvent(new Event$1(e))}function HmTitles(o){$(this).off("mouseenter"),$(this).off("mouseleave");var i=null;$(this).on("mouseenter",function(e){var t,n,r=$(e?e.target:this.element),e=$(this).attr("titles")||"";$(r).hasClass("is_set")||$(r).hasClass("disabled")||!e||(t=$(this).offset(),n=$(o).offset(),$(o).append('<div class="HM-Title-Box">\n                            <a>'.concat(e,"</a>\n                          </div>")),t.left=t.left-n.left,t.top=t.top-n.top,t.left+$(".HM-Title-Box").offset().width+104>n.width&&(t.left=t.left-$(".HM-Title-Box").offset().width),$(".HM-Title-Box").css({left:t.left+"px",top:t.top+50+"px"}),i=setInterval(function(){$(r).hasClass("is_set")&&(clearInterval(i),$(o).find(".HM-Title-Box").remove())},100))}),$(this).on("mouseleave",function(e){clearInterval(i),$(o).find(".HM-Title-Box").remove()})}function HmDrage(m,A,y){$(this).off("mousedown"),$(document).off("mouseup"),$(this).on("mousedown",function(e){var o,t,i,a,s,c,l,d,u,n,p,h,r,f=this;0!=e.button||y&&"down"==y&&!$(e.target).hasClass("dragSpecial")||$(e.target).hasClass("close_btn_i")||$(e.target).hasClass("disabled")||($(e.target).hasClass("HmDrages")||$(e.target).parent().hasClass("HmDrages"))&&(n=$(this).parent().offset(),o=$(".Key_SET_btns").position(),t=$(this).offset(),i=e.pageX-t.left+(m.left||0),a=e.pageY-t.top+(m.top||0),s=e.clientX,c=e.clientY,l="",u={x:d=0,y:0},m.isRotate&&"down"==y&&(d=($(".Key_SET_btns").width()-$(m.containment).width())/2),"parent"==m.containment&&(i=e.pageX-t.left+(n.left||0),a=e.pageY-t.top+(n.top||0)),n=$(this).width()!=$(this)[0].getBoundingClientRect().width,p=n?($(this).width()-$(this)[0].getBoundingClientRect().width)/2:0,h=n?($(this).height()-$(this)[0].getBoundingClientRect().height)/2:0,"down"!=y||$(this).hasClass("is_set")||(A($(this),y),t=$(this).offset(),m.left=$(".Key_SET_btns").offset().left,m.top=$(".Key_SET_btns").offset().top,n=$(this).width()!=$(this)[0].getBoundingClientRect().width,p=n?($(this).width()-$(this)[0].getBoundingClientRect().width)/2:0,h=n?($(this).height()-$(this)[0].getBoundingClientRect().height)/2:0,$(this).css({left:e.pageX-t.width/2-(m.left||0)-p+"px",top:e.pageY-t.width/2-(m.top||0)-h+"px"}),t=$(this).offset(),i=e.pageX-t.left+(m.left||0),a=e.pageY-t.top+(m.top||0)),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,e.preventDefault?e.preventDefault():e.returnValue=!1,r=function(e){var t,n,r;s==e.clientX&&c==e.clientY||(l="hasMove",t=Math.round(e.pageX-i),n=Math.round(e.pageY-a),t<(r=getContainment($(f),m.containment,o,d))[0]&&(t=r[0]),n<r[1]&&(n=r[1]),t>r[2]&&(t=r[2]),n>r[3]&&(n=r[3]),t-=p,n-=h,$(f).css({left:t+"px",top:n+"px"}),"toDrawLine"==y&&A&&A($(f),"toDrawLine"),u.x=t,u.y=n,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,e.preventDefault?e.preventDefault():e.returnValue=!1)},$(document).on("mousemove",r),$(document).on("mouseup",function(){$(document).off("mousemove",r),$(document).off("mouseup"),$(f).css("left")&&$(f).css("top")||$(f).css({left:"px",top:"px"}),"down"==y&&(u.x=u.x+p,u.y=u.y+h,$(f).css({left:u.x+o.left-d+"px",top:u.y+o.top+"px"})),A&&A($(f),l)}))})}function getContainment(e,t,n,r){var o,i=$(e).css("transform"),i=i.match(/scale\((.*)\)/)?i.match(/scale\((.*)\)/)[1]:1,a=[],i=$(e).width()*i/2;return"parent"==t?(o=$(".KeyBtnBox_SET"),a=[0-i,0-i,(o=$(e).parent().size()?$(e).parent():o).width()-i,o.height()-i]):t instanceof $?(e=$(t).width(),o=$(t).height(),a=[0-i-n.left+r,0-i-n.top,e-i-n.left+r,o-i-n.top]):t.constructor===Array&&(a=t),a}function dragDivResize(r){var o,i,a,s,c,l=10,d=10,u=138,p=function(){var e=window;if(null!=e.pageXOffset)return{x:e.pageXOffset,y:e.pageYOffset};e=e.document;return"CSS1Compat"!=document.compatMode?{x:e.body.scrollLeft,y:e.body.scrollTop}:{x:e.documentElement.scrollLeft,y:e.documentElement.scrollTop}}(),t=this,h="",f="";function n(){for(var e=0;e<t.length;e++)h.style.outline="none";document.body.style.cursor="default"}function e(e){h=e.target||e.srcElement;var t=e.clientX+p.x,e=e.clientY+p.y,n=$(h)[0].getBoundingClientRect().width,r=$(h)[0].getBoundingClientRect().height;i=parseInt(t),a=parseInt(e),0<$(h).offset().left+n-i&&$(h).offset().left+n-i<l||0<$(h).offset().top+r-a&&$(h).offset().top+r-a<l?(($(h).offset().left+n-i<0||$(h).offset().left+n-i>l)&&0<$(h).offset().top+r-a&&$(h).offset().top+r-a<l&&(c=!(s=!1)),0<$(h).offset().left+n-i&&$(h).offset().left+n-i<l&&($(h).offset().top+r-a<0||$(h).offset().top+r-a>l)&&(c=!(s=!0)),0<$(h).offset().left+n-i&&$(h).offset().left+n-i<l&&0<$(h).offset().top+r-a&&$(h).offset().top+r-a<l&&(c=s=!0),$(h).off("mousedown",m),$(h).on("mousedown",m)):(c=s=!1,$(h).off("mousedown",m))}function m(e){r("start"),h=e.target||e.srcElement,f=e.target||e.srcElement;var t=e.clientX+p.x,n=e.clientY+p.y;i=parseInt(t),a=parseInt(n),document.addEventListener?(document.removeEventListener("mousemove",A,!0),document.removeEventListener("mouseup",y,!0),document.addEventListener("mousemove",A,!0),document.addEventListener("mouseup",y,!0)):document.attachEvent&&(h.setCapture(),h.detachEvent("onlosecapeture",y),h.detachEvent("onmouseup",y),h.detachEvent("onmousemove",A),h.attachEvent("onlosecapeture",y),h.attachEvent("onmouseup",y),h.attachEvent("onmousemove",A)),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,e.preventDefault?e.preventDefault():e.returnValue=!1}function A(e){e=e||window.event;var t,n=parseInt(e.clientX+p.x),r=parseInt(e.clientY+p.y);(h=h||e.target||e.srcElement)!=document.body&&$(h).hasClass("dragDivResize")?(s&&(o=n-i,t=$(h)[0].offsetWidth+o<d?d:$(h)[0].offsetWidth+o,h.style.width=(t=(t=2*u<t?2*u:t)<.65*u?.65*u:t)+"px",h.style.height=t+"px",i=n),c&&(o=r-a,t=$(h).height()+o<d?d:$(h).height()+o,h.style.width=(t=(t=2*u<t?2*u:t)<.65*u?.65*u:t)+"px",h.style.height=t+"px",a=r),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0):$(h).trigger("mouseup")}function y(e){e=e||window.event,c=s=!1,h=e.target||e.srcElement,$(h).on("mouseout",n),document.removeEventListener?(document.removeEventListener("mousemove",A,!0),document.removeEventListener("mouseup",y,!0)):document.detachEvent&&(h.detachEvent("onlosecapeture",y),h.detachEvent("onmouseup",y),h.detachEvent("onmousemove",A),h.releaseCapture()),$(h).trigger("mouseup"),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,setTimeout(function(){r($(f))})}$(t).off("mouseover"),$(t).off("mousemove"),$(t).on("mouseover",e),$(t).on("mousemove",e)}var SaasSDK=function(){function t(e){_classCallCheck(this,t),this.gGameState=1,this.accessKeyId=e.accessKeyId,this.channelId=e.channelId,this.X86Player=e.X86Player,this.streamType="",this.clientTransId=md5Encrypt(createUID((new Date).getTime())).toString(),this.getNetRequestInfo=[],this.gCurrentRequestCount=1,this.wsMessageList={},this.sendWSMessageCallback={intent:emptyFunction,clipboard:emptyFunction},this.sdkRestartCount=0,this.uploadQueue=!1,this.saasRequest=new SaasRequest(this.accessKeyId,this.channelId),this.logger=new Logger(this.accessKeyId,this.channelId),this._initFrameModel(),this.isSupportRTC=isSupportRTC(),this.flashSurpported=!1,this.rtmpIndex=1,this.pageClosed=!1,this.gReconnecting=!1,this.saasLinkReconnectIndex=0,this.saasLinkTimeOutCount=0,this.VideoFrameCallbackInfo={callback:emptyFunction,isReuqest:!1},this._setClientTransId(),this.supportLiving="unknown",this.connectStatus={cid:!1,saasSocket:!1,saasSocketPingPong:!1,inputSocket:!1,audio:!1,video:!1,streamAddress:!1,firstFrame:!1,statusCode:""},this.isRefsContorl=!1,this.UseResolutionInfo={preResId:-1,resolutionChangeStartTime:0,isAutoResolutionChanged:!1,UseResolutionId:-1,changing:!1},this.startGameParams=null,this.pausePlayerState=!1,this.streamStyle={streamStyleH:720,streamStyleW:1280},this.upDataInfo={uploadOnError:emptyFunction,uploadOnSuccess:emptyFunction,uploadStatus:0,uploadOpTypeList:["upload_image"],uploadMimeTypeList:["image/png","image/jpeg"],uploadOpType:"",uploadFile:null,uploadStartTime:null,uploadImgBuffer:null,uploadDelay:3e3,retryUpload:5,uploadRetryTimer:null},this.downloadInfo={fileListCallback:emptyFunction,fileDownloadCallback:emptyFunction,fileName:"",fileParam:null,time:(new Date).getTime(),imgBold:[]},this.inputOpenStatus=!1,this.sdkAbility=divideBy2("1110010000"),this.currentStreamAddress="",this.cid="",this.masterCid="",this.captureLocalAudio=null,this.bigFileInfo={startCallback:emptyFunction,stopCallback:emptyFunction},this.bigFileDownloadUrl="",this.videoStreamInfo={videoFps:"-1",bitRate:"-1",packetsLostRate:"-1",currentDelayMs:"-1",decodeDelay:"-1",renderDelay:"-1",frameSize:"-1",jitterBuffer:"-1",framesReceived:"-1",receiveFrameSize:"-1",delay:"-1",codecImplementationName:"",codecName:"",frameWidth:"",frameHeight:""},this.isChangeResolution=!1,this.isNeedWaitOperation5Notify=!1,this.isX86CameraStatus=!1,this.customGameScreenDirection="",this._captureMediaDeviceHandler=this._captureMediaDevice.bind(this)}return _createClass(t,[{key:"loggerSend",value:function(e,t){this.logger.send(e,t)}},{key:"applyGame",value:function(e,t,n,r){r&&(this.SaasSDKTips=r,this.saasRequest.setLanguage(this.SaasSDKTips.lang,this.SaasSDKTips.request)),t=this._formatParames(t),"string"==typeof e&&$(e)[0]?this._checkParames(t)&&(void 0!==n&&(this.flashSurpported=n),this.isSupportRTC||this.flashSurpported||3!=getClientType()?(this._emit("sceneChanged","init",""),this.gGameState=2,t.sdkAbility=[this.sdkAbility],this.applyGameParams=t,this.applyGameWrap=e,this.oVideoContainer=$(this.applyGameWrap)[0],this.logger.setGameInfo(t.extraId,t.userInfo.uId,t.pkgName,t.appChannel),this.saasRequest.setUserInfo(t.userInfo),this.netRequestData={packageName:this.applyGameParams.pkgName,uid:this.applyGameParams.userInfo.uId,cid:this.cid||"",transId:this.clientTransId},this._binPageCloseEvent(),this._getDid()):this._showFlashDisableTips()):((r={errorCode:applyFailCode.PARAMS_ERROR,errorMsg:this.SaasSDKTips.applyFailTips.PARAMS_ERROR}).errorMsg="".concat(this.SaasSDKTips.applyFailTips.PARAMS_ERROR,'"DoM"'),this._parameError(r))}},{key:"_binPageCloseEvent",value:function(){function e(){t.pageClosed||(t.loggerSend(loggerEventId.page_closed,"beforeunload"),t.pageClosed=!0)}var t=this;window.top.addEventListener("beforeunload",e),window.top.addEventListener("unload",e)}},{key:"_checkParames",value:function(e){var t={errorCode:applyFailCode.PARAMS_ERROR,errorMsg:this.SaasSDKTips.applyFailTips.PARAMS_ERROR},n=e.pkgName,r=e.userInfo,o=e.cToken,i=e.isPortrait,a=e.configInfo,e=e.playingtime;return n&&"string"==typeof n?r&&r.uId&&r.uToken?o&&"string"==typeof o?a&&"string"==typeof a?"boolean"==typeof i?!(isNaN(parseInt(e))||e<0)||(t.errorMsg="".concat(this.SaasSDKTips.applyFailTips.PARAMS_ERROR,'"playingtime"'),this._parameError(t),!1):(t.errorMsg="".concat(this.SaasSDKTips.applyFailTips.PARAMS_ERROR+"isPortrait"),void this._parameError(t)):(t.errorMsg="".concat(this.SaasSDKTips.applyFailTips.PARAMS_ERROR+"configInfo"),this._parameError(t),!1):(t.errorMsg="".concat(this.SaasSDKTips.applyFailTips.PARAMS_ERROR+"cToken"),this._parameError(t),!1):(t.errorMsg="".concat(this.SaasSDKTips.applyFailTips.PARAMS_ERROR+"userInfo"),this._parameError(t),!1):(t.errorMsg="".concat(this.SaasSDKTips.applyFailTips.PARAMS_ERROR+"pkgName"),this._parameError(t),!1)}},{key:"_formatParames",value:function(e){return hasOwnProperty(e,"userInfo")||hasOwnProperty(e,"userinfo")&&(e.userInfo=e.userinfo,e.userInfo.uToken=e.userinfo.utoken),hasOwnProperty(e,"pkg_name")&&(e.pkgName=e.pkg_name),hasOwnProperty(e,"cToken")||hasOwnProperty(e,"c_token")&&(e.cToken=e.c_token),hasOwnProperty(e,"rotate")&&(e.isPortrait=e.rotate),hasOwnProperty(e,"configinfo")&&(e.configInfo=e.configinfo),e}},{key:"_parameError",value:function(e){this.loggerSend(loggerEventId.apply_game_fun_failed,e),this.stopGame(_objectSpread2(_objectSpread2({},e),{},{reason:applyFailReason.NORMAL,stopByApp:stopByApp.app,interval:this._getCurrentGameDuration(this.gameStartTime),statusCode:this.connectStatus.statusCode}))}},{key:"_showFlashDisableTips",value:function(e){e=e||this.SaasSDKTips.UIView.flashDisable,this.stopGame({tips:e,stopByApp:stopByApp.app,interval:this._getCurrentGameDuration(this.gameStartTime),statusCode:this.connectStatus.statusCode}),this._emit("messageUIModel","showToastFlash",e)}},{key:"_initFrameModel",value:function(){var r=this;this.VideoFrameCallback=new VideoFrameCallback,eventEmitter.on("VideoFrame",function(e,t,n){"callback"===e&&(r.VideoFrameCallbackInfo.isReuqest?r.VideoFrameCallbackInfo.callback(t,n):r.VideoFrameCallback.removeRequestVideoFrameCallback())})}},{key:"_getDid",value:function(){var a=this;this.loggerSend(loggerEventId.get_did_start),this.saasRequest.getDid(localStorage.getItem(md5Encrypt("did"))||"",function(e,t,n,r){var o,i;a.getNetRequestInfo.push(_objectSpread2(_objectSpread2({},a.netRequestData),r)),e?0!=n.code?(r={errorCode:n.errorCode,errorMsg:n.errorMsg},a._httpRequestFailed("104",t,r),a.stopGame(_objectSpread2(_objectSpread2({},r),{},{reason:applyFailReason.INTERNAL_ERROR,stopByApp:stopByApp.server,interval:a._getCurrentGameDuration(a.gameStartTime)}))):(r=(e=n.data).countlyUrl,n=e.serverTimestamp,o=e.countlyAppKey,void 0===(e=e.did)||""===e||null==e?(i={errorCode:applyFailCode.GET_DID_DID_ERROR,errorMsg:a.SaasSDKTips.applyFailTips.GET_DID_DID_ERROR,accessKeyId:a.accessKeyId,channelId:a.channelId},a.loggerSend(loggerEventId.init_sdk_fun_failed,i),a.stopGame(_objectSpread2(_objectSpread2({},i),{},{reason:applyFailReason.INTERNAL_ERROR,stopByApp:stopByApp.server,interval:a._getCurrentGameDuration(a.gameStartTime)}))):r?(a.did=e,r&&a.logger.setLoggerInfo(r,o,n,a.did),a.loggerSend(loggerEventId.get_did_succeed,{retryRequestCount:t.retryRequestCount}),localStorage.setItem(md5Encrypt("did"),"".concat(a.did)),a._getConfig()):(i={errorCode:applyFailCode.GET_DID_COUNTLY_ERROR,errorMsg:a.SaasSDKTips.applyFailTips.GET_DID_COUNTLY_ERROR,accessKeyId:a.accessKeyId,channelId:a.channelId},a.loggerSend(loggerEventId.init_sdk_fun_failed,i),a.stopGame(_objectSpread2(_objectSpread2({},i),{},{reason:applyFailReason.INTERNAL_ERROR,stopByApp:stopByApp.server,interval:a._getCurrentGameDuration(a.gameStartTime)})))):(e={errorCode:applyFailCode.GET_DID_TIMEOUT,errorMsg:a.SaasSDKTips.applyFailTips.NETWORK_REQUEST_TIMEOUT},a._httpRequestFailed("104",t,e),a.loggerSend(loggerEventId.init_sdk_fun_failed,_objectSpread2(_objectSpread2({},e),{},{accessKeyId:a.accessKeyId,channelId:a.channelId})),a.stopGame(_objectSpread2(_objectSpread2({},e),{},{reason:applyFailReason.REQUEST_ERROR,stopByApp:stopByApp.server,interval:a._getCurrentGameDuration(a.gameStartTime)})))})}},{key:"_getConfig",value:function(){var i=this,e=this.applyGameParams,t=e.streamType,a=e.pkgName,s=e.appChannel,c=e.accessKeyID,n=e.viewResolutionWidth,e=e.viewResolutionHeight;this.checkStreamingTypes(t),this.loggerSend(loggerEventId.get_config_start,{pkgName:a,appChannel:s}),this.saasRequest.getConfig(a,0,s,n,e,this.applyGameParams.streamingTypes,this.sdkAbility,function(e,t,n,r){var o;i.getNetRequestInfo.push(_objectSpread2(_objectSpread2({},i.netRequestData),r)),e?0!=n.code?(r={errorCode:n.errorCode,errorMsg:n.errorMsg},i._httpRequestFailed("108",t,r,{pkgName:a,appChannel:s}),i.stopGame(_objectSpread2(_objectSpread2({},r),{},{reason:applyFailReason.INTERNAL_ERROR,stopByApp:stopByApp.server,interval:i._getCurrentGameDuration(i.gameStartTime)}))):(i.loggerSend(loggerEventId.get_config_succeed,{pkgName:a,appChannel:s,retryRequestCount:t.retryRequestCount}),i._applySaasConfig(n.data),i._emit("setSaasConfig",i.saasConfig),i.applyGameParams.pinCode?(i.toApplyControlPower(),i.masterCid=i.applyGameParams.cid):(i.cid&&(i.applyGameParams.cid=i.cid),i.applyGameParams.cid||(r=(e=getCacheGameInfo()).cid,n=e.pkgName,o=e.appChannel,e=e.accessKeyID,r&&a===n&&s===o&&c===e&&(i.applyGameParams.cid=r)),setCacheGameInfo("pkgName",a),setCacheGameInfo("appChannel",s),setCacheGameInfo("accessKeyID",c),i._getStreamInfo())):(n={errorCode:applyFailCode.GET_CONFIG_TIMEOUT,errorMsg:i.SaasSDKTips.applyFailTips.NETWORK_REQUEST_TIMEOUT},i._httpRequestFailed("108",t,n,{pkgName:a,appChannel:s}),i.stopGame(_objectSpread2(_objectSpread2({},n),{},{reason:applyFailReason.REQUEST_ERROR,stopByApp:stopByApp.server,interval:i._getCurrentGameDuration(i.gameStartTime)})))})}},{key:"_getStreamInfo",value:function(){var a=this;this.gRetryTimer&&clearTimeout(this.gRetryTimer),this.applyGameParams.onlyApply&&this.sendLogger(loggerEventId.only_apply,JSON.stringify(this.applyGameParams)),this.loggerSend(loggerEventId.get_stream_info_start,{streamType:this.applyGameParams.streamingTypes.join(),clientRequestUrl:encodeURIComponent(location.href)}),(new Date).getTime(),this.saasRequest.getSteamInfo(this.applyGameParams,function(e,t,n,r){if(a.netRequestData.cid=n.data&&String(n.data.cid)||"",a.getNetRequestInfo.push(_objectSpread2(_objectSpread2({},a.netRequestData),r)),e)if(0!=n.code){var r={errorCode:n.errorCode,errorMsg:n.errorMsg},e=(a._httpRequestFailed("211",t,r),_objectSpread2(_objectSpread2({},r),{},{reason:applyFailReason.INTERNAL_ERROR,tips:a.SaasSDKTips.applyFailTips.INTERNAL_ERROR,stopByApp:stopByApp.server,interval:a._getCurrentGameDuration(a.gameStartTime)}));if(10201===n.code)localStorage.removeItem(md5Encrypt("did")),a._sdkRestartGame("getStreamError");else if(10202===n.code)e.tips=n.errorMsg,e.errorCode=n.errorCode,e.reason=applyFailReason.INSTANCE_LIMIT;else if(20303===n.code&&200211016==n.errorCode)e.tips=a.talkInfo.prompt_game_over,e.reason=applyFailReason.IS_END,e.stateChangeReason=n.data.stateChangeReason||"";else if(200211006==n.errorCode)e.tips=a.talkInfo.toast_open_same_game,e.reason=applyFailReason.INSTANCE_LIMIT;else if(n.errorCode){for(var o=0;o<a.setDataInfo.retryErrorcodeInfo.length;++o){var i=a.setDataInfo.retryErrorcodeInfo[o];if(n.errorCode==i.errorCode&&a.gCurrentRequestCount<i.retryMaxTimes)return a.gCurrentRequestCount++,clearTimeout(a.gRetryTimer),void(a.gRetryTimer=setTimeout(function(){a._getStreamInfo()},1e3*i.retryDelayTime))}a.gCurrentRequestCount=1,e.tips=n.errorMsg,e.errorCode=n.errorCode}a.stopGame(e)}else n.data.distanceLimit&&n.data.distanceLimit.distanceLimitExceeded&&a._emit("sceneChanged","distanceLimit",{minDistance:n.data.distanceLimit.minDistance}),a._checkStreamInfo(n,t,"211");else r={errorCode:applyFailCode.GET_STREAM_INFO_TIMEOUT,errorMsg:a.SaasSDKTips.applyFailTips.NETWORK_REQUEST_TIMEOUT},a._httpRequestFailed("211",t,r),a.stopGame(_objectSpread2(_objectSpread2({},r),{},{reason:applyFailReason.REQUEST_ERROR,stopByApp:stopByApp.server,interval:a._getCurrentGameDuration(a.gameStartTime)}))})}},{key:"_checkStreamInfo",value:function(e,t,n){this.gReconnecting=!1;var r=e.data,o=r.apkType,i=r.cid,a=r.msgServInfo,s=r.secretKey,c=r.sign,l=r.streamType,d=r.webRtcInfo,u=r.gsmAddressInfo,p=r.instructionSet,h=e.data.addressInfo;if(this.apkType=o,h=h||u,d&&!h.webRtcInfo&&(h.webRtcInfo=d),h&&(this.supportLiving=!!h.supportLiving),this.logger.setCid(String(i)),i)if(a&&a.socketUrl)if("PooledWithoutRestart"!==o&&("PooledWithRestart"!==o||"ARM"!==p)||h)if("X86"===p&&"WEBRTC"!==l)r={errorCode:applyFailCode.UNSUPPORTED_DEVICE,errorMsg:this.SaasSDKTips.applyFailTips.unsupportedDevice},this._httpRequestFailed(n,t,r),this.stopGame(_objectSpread2(_objectSpread2({},r),{},{reason:applyFailReason.UNSUPPORTED_DEVICE,tips:this.SaasSDKTips.applyFailTips.unsupportedDevice,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)}));else{switch(this.loggerSend(loggerEventId.get_stream_info_succeed,{streamType:l,apkType:o,gameType:p,retryRequestCount:t.retryRequestCount}),this.cid=String(i),this.sign=c,this.logger.setCid(String(i)),this.saasRequest.setSecretKey(s),setCacheGameInfo("cid",String(i)),this.connectStatus.cid=!0,o){case"PooledWithoutRestart":this._startGame(h);break;case"PooledWithRestart":this.applyGameParams.onlyApply||"ARM"===p&&(h.isNeedWaitOperation5Notify=!0,this._startGame(h));break;case"NotPooled":break;default:throw new Error(this.SaasSDKTips.SaasSDK.systemUnknownError)}this._connectSaasLinkTimedOut(),this._saasSocketRelease(),this.SaasSocketUrl=this.concatSaasSocketUrl(a.socketUrl,this.did,String(i),this.applyGameParams.userInfo.uId,this.accessKeyId,c),this._saasSocketConnect(this.SaasSocketUrl,5)}else u={errorCode:applyFailCode.GET_STREAM_INFO_INSTANCE_ERROR,errorMsg:this.SaasSDKTips.applyFailTips.GET_INSTANCE_ERROR},d=applyFailReason.INTERNAL_ERROR,r=this.SaasSDKTips.applyFailTips.GET_INSTANCE_ERROR,20303==e.code&&(d=applyFailReason.IS_END,r=this.talkInfo.prompt_game_over),this._httpRequestFailed(n,t,u),this.stopGame(_objectSpread2(_objectSpread2({},u),{},{reason:d,tips:r,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime),stateChangeReason:e.data.stateChangeReason||""}));else l={errorCode:applyFailCode.GET_STREAM_INFO_SAAS_WEBSOCKET_ERROR,errorMsg:this.SaasSDKTips.applyFailTips.GET_SAAS_WEBSOCKET_ERROR},this._httpRequestFailed(n,t,l),this.stopGame(_objectSpread2(_objectSpread2({},l),{},{reason:applyFailReason.INTERNAL_ERROR,tips:this.SaasSDKTips.applyFailTips.GET_SAAS_WEBSOCKET_ERROR,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)}));else s={errorCode:applyFailCode.GET_STREAM_INFO_CID_ERROR,errorMsg:this.SaasSDKTips.applyFailTips.GET_CID_ERROR},this._httpRequestFailed(n,t,s),this.stopGame(_objectSpread2(_objectSpread2({},s),{},{reason:applyFailReason.INTERNAL_ERROR,tips:this.SaasSDKTips.applyFailTips.GET_CID_ERROR,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)}))}},{key:"checkStreamingTypes",value:function(e){3==getClientType()?this.isSupportRTC&&(this.applyGameParams.streamingTypes=["WEBRTC","RTMP"],"0"!==this.applyGameParams.streamType)||(this.applyGameParams.streamingTypes=["RTMP"]):"0"!==e&&this.isSupportRTC?this.applyGameParams.streamingTypes="1"===e?["WEBRTC"]:["WEBRTC","H5"]:this.applyGameParams.streamingTypes=["H5"]}},{key:"concatSaasSocketUrl",value:function(e,t,n,r,o,i){e="".concat(e,"/websocket?did=").concat(t,"&cid=").concat(n,"&uid=").concat(r,"&appId=").concat(o,"&sign=").concat(i);return 1==this.setDataInfo.openMultiConnect&&(this.linkSt||sessionStorage.getItem("startGameTS")&&(this.linkSt=sessionStorage.getItem("startGameTS")),e=e+"&ts="+this.linkSt),e}},{key:"_saasSocketConnect",value:function(e,t){var n=this,r={url:"",action:"access",startTime:(new Date).getTime(),responseTime:0,time:0,result:"failed",msg:""};r.url=e,eventEmitter.on("saasSocket",function(e,t){switch(e){case"open":"NotPooled"!==n.apkType||n.isGameStarted||n._getStreamAddressTimedOut(),n.connectStatus.saasSocket=!0,n._connectSaasLinkTimedOutRelease(),r.result="success",r.responseTime=(new Date).getTime(),r.time=r.responseTime-r.startTime,n.loggerSend(loggerEventId.saas_socket_opened);break;case"messages":n.connectStatus.saasSocketPingPong=!0,n._saasSocketMsg(t);break;case"close":n.connectStatus.saasSocket=!1,n.connectStatus.saasSocketPingPong=!1,r.msg=t,n.loggerSend(loggerEventId.saas_socket_closed,{errorCode:t.code,errorMsg:""});break;case"Countly":n.loggerSend(t.eventId,t.eventDate);break;case"PingPongTimeOut":n._sdkRestartGame("saasLinkPingPongTimeOut");break;case"failed":n.connectStatus.saasSocket=!1,n.connectStatus.saasSocketPingPong=!1,r.msg=t,n.loggerSend(loggerEventId.saas_socket_failed,{retryCount:t}),n.pauseGame("saas_socket_failed")}n.getNetRequestInfo.push(_objectSpread2(_objectSpread2({},n.netRequestData),r))}),this.loggerSend(loggerEventId.saas_socket_connect,{saasUrl:encodeURIComponent(e)}),this.saasSocket=new SaasSocket(e,t,this.setDataInfo),this.saasSocket.connect()}},{key:"_saasSocketRelease",value:function(){this.saasSocket&&(this.saasSocket.disconnect(),this.saasSocket=null)}},{key:"_saasSocketMsg",value:function(e){var t={ack:void 0,type:void 0,payload:void 0};try{t=JSON.parse(e)}catch(e){this.loggerSend(loggerEventId.saas_socket_message_parse_error,{errorCode:"",errorMsg:e})}if("LINK"==t.source&&1==t.opType)this.loggerSend(loggerEventId.saas_socket_limit_stop),this.pauseGame("saas_socket_limit",this.SaasSDKTips.SaasSDK.linkLimit);else if(0===t.ack){if(1===t.type){e={topPackage:void 0,operation:void 0};try{e=JSON.parse(t.payload)}catch(e){this.loggerSend(loggerEventId.saas_socket_message_parse_error,{errorCode:"",errorMsg:e})}if(e&&"com.tencent.mobileqq"===e.topPackage)return void this._emit("sceneChanged","qqup","");this.loggerSend(loggerEventId.saas_socket_message,{type:t.type,operation:e.operation||"",payload:base64(t.payload)}),this._emit("messageHandler",t)}if(2===t.type){var n,r,o,i,a,s={operation:void 0,errorMsg:"",errorCode:"",data:void 0,code:void 0};try{s=JSON.parse(t.payload)}catch(e){this.loggerSend(loggerEventId.saas_socket_message_parse_error,{errorCode:"",errorMsg:e})}switch(this.loggerSend(loggerEventId.saas_socket_message,{type:t.type,operation:s.operation||"",payload:base64(t.payload)}),s.operation){case 1:this._getStreamAddressTimedOutRelease();var c=s.data.timeStr,l=s.data.index,d=s.data.waitTotalNum,u="",p=[l],u=d?c?this.talkInfo.prompt_wait_man_time_total_num:this.talkInfo.prompt_wait_message_total_num:c?this.talkInfo.prompt_wait_man_time:this.talkInfo.prompt_wait_message;d&&p.push(d),c&&p.push(c),u=mixTips(u,p),this._emit("sceneChanged","wait",{reason:"showQueueInfo",waitingPeople:l,waitingTime:c,waitingTotalNum:d,message:u}),this._emit("messageUIModel","showToastMessage",u);break;case 2:this.stopGame({reason:applyFailReason.KICK_OFF,errorCode:s.errorCode,errorMsg:s.errorMsg,tips:this.talkInfo.toast_no_input,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)});break;case 3:this.stopGame({reason:applyFailReason.IS_ERROR,errorCode:s.errorCode,errorMsg:s.errorMsg,tips:s.errorMsg||this.talkInfo.prompt_hmcp_error,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)});break;case 4:s.data&&!0===s.data.finishByServer?this.stopGame({reason:applyFailReason.IS_END,errorCode:s.errorCode,errorMsg:s.errorMsg,tips:this.talkInfo.prompt_game_over,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)}):(this._emit("messageUIModel","topToast",s.data&&s.data.finishTip),this._emit("sceneChanged","timeout",{interval:((new Date).getTime()-this.gameStartTime)/1e3||0,message:s.data&&s.data.finishTip}));break;case 5:p=s.data.reconnectStream;if(this.sendLogger(loggerEventId.get_operation_5,"reconnectStream:".concat(p)),this.isChangeResolution)return this.isChangeResolution=!1,void this._startGame(s.data);if("PooledWithoutRestart"===this.apkType)return;p&&(this.isGameStarted=void 0,this.pauseGame("reconnectStream")),!this.isNeedWaitOperation5Notify||p?this._startGame(s.data):(this.isNeedWaitOperation5Notify=!1,3===this.gGameState&&this._manageWebrtcVibf("op5"));break;case 6:this._getStreamAddressTimedOutRelease();var l=s.data.index,c=s.data.waitTotalNum,d=this.talkInfo.toast_wait_choose,u=[l];c&&this.talkInfo.toast_wait_choose_total_num&&(u.push(c),d=this.talkInfo.toast_wait_choose_total_num),d=mixTips(d,u),this._emit("sceneChanged","wait",{reason:"whetherToQueue",message:d,waitingPeople:l,waitingTotalNum:c}),this._emit("messageUIModel","showConfigrm",d);break;case 7:this.stopGame({reason:applyFailReason.QUEUE_LIMIT,errorCode:s.errorCode,errorMsg:s.errorMsg,tips:this.talkInfo.toast_wait_tooMany,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)});break;case 8:this.stopGame({reason:applyFailReason.IS_ERROR,errorCode:s.errorCode,errorMsg:s.errorMsg,tips:this.talkInfo.prompt_crash,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)});break;case 9:this._emit("sceneChanged","wait",{reason:"applyGame",message:this.talkInfo.toast_instance_apply});break;case 10:case 11:case 13:break;case 14:this._getStreamAddressTimedOutRelease();p=mixTips(this.talkInfo.tips_saas_ready_to_stop,[s.data.timeStr]);this._emit("sceneChanged","maintain",{progress:"soon",time:s.data.timeStr,message:mixErrorCodeHtml(mixTips(this.talkInfo.tips_saas_ready_to_stop,[s.data.timeStr]),s.errorMsg,s.errorCode,this.SaasSDKTips.utils.systemUnknownError)}),this._emit("messageUIModel","topToast",p);break;case 15:this._getStreamAddressTimedOutRelease(),this._emit("sceneChanged","maintain",{progress:"start",time:s.data.endTimeText,message:mixErrorCodeHtml(mixTips(this.talkInfo.tips_saas_already_stopped,[s.data.endTimeText]),s.errorMsg,s.errorCode,this.SaasSDKTips.utils.systemUnknownError)});break;case 16:this.stopGame({reason:applyFailReason.MAINTAIN_SERVER,errorCode:s.errorCode,errorMsg:s.errorMsg,tips:this.talkInfo.tips_saas_to_stop,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)});break;case 18:this._emit("sceneChanged","appCrash");break;case 19:this._emit("sceneChanged","appNotForeground");break;case 21:this.stopGame({reason:applyFailReason.INSTANCE_LIMIT,errorCode:s.errorCode,errorMsg:s.errorMsg,tips:this.talkInfo.toast_open_same_game,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)});break;case 22:this.stopGame({reason:applyFailReason.TOKEN_EXPIRE,errorCode:s.errorCode,errorMsg:s.errorMsg,tips:this.talkInfo.tips_forced_offline_action,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)});break;case 35:this._emit("sceneChanged","remainingTime",{time:s.data.ahead,message:s.data.formatter,type:s.data.type,countDown:!!s.data.countDown});u=Math.ceil(s.data.ahead),l="";l=!0===s.data.countDown?(c=this.talkInfo.toast_countdown,mixTips(c=1==s.data.type?s.data.formatter:c,["<strong>"+u+"</strong>"])):mixTips(s.data.formatter,[formatMS(1e3*s.data.ahead,this.SaasSDKTips.utils)]),this._emit("messageUIModel","topToast",l);break;case 36:s.data.playingTime&&(this._emit("sceneChanged","totalTime",{time:s.data.playingTime,message:s.data.tip}),this._emit("messageUIModel","topToast",s.data.tip));break;case 37:s.data.playingTime&&(d=mixTips(this.talkInfo.toast_game_over,[formatMS(1e3*s.data.playingTime,this.SaasSDKTips.utils)]),this._emit("sceneChanged","totalTime",{time:s.data.playingTime,message:d}),this._emit("messageUIModel","topToast",d));break;case 39:this.stopGame({reason:applyFailReason.TOKEN_FAILED,errorCode:s.errorCode,errorMsg:s.errorMsg,tips:s.errorMsg,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)});break;case 40:p=mixTips(this.talkInfo.toast_reminder_no_input,[s.data.ahead]);this._emit("sceneChanged","noInputTimeRemind",{message:p,noInputRemainingTime:s.data.ahead});break;case 41:this._startHangUpReult(s.data);break;case 42:this._hangUpEndReult(s);break;case 43:this._stopHangUpReult(s);break;case 51:0==s.code?(n={result:1,msg:""},this.sendLogger(loggerEventId.start_liveing_success)):(n={result:0,msg:s.errorMsg},this.sendLogger(loggerEventId.start_liveing_error,s.errorCode)),this._emit("sceneChanged","startLiveState",n);break;case 52:0==s.code?(r={result:1,cid:String(s.data.masterId),pinCode:String(s.data.pin)},this.sendLogger(loggerEventId.get_pin_code_success)):(r={result:0,msg:s.errorMsg},this.sendLogger(loggerEventId.get_pin_code_error)),this._emit("sceneChanged","applyPinCode",r);break;case 53:0==s.code?(o={result:1,msg:""},this.sendLogger(loggerEventId.end_liveing_success)):(o={result:0,msg:s.errorMsg},this.sendLogger(loggerEventId.end_liveing_error)),this._emit("sceneChanged","endLiveState",o);break;case 54:0==s.code&&(i={result:1,cid:String(s.data.followerCid)},this.sendLogger(loggerEventId.lost_control),this.sendLogger(loggerEventId.get_control_success),this.stopGame({errorCode:s.errorCode,errorMsg:s.errorMsg,tips:this.SaasSDKTips.SaasSDK.controlLose,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)})),this._emit("sceneChanged","seizingControl",i);break;case 55:0==s.code?(a={result:1,msg:""},this.sendLogger(loggerEventId.apply_control_power_success)):(a={result:0,msg:this.SaasSDKTips.SaasSDK.controlFail},this.sendLogger(loggerEventId.apply_control_power_error),this.stopGame({errorCode:s.errorCode,errorMsg:s.errorMsg,tips:this.SaasSDKTips.SaasSDK.controlFail,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)})),this._emit("sceneChanged","getControl",a);break;case 56:this._emit("sceneChanged","transmit",{type:"gameExit",param:null});break;case 58:this.stopGame({reason:applyFailReason.IS_END,errorCode:s.errorCode,errorMsg:s.errorMsg,tips:this.talkInfo.prompt_game_over,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime),stateChangeReason:s.data.stateChangeReason||""});break;case 62:this.sendLogger(loggerEventId.get_operation_62),this.applyGameParams.onlyApply||(this.isGameStarted=void 0,this.pauseGame("reconnectStream"),s.data.isNeedWaitOperation5Notify=!0,this._startGame(s.data))}}}}},{key:"_connectSaasLinkTimedOut",value:function(){var e=this;this.setDataInfo.connectSaasLinkTimeoutList.length?(clearTimeout(this._connectSaasLinkTimedOutTimerId),this.saasLinkReconnectIndex>=this.setDataInfo.connectSaasLinkTimeoutList.length?(this.saasLinkTimeOutCount++,this.saasLinkTimeOutCount<5?this._sdkRestartGame("saasLinkTimeOut"):this.stopGame({reason:applyFailReason.INTERNAL_ERROR,errorCode:applyFailCode.SAAS_WEBSOCKET_CONNECT,tips:this.SaasSDKTips.applyFailTips.SAAS_WEBSOCKET_ERROR,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)})):this._connectSaasLinkTimedOutTimerId=setTimeout(function(){e.connectStatus.saasSocket||(e.saasLinkReconnectIndex++,e._saasSocketRelease(),e._saasSocketConnect(e.SaasSocketUrl,5),e._connectSaasLinkTimedOut())},1e3*this.setDataInfo.connectSaasLinkTimeoutList[this.saasLinkReconnectIndex])):this._getStreamAddressTimedOut()}},{key:"_connectSaasLinkTimedOutRelease",value:function(){this.saasLinkReconnectIndex=0,this._connectSaasLinkTimedOutTimerId&&clearTimeout(this._connectSaasLinkTimedOutTimerId)}},{key:"_getStreamAddressTimedOut",value:function(){var e=this,t=this.setDataInfo.streamer_url_timeout||40;!0===this.applyGameParams.isHotUpdate&&(t=900),clearTimeout(this._getStreamAddressTimedOutTimerId),this._getStreamAddressTimedOutTimerId=setTimeout(function(){e._sdkRestartGame("getStreamTimeOut"),clearTimeout(e._getStreamAddressTimedOutTimerId)},1e3*t)}},{key:"_getStreamAddressTimedOutRelease",value:function(){this._getStreamAddressTimedOutTimerId&&clearTimeout(this._getStreamAddressTimedOutTimerId)}},{key:"_startGame",value:function(t){var n=this;if(!this.isGameStarted)if(this.applyGameParams.onlyApply)this.sendLogger(loggerEventId.play_ready),this._emit("sceneChanged","playReady",{cid:this.cid}),this.startGameParams=t;else if(this.startGameParams=null,this.pausePlayerState)this._emit("sceneChanged","pauseGame");else{this.isGameStarted=!0,this.isNeedWaitOperation5Notify=t.isNeedWaitOperation5Notify,this._getStreamAddressTimedOutRelease(),this._connectSaasLinkTimedOutRelease(),this.connectStatus.streamAddress=!0;var e=t||{},r=e.webRtcInfo,o=e.videoUrl,i=e.inputUrl,a=e.audioUrl,s=e.screenUrl,c=e.screenRecordUrl,l=e.resolutionInfo,d=l.bitRate,u=l.frameRate,p=l.id,h=l.resolution,l=e.supportLiving,f=e.sdkDisplayInfo,m=e.idcName,A=e.idcId,y=e.sToken,_=e.gsmUrl,e=(t||{}).streamType;if(c&&(this.bigFileDownloadUrl=c.replace(/([\w\W]+)\/$/,"$1")),_&&(this.currentStreamAddress=_,e="X86"),("WEBRTC"!=e||i&&y)&&("RTMP"!=e||o&&a&&i&&y)&&(t.gsmUrl||"X86"!=e)){if("X86"===e)this.loggerSend(loggerEventId.video_url_got,base64(JSON.stringify({streamInfo:{gsmUrl:_},streamType:e})));else if("WEBRTC"===e){var c=r||{},y=c.roomId,g=c.signalUrl,c=c.coTurnUrl;if(!y||!g||!c)return w={errorCode:applyFailCode.SAAS_WEBSOCKET_RTCDATE_ERROR,errorMsg:this.SaasSDKTips.applyFailTips.GET_INSTANCE_ERROR},void this.stopGame(_objectSpread2(_objectSpread2({},w),{},{reason:applyFailReason.TOKEN_EXPIRE,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime),statusCode:this.connectStatus.statusCode}));this.currentStreamAddress=r.coTurnUrl,this.loggerSend(loggerEventId.video_url_got,base64(JSON.stringify({streamInfo:{roomId:y,signalUrl:g,coTurnUrl:c},streamType:e})))}else"RTMP"!==e&&"H5"!==e||(this.currentStreamAddress=o,this.loggerSend(loggerEventId.video_url_got,base64(JSON.stringify({streamInfo:{videoUrl:o,audioUrl:a,inputUrl:i},streamType:e}))));if(this.supportLiving=1==l,this._emit("sceneChanged","idcInfo",f||{idcId:A,idcName:m}),this.bigFileInfo.isStartHangUp)this._getHangUpTime();else{var v,S,b,w=_slicedToArray(h.split("x"),2),r=w[0],y=w[1];switch(this.streamStyle={streamStyleW:parseFloat(r),streamStyleH:parseFloat(y)},this._emit("sceneChanged","gameScreenInfo",{width:this.streamStyle.streamStyleW,height:this.streamStyle.streamStyleH}),e){case"WEBRTC":this.player||(this.saasConfig.resolutionInfo=this.saasConfig.webrtcResolutionInfo,this.streamType="WEBRTC",this.player=new WebRTCPlayer,this._playListenWEBRTC());break;case"X86":try{this.player?this.player.calcRemoteAndLocalScreenRatio(h):(this._playListenX86(),this.player=new this.X86Player(eventEmitter,this.SaasSDKTips.X86Player),S=(v=this.player.create(this.oVideoContainer)).canvasId,b=v.videoId,this.canvasId=S,this.videoId=b,this.player.connect({gsmUri:_,cid:parseInt(this.cid),resolution:h,escLongPress:!!this.applyGameParams.EscLongPress,customRetryConfig:this.setDataInfo.customRetryConfig,sendVideoResolution:this.setDataInfo.rtc_upload_video_resolution,sendVideoFps:this.setDataInfo.rtc_upload_video_fps,isUseTransparentCursor:this.setDataInfo.is_use_transparent_cursor,keyMapContent:this.setDataInfo.x86_key_map_content,retryCount:this.setDataInfo.customRetryConfig,mouseDownMoveDistance:this.setDataInfo.mouse_down_move_distance,mouseDownDelayTime:this.setDataInfo.mouse_down_delay_time}),this.saasConfig.resolutionInfo=this.saasConfig.webrtcResolutionInfo,this.streamType="X86"),this._emit("sceneChanged","createdPlayer",{playerNode:document.getElementById(this.canvasId)&&document.getElementById(this.canvasId).parentNode,streamStyle:this.streamStyle,gameType:"X86"})}catch(e){return this.loggerSend(loggerEventId.webrtc_connect_failed,e.message),void this.stopGame({reason:applyFailReason.LOAD_GAME_FAILED,errorCode:applyFailCode.x86_rtc_player_error,errorMsg:this.SaasSDKTips.applyFailTips.LOAD_GAME_FAILED,tips:this.SaasSDKTips.applyFailTips.LOAD_GAME_FAILED,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)})}break;case"RTMP":if(!this.flashSurpported)return void this._showFlashDisableTips(this.talkInfo.toast_current_flash_version_low);$(this.applyGameWrap).addClass("isPlayingWrap"),this.streamType="RTMP",this.rtmpIndex++,this.player=window.playerRTMP(eventEmitter,this.rtmpIndex),this._playerListenRTMP();break;case"H5":this.streamType="H5",this.player=window.playerH264(eventEmitter),this._playerListenH264();break;default:throw new Error(this.SaasSDKTips.SaasSDK.systemUnknownError)}if(this.gameStartTime=(new Date).getTime(),this._emit("startGameing",this.saasConfig,"reset",this.streamType),this.loggerSend(loggerEventId.start_revolution,{resolutionId:p,resolution:h,peakBitrate:d,frameRate:u}),this._sceneResolution(t),this.UseResolutionInfo.changing)this.UseResolutionInfo.changing=!1;else if(this.UseResolutionInfo.changing=!1,"X86"!=this.streamType){g=this.player.create(this.oVideoContainer,r,y),c=g.canvasId,o=g.videoId,a=g.coverId;this.canvasId=c,this.videoId=o,this.coverId=a,this._emit("sceneChanged","createdPlayer",{playerNode:document.getElementById(this.canvasId)&&document.getElementById(this.canvasId).parentNode,streamStyle:this.streamStyle,gameType:"ARM"});try{var C=this.cid;this.masterCid&&(C=this.masterCid),this.player.connect(t,this.setDataInfo,C)}catch(e){this.loggerSend(loggerEventId.player_connect_error,JSON.stringify(e))}this._inputSocketRelease(),this._inputSocketConnect(i),this._screenSocketRelease(),this._screenSocketConnect(s),isIE()||(this._upDataSocketConnect(s),this._downloadSocketConnect(s)),this.sendPositionPoint("");var k,l={rtc_enable_frame_interpolation:this.setDataInfo.rtc_enable_frame_interpolation,rtc_first_frame_interpolation_interval:this.setDataInfo.rtc_first_frame_interpolation_interval,rtc_following_frame_interpolation_interval:this.setDataInfo.rtc_following_frame_interpolation_interval,rtc_frame_interpolation_top_limit:this.setDataInfo.rtc_frame_interpolation_top_limit},f=(videFrameJankStatisInit_1(l),!0);this.setDataInfo.h5_enable_videoframe_callback&&(f=0<this.setDataInfo.h5_enable_videoframe_callback),this.VideoFrameCallback.enableRequestVideoFrameCallback(f),"WEBRTC"==t.streamType&&(clearInterval(this.playerRetryTimer),k=(new Date).getTime(),this.playerMaxRetryCount=0,this.playerRetryTimer=setInterval(function(){var e=n.setDataInfo.webrtc_frame_wait_time||1e4;5<=n.playerMaxRetryCount?(clearInterval(n.playerRetryTimer),n.stopGame({reason:applyFailReason.LOAD_GAME_FAILED,errorCode:applyFailCode.WEBRTC_CONNECT_TIMEOUT,errorMsg:n.SaasSDKTips.applyFailTips.LOAD_GAME_FAILED,tips:n.SaasSDKTips.applyFailTips.LOAD_GAME_FAILED,stopByApp:stopByApp.server,interval:n._getCurrentGameDuration(n.gameStartTime)})):(new Date).getTime()-k>=e&&(k=(new Date).getTime(),n.player.disconnect(),n.player.connect(t,n.setDataInfo,n.cid),n.playerMaxRetryCount++)},1e3))}}}else A={errorCode:applyFailCode.SAAS_WEBSOCKET_DATA,errorMsg:this.SaasSDKTips.applyFailTips.GET_INSTANCE_ERROR},this.stopGame(_objectSpread2(_objectSpread2({},A),{},{reason:applyFailReason.TOKEN_EXPIRE,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime),statusCode:this.connectStatus.statusCode}))}}},{key:"_sceneResolution",value:function(n){var r=this,o={list:[],selected:null},i=[];"X86"==this.streamType&&(n.resolution=n.resolutionInfo.id),this.saasConfig.resolutionInfo&&this.saasConfig.resolutionInfo.map(function(e,t){n.resolution!=e.id&&("1"!=e.defaultChoice||paramInObj(r.saasConfig.resolutionInfo,"id",n.resolution))||(o.selected=+e.id),i.push(+e.id),o.list.push({id:+e.id,name:e.name,bitRate:e.peakBitRate})}),this.resolutionList=i,this._emit("sceneChanged","resolutionList",o),this._emit("messageUIModel","startGame",o),this.UseResolutionInfo.UseResolutionId=o.selected}},{key:"_playerRelease",value:function(){clearInterval(this.collectDelayDataTimer),clearInterval(this.gX86PlayerDataChannelPingPongTimerId),this.removeRequestVideoFrame(!0),this.player&&(clearInterval(this.playerRetryTimer),this.player.disconnect(),this.player=null),$(".HMplayerBox").size()&&!isIE10()&&$(".HMplayerBox").remove()}},{key:"sendPositionPoint",value:function(e){var a=this;e&&(this.customGameScreenDirection=e),this.getTouchPositionPoint&&this.getTouchPositionPoint.removeListener(),this.getTouchPositionPoint=new GetTouchPositionPoint(this.canvasId),this.getTouchPositionPoint.sendPositionPoint(function(e,t){var n,r=t.x,t=t.y,o=("portrait"===(a.customGameScreenDirection||screenOrientation())&&(n=r,r=t,t=1-n),r.toFixed(4)),i=t.toFixed(4);switch(e){case"down":a.inputSocket.send("mouse:".concat(mouseType.down,":").concat(o,",").concat(i));break;case"move":a.inputSocket.send("mouse:".concat(mouseType.move,":").concat(o,",").concat(i));break;case"up":a.inputSocket.send("mouse:".concat(mouseType.move,":").concat(o,",").concat(i)),a.inputSocket.send("mouse:".concat(mouseType.up,":").concat(o,",").concat(i))}})}},{key:"_playerListenRTMP",value:function(){var r=this;eventEmitter.on("RTMP",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";switch(e){case"video_error":t&&t.code?r._sdkRestartGame("video_connect_failed"):(r.loggerSend(loggerEventId.video_stream_connect_failed,t),r.stopGame({reason:applyFailReason.INTERNAL_ERROR,errorCode:applyFailCode.VIDEO_STREAME_CONNECT_FAILED,errorMsg:r.SaasSDKTips.applyFailTips.GAME_START_ERROR,stopByApp:stopByApp.server,interval:r._getCurrentGameDuration(r.gameStartTime)}));break;case"video_connect":case"video_ready":break;case"video_connect_failed":r._sdkRestartGame("video_connect_failed");break;case"video_connected":r.loggerSend(loggerEventId.video_stream_connected,t);break;case"flash_disabled":r._showFlashDisableTips();break;case"audio_error":case"audio_connected":break;case"play":r._manageWebrtcVibf(t);break;case"autoSwitchBitRate":r._emit("messageUIModel","autoSwitchBitRate",t),r.UseResolutionInfo.isAutoResolutionChanged=!0;break;case"sendFrameDelayCountly":var n="",n=(t.detailInfo?[t.delay_ms,t.max_delay_ms,t.max_delay_ts,t.min_delay_ms,t.min_delay_ts,t.detailInfo]:[t.delay_ms,t.max_delay_ms,t.max_delay_ts,t.min_delay_ms,t.min_delay_ts]).join(",");r.loggerSend(loggerEventId.frame_delay_info,n)}})}},{key:"_playerListenH264",value:function(){var n=this,r={url:"",action:"video",startTime:(new Date).getTime(),responseTime:0,time:0,result:"failed",msg:""};eventEmitter.on("H264",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";switch(e){case"video_connect":r.startTime=(new Date).getTime(),r.url=t,n.loggerSend(loggerEventId.video_stream_connect,encodeURIComponent(t)+",viewResolution:"+n.streamStyle.streamStyleH+"x"+n.streamStyle.streamStyleW);break;case"video_connected":n.connectStatus.video=!0,r.result="success",r.responseTime=(new Date).getTime(),r.time=r.responseTime-r.startTime,n.loggerSend(loggerEventId.video_stream_connected,t);break;case"video_ready":n._manageWebrtcVibf(t);break;case"video_closed":break;case"video_error":r.msg=t,n.loggerSend(loggerEventId.video_stream_connect_failed,t),3!==n.gGameState&&4!==n.gGameState&&5!==n.gGameState&&6!==n.gGameState&&7!==n.gGameState&&n.stopGame({reason:applyFailReason.INTERNAL_ERROR,errorCode:applyFailCode.VIDEO_STREAME_CONNECT_FAILED,errorMsg:n.SaasSDKTips.applyFailTips.INTERNAL_ERROR,stopByApp:stopByApp.server,interval:n._getCurrentGameDuration(n.gameStartTime)});break;case"video_transferable_object_not_support":n.loggerSend(loggerEventId.device_un_support,t);break;case"video_data_success":n.loggerSend(loggerEventId.video_get_data_success,t);break;case"video_decode_failed":n.loggerSend(loggerEventId.video_decode_failed,t),n.stopGame({reason:applyFailReason.INTERNAL_ERROR,errorCode:"",errorMsg:n.SaasSDKTips.applyFailTips.INTERNAL_ERROR,stopByApp:stopByApp.server,interval:n._getCurrentGameDuration(n.gameStartTime)});break;case"audio_connect":n.loggerSend(loggerEventId.audio_stream_connect,t);break;case"audio_connected":n.connectStatus.audio=!0,n.loggerSend(loggerEventId.audio_stream_connected,t);break;case"audio_ready":break;case"audio_error":n.loggerSend(loggerEventId.audio_stream_connect_failed,t)}n.getNetRequestInfo.push(_objectSpread2(_objectSpread2({},n.netRequestData),r))})}},{key:"_playListenX86",value:function(){var i=this;eventEmitter.on("x86player",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";switch(e){case"icecandidate":i.loggerSend(loggerEventId.webrtc_x86_localIcecandidate,t.candidate);break;case"track":i.loggerSend(loggerEventId.webrtc_x86_track);break;case"negotiationneeded":break;case"iceConnectionState":i.loggerSend(loggerEventId.webrtc_x86_iceConnectionState,t),"connected"===t&&i.player.getWebrtcStats(function(e){i.loggerSend(loggerEventId.webrtc_x86_currentUseRemoteIcecandidate,JSON.stringify(e.remoteCandidate))}),"failed"===t&&i._sdkRestartGame("iceConnectionState");break;case"icegatheringstatechange":i.loggerSend(loggerEventId.webrtc_x86_icegatheringstatechange,t);break;case"signalingstatechange":i.loggerSend(loggerEventId.webrtc_x86_signalingstatechange,t);break;case"connectionstatechange":i.loggerSend(loggerEventId.webrtc_x86_connectionstatechange,t),"failed"===t&&i._sdkRestartGame("connectionstatechange",loggerEventId.webrtc_connect_failed,applyFailCode.x86_rtc_connection_state_failed);break;case"createOfferError":i.loggerSend(loggerEventId.webrtc_x86_createOfferError,t),i.stopGame({reason:applyFailReason.LOAD_GAME_FAILED,errorCode:applyFailCode.x86_rtc_create_offer_error,errorMsg:i.SaasSDKTips.applyFailTips.LOAD_GAME_FAILED,tips:i.SaasSDKTips.applyFailTips.LOAD_GAME_FAILED,stopByApp:stopByApp.server,interval:i._getCurrentGameDuration(i.gameStartTime)});break;case"createAnswerError":i.loggerSend(loggerEventId.webrtc_create_answer_error,t),i.stopGame({reason:applyFailReason.LOAD_GAME_FAILED,errorCode:applyFailCode.x86_rtc_create_answer_error,errorMsg:i.SaasSDKTips.applyFailTips.LOAD_GAME_FAILED,tips:i.SaasSDKTips.applyFailTips.LOAD_GAME_FAILED,stopByApp:stopByApp.server,interval:i._getCurrentGameDuration(i.gameStartTime)});break;case"getRemoteSdpBegin":i.loggerSend(loggerEventId.webrtc_x86_getRemoteSdpBegin,t);break;case"getRemoteSdpSuccess":i.loggerSend(loggerEventId.webrtc_x86_getRemoteSdpSuccess,t),i.loggerSend(loggerEventId.webrtc_signal_server_success),i.loggerSend(loggerEventId.webrtc_send_join),i.loggerSend(loggerEventId.webrtc_receive_offer);break;case"getRemoteSdpError":var n=applyFailCode.x86_rtc_get_remote_sdp_error;t&&t.response&&t.response.ret&&t.response.ret.result&&(n=t.response.ret.result),i.loggerSend(loggerEventId.webrtc_signal_server_disconnect),i.loggerSend(loggerEventId.webrtc_x86_getRemoteSdpError,JSON.stringify(t)),i._sdkRestartGame("getRemoteSdpError",loggerEventId.webrtc_x86_getRemoteSdpError,n);break;case"setRemoteDescriptionError":i.loggerSend(loggerEventId.webrtc_x86_setRemoteDescriptionError,t),i.stopGame({reason:applyFailReason.LOAD_GAME_FAILED,errorCode:applyFailCode.x86_rtc_set_remote_desc_error,errorMsg:i.SaasSDKTips.applyFailTips.LOAD_GAME_FAILED,tips:i.SaasSDKTips.applyFailTips.LOAD_GAME_FAILED,stopByApp:stopByApp.server,interval:i._getCurrentGameDuration(i.gameStartTime)});break;case"dataChannelError":i.loggerSend(loggerEventId.webrtc_x86_dataChannel,"error: "+JSON.stringify(t)),i._sdkRestartGame("dataChannelError",loggerEventId.webrtc_connect_failed,applyFailCode.x86_rtc_data_channel_error);break;case"sendLocalSdpBegin":i.loggerSend(loggerEventId.webrtc_x86_sendLocalSdpBegin,t);break;case"sendLocalSdpSuccess":i.loggerSend(loggerEventId.webrtc_x86_sendLocalSdpSuccess,t),i.loggerSend(loggerEventId.webrtc_send_answer),i.loggerSend(loggerEventId.webrtc_receive_candidate);break;case"sendLocalSdpError":var n=applyFailCode.streaming_sdk_candidate_error;t&&t.response&&t.response.ret&&t.response.ret.result&&(n=t.response.ret.result),i.loggerSend(loggerEventId.webrtc_signal_server_disconnect),i._sdkRestartGame("sendLocalSdpError",loggerEventId.webrtc_x86_sendLocalSdpError,n);break;case"dataChannelOpen":i._manageWebrtcVibf(t),i._delay_losetTimer(),i.loggerSend(loggerEventId.webrtc_x86_dataChannel,"open"),i.gX86PlayerDataChannelPingPongTimerId=setInterval(function(){i.player.sendData("ping:"+Date.now())},i.setDataInfo.ping_interval_time||6e4),i.loggerSend(loggerEventId.webrtc_connect_success),i.setDataInfo.set_mouse_move_ratio&&i.setMouseMoveRatio(i.setDataInfo.set_mouse_move_ratio),i.player&&i.player.setVirtualConfig&&(i.player.setVirtualConfig(i.setDataInfo.x86_key_map_content),i.player.showVirtualGamepad());break;case"dataChannelMsg":if((t.notify||t.IMEStatus||t.stateType||t.sdkData||t.resetNoInputTimer)&&i.loggerSend(loggerEventId.webrtc_x86_dataChannel,"msg:".concat(base64(JSON.stringify(t)))),t.pingPong)-1<(n=t.pingPong).indexOf("pong:")&&(n=n.split(":")[1],i.inputPingPongDelay=Date.now()-parseFloat(n),i.loggerSend(loggerEventId.input_socket_ping_pong_delay_time,i.inputPingPongDelay),i.inputPingPongDelay>=i.setDataInfo.ping_delay_time)&&i.loggerSend(loggerEventId.input_socket_ping_pong_delay_max,i.inputPingPongDelay);else if(t.cursorInfo)i._emit("sceneChanged","cursorInfo",t.cursorInfo);else if(t.IMEStatus)"STATUS_SHOW"===(n=t.IMEStatus).statusType?(i.loggerSend(loggerEventId.input_socket_start_im),i._emit("sceneChanged","inputFocusNotify","startIM")):"STATUS_HIDE"===n.statusType&&(i.loggerSend(loggerEventId.input_socket_stop_im),i._emit("sceneChanged","inputFocusNotify","stopIM"));else if(t.notify){var r=t.notify;switch(r.type){case"GAME_QUIT":i.loggerSend(loggerEventId.webrtc_x86_dataChannelNotify,r.type),i.stopGame({reason:applyFailReason.IS_END,errorCode:"",errorMsg:"",tips:i.talkInfo.prompt_game_over,stopByApp:stopByApp.server,interval:i._getCurrentGameDuration(i.gameStartTime)});break;case"NO_INPUT_TIMEOUT":i.loggerSend(loggerEventId.webrtc_x86_dataChannelNotify,r.type),i.stopGame({reason:applyFailReason.KICK_OFF,errorCode:"",errorMsg:"",tips:i.talkInfo.toast_no_input,stopByApp:stopByApp.server,interval:i._getCurrentGameDuration(i.gameStartTime)});break;case"GET_CONTROL":i._openCaptureMediaDevice(),i._emit("sceneChanged","gameControl",{state:"got",cid:r.cid});break;case"LOST_CONTROL":i._releaseCaptureMediaDevice(),i._emit("sceneChanged","gameControl",{state:"loses",cid:r.cid})}}else if(t.stateType){var o=t.stateType;if(!o)return;switch(o.type){case 1:break;case 3:case 5:i.loggerSend(loggerEventId.webrtc_x86_dataChannelNotify,o.type),i.stopGame({reason:applyFailReason.IS_END,errorCode:"",errorMsg:"",tips:i.talkInfo.prompt_game_over,stopByApp:stopByApp.server,interval:i._getCurrentGameDuration(i.gameStartTime)})}}else t.mediaDevicesRequest?(i.loggerSend(loggerEventId.x86_media_devices_request,JSON.stringify(t.mediaDevicesRequest)),i._emit("sceneChanged","mediaDevicesRequestNotify",{action:t.mediaDevicesRequest.action,data:t.mediaDevicesRequest.data})):t.sdkData&&i._emit("sceneChanged","gameExtraData",t);break;case"mediaDevicesResponse":n=JSON.parse(t.sdkAction);i.loggerSend(loggerEventId.x86_media_devices_response,t.sdkAction),"Camera"===n.action&&(i.isX86CameraStatus=1===n.data.op);break;case"cameraInfo":i.loggerSend(loggerEventId.x86_media_devices_camera_capabilities,t)}})}},{key:"_playListenWEBRTC",value:function(){var r=this;eventEmitter.on("webrtc",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n={url:"",action:"webrtc",startTime:(new Date).getTime(),responseTime:0,time:0,result:"failed",msg:""};switch(e){case"begin_connect":n.url=t,n.startTime=(new Date).getTime(),r.loggerSend(loggerEventId.webrtc_begin_connect,encodeURIComponent(t)+",viewResolution:"+r.streamStyle.streamStyleH+"x"+r.streamStyle.streamStyleW);break;case"send_join":r.loggerSend(loggerEventId.webrtc_send_join,t);break;case"receive_offer":r.loggerSend(loggerEventId.webrtc_receive_offer,t);break;case"receive_candidate":r.loggerSend(loggerEventId.webrtc_receive_candidate,t);break;case"setRemoteDescription_success":r.loggerSend(loggerEventId.webrtc_setRemoteDes_success,t);break;case"setRemoteDescription_failed":r.loggerSend(loggerEventId.webrtc_setRemoteDes_error,n.msg=t);break;case"setLocalDescription_success":r.loggerSend(loggerEventId.webrtc_setLocalDes_success,t);break;case"send_answer":r.loggerSend(loggerEventId.webrtc_send_answer,t);break;case"setLocalDescription_failed":r.loggerSend(loggerEventId.webrtc_setLocalDes_error,n.msg=t);break;case"createAnswer_failed":r.loggerSend(loggerEventId.webrtc_create_answer_error,n.msg=t);break;case"addIceCandidate_success":r.loggerSend(loggerEventId.webrtc_addIceCandidate_success);break;case"addIceCandidate_failed":r.loggerSend(loggerEventId.webrtc_addIceCandidate_error,n.msg=t);break;case"onIceCandidate_success":r.loggerSend(loggerEventId.webrtc_send_candidate,t);break;case"ontrack":r.loggerSend(loggerEventId.webrtc_ontrack,t);break;case"connectionState":r.loggerSend(loggerEventId.webrtc_connect_status,"peer_connect_status: ".concat(t));break;case"iceConnectionState":r.loggerSend(loggerEventId.webrtc_connect_status,"peer_iceConnect_status: ".concat(t));break;case"peer_connect_success":r.connectStatus.video=!0,r.connectStatus.audio=!0,n.result="success",n.responseTime=(new Date).getTime(),n.time=n.responseTime-n.startTime,r.loggerSend(loggerEventId.webrtc_connect_success),r._delay_losetTimer();break;case"self_connect_success":r.loggerSend(loggerEventId.webrtc_self_connect_success);break;case"other_connect_success":r.loggerSend(loggerEventId.webrtc_no_self_connect_success);break;case"webrtc_decode_first_frame_end":r.loggerSend(loggerEventId.webrtc_decode_first_frame_end,t);break;case"rtc_connect_vibf":break;case"rtc_connect_result":r._manageWebrtcConnectResult(t);break;case"webrtc_receive_audio":r.loggerSend(loggerEventId.webrtc_receive_audio);break;case"signalv2_opened":r.loggerSend(loggerEventId.signalv2_opened);break;case"signalv2_closed":r.loggerSend(loggerEventId.signalv2_closed);break;case"signalv2_setoffer":r.loggerSend(loggerEventId.signalv2_setoffer);break;case"rtc_data_channel":if("event"===t.type)return void r.loggerSend(loggerEventId.webrtc_datachannel_receive,t.data.channel.label);if("media_device_request"===t.type)return r.loggerSend(loggerEventId.webrtc_datachannel_receive,t.data),r._emit("sceneChanged","mediaDeviceRequestNotify",{action:t.data.action,data:t.data.data}),void("Camera"===t.data.action&&(r.isX86CameraStatus=1===t.data.data.op));break;case"rtc_create_error":r.loggerSend(loggerEventId.webrtc_connect_failed,JSON.stringify(t)),r.stopGame({reason:applyFailReason.LOAD_GAME_FAILED,errorCode:applyFailCode.WEBRTC_CONNECT_TIMEOUT,errorMsg:r.SaasSDKTips.applyFailTips.LOAD_GAME_FAILED,tips:r.SaasSDKTips.applyFailTips.LOAD_GAME_FAILED,stopByApp:stopByApp.server,interval:r._getCurrentGameDuration(r.gameStartTime)})}r.getNetRequestInfo.push(_objectSpread2(_objectSpread2({},r.netRequestData),n))}),eventEmitter.on("socket.io",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n={url:"",action:"webrtc",startTime:(new Date).getTime(),responseTime:0,time:0,result:"failed",msg:""};switch(e){case"connect":n.result="success",n.responseTime=(new Date).getTime(),n.time=n.responseTime-n.startTime,r.loggerSend(loggerEventId.webrtc_signal_server_success,t);break;case"disconnect":r.loggerSend(loggerEventId.webrtc_signal_server_disconnect,t);break;case"reconnectFailed":r.loggerSend(loggerEventId.webrtc_socket_reconnect,"signalServer_reconn_failed");break;case"reconnectSuccess":r.loggerSend(loggerEventId.webrtc_socket_reconnect,"signalServer_reconnect_success");break;case"reconnectError":r.loggerSend(loggerEventId.webrtc_socket_reconnect,"signalServer_reconn_error");break;case"connectTimeout":r.loggerSend(loggerEventId.webrtc_signal_server_timeout,"signalServer_timeout")}r.getNetRequestInfo.push(_objectSpread2(_objectSpread2({},r.netRequestData),n))}),eventEmitter.on("datachannel",function(e,t){switch(e){case"sendCountly":r.loggerSend(t.eventId,t.eventData);break;case"sceneChanged":r._emit("sceneChanged",t.sceneId,t.sceneData)}})}},{key:"_delay_losetTimer",value:function(){var T=this,R=[],I=0,D=0,P=0,O=0,x=0,M={packetsSent:0,retransmittedPacketsSent:0,bytesSent:0,headerBytesSent:0,retransmittedBytesSent:0,framesEncoded:0,totalEncodedBytesTarget:0,framesSent:0},N=[];clearInterval(this.collectDelayDataTimer),this.collectDelayDataTimer=setInterval(function(){try{T.player?T.player.getWebrtcStats(function(e,t,n){var r=e.packetsLost,o=e.packetsReceived,i=e.bytesReceived,a=e.framesDecoded,s=(e.googDecodeMs,e.googRenderDelayMs),c=e.googTargetDelayMs,l=e.googFrameRateOutput,d=e.googInterframeDelayMax,u=e.googCurrentDelayMs,p=e.framesReceived,h=e.googJitterBufferMs,f=e.frameWidth,m=e.frameHeight,A=e.googCodecName,y=e.codecImplementationName,_=e.totalDecodeTime,g=e.totalRoundTripTime,v=e.responsesReceived,e=(e.totalFreezesDuration,e.freezeCount,t.googFrameRateInput),S=void 0===e?-1:e,e=t.googAvgEncodeMs,b=void 0===e?-1:e,e=t.googFrameRateSent,w=void 0===e?-1:e,t=i-P,C="-1",e=(0<t&&(C=t.toFixed(3)),(g/v*1e3).toFixed(2)),g=((_-x)/(a-O)*1e3).toFixed(2),k=a-O,v=-1;0<k&&(v=parseInt(String(t/k)));var t=r-I,E=null,E=(t/(o-D+t)*100).toFixed(2),t=((isNaN(E)||E<0)&&(E=0),I=r,D=o,P=i,O=a,x=_,videFrameJankStatisGetJanksCount_1()),r=videFrameJankStatisGetFreezeCount_1(),o=videFrameJankStatisGetJankDuration_1()+videFrameJankStatisGetFreezeDuration_1();3==T.gGameState&&(T.setDataInfo.report_delay_interval_times&&1<=T.setDataInfo.report_delay_interval_times&&(R.length>=T.setDataInfo.report_delay_interval_times&&(T.loggerSend(loggerEventId.collect_delay_data,R.join()),R=[]),(a=[]).push((new Date).getTime()),a.push(numToString(e)),a.push(numToString(g)),a.push(numToString(s)),a.push(numToString(c)),a.push(numToString(c)),a.push(numToString(v)),a.push(numToString(k)),a.push(numToString(l)),a.push(numToString(C)),a.push(numToString(T.inputPingPongDelay)),a.push(numToString(d)),a.push(numToString(E)),a.push("0"),a.push("0"),a.push("0-0-0-0"),a.push("0","0","0","0","0","0","0"),a.push("0"),a.push("0"),a.push("0"),a.push("0"),a.push("0"),a.push(numToString(t)),a.push(numToString(r)),a.push("0"),a.push("0"),a.push(numToString(o)),R.push(a.join("|"))),T.videoStreamInfo.videoFps=numToString(k),T.videoStreamInfo.bitRate=numToString(C),T.videoStreamInfo.packetsLostRate=numToString(E),T.videoStreamInfo.currentDelayMs=numToString(u),T.videoStreamInfo.decodeDelay=numToString(g),T.videoStreamInfo.renderDelay=numToString(s),T.videoStreamInfo.frameSize=numToString(v),T.videoStreamInfo.jitterBuffer=numToString(h),T.videoStreamInfo.framesReceived=numToString(p),T.videoStreamInfo.receiveFrameSize=numToString(i),T.videoStreamInfo.delay=numToString(e),T.videoStreamInfo.codecImplementationName=y||"",T.videoStreamInfo.codecName=A||"",T.videoStreamInfo.frameWidth=numToString(f),T.videoStreamInfo.frameHeight=numToString(m),T._emit("sceneChanged","delay",{delay:T.videoStreamInfo.delay}),T._emit("sceneChanged","packetsLost",{packetsLost:T.videoStreamInfo.packetsLostRate}),T._emit("messageUIModel","FrameDelay",{delay:T.videoStreamInfo.delay,packetsLost:T.videoStreamInfo.packetsLostRate}),T._emit("sceneChanged","videoStreamInfo",T.videoStreamInfo)),T.isX86CameraStatus?T.setDataInfo.report_delay_interval_times&&1<=T.setDataInfo.report_delay_interval_times&&(N.length>=T.setDataInfo.report_delay_interval_times&&(T.loggerSend(loggerEventId.webrtc_x86_up_video_collection,N.join()),N=[]),n.forEach(function(e){var t;"video"===e.kind&&"outbound-rtp"===e.type&&0<e.bytesSent&&(t=(new Date).getTime()+"|"+(e.packetsSent-M.packetsSent)+"|"+(e.retransmittedPacketsSent-M.retransmittedPacketsSent)+"|"+(8*(e.bytesSent-M.bytesSent)/1024/1024).toFixed(4)+"|"+(8*(e.headerBytesSent-M.headerBytesSent)/1024).toFixed(4)+"|"+(e.retransmittedBytesSent-M.retransmittedBytesSent)+"|"+(e.framesEncoded-M.framesEncoded)+"|"+k+"|"+(e.totalEncodeTime?(e.totalEncodeTime/e.framesEncoded).toFixed(4):-1)+"|"+(e.totalEncodedBytesTarget-M.totalEncodedBytesTarget||-1)+"|"+(e.framesSent-M.framesSent||-1)+"|"+(e.hugeFramesSent||-1)+"|"+C+"|"+e.pliCount+"|"+e.nackCount+"|"+(e.frameWidth||-1)+"|"+(e.frameHeight||-1)+"|"+(e.framesPerSecond||-1)+"|"+(e.qpSum/e.framesEncoded).toFixed(4)+"|"+S+"|"+b+"|"+w,N.push(t),M=e)})):N=[]}):clearInterval(T.collectDelayDataTimer)}catch(e){clearInterval(T.collectDelayDataTimer)}},1e3)}},{key:"_manageWebrtcVibf",value:function(e){clearInterval(this.playerRetryTimer),"op5"!==e&&(this.gGameState=3),this.isNeedWaitOperation5Notify||(this.videoId&&autoPlayVideo(this.videoId),document.getElementById(this.coverId)&&document.getElementById(this.coverId).remove(),this.firstFrameEvent(e))}},{key:"_manageWebrtcConnectResult",value:function(e){1==e.code?this._manageWebrtcVibf(e):(this.connectStatus&&(this.connectStatus.video=!1,this.connectStatus.audio=!1),this.loggerSend(loggerEventId.webrtc_connect_failed,JSON.stringify(e)),this._sdkRestartGame("webrtc_connect_failed"))}},{key:"_inputSocketConnect",value:function(e){var n=this,r={url:"",action:"input",startTime:(new Date).getTime(),responseTime:0,time:0,result:"failed",msg:""};eventEmitter.on("inputSocket",function(e,t){switch(e){case"open":n.connectStatus.inputSocket=!0,n.inputOpenStatus=!0,r.result="success",r.responseTime=(new Date).getTime(),r.time=r.responseTime-r.startTime,n._emit("messageUIModel","setInputSocket",n.inputSocket),n.loggerSend(loggerEventId.input_socket_opened);break;case"messages":break;case"delay":n.inputPingPongDelay=t,n.loggerSend(loggerEventId.input_socket_ping_pong_delay_time,{pingpongCost:t});break;case"delayMax":n.inputPingPongDelay=t,n.loggerSend(loggerEventId.input_socket_ping_pong_delay_max);break;case"startIm":n._emit("messageUIModel","startIm"),n._emit("sceneChanged","inputFocusNotify",t),n.loggerSend(loggerEventId.input_socket_start_im);break;case"stopIm":n._emit("messageUIModel","stopIm"),n._emit("sceneChanged","inputFocusNotify",t),n.loggerSend(loggerEventId.input_socket_stop_im);break;case"close":n.connectStatus.inputSocket=!1,r.msg=t,n.loggerSend(loggerEventId.input_socket_closed,{errorCode:t.code,errorMsg:""}),n.loggerSend(loggerEventId.input_socket_connect_failed,{errorCode:t.code,errorMsg:""}),n.inputDisconnectTimer=setTimeout(function(){4!==n.gGameState&&5!==n.gGameState&&n.inputOpenStatus&&n._sdkRestartGame("input_disconnect")},3e3)}n.getNetRequestInfo.push(_objectSpread2(_objectSpread2({},n.netRequestData),r))}),r.url=e,this.loggerSend(loggerEventId.input_socket_connect,{inputUrl:encodeURIComponent(e)}),this.inputSocket=new InputSocket(e,this.setDataInfo.ping_interval_time,this.setDataInfo.ping_delay_time),this.inputSocket.connect()}},{key:"_inputSocketRelease",value:function(){clearTimeout(this.inputDisconnectTimer),this.inputSocket&&(this.inputSocket.disconnect(),this.inputSocket=null)}},{key:"_screenSocketConnect",value:function(e){var n=this;eventEmitter.on("screenSocket",function(e,t){switch(e){case"open":n.screenSocket.send(JSON.stringify({bid:n.accessKeyId,cid:n.cid,mid:"W"+Date.now(),data:"",type:"getSensorList"})),n.loggerSend(loggerEventId.screen_socket_opened),n.screenSocket.send("START_RECORD");break;case"messages":n._screenSocketState(t);break;case"close":n.loggerSend(loggerEventId.screen_socket_closed,{errorCode:t.code,errorMsg:""});break;case"reconnect":n.loggerSend(loggerEventId.screen_socket_reconnect);break;case"failed":n.loggerSend(loggerEventId.screen_socket_closed)}}),this.loggerSend(loggerEventId.screen_socket_connect,{type:"screenSocket",screenUrl:encodeURIComponent(e)}),this.screenSocket=new ScreenSocket(e,"screenSocket"),this.screenSocket.connect()}},{key:"_screenSocketState",value:function(e){var t,n=this;try{if(e instanceof Blob)(t=new FileReader).readAsArrayBuffer(e),t.onload=function(e){e.target.readyState==FileReader.DONE&&n.armCapCallback(e.target.result)};else{var r,o,i,a=JSON.parse(e);if(0==a.orientation||a.orientation)this._emit("screenMessageRotate",e);else switch(a.type){case"share_link":this._emit("sceneChanged","share"),this.loggerSend(loggerEventId.rom_share_link);break;case"open_camera":this._emit("sceneChanged","openCamera"),this.loggerSend(loggerEventId.rom_open_camera,a);break;case"open_gallery":this._emit("sceneChanged","openGallery"),this.loggerSend(loggerEventId.rom_open_gallery,a);break;case"screen_cap":a.image_name&&this._emit("sceneChanged","newFileAppear",{image_name:a.image_name}),this.loggerSend(loggerEventId.rom_inform_cap,a);break;case"image_list":this._emit("sceneChanged","fileList",{list:a.fileNames}),this.downloadInfo.fileListCallback(a.fileNames),this.loggerSend(loggerEventId.rom_inform_capList,a.fileNames.join());break;case"download_file":this._bigFileEvent(a);break;case"clipboard":hasOwnProperty(a,"code")?((r=0==a.code)?this.loggerSend(loggerEventId.wsmessage_send_successed,base64("mid: "+a.mid)):this.loggerSend(loggerEventId.wsmessage_send_failed,base64("mid: "+a.mid+" code: "+a.code)),delete this.wsMessageList[a.mid],"{}"==JSON.stringify(this.wsMessageList)&&(clearInterval(this.wsMessageTimer),this.wsMessageTimer=null),this.sendWSMessageCallback[a.type](a.mid,r,a.message)):(this._emit("sceneChanged","wsmessage",a),this.loggerSend(loggerEventId.wsmessage_send_recevied,base64("type:clipboard, mid:"+a.mid)));break;case"android_share":case"weixin_share":case"qq_share":case"weibo_share":this._emit("sceneChanged","agentShare",a);break;case"gps":this._emit("sceneChanged","gps",a);break;case"storage":this._emit("sceneChanged","storage",a);break;case"intent":hasOwnProperty(a,"code")?((o=1e3==a.code)?this.loggerSend(loggerEventId.wsmessage_send_successed,"mid: "+a.mid):this.loggerSend(loggerEventId.wsmessage_send_failed,"mid: "+a.mid+" code: "+a.code),delete this.wsMessageList[a.mid],"{}"==JSON.stringify(this.wsMessageList)&&(clearInterval(this.wsMessageTimer),this.wsMessageTimer=null),this.sendWSMessageCallback[a.type](a.mid,o,a.message)):((i=JSON.parse(JSON.stringify(a))).code=1e3,this.screenSocket.send(JSON.stringify(i)),this._emit("sceneChanged","intent",a),this.loggerSend(loggerEventId.wsmessage_send_recevied,"type:intent, mid:"+a.mid));break;case"sensor":a.data=[a.data],this._emit("sceneChanged","sensorList",a),this.loggerSend(loggerEventId.sensor_received);break;case"getSensorList":a.data&&(this._emit("sceneChanged","sensorList",a),this.loggerSend(loggerEventId.sensor_list_received));break;default:this._uploadAudio(a)}}}catch(e){}}},{key:"_uploadAudio",value:function(e){var t=e.cmd;switch(e.parm,t){case 0:this.sendLogger(loggerEventId.audio_connect_open);break;case 1:return this.sendLogger(loggerEventId.audio_start_msg,JSON.stringify(e)),void eventEmitter.emit("webrtc","rtc_data_channel",{type:"media_device_request",data:{action:"Microphone",data:{op:1,ext:""}}});case 2:return this.sendLogger(loggerEventId.audio_end_msg_timeout,JSON.stringify(e)),void eventEmitter.emit("webrtc","rtc_data_channel",{type:"media_device_request",data:{action:"Microphone",data:{op:0,ext:""}}});case 3:this.sendLogger(loggerEventId.audio_connect_error,JSON.stringify(e)),this.captureLocalAudio&&this.captureLocalAudio.stop()}}},{key:"_upDataSocketConnect",value:function(e){var r=this;e+="&act=1&proto=4",eventEmitter.on("upDataSocket",function(e,t){switch(e){case"open":r.uploadQueue&&(r.uploadQueue=!1,r.waitUploadFile(r.upDataInfo));break;case"messages":try{var n=JSON.parse(t);r._upDateFile(n)}catch(e){}}}),this.loggerSend(loggerEventId.screen_socket_connect,{type:"upDataSocket",screenUrl:encodeURIComponent(e)}),this.upDataSocket=new ScreenSocket(e,"upDataSocket"),this.upDataSocket.connect()}},{key:"_downloadSocketConnect",value:function(e){var n=this;e+="&act=1&proto=5",eventEmitter.on("downloadSocket",function(e,t){switch(e){case"open":n.offFileSocketFn();break;case"messages":n.fileSocketState(t);break;case"close":n.offFileSocketFn(),n.loggerSend(loggerEventId.screen_socket_closed,{errorCode:t.code,errorMsg:""})}}),this.loggerSend(loggerEventId.screen_socket_connect,{type:"downloadSocket",screenUrl:encodeURIComponent(e)}),this.downloadSocket=new ScreenSocket(e,"downloadSocket"),this.downloadSocket.connect()}},{key:"_screenSocketRelease",value:function(){this.screenSocket&&(this.screenSocket.disconnect(),this.screenSocket=null),this.upDataSocket&&(this.upDataSocket.disconnect(),this.upDataSocket=null),this.downloadSocket&&(this.offFileSocketFn(),this.downloadSocket.disconnect(),this.downloadSocket=null)}},{key:"_upDateFile",value:function(e){var t=this;if("upload_image"===e.type)if(-1===e.code)this._emit("sceneChanged","upload",this.SaasSDKTips.SaasSDK.unknownError),this.upDataInfo.uploadOnError(this.upDataInfo.uploadOpType,this.SaasSDKTips.SaasSDK.unknownError);else if(e.code in this.SaasSDKTips.uploadErrorMessage)this._emit("sceneChanged","upload",this.SaasSDKTips.uploadErrorMessage[e.code]),this.upDataInfo.uploadOnError(this.upDataInfo.uploadOpType,this.SaasSDKTips.uploadErrorMessage[e.code]);else{var n=this.upDataInfo.uploadImgBuffer.byteLength,r=0,o=81920,i=0;if(0===e.code){for(this.upDataInfo.uploadStatus=3,this.upDataInfo.retryUpload=5,this.upDataInfo.uploadRetryTimer&&clearTimeout(this.upDataInfo.uploadRetryTimer);r<n;)this.upDataSocket.send(this.upDataInfo.uploadImgBuffer.slice(r,o)),o=(r=o)+81920,i=1;this.upDataSocket.send(JSON.stringify({type:this.upDataInfo.uploadOpType,code:"end",fileName:this.upDataInfo.uploadFile.name})),this.upDataInfo.uploadStatus=4,this.loggerSend(loggerEventId.upload_image_end),this.upDataInfo.uploadRetryTimer=setInterval(function(){4!==t.upDataInfo.uploadStatus?clearTimeout(t.upDataInfo.uploadRetryTimer):t.upDataInfo.retryUpload<=0?(t._emit("sceneChanged","upload",t.SaasSDKTips.uploadErrorMessage[1007]),t.upDataInfo.uploadOnError(t.upDataInfo.uploadOpType,t.SaasSDKTips.uploadErrorMessage[1007]),clearTimeout(t.upDataInfo.uploadRetryTimer)):4===t.upDataInfo.uploadStatus&&(t.upDataSocket.send(JSON.stringify({type:t.upDataInfo.uploadOpType,code:"end",fileName:t.upDataInfo.uploadFile.name})),t.upDataInfo.retryUpload=t.upDataInfo.retryUpload-1)},this.upDataInfo.uploadDelay)}else 1===e.code&&(this.upDataInfo.uploadStatus=0,this.upDataInfo.retryUpload=5,this.upDataInfo.uploadRetryTimer&&clearTimeout(this.upDataInfo.uploadRetryTimer),this.upDataInfo.uploadOnSuccess(this.upDataInfo.uploadOpType,this.upDataInfo.uploadFile),this.loggerSend(loggerEventId.upload_image_success),this.loggerSend(loggerEventId.upload_image_state,{file_segment_coefficient:i,file_segment_size:81920,file_size:this.upDataInfo.uploadFile.size,upload_cost:(new Date).valueOf()-this.upDataInfo.uploadStartTime}))}}},{key:"getFileList",value:function(e){e&&e.size&&(20<e.size||e.size<=0)&&(e.size=20);var t={type:"image_list",limit:e&&e.size||20,offset:e&&e.offset||0};return e&&e.callback&&(this.downloadInfo.fileListCallback=e.callback),this.loggerSend(loggerEventId.sdk_get_capList,String(e)),!!this.screenSocket&&this.screenSocket.send(JSON.stringify(t))}},{key:"downLoadFile",value:function(e,t){var n;return isIE()?(t&&t({success:!1,msg:this.SaasSDKTips.downloadErrorMessage.noSupport}),this._emit("sceneChanged","downLoadFileInfo",{success:!1,msg:this.SaasSDKTips.downloadErrorMessage.noSupport}),this.loggerSend(loggerEventId.downLoad_file_stop,this.SaasSDKTips.downloadErrorMessage.noSupport),!1):e&&"string"==typeof e?!(!this.downloadSocket||this.downloadSocket.ws&&1!=this.downloadSocket.ws.readyState)&&(this.downloadInfo.fileName?(t&&t({success:!1,fileName:e,msg:this.SaasSDKTips.downloadErrorMessage.has_task}),this._emit("sceneChanged","downLoadFileInfo",{success:!1,fileName:e,msg:this.SaasSDKTips.downloadErrorMessage.has_task}),this.loggerSend(loggerEventId.downLoad_file_stop,e+this.SaasSDKTips.downloadErrorMessage.has_task),!1):(n={type:"download_image",code:"start",fileName:e},this.downloadInfo.fileName=e,t&&(this.downloadInfo.fileDownloadCallback=t),this.downloadInfo.time=(new Date).getTime(),this.loggerSend(loggerEventId.downLoad_file_state,this.downloadInfo.fileName),this.loggerSend(loggerEventId.downLoad_file_start,this.downloadInfo.fileName),this.downloadSocket.send(JSON.stringify(n)))):(t&&t({success:!1,msg:this.SaasSDKTips.downloadErrorMessage.download_name_empty}),this._emit("sceneChanged","downLoadFileInfo",{success:!1,msg:this.SaasSDKTips.downloadErrorMessage.download_name_empty}),this.loggerSend(loggerEventId.downLoad_file_stop,this.SaasSDKTips.downloadErrorMessage.download_name_empty),!1)}},{key:"cancelDownload",value:function(e){return isIE()?(this._emit("sceneChanged","cancelDownLoadFail",{success:!1,msg:this.SaasSDKTips.downloadErrorMessage.noSupport}),this.loggerSend(loggerEventId.downLoad_file_stop,this.SaasSDKTips.downloadErrorMessage.noSupport),!1):e?this.cancelDownLoadFile(e):(this._emit("sceneChanged","cancelDownLoadFail",{success:!1,msg:this.SaasSDKTips.downloadErrorMessage.cancel_name_empty}),this.loggerSend(loggerEventId.downLoad_file_stop,e+this.SaasSDKTips.downloadErrorMessage.cancel_name_empty),!1)}},{key:"cancelDownLoadFile",value:function(e,t){return!(!this.downloadSocket||this.downloadSocket.ws&&1!=this.downloadSocket.ws.readyState)&&(t||this.downloadInfo.fileName||!e?(t={type:"download_image",code:"cancel",fileName:e},this.loggerSend(loggerEventId.downLoad_file_cancel,e),this.downloadSocket.send(JSON.stringify(t))):(this._emit("sceneChanged","cancelDownLoadFail",{success:!1,msg:this.SaasSDKTips.downloadErrorMessage.no_task}),this.loggerSend(loggerEventId.downLoad_file_stop,this.SaasSDKTips.downloadErrorMessage.no_task),!1))}},{key:"fileSocketState",value:function(e){var t,n,r=this;0==(e="string"==typeof e?JSON.parse(e):e).code?(this.downloadInfo.imgBold=[],this.downloadInfo.fileParam=e,this.downloadInfo.time=(new Date).getTime(),this.loggerSend(loggerEventId.downLoad_file_state,this.downloadInfo.fileName),sessionStorage.setItem("fileName",this.downloadInfo.fileName)):1==e.code?(sessionStorage.removeItem("fileName"),this.downloadInfo.fileName&&(this.downloadInfo.time=(new Date).getTime(),this.loggerSend(loggerEventId.downLoad_file_state,this.downloadInfo.fileName),this.loggerSend(loggerEventId.downLoad_file_end,this.downloadInfo.fileName),n=new Blob(this.downloadInfo.imgBold,{type:"image/jpeg"}),(t=new FileReader).readAsArrayBuffer(n),t.onload=function(e){if(e.target.readyState==FileReader.DONE){try{var t,n=e.target.result;_cryptoJs_3_3_0_cryptoJs.MD5(_cryptoJs_3_3_0_cryptoJs.lib.WordArray.create(n)).toString()==r.downloadInfo.fileParam.md5sum?(r.loggerSend(loggerEventId.downLoad_file_success,r.downloadInfo.fileName),t={success:!0,fileBold:n,fileType:r.downloadInfo.fileParam.mimeType,fileSize:r.downloadInfo.fileParam.fileSize,fileName:r.downloadInfo.fileName},r.downloadInfo.fileDownloadCallback(t),r._emit("sceneChanged","downLoadFileInfo",t)):(r._sceneChangedDownLoadFileInfo(r.SaasSDKTips.downloadErrorMessage.download_file_error,!0),r.loggerSend(loggerEventId.downLoad_file_error,r.downloadInfo.fileName))}catch(e){r._sceneChangedDownLoadFileInfo(r.SaasSDKTips.downloadErrorMessage.download_file_error,!0),r.loggerSend(loggerEventId.downLoad_file_error,r.downloadInfo.fileName)}r.downloadInfo.imgBold=[],r.downloadInfo.fileName="",r.downloadInfo.fileParam=null}})):2==e.code?this._sceneChangedDownLoadFileInfo(this.SaasSDKTips.downloadErrorMessage.user_cancel,!0):-1==e.code?this._sceneChangedDownLoadFileInfo(this.SaasSDKTips.downloadErrorMessage.turned_off,!0):10001==e.code||10002==e.code?this._sceneChangedDownLoadFileInfo(this.SaasSDKTips.downloadErrorMessage.image_not_found,!0):10005==e.code?this._sceneChangedDownLoadFileInfo(this.SaasSDKTips.downloadErrorMessage.download_limit,!0):"blob"==typeCheck(e)&&((n=sessionStorage.getItem("fileName"))&&!this.downloadInfo.fileName?this.cancelDownLoadFile(n,!0):this.downloadInfo.imgBold.push(e))}},{key:"offFileSocketFn",value:function(){this.downloadInfo.fileName&&(this.downloadInfo.fileDownloadCallback({success:!1,fileName:this.downloadInfo.fileName,msg:this.SaasSDKTips.downloadErrorMessage.link_close}),this._sceneChangedDownLoadFileInfo(this.SaasSDKTips.downloadErrorMessage.link_close),this.cancelDownLoadFile(this.downloadInfo.fileName),this.loggerSend(loggerEventId.downLoad_file_error,this.downloadInfo.fileName+"socket"))}},{key:"_sceneChangedDownLoadFileInfo",value:function(e,t){this.downloadInfo.fileName&&(this._emit("sceneChanged","downLoadFileInfo",{success:!1,fileName:this.downloadInfo.fileName,msg:e}),t&&this.downloadInfo.fileDownloadCallback({success:!1,fileName:this.downloadInfo.fileName,msg:e}),this.downloadInfo.fileName="",this.downloadInfo.fileParam=null)}},{key:"_bigFileEvent",value:function(e){var n,t,r,o,i=this;if("download_file"==e.event||"create_file"==e.event)try{this.bigFileDownloadUrl&&(t=JSON.parse(e.data),r=this.bigFileDownloadUrl.replace("?","/"+t.name+"?"),o={name:t.name,size:t.size,url:r+t.path+"/"+t.name,duration:t.duration,type:t.type,fileState:"create_file"==e.event?0:1},this._emit("sceneChanged","newBigFile",o),t.name)&&"download_file"==e.event&&(this.screenSocket.send(JSON.stringify({type:"download_file",event:"ack",fileName:t.path+"/"+t.name})),this.loggerSend(loggerEventId.big_file_inform,JSON.stringify(t)))}catch(e){}else"download_file_list"==e.event&&(r=e.data,n=[],r.map(function(e){var e=JSON.parse(e),t=i.bigFileDownloadUrl.replace("?","/"+e.name+"?");n.push({name:e.name,size:e.size,url:t+e.path+"/"+e.name,duration:e.duration,type:e.type})}),this.loggerSend(loggerEventId.big_file_list,JSON.stringify(n)),n.length)&&this.bigFileInfo.getFileListCallback(n)}},{key:"_emit",value:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];eventEmitter.emit.apply(eventEmitter,[e].concat(n))}},{key:"pauseGame",value:function(e,t){switch(this.gGameState=4,this.loggerSend(loggerEventId.stop_game_fun_Call,e),e){case"hidden":this.gReconnecting=!1,this.loggerSend(loggerEventId.visibility_change_hidden);break;case"offline":this.gReconnecting=!1,this.gGameState=6,this.loggerSend(loggerEventId.client_network_status,"false")}this._getStreamAddressTimedOutRelease(),this._connectSaasLinkTimedOutRelease(),this.isChangeResolution=!1,this.inputOpenStatus=!1,this.gameStopStatus=!0,this.saasRequest.httpRequestRelease(),"reconnectStream"!==e&&this._saasSocketRelease(),this._inputSocketRelease(),this._screenSocketRelease(),this._playerRelease(),this.captureLocalAudio&&(this.captureLocalAudio.release(),this.captureLocalAudio=null),"saas_socket_limit"===e&&this._stopGameEvent({reason:applyFailReason.LINK_LIMIT,tips:this.SaasSDKTips.applyFailTips.GAME_STOPPED||t,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime),statusCode:this.connectStatus.statusCode}),"saas_socket_failed"===e&&this._stopGameEvent({reason:applyFailReason.NORMAL,tips:this.SaasSDKTips.applyFailTips.GAME_STOPPED||t,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime),statusCode:this.connectStatus.statusCode}),this._releaseCaptureMediaDevice()}},{key:"_stopGameEvent",value:function(e){var t=e.reason,n=e.errorCode,n=void 0===n?"":n,r=e.errorMsg,r=void 0===r?"":r,o=e.tips,o=void 0===o?"":o,i=e.stopByApp,a=e.interval,a=void 0===a?"":a,s=e.statusCode,e=e.stateChangeReason,e=void 0===e?"":e,s=(this.loggerSend(loggerEventId.sdk_error_code,{version:"1.0",statusCode:void 0===s?"":s,stopByApp:void 0===i?"":i,errorCode:n,errorMsg:r}),this._getStreamAddressTimedOutRelease(),this._connectSaasLinkTimedOutRelease(),this.gGameState=5,this.cid?"-"+this.cid:""),i=0<=(n=""+n).indexOf(this.cid);this._emit("sceneChanged","stop",{interval:a,reason:t,errorCode:n,stateChangeReason:e,cid:this.cid,message:"".concat(o||r,"\n            ").concat(n||this.cid?" [ "+n+(i?"":n?s:this.cid)+" ]":""),code:n||applyFailReasonCode[t]||""})}},{key:"restartGame",value:function(e){if(!this.gReconnecting){switch(this.gReconnecting=!0,this.isGameStarted=void 0,this.UseResolutionInfo.changing=!1,this.sdkAbility=divideBy2("1110010001"),e){case"visible":this.loggerSend(loggerEventId.visibility_change_visible);break;case"online":this.loggerSend(loggerEventId.client_network_status,"true")}this.loggerSend(loggerEventId.sdk_reconnect,e+",gGameState:"+this.gGameState),this._emit("sceneChanged","reconnectingStatus",{message:this.SaasSDKTips.applyFailTips.CONNECTING}),this._playerRelease(),this.applyGame(this.applyGameWrap,this.applyGameParams,this.flashSurpported)}}},{key:"_sdkRestartGame",value:function(e,t,n){this._saasSocketRelease(),this._connectSaasLinkTimedOutRelease(),this._inputSocketRelease(),this._screenSocketRelease(),this.isChangeResolution=!1,this.sdkRestartCount++,5<this.sdkRestartCount?(this.loggerSend(loggerEventId.restart_game_failed,e),t&&this.loggerSend(t),this.stopGame({reason:applyFailReason.LOAD_GAME_FAILED,errorCode:n||applyFailCode.internal_error,errorMsg:this.SaasSDKTips.applyFailTips.LOAD_GAME_FAILED,tips:this.SaasSDKTips.applyFailTips.LOAD_GAME_FAILED,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)})):this.restartGame(e)}},{key:"firstFrameEvent",value:function(e){this.connectStatus.firstFrame=!0,this.sdkRestartCount=0,this.loggerSend(loggerEventId.video_first_frame_time,e),this.VideoFrameCallback.supportRequestVideoFrameCallback(this.videoId)?this.loggerSend(loggerEventId.video_support_freamcallback,""):this.loggerSend(loggerEventId.video_not_support_freamcallback,""),this.VideoFrameCallbackInfo.isReuqest&&this.VideoFrameCallback.requestVideoFrameCallback(this.videoId);var e={cid:this.cid,cur_rate:this.UseResolutionInfo.UseResolutionId,videoState:"play",videoId:this.videoId},t=document.getElementById(this.videoId);t&&(e.videoState=t.paused?"pause":"play"),this._emit("sceneChanged","vibf",e),this._emit("sceneChanged","play",e),["WEBRTC","X86"].indexOf(this.streamType)<0&&this._emit("sceneChanged","videoStreamInfo",this.videoStreamInfo)}},{key:"_openCaptureMediaDevice",value:function(){this.setDataInfo.open_media_device_capture&&"X86"===this.streamType&&this.player.openMediaDevices&&(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?(this._captureMediaDevice(),navigator.mediaDevices.addEventListener("devicechange",this._captureMediaDeviceHandler)):this.logger.send(loggerEventId.x86_media_devices_response,""))}},{key:"_captureMediaDevice",value:function(){var n=this,e=JSON.parse(this.setDataInfo.open_media_device_capture);this.player.openMediaDevices(e,function(e,t){e?n.logger.send(loggerEventId.x86_media_devices_response,e.message):(e=t.getVideoTracks()[0],t=t.getAudioTracks()[0],e="videoLabel:".concat(e?e.label:"",",audioLabel:").concat(t?t.label:""),n.logger.send(loggerEventId.x86_media_devices_response,e))})}},{key:"_releaseCaptureMediaDevice",value:function(){this.closeMediaDevices(null),navigator.mediaDevices&&navigator.mediaDevices.removeEventListener("devicechange",this._captureMediaDeviceHandler)}},{key:"stopAll",value:function(){this.stopGame({reason:applyFailReason.LOG_OUT,tips:this.SaasSDKTips.applyFailTips.GAME_STOPPED,stopByApp:stopByApp.app,interval:this._getCurrentGameDuration(this.gameStartTime),statusCode:this.connectStatus.statusCode})}},{key:"stopGame",value:function(e,t,n){this.pauseGame("stop"),this._stopGameEvent(e),setCacheGameInfo("cid",""),this.releaseCid(t,n)}},{key:"listen",value:function(e,t){eventEmitter.on(e,t)}},{key:"enterQueue",value:function(){var o=this;this.cid&&(this.loggerSend(loggerEventId.enter_queue),this.loggerSend(loggerEventId.cloud_service_start,"enter_queue"),this.saasRequest.cloudService(this.applyGameParams,this.cid,this.sign,1,0,"",function(e,t,n,r){o.getNetRequestInfo.push(_objectSpread2(_objectSpread2({},o.netRequestData),r)),e?o.loggerSend(loggerEventId.cloud_service_succeed):o.loggerSend(loggerEventId.cloud_service_failed,n.message)}))}},{key:"outQueue",value:function(){this.loggerSend(loggerEventId.out_queue),this.endGame()}},{key:"changeResolution",value:function(e,a){var s=this;if(this.loggerSend(loggerEventId.manual_resolution_changed_start,this.UseResolutionInfo.UseResolutionId+":"+resInfoCurBitrate(this.UseResolutionInfo.UseResolutionId,this.saasConfig.resolutionInfo)+","+e+":"+resInfoCurBitrate(e,this.saasConfig.resolutionInfo)),this.cid){if(!e||""==e||null==e)return a&&a(!1),!1;if(e==this.UseResolutionInfo.UseResolutionId)a&&a(!1);else if(this.isChangeResolution)a&&a(!1);else{if(-1==this.resolutionList.indexOf(+e))return a&&a(!1),!1;this.UseResolutionInfo.resolutionChangeStartTime=Date.now(),this.UseResolutionInfo.preResId=this.UseResolutionInfo.UseResolutionId,this.UseResolutionInfo.UseResolutionId=e,this._emit("sceneChanged","crst",{method:this.UseResolutionInfo.isAutoResolutionChanged?1:0,source:this.UseResolutionInfo.preResId,des:this.UseResolutionInfo.UseResolutionId}),"X86"==this.streamType||"WEBRTC"==this.streamType&&this.setDataInfo.keep_on_flow?this.UseResolutionInfo.changing=!0:this._playerRelease(),this.isChangeResolution=!0,this.isGameStarted=void 0,this.loggerSend(loggerEventId.cloud_service_start,"change_resolution"),this.saasRequest.cloudService(this.applyGameParams,this.cid,this.sign,0,2,e,function(e,t,n,r){s.getNetRequestInfo.push(_objectSpread2(_objectSpread2({},s.netRequestData),r));var o=null,o=s.UseResolutionInfo.isAutoResolutionChanged?loggerEventId.auto_resolution_changed_done:loggerEventId.manual_resolution_changed_done,i=s.UseResolutionInfo.preResId+":"+resInfoCurBitrate(s.UseResolutionInfo.preResId,s.saasConfig.resolutionInfo)+","+s.UseResolutionInfo.UseResolutionId+":"+resInfoCurBitrate(s.UseResolutionInfo.UseResolutionId,s.saasConfig.resolutionInfo)+","+(Date.now()-s.UseResolutionInfo.resolutionChangeStartTime);s.loggerSend(o,i),s._emit("sceneChanged","cred",{result:1,cur_rate:s.UseResolutionInfo.UseResolutionId,method:s.UseResolutionInfo.isAutoResolutionChanged?1:0}),s.UseResolutionInfo.isAutoResolutionChanged=!1,a&&a(e,n,r),0!=n.code?setTimeout(function(){var e={errorCode:n.errorCode||applyFailCode.CHANGE_RESOLUTION_TIMEOUT,errorMsg:n.errorMsg||s.SaasSDKTips.applyFailTips.NETWORK_REQUEST_TIMEOUT};s.stopGame(_objectSpread2(_objectSpread2({},e),{},{reason:applyFailReason.INTERNAL_ERROR,stopByApp:stopByApp.server,interval:s._getCurrentGameDuration(s.gameStartTime)}))},3e3):e?s.loggerSend(loggerEventId.cloud_service_succeed):(s.isChangeResolution=!1,s.loggerSend(loggerEventId.cloud_service_failed,n.message))})}}}},{key:"applyControlReconnect",value:function(){var o=this;this._playerRelease(),this.isGameStarted=void 0,this.sign=sessionStorage.getItem("sign"),this.saasRequest.setSecretKey(sessionStorage.getItem("secretKey")),this.saasRequest.cloudService(this.applyGameParams,this.cid,this.sign,0,1,"",function(e,t,n,r){o.getNetRequestInfo.push(_objectSpread2(_objectSpread2({},o.netRequestData),r)),e?o.loggerSend(loggerEventId.cloud_service_succeed):o.loggerSend(loggerEventId.cloud_service_failed,n.message)})}},{key:"releaseCid",value:function(o,e){var i=this;this.cid&&(this.loggerSend(loggerEventId.release_cid_start),this.saasRequest.releaseCid(this.cid,"string"==typeof o||"number"==typeof o?o:e,function(e,t,n,r){i.getNetRequestInfo.push(_objectSpread2(_objectSpread2({},i.netRequestData),r)),i.cid="",e?(i.loggerSend(loggerEventId.release_cid_succeed),"function"==typeof o&&o(n.data)):(r={errorCode:applyFailCode.RELEASE_CID_TIMEOUT,errorMsg:i.SaasSDKTips.applyFailTips.NETWORK_REQUEST_TIMEOUT},i._httpRequestFailed("202",t,r))}))}},{key:"getGameArchiveStatus",value:function(e){var o=this,i=e.pkgName,a=e.userInfo,t=e.appChannel,s=e.ifCanPlay;this.saasRequest.getGameArchiveStatus(i,a,t,function(e,t,n,r){o.getNetRequestInfo.push(_objectSpread2({packageName:i,uid:a.uId,cid:"",transId:o.clientTransId},r)),e&&0==n.code?s({code:0,ifCanPlay:n.data.ifCanPlay,errorMessage:""}):s({code:1,ifCanPlay:"",errorMessage:"".concat(n.errorMsg,"[").concat(n.code,"]")})})}},{key:"gameArchived",value:function(e){var o=this,i=e.pkgName,a=e.userInfo,t=e.appChannel,s=e.hasArchive;this.saasRequest.hasGameArchived(i,a,t,function(e,t,n,r){o.getNetRequestInfo.push(_objectSpread2({packageName:i,uid:a.uId,cid:"",transId:o.clientTransId},r)),e&&0==n.code?s({code:0,hasArchive:n.data.hasArchive,errorMessage:""}):s({code:1,hasArchive:"",errorMessage:"".concat(n.errorMsg,"[").concat(n.code,"]")})})}},{key:"updateGameUID",value:function(o,i){var a=this;return this.cid?o&&o.userInfo&&o.userInfo.uId&&o.userInfo.uToken?(o.sdkAbility=[divideBy2("1110010000")],o.cid=this.cid,void this.saasRequest.updateUID(this.applyGameParams,o,function(e,t,n,r){e&&0===n.code&&(o.playingtime=o.playingTime/1e3,e=o.userInfo,a.applyGameParams=_objectSpread2(_objectSpread2(_objectSpread2({},a.applyGameParams),o),{},{userInfo:e}),a.sign=n.data.sign,a.saasRequest.setUserInfo(o.userInfo),a.logger.setGameInfo(a.applyGameParams.extraId,o.userInfo.uId,a.applyGameParams.pkgName,a.applyGameParams.appChannel)),i({msg:n.errorMsg||n.msg,code:n.errorCode||n.code})})):(i({code:-100,msg:this.SaasSDKTips.SaasSDK.PARAMS_ERROR}),!1):(i({code:-100,msg:this.SaasSDKTips.SaasSDK.gameNotStart}),!1)}},{key:"checkPlayingGame",value:function(e){var o=this,i=e.userInfo,a=e.playingGame;this.saasRequest.checkPlayingGame(i,function(e,t,n,r){o.getNetRequestInfo.push(_objectSpread2({packageName:"",uid:i.uId,cid:"",transId:o.clientTransId},r)),e&&0==n.code?a({code:0,playingGame:n.data.channelInfoList,errorMessage:""}):a({code:1,playingGame:"",errorMessage:"".concat(n.errorMsg,"[").concat(n.code,"]")})})}},{key:"releasePlayingGame",value:function(e,o){e&&e.userInfo&&e.userInfo.uId&&e.userInfo.uToken&&e.pkgName&&e.cid&&e.cToken&&hasOwnProperty(e,"playingtime")?this.saasRequest.releasePlayingGame(e,function(e,t,n,r){e&&0==n.code?o({code:0,msg:n.msg}):o({code:1,msg:n.msg})}):o&&o({code:-100,msg:this.SaasSDKTips.SaasSDK.PARAMS_ERROR})}},{key:"getCid",value:function(){return{cid:this.cid||""}}},{key:"getCloudPlayStatusCode",value:function(){if(this.connectStatus.statusCode="",this.connectStatus.streamAddress){if(this.connectStatus.video&&!this.connectStatus.firstFrame)return this.connectStatus.statusCode=applyFailCode.CONNECT_VIDEO_NOT_MSG;if(!this.connectStatus.video&&this.connectStatus.audio)return this.connectStatus.statusCode=applyFailCode.CONNECT_ONLY_AUDIO_OK;if(!this.connectStatus.video&&!this.connectStatus.audio&&this.connectStatus.inputSocket)return this.connectStatus.statusCode=applyFailCode.CONNECT_ONLY_INPUT_OK;if(!this.connectStatus.video&&!this.connectStatus.audio&&!this.connectStatus.inputSocket)return this.connectStatus.statusCode=applyFailCode.CONNECT_ALL_FAILED}else{if(!this.connectStatus.cid)return this.connectStatus.statusCode=applyFailCode.NO_CID;if(!this.connectStatus.saasSocket)return this.connectStatus.statusCode=applyFailCode.CONNECT_WS_SAAS_FAILED;if(!this.connectStatus.saasSocketPingPong)return this.connectStatus.statusCode=applyFailCode.WS_SAAS_PING_PONG_ERROR;if(this.connectStatus.saasSocketPingPong)return this.connectStatus.statusCode=applyFailCode.WS_SAAS_PING_PONG_SECCESS}return this.connectStatus.statusCode}},{key:"sendMessage",value:function(e){return!(!this.saasSocket||"string"!=typeof e||!this.cid)&&("X86"===this.streamType?(this.player.sendDataToGame&&this.player.sendDataToGame(Number(this.cid),this.applyGameParams.userInfo.uId,e),!0):this.saasSocket.send(JSON.stringify({uid:this.applyGameParams.userInfo.uId,to:"m_".concat(this.cid),from:this.cid,mid:"W".concat((new Date).getTime()),type:1,ack:0,payload:e})))}},{key:"reportFinishInfo",value:function(e){this.loggerSend(loggerEventId.app_report_finish_info,e)}},{key:"getNetInfo",value:function(){return this.getNetRequestInfo}},{key:"enableAudio",value:function(e){"RTMP"==this.streamType&&(e=!e),this.player&&this.player.enableAudio(e)}},{key:"endGame",value:function(e,t){this.stopGame({reason:applyFailReason.NORMAL,tips:this.SaasSDKTips.applyFailTips.GAME_STOPPED,stopByApp:stopByApp.app,interval:this._getCurrentGameDuration(this.gameStartTime),statusCode:this.connectStatus.statusCode},e,t)}},{key:"bringUpApp",value:function(){this.inputSocket.send('udcmd:"call=startapp&pkgname='.concat(this.applyGameParams.pkgName,'"'))}},{key:"getStreamingDomain",value:function(){var e;return this.currentStreamAddress&&1<(e=this.currentStreamAddress.split(":")).length&&(this.currentStreamAddress=e[1],1<this.currentStreamAddress.split("//").length&&(this.currentStreamAddress=this.currentStreamAddress.split("//")[1]),this.currentStreamAddress=this.currentStreamAddress.split(":")[0],this.currentStreamAddress=this.currentStreamAddress.split("?")[0],this.currentStreamAddress=this.currentStreamAddress.split("/")[0]),this.currentStreamAddress}},{key:"isSupportLiving",value:function(){if(5!=this.gGameState)return this.supportLiving}},{key:"startLiving",value:function(e,t){return"unknown"!=this.supportLiving&&(5!=this.gGameState?!0!==this.supportLiving?this.SaasSDKTips.SaasSDK.supportLiving:(this.loggerSend(loggerEventId.start_liveing,encodeURIComponent(e+","+t)),this.saasRequest.toStartLiving({roomId:e,streamerUrl:t,cid:this.cid},function(){}),!0):void 0)}},{key:"endLiving",value:function(e){return"unknown"!=this.supportLiving&&(5!=this.gGameState?!0!==this.supportLiving?this.SaasSDKTips.SaasSDK.supportLiving:(this.loggerSend(loggerEventId.end_liveing,e),this.saasRequest.toEndLiving({roomId:e,cid:this.cid},function(e,t,n){}),!0):void 0)}},{key:"getPinCode",value:function(){var o=this;return"unknown"!=this.supportLiving&&(5!=this.gGameState?(this.loggerSend(loggerEventId.get_pin_code),this.saasRequest.toGetPinCode({cid:this.cid},function(e,t,n,r){e&&0==n.code&&n.data||(e={result:0,msg:n.msg},o.sendLogger(loggerEventId.get_pin_code_error),o._emit("sceneChanged","applyPinCode",e))}),!0):void 0)}},{key:"toApplyControlPower",value:function(){var o=this;this.checkStreamingTypes(this.applyGameParams.streamType);var e=getCacheGameInfo().cid,e={masterId:this.applyGameParams.cid,followCid:e||"",pin:this.applyGameParams.pinCode,ext:this.applyGameParams.userInfo.uId,accessKeyId:this.accessKeyId,streamingTypes:this.applyGameParams.streamingTypes,joinMode:this.applyGameParams.joinMode||0};this.loggerSend(loggerEventId.apply_control_power),this.saasRequest.toApplyControlPower(e,function(e,t,n,r){e&&0==n.code&&n.data?(o._applySaasConfig(n.data.config),"PooledWithoutRestart"!=n.data.apkType&&(n.data.apkType="NotPooled"),n.data.gsmAddressInfo&&(n.data.apkType="PooledWithoutRestart"),o._checkStreamInfo(n,t,"221")):(e={errorCode:n.code,errorMsg:n.msg},o._httpRequestFailed("221",t,e),o.stopGame(_objectSpread2(_objectSpread2({},e),{},{reason:applyFailReason.REQUEST_ERROR,stopByApp:stopByApp.server,interval:o._getCurrentGameDuration(o.gameStartTime)})))})}},{key:"startHangUp",value:function(e,t){var r=this;if(5==this.gGameState)return!1;var n={cid:this.cid,hangupType:1,hangupTimeSeconds:e.hangUpTime};this.bigFileInfo.firstHangUpInfo||(this.bigFileInfo.firstHangUpInfo=e),this.bigFileInfo.startCallback=t||emptyFunction,this.loggerSend(loggerEventId.start_hang_up,JSON.stringify(e)),this.saasRequest.startHuangUp(n,function(e,t,n){e&&0==n.code||r.bigFileInfo.startCallback({state:0,message:n.msg||""})})}},{key:"stopHangUp",value:function(e){var r=this;if(5==this.gGameState)return!1;var t={cid:this.cid};this.bigFileInfo.stopCallback=e||emptyFunction,this.loggerSend(loggerEventId.end_hang_up),this.saasRequest.stopHuangUp(t,function(e,t,n){e&&0==n.code&&!n.data.code||r.bigFileInfo.stopCallback({state:0,message:n.msg||""})})}},{key:"_getHangUpTime",value:function(){var i=this,e={cid:this.cid};this.gRetryTimer&&clearTimeout(this.gRetryTimer),this.loggerSend(loggerEventId.get_hang_up_time),this.saasRequest.getHangUpTime(e,function(e,t,n){if(n.errorCode)for(var r=0;r<i.setDataInfo.retryErrorcodeInfo.length;++r){var o=i.setDataInfo.retryErrorcodeInfo[r];if(n.errorCode==o.errorCode&&i.gCurrentRequestCount<o.retryMaxTimes)return i.gCurrentRequestCount++,clearTimeout(i.gRetryTimer),void(i.gRetryTimer=setTimeout(function(){i._getHangUpTime()},1e3*o.retryDelayTime))}i.gCurrentRequestCount=1,!e||0!=n.code||n.data.hangupStatusResponse.code?i._startHangUpReult({message:n.msg,flag:!1,search:!0}):i._startHangUpReult({message:n.msg,flag:!0,search:!0})})}},{key:"getBigFileList",value:function(e){if(5==this.gGameState)return!1;this.bigFileInfo.getFileListCallback=e||emptyFunction,this.loggerSend(loggerEventId.get_big_file_list),this.screenSocket.send(JSON.stringify({type:"download_file",event:"download_file_list"}))}},{key:"_startHangUpReult",value:function(e){var t={};e.flag?t=e.search?{state:1,message:""}:(this.bigFileInfo.firstHangUpInfo.Cutoff&&!this.bigFileInfo.isStartHangUp&&(this._playerRelease(),this.bigFileInfo.isStartHangUp=!0),{state:1,hangupTimeSeconds:e.hangupTimeSeconds}):(t={state:0,message:e.message||""},this.bigFileInfo.firstHangUpInfo=null),this.bigFileInfo.startCallback(t)}},{key:"_stopHangUpReult",value:function(e){var t={state:1,message:e.message||"",gameTimerOver:!1};1==e.code&&(t.gameTimerOver=!0),e.data.flag||(t.state=0,t.message=e.message||""),this.loggerSend(loggerEventId.hang_up_time_end,JSON.stringify(e)),this.bigFileInfo.stopCallback(t),this.bigFileInfo.isStartHangUp&&this._sdkRestartGame("stopHangUp"),this.bigFileInfo.isStartHangUp=!1,this.bigFileInfo.firstHangUpInfo=null}},{key:"_hangUpEndReult",value:function(e){this.loggerSend(loggerEventId.hang_up_time_end,JSON.stringify(e));var t={state:2,message:"",gameTimerOver:!1};1==e.code&&(t.gameTimerOver=!0),this.bigFileInfo.isStartHangUp&&this._sdkRestartGame("hangUpTimeEnd"),this.bigFileInfo.isStartHangUp=!1,this.bigFileInfo.firstHangUpInfo=null,this.bigFileInfo.startCallback(t)}},{key:"_applySaasConfig",value:function(e){var t=e.interactiveTalkInfo,n=e.setDataInfo;this.talkInfo=indexBy(t,"k","v"),this.setDataInfo=indexBy(n,"k","v"),this.setDataInfo.retryPingPongPeriod&&(this.setDataInfo.retryPingPongPeriod=this.setDataInfo.retryPingPongPeriod.split(",")),this.setDataInfo.customRetryConfig&&(this.setDataInfo.customRetryConfig=this.setDataInfo.customRetryConfig.split(","),this.saasRequest.setRetryCount(this.setDataInfo.customRetryConfig)),this.setDataInfo.connectSaasLinkTimeoutList?this.setDataInfo.connectSaasLinkTimeoutList=this.setDataInfo.connectSaasLinkTimeoutList.split(","):this.setDataInfo.connectSaasLinkTimeoutList=[10,15,15],this.setDataInfo.retryErrorcodeInfo?this.setDataInfo.retryErrorcodeInfo=JSON.parse(this.setDataInfo.retryErrorcodeInfo):this.setDataInfo.retryErrorcodeInfo=[],"true"==this.setDataInfo.keep_on_flow?this.setDataInfo.keep_on_flow=!0:this.setDataInfo.keep_on_flow=!1,this.saasConfig=Object.assign({},e,this.talkInfo,this.setDataInfo,indexBy(e.switchInfo,"name","enable"))}},{key:"uploadFile",value:function(n){var r=this;this.setDataInfo.cloud_rom_ack_timeout&&(this.upDataInfo.uploadDelay=Number(this.setDataInfo.cloud_rom_ack_timeout)),"function"==typeof n.onError&&(this.upDataInfo.uploadOnError=function(e,t){n.onError(e,t),r.upDataInfo.uploadStatus=0,r.upDataInfo.retryUpload=5,r.loggerSend(loggerEventId.upload_image_error),r.upDataInfo.uploadRetryTimer&&clearTimeout(r.upDataInfo.uploadRetryTimer)}),"function"==typeof n.onSuccess&&(this.upDataInfo.uploadOnSuccess=n.onSuccess),0!==this.upDataInfo.uploadStatus?(this._emit("sceneChanged","upload",this.SaasSDKTips.uploadErrorMessage[1002]),n.onError(n.opType,this.SaasSDKTips.uploadErrorMessage[1002])):(this.upDataInfo.uploadStatus=1,hasOwnProperty(n,"file")?hasOwnProperty(n,"opType")?-1===this.upDataInfo.uploadOpTypeList.indexOf(n.opType)?(this._emit("sceneChanged","upload",this.SaasSDKTips.uploadErrorMessage[1003]),this.upDataInfo.uploadOnError(n.opType,this.SaasSDKTips.uploadErrorMessage[1003])):(this.upDataInfo.uploadOpType=n.opType,5242880<n.file.size||n.file.size<1024?(this._emit("sceneChanged","upload",this.SaasSDKTips.uploadErrorMessage[1006]),this.upDataInfo.uploadOnError(n.opType,this.SaasSDKTips.uploadErrorMessage[1006])):(this.upDataInfo.uploadFile=n.file,!this.upDataSocket||this.upDataSocket.ws&&1!=this.upDataSocket.ws.readyState?(this.uploadQueue=!0,n.onError(n.opType,this.SaasSDKTips.uploadErrorMessage[10009])):this.waitUploadFile(this.upDataInfo))):(this._emit("sceneChanged","upload",this.SaasSDKTips.uploadErrorMessage[1001]),this.upDataInfo.uploadOnError(n.opType,this.SaasSDKTips.uploadErrorMessage[1001])):(this._emit("sceneChanged","upload",this.SaasSDKTips.uploadErrorMessage[1e3]),this.upDataInfo.uploadOnError(n.opType,this.SaasSDKTips.uploadErrorMessage[1e3])))}},{key:"waitUploadFile",value:function(n){var r=this;try{var e=new FileReader;e.onloadend=function(e){r.upDataInfo.uploadImgBuffer=e.target.result;var t,e=isImage(new Uint8Array(r.upDataInfo.uploadImgBuffer.slice(0,11)));-1===r.upDataInfo.uploadMimeTypeList.indexOf(e)?(r._emit("sceneChanged","upload",r.SaasSDKTips.uploadErrorMessage[1004]),r.upDataInfo.uploadOnError(n.uploadOpType,r.SaasSDKTips.uploadErrorMessage[1004])):(t={bid:r.accessKeyId,cid:r.cid,type:n.uploadOpType,code:"start",fileName:n.uploadFile.name,fileSize:r.upDataInfo.uploadImgBuffer.byteLength,mimeType:e,md5sum:_cryptoJs_3_3_0_cryptoJs.MD5(_cryptoJs_3_3_0_cryptoJs.lib.WordArray.create(r.upDataInfo.uploadImgBuffer)).toString()},r.loggerSend(loggerEventId.upload_image_start),r.upDataInfo.uploadStartTime=(new Date).valueOf(),r.upDataSocket&&r.upDataSocket.send(JSON.stringify(t))?(r.upDataInfo.uploadStatus=2,r.upDataInfo.uploadRetryTimer=setInterval(function(){if(2!==r.upDataInfo.uploadStatus)clearTimeout(r.upDataInfo.uploadRetryTimer);else if(r.upDataInfo.retryUpload<=0)r._emit("sceneChanged","upload",r.SaasSDKTips.uploadErrorMessage[1007]),r.upDataInfo.uploadOnError(n.uploadOpType,r.SaasSDKTips.uploadErrorMessage[1007]),clearTimeout(r.upDataInfo.uploadRetryTimer);else if(2===r.upDataInfo.uploadStatus){if(!r.upDataSocket.send(JSON.stringify(t)))return n.uploadOnError(n.uploadOpType,r.SaasSDKTips.uploadErrorMessage[10009]),!1;r.upDataInfo.retryUpload=r.upDataInfo.retryUpload-1}},r.upDataInfo.uploadDelay)):n.uploadOnError(n.uploadOpType,r.SaasSDKTips.uploadErrorMessage[10009]))},e.readAsArrayBuffer(n.uploadFile)}catch(e){this.upDataInfo.uploadStatus=0}}},{key:"_getCurrentGameDuration",value:function(e){e=e||this.gameStartTime;return e?((new Date).getTime()-e)/1e3:0}},{key:"_setClientTransId",value:function(){var e=getCacheGameInfo().transUid,t="",t=e?"".concat(e):(setCacheGameInfo("transUid",e=md5Encrypt(createUID((new Date).getTime())).toString()),"".concat(e));this.logger.setClientTransId(t),this.saasRequest.setClientTransId(t)}},{key:"resetInputTimer",value:function(){return 3==this.gGameState&&("X86"===this.streamType?this.player.resetInputTimer():this.inputSocket.send("resetInputTimer"),!0)}},{key:"sendWSMessage",value:function(t){var n=this;if(3==this.gGameState){if(!hasOwnProperty(t,"type")||!hasOwnProperty(t,"data"))return t&&t.callback&&t.callback(t.mid,!1,this.SaasSDKTips.SaasSDK.dataOrTypeMissed),this.loggerSend(loggerEventId.wsmessage_send_failed,"mid: ".concat(t.mid," type or data missed")),!1;if("function"==typeof t.callback?this.sendWSMessageCallback[t.type]=t.callback:this.sendWSMessageCallback[t.type]=emptyFunction,!t.mid)return this.sendWSMessageCallback[t.type]("",!1,this.SaasSDKTips.SaasSDK.midMissed),this.loggerSend(loggerEventId.wsmessage_send_failed,"mid missed"),!1;if(!this.screenSocket)return this.sendWSMessageCallback[t.type](t.mid,!1,this.SaasSDKTips.SaasSDK.socketNotConnected),this.loggerSend(loggerEventId.wsmessage_send_failed,"mid: ".concat(t.mid," ws not connected")),!1;var r=t.type;if(["clipboard","gps","intent"].indexOf(r)<0)return this.sendWSMessageCallback[t.type](t.mid,!1,this.SaasSDKTips.SaasSDK.invalidType),this.loggerSend(loggerEventId.wsmessage_send_failed,"mid: ".concat(t.mid," invalid message type: ").concat(r)),!1;if("clipboard"===r){this.loggerSend(loggerEventId.wsmessage_send_started,base64("mid: ".concat(t.mid)));var e=t.data;if(!(e instanceof Array))return this.sendWSMessageCallback[t.type](t.mid,!1,this.SaasSDKTips.SaasSDK.invalidData),this.loggerSend(loggerEventId.wsmessage_send_failed,base64("mid: ".concat(t.mid," type: ").concat(r," invalid message data"))),!1;for(var o=0;o<e.length;o++){var i=e[o];if(!hasOwnProperty(i,"itemType")||!hasOwnProperty(i,"itemData"))return this.sendWSMessageCallback[t.type](t.mid,!1,this.SaasSDKTips.SaasSDK.invalidData),this.loggerSend(loggerEventId.wsmessage_send_failed,base64("mid: ".concat(t.mid," type: ").concat(r," invalid message item"))),!1;if(1024<i.itemData.length)return this.sendWSMessageCallback[t.type](t.mid,!1,this.SaasSDKTips.SaasSDK.invalidData),this.loggerSend(loggerEventId.wsmessage_send_failed,base64("mid: ".concat(t.mid," type: ").concat(r," item length exceeded"))),!1}var a={type:r,cid:this.cid,bid:this.accessKeyId,mid:t.mid,data:{code:"paste",dataType:0,data:e}};return this.wsMessageList[a.mid]=Date.now(),this.wsMessageTimer||(this.wsMessageTimer=setInterval(function(){for(var e in n.wsMessageList)1e4<Date.now()-n.wsMessageList[e]&&(n.sendWSMessageCallback[t.type](e,!1,n.SaasSDKTips.SaasSDK.sendTimeout),delete n.wsMessageList[e],n.loggerSend(loggerEventId.wsmessage_send_failed,"mid: ".concat(t.mid," type: ").concat(r," timeout")));"{}"==JSON.stringify(n.wsMessageList)&&(clearInterval(n.wsMessageTimer),n.wsMessageTimer=null)},1e3)),this.screenSocket.send(JSON.stringify(a))}if("gps"===r)return a=t.data,/^\d+\.\d+$/.test(a.longitude)&&/^\d+\.\d+$/.test(a.latitude)?(a={type:r,cid:this.cid,bid:this.accessKeyId,mid:t.mid,data:a},this.screenSocket.send(JSON.stringify(a))):(this.sendWSMessageCallback[t.type](t.mid,!1,this.SaasSDKTips.SaasSDK.invalidData),this.loggerSend(loggerEventId.wsmessage_send_failed,"mid: ".concat(t.mid," type: ").concat(r," invalid message data")),!1);if("intent"===r)return this.loggerSend(loggerEventId.wsmessage_send_started,"mid: ".concat(t.mid)),a=t.data,a={type:r,cid:this.cid,bid:this.accessKeyId,mid:t.mid,data:a},this.wsMessageList[a.mid]=Date.now(),this.wsMessageTimer||(this.wsMessageTimer=setInterval(function(){for(var e in n.wsMessageList)1e4<Date.now()-n.wsMessageList[e]&&(n.sendWSMessageCallback[t.type](e,!1,n.SaasSDKTips.SaasSDK.sendTimeout),delete n.wsMessageList[e],n.loggerSend(loggerEventId.wsmessage_send_failed,"mid: ".concat(t.mid," type: ").concat(r," timeout")));"{}"==JSON.stringify(n.wsMessageList)&&(clearInterval(n.wsMessageTimer),n.wsMessageTimer=null)},1e3)),this.screenSocket.send(JSON.stringify(a))}return!1}},{key:"sendLogger",value:function(e,t){this.logger&&this.loggerSend(e,t)}},{key:"sendMessageToRom",value:function(e){"X86"===this.streamType&&this.player.sendInputDataToInstance?this.player.sendInputDataToInstance(e):"string"==typeof e&&this.inputSocket&&this.inputSocket.send(e)}},{key:"requestVideoFrame",value:function(e){this.VideoFrameCallbackInfo.callback=e||emptyFunction,this.VideoFrameCallbackInfo.isReuqest=!0,this.VideoFrameCallback.requestVideoFrameCallback(this.videoId)}},{key:"removeRequestVideoFrame",value:function(e){e||(this.VideoFrameCallbackInfo.isReuqest=!1),this.VideoFrameCallback.removeRequestVideoFrameCallback()}},{key:"getCapture",value:function(e){return e.zoom<=1&&.01<=e.zoom||(e.zoom=.3),this.armCapCallback=e.callback||emptyFunction,3==this.gGameState&&(this.screenSocket.send("cap:"+e.zoom),!0)}},{key:"controlPowerDistribute",value:function(e,r){var t,n,o=this,i={code:1,controlInfos:[],errorMsg:""};"object"!==typeCheck(e)?(i.errorMsg=this.SaasSDKTips.SaasSDK.paramTypeError,r&&r(i)):(t=e.cid,n=e.controlInfos,"string"!==typeCheck(t)&&"number"!==typeCheck(t)?(i.errorMsg=this.SaasSDKTips.SaasSDK.cidTypeError,r&&r(i)):"array"!==typeCheck(n)?(i.errorMsg=this.SaasSDKTips.SaasSDK.infoTypeError,r&&r(i)):(this.loggerSend(loggerEventId.x86_control_power_distribute_start),this.saasRequest.controlPowerDistribute(e,function(e,t,n){e?(0===n.code?o.loggerSend(loggerEventId.x86_control_power_distribute_succeed,JSON.stringify(n.data.controlInfos)):(i.errorMsg=n.msg||o.SaasSDKTips.SaasSDK.assignmentFailed,o.loggerSend(loggerEventId.x86_control_power_distribute_failed,JSON.stringify(n))),i.code=n.code,i.controlInfos=n.data&&n.data.controlInfos||[]):(i.errorMsg=o.SaasSDKTips.SaasSDK.assignmentFailed,o.loggerSend(loggerEventId.x86_control_power_distribute_failed,JSON.stringify(n))),r&&r(i)})))}},{key:"controlPowerQuery",value:function(e,r){var o=this,i={code:1,controlInfos:[],errorMsg:""};"string"!==typeCheck(e)&&"number"!==typeCheck(e)?(i.errorMsg=this.SaasSDKTips.SaasSDK.cidTypeError,r&&r(i)):(this.loggerSend(loggerEventId.x86_control_power_query_start),this.saasRequest.controlPowerQuery(e,function(e,t,n){e?(0===n.code?o.loggerSend(loggerEventId.x86_control_power_query_succeed,JSON.stringify(n.data.controlInfos)):(i.errorMsg=n.msg||o.SaasSDKTips.SaasSDK.queryFailed,o.loggerSend(loggerEventId.x86_control_power_query_failed,JSON.stringify(n))),i.code=n.code,i.controlInfos=n.data&&n.data.controlInfos||[]):(i.errorMsg=o.SaasSDKTips.SaasSDK.queryFailed,o.loggerSend(loggerEventId.x86_control_power_query_failed,JSON.stringify(n))),r&&r(i)}))}},{key:"captureGameImage",value:function(e,r){var o=this,i={code:1,errorMsg:""};this.loggerSend(loggerEventId.x86_capture_game_image_start),this.saasRequest.captureGameImage(e,function(e,t,n){e?(0===n.code?o.loggerSend(loggerEventId.x86_capture_game_image_succeed,JSON.stringify(n.data.controlInfos)):(i.errorMsg=n.msg||o.SaasSDKTips.SaasSDK.screenshotFailed,o.loggerSend(loggerEventId.x86_capture_game_image_failed,JSON.stringify(n))),i.code=n.code):(i.errorMsg=o.SaasSDKTips.SaasSDK.screenshotFailed,o.loggerSend(loggerEventId.x86_capture_game_image_failed,JSON.stringify(n))),r&&r(i)})}},{key:"sendInputSwitch",value:function(){this.player&&this.player.sendInputSwitch()}},{key:"enableVibrate",value:function(e){this.player&&this.player.enableVibrate&&this.player.enableVibrate(e)}},{key:"setMouseMode",value:function(e){this.player&&this.player.setMouseMode&&this.player.setMouseMode(e)}},{key:"getMouseMode",value:function(){if(this.player&&this.player.getMouseMode)return this.player.getMouseMode()}},{key:"setMouseMoveRatio",value:function(e){this.player&&0<parseFloat(e)&&this.player.setMouseMoveRatio(parseFloat(e))}},{key:"getMouseMoveRatio",value:function(){if(this.player&&this.player.getMouseMoveRatio)return this.player.getMouseMoveRatio()}},{key:"setVirtualKeys",value:function(e){this.player&&this.player.setVirtualKeys&&this.player.setVirtualKeys(e)}},{key:"getVirtualKeys",value:function(){if(this.player&&this.player.getVirtualKeys)return this.player.getVirtualKeys()}},{key:"setFullKeyboardState",value:function(e){this.player&&this.player.setFullKeyboardState&&this.player.setFullKeyboardState(e)}},{key:"getFullKeyboardState",value:function(){if(this.player&&this.player.getFullKeyboardState)return this.player.getFullKeyboardState()}},{key:"resizeAllKeysLayout",value:function(){this.player&&this.player.resizeAllKeysLayout&&this.player.resizeAllKeysLayout()}},{key:"openMediaDevices",value:function(e,t){this.player&&this.player.openMediaDevices&&this.player.openMediaDevices(e,t)}},{key:"closeMediaDevices",value:function(e){this.player&&this.player.closeMediaDevices&&this.player.closeMediaDevices(e)}},{key:"mediaDevicesResponseNotify",value:function(e,t){this.player&&this.player.mediaDevicesResponseNotify&&this.player.mediaDevicesResponseNotify(e,t)}},{key:"cameraParamsSet",value:function(e){this.player&&this.player.cameraParamsSet&&this.player.cameraParamsSet(e)}},{key:"sendSensorData",value:function(e){return"object"===typeCheck(e)&&(e={bid:this.accessKeyId,cid:this.cid,data:e,type:"sensor"},this.screenSocket.send(JSON.stringify(e)))}},{key:"startPlayer",value:function(){if(5==this.gGameState)return!1;if(this.applyGameParams.onlyApply)this.applyGameParams.onlyApply=!1,this.sendLogger(loggerEventId.app_start_palyer);else{if(!this.pausePlayerState)return!1;this.pausePlayerState=!1}return this.startGameParams?(this._startGame(this.startGameParams),this.startGameParams=null):this._sdkRestartGame("startPalyer"),!0}},{key:"pausePlayer",value:function(){return 3==this.gGameState&&(this.pausePlayerState=!0,this.isGameStarted=void 0,this.pauseGame("pause"),this._emit("sceneChanged","pauseGame"),!0)}},{key:"removeCacheCid",value:function(){setCacheGameInfo("cid","")}},{key:"_httpRequestFailed",value:function(e,t,n,r){n={errorCode:n.errorCode,errorMsg:n.errorMsg,httpStatusCode:t.statusCode,httpMsg:t.message,timeoutMS:t.timeout,retryRequestCount:t.retryRequestCount};r&&isObject$2(r)&&(n=_objectSpread2(_objectSpread2({},n),r));this.loggerSend(loggerEventId[{104:"get_did_failed",108:"get_config_failed",211:"get_stream_info_failed",202:"release_cid_failed",201:"cloud_service_start",112:"get_game_archive_status",113:"game_archived",217:"check_playing_game",221:"check_playing_game"}[e]],n)}},{key:"getMouseCoordinate",value:function(){if(this.player&&this.player.getCurrentMouseCoordinate)return this.player.getCurrentMouseCoordinate()}}]),t}();function loadPlayer(e,t,n){var r=document.createElement("script"),o=document.getElementsByTagName("head");o||t(!1),r.id=n,r.src=e,r.onload=function(){t(!0)},r.onerror=function(){t(!1)},o[0].appendChild(r)}function removePlayer(e){var t=document.head,e=document.getElementById(e);t&&e&&t.removeChild(e)}var x86player=createCommonjsModule(function(module,exports){!function(e){module.exports=e()}((self,function(){function __webpack_require__(e){var t=__webpack_module_cache__[e];return void 0!==t||(t=__webpack_module_cache__[e]={exports:{}},__webpack_modules__[e].call(t.exports,t,t.exports,__webpack_require__)),t.exports}var _Mathsqrt=Math.sqrt,_Mathabs=Math.abs,_Mathsin=Math.sin,_Mathmin=Math.min,_Mathmax=Math.max,_Mathpow=Math.pow,_Mathround=Math.round,_Mathfloor=Math.floor,_StringfromCharCode=String.fromCharCode,_Mathceil=Math.ceil,__webpack_modules__={1174:function(e){e.exports=function(e,t){for(var n=Array(arguments.length-1),i=0,r=2,a=!0;r<arguments.length;)n[i++]=arguments[r++];return new Promise(function(r,o){n[i]=function(e){if(a)if(a=!1,e)o(e);else{for(var t=Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];r.apply(null,t)}};try{e.apply(t||null,n)}catch(e){a&&(a=!1,o(e))}})}},2840:function(e,t){t.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;1<--t%4&&"="===e.charAt(t);)++n;return _Mathceil(3*e.length)/4-n};for(var l=Array(64),c=Array(123),n=0;n<64;)c[l[n]=n<26?n+65:n<52?n+71:n<62?n-4:43|n-59]=n++;t.encode=function(e,t,n){for(var r,o,i=null,a=[],s=0,c=0;t<n;)o=e[t++],0==c?(a[s++]=l[o>>2],r=(3&o)<<4,c=1):1==c?(a[s++]=l[r|o>>4],r=(15&o)<<2,c=2):2==c&&(a[s++]=l[r|o>>6],a[s++]=l[63&o],c=0),8191<s&&((i=i||[]).push(_StringfromCharCode.apply(String,a)),s=0);return c&&(a[s++]=l[r],a[s++]=61,1==c)&&(a[s++]=61),i?(s&&i.push(_StringfromCharCode.apply(String,a.slice(0,s))),i.join("")):_StringfromCharCode.apply(String,a.slice(0,s))};var d="invalid encoding";t.decode=function(e,t,n){for(var r,o,i=n,a=0,s=0;s<e.length&&!(61===(o=e.charCodeAt(s++))&&1<a);){if(void 0===(o=c[o]))throw Error(d);0==a?(r=o,a=1):1==a?(t[n++]=r<<2|(48&o)>>4,r=o,a=2):2==a?(t[n++]=(15&r)<<4|(60&o)>>2,r=o,a=3):3==a&&(t[n++]=(3&r)<<6|o,a=0)}if(1==a)throw Error(d);return n-i},t.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},4579:function(e){function t(t,n){function c(e){if("string"!=typeof e){var t="return "+l();if(e){for(var n=Object.keys(e),r=Array(n.length+1),o=Array(n.length),i=0;i<n.length;)r[i]=n[i],o[i]=e[n[i++]];return r[i]=t,Function.apply(null,r).apply(null,o)}return Function(t)()}for(var a=Array(arguments.length-1),s=0;s<a.length;)a[s]=arguments[++s];if(s=0,e=e.replace(/%([%dfijs])/g,function(e,t){var n=a[s++];return"d"===t||"f"===t?+n+"":"i"===t?_Mathfloor(n)+"":"j"===t?JSON.stringify(n):"s"===t?n+"":"%"}),s!==a.length)throw Error("parameter count mismatch");return d.push(e),c}function l(e){return"function "+(e||n||"")+"("+(t&&t.join(",")||"")+"){\n  "+d.join("\n  ")+"\n}"}"string"==typeof t&&(n=t,t=void 0);var d=[];return c.toString=l,c}(e.exports=t).verbose=!1},5306:function(e){function t(){this._listeners={}}(e.exports=t).prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this}},5383:function(e,t,n){function i(n,r,o){return"function"==typeof r?(o=r,r={}):r||(r={}),o?!r.xhr&&s&&s.readFile?s.readFile(n,function(e,t){return e&&"undefined"!=typeof XMLHttpRequest?i.xhr(n,r,o):e?o(e):o(null,r.binary?t:t.toString("utf8"))}):i.xhr(n,r,o):a(i,this,n,r)}e.exports=i;var a=n(1174),s=n(908)("fs");i.xhr=function(e,n,r){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState){if(0!==o.status&&200!==o.status)return r(Error("status "+o.status));if(n.binary){if(!(e=o.response))for(var e=[],t=0;t<o.responseText.length;++t)e.push(255&o.responseText.charCodeAt(t));return r(null,"undefined"==typeof Uint8Array?e:new Uint8Array(e))}return r(null,o.responseText)}},n.binary&&("overrideMimeType"in o&&o.overrideMimeType("text/plain; charset=x-user-defined"),o.responseType="arraybuffer"),o.open("GET",e),o.send()}},6110:function(e){function t(e){var r,o,i,a,t,l=Math.LN2,d=Math.log;return"undefined"==typeof Float32Array?(e.writeFloatLE=_.bind(null,v),e.writeFloatBE=_.bind(null,S),e.readFloatLE=g.bind(null,b),e.readFloatBE=g.bind(null,w)):(i=new Float32Array([-0]),a=new Uint8Array(i.buffer),t=128===a[3],e.writeFloatLE=t?f:m,e.writeFloatBE=t?m:f,e.readFloatLE=t?A:y,e.readFloatBE=t?y:A),"undefined"==typeof Float64Array?(e.writeDoubleLE=p.bind(null,v,0,4),e.writeDoubleBE=p.bind(null,S,4,0),e.readDoubleLE=h.bind(null,b,0,4),e.readDoubleBE=h.bind(null,w,4,0)):(r=new Float64Array([-0]),o=new Uint8Array(r.buffer),t=128===o[7],e.writeDoubleLE=t?n:s,e.writeDoubleBE=t?s:n,e.readDoubleLE=t?c:u,e.readDoubleBE=t?u:c),e;function n(e,t,n){r[0]=e,t[n]=o[0],t[n+1]=o[1],t[n+2]=o[2],t[n+3]=o[3],t[n+4]=o[4],t[n+5]=o[5],t[n+6]=o[6],t[n+7]=o[7]}function s(e,t,n){r[0]=e,t[n]=o[7],t[n+1]=o[6],t[n+2]=o[5],t[n+3]=o[4],t[n+4]=o[3],t[n+5]=o[2],t[n+6]=o[1],t[n+7]=o[0]}function c(e,t){return o[0]=e[t],o[1]=e[t+1],o[2]=e[t+2],o[3]=e[t+3],o[4]=e[t+4],o[5]=e[t+5],o[6]=e[t+6],o[7]=e[t+7],r[0]}function u(e,t){return o[7]=e[t],o[6]=e[t+1],o[5]=e[t+2],o[4]=e[t+3],o[3]=e[t+4],o[2]=e[t+5],o[1]=e[t+6],o[0]=e[t+7],r[0]}function p(e,t,n,r,o,i){var a,s,c=r<0?1:0;0===(r=c?-r:r)?(e(0,o,i+t),e(0<1/r?0:2147483648,o,i+n)):isNaN(r)?(e(0,o,i+t),e(2146959360,o,i+n)):17976931348623157e292<r?(e(0,o,i+t),e((2146435072|c<<31)>>>0,o,i+n)):r<22250738585072014e-324?(e((a=r/5e-324)>>>0,o,i+t),e((c<<31|a/4294967296)>>>0,o,i+n)):(s=_Mathfloor(d(r)/l),e(4503599627370496*(a=r*_Mathpow(2,-(s=1024===s?1023:s)))>>>0,o,i+t),e((c<<31|s+1023<<20|1048575&1048576*a)>>>0,o,i+n))}function h(e,t,n,r,o){t=e(r,o+t),e=e(r,o+n),r=2*(e>>31)+1,o=2047&e>>>20,n=4294967296*(1048575&e)+t;return 2047==o?n?NaN:1/0*r:0==o?5e-324*r*n:r*_Mathpow(2,o-1075)*(n+4503599627370496)}function f(e,t,n){i[0]=e,t[n]=a[0],t[n+1]=a[1],t[n+2]=a[2],t[n+3]=a[3]}function m(e,t,n){i[0]=e,t[n]=a[3],t[n+1]=a[2],t[n+2]=a[1],t[n+3]=a[0]}function A(e,t){return a[0]=e[t],a[1]=e[t+1],a[2]=e[t+2],a[3]=e[t+3],i[0]}function y(e,t){return a[3]=e[t],a[2]=e[t+1],a[1]=e[t+2],a[0]=e[t+3],i[0]}function _(e,t,n,r){var o=t<0?1:0;0===(t=o?-t:t)?e(0<1/t?0:2147483648,n,r):isNaN(t)?e(2143289344,n,r):e(34028234663852886e22<t?(2139095040|o<<31)>>>0:t<11754943508222875e-54?(o<<31|_Mathround(t/1401298464324817e-60))>>>0:(o<<31|(e=_Mathfloor(d(t)/l))+127<<23|8388607&_Mathround(t*_Mathpow(2,-e)*8388608))>>>0,n,r)}function g(e,t,n){e=e(t,n),t=2*(e>>31)+1,n=255&e>>>23,e&=8388607;return 255==n?e?NaN:1/0*t:0==n?1401298464324817e-60*t*e:t*_Mathpow(2,n-150)*(8388608+e)}}function v(e,t,n){t[n]=255&e,t[n+1]=255&e>>>8,t[n+2]=255&e>>>16,t[n+3]=e>>>24}function S(e,t,n){t[n]=e>>>24,t[n+1]=255&e>>>16,t[n+2]=255&e>>>8,t[n+3]=255&e}function b(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function w(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},908:function _(module){function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},5152:function(e,t){var o=t.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},r=t.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),n=o(e),e="";n&&(e=t.shift()+"/");for(var r=0;r<t.length;)".."===t[r]?0<r&&".."!==t[r-1]?t.splice(--r,2):n?t.splice(r,1):++r:"."===t[r]?t.splice(r,1):++r;return e+t.join("/")};t.resolve=function(e,t,n){return n||(t=r(t)),!o(t)&&(e=(e=n?e:r(e)).replace(/(?:\/|^)[^/]+$/,"")).length?r(e+"/"+t):t}},7479:function(e){e.exports=function(t,n,e){var r=e||8192,o=null,i=r;return function(e){if(e<1||r>>>1<e)return t(e);r<i+e&&(o=t(r),i=0);e=n.call(o,i,i+=e);return 7&i&&(i=1+(7|i)),e}}},3541:function(e,t){t.length=function(e){for(var t,n=0,r=0;r<e.length;++r)(t=e.charCodeAt(r))<128?n+=1:t<2048?n+=2:55296==(64512&t)&&56320==(64512&e.charCodeAt(r+1))?(++r,n+=4):n+=3;return n},t.read=function(e,t,n){if(n-t<1)return"";for(var r,o=null,i=[],a=0;t<n;)(r=e[t++])<128?i[a++]=r:191<r&&r<224?i[a++]=(31&r)<<6|63&e[t++]:239<r&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[a++]=55296+(r>>10),i[a++]=56320+(1023&r)):i[a++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],8191<a&&((o=o||[]).push(_StringfromCharCode.apply(String,i)),a=0);return o?(a&&o.push(_StringfromCharCode.apply(String,i.slice(0,a))),o.join("")):_StringfromCharCode.apply(String,i.slice(0,a))},t.write=function(e,t,n){for(var r,o,i=n,a=0;a<e.length;++a)(r=e.charCodeAt(a))<128?t[n++]=r:(r<2048?t[n++]=192|r>>6:(55296==(64512&r)&&56320==(64512&(o=e.charCodeAt(a+1)))?(++a,t[n++]=240|(r=65536+((1023&r)<<10)+(1023&o))>>18,t[n++]=128|63&r>>12):t[n++]=224|r>>12,t[n++]=128|63&r>>6),t[n++]=128|63&r);return n-i}},2236:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){for(var t=e,n=t.lib.BlockCipher,r=t.algo,l=[],o=[],i=[],a=[],s=[],c=[],d=[],u=[],p=[],h=[],f=[],m=0;m<256;m++)f[m]=m<128?m<<1:283^m<<1;for(var A=0,y=0,m=0;m<256;m++){var _=(_=y^y<<1^y<<2^y<<3^y<<4)>>>8^255&_^99,g=f[o[l[A]=_]=A],v=f[g],S=f[v],b=257*f[_]^16843008*_;i[A]=b<<24|b>>>8,a[A]=b<<16|b>>>16,s[A]=b<<8|b>>>24,c[A]=b,d[_]=(b=16843009*S^65537*v^257*g^16843008*A)<<24|b>>>8,u[_]=b<<16|b>>>16,p[_]=b<<8|b>>>24,h[_]=b,A?(A=g^f[f[f[S^g]]],y^=f[f[y]]):A=y=1}var w=[0,1,2,4,8,16,32,64,128,27,54],r=r.AES=n.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,r=4*(1+(this._nRounds=6+n)),o=this._keySchedule=[],i=0;i<r;i++)i<n?o[i]=t[i]:(c=o[i-1],i%n?6<n&&4==i%n&&(c=l[c>>>24]<<24|l[255&c>>>16]<<16|l[255&c>>>8]<<8|l[255&c]):(c=l[(c=c<<8|c>>>24)>>>24]<<24|l[255&c>>>16]<<16|l[255&c>>>8]<<8|l[255&c],c^=w[0|i/n]<<24),o[i]=o[i-n]^c);for(var a=this._invKeySchedule=[],s=0;s<r;s++){var i=r-s,c=s%4?o[i]:o[i-4];a[s]=s<4||i<=4?c:d[l[c>>>24]]^u[l[255&c>>>16]]^p[l[255&c>>>8]]^h[l[255&c]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,i,a,s,c,l)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,d,u,p,h,o),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,o,i,a,s){for(var c=this._nRounds,l=e[t]^n[0],d=e[t+1]^n[1],u=e[t+2]^n[2],p=e[t+3]^n[3],h=4,f=1;f<c;f++)var m=r[l>>>24]^o[255&d>>>16]^i[255&u>>>8]^a[255&p]^n[h++],A=r[d>>>24]^o[255&u>>>16]^i[255&p>>>8]^a[255&l]^n[h++],y=r[u>>>24]^o[255&p>>>16]^i[255&l>>>8]^a[255&d]^n[h++],_=r[p>>>24]^o[255&l>>>16]^i[255&d>>>8]^a[255&u]^n[h++],l=m,d=A,u=y,p=_;m=(s[l>>>24]<<24|s[255&d>>>16]<<16|s[255&u>>>8]<<8|s[255&p])^n[h++],A=(s[d>>>24]<<24|s[255&u>>>16]<<16|s[255&p>>>8]<<8|s[255&l])^n[h++],y=(s[u>>>24]<<24|s[255&p>>>16]<<16|s[255&l>>>8]<<8|s[255&d])^n[h++],_=(s[p>>>24]<<24|s[255&l>>>16]<<16|s[255&d>>>8]<<8|s[255&u])^n[h++],e[t]=m,e[t+1]=A,e[t+2]=y,e[t+3]=_},keySize:8});return t.AES=n._createHelper(r),e.AES};"object"===r(t)?e.exports=t=o(n(9036),n(7818),n(7668),n(4256),n(8191)):(n=[n(9036),n(7818),n(7668),n(4256),n(8191)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},8191:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){function i(e,t,n){var r,o=this._iv;o?(r=o,this._iv=void 0):r=this._prevBlock;for(var i=0;i<n;i++)e[t+i]^=r[i]}function o(e){return"string"==typeof e?f:h}var t,n,a,r,s,c,l,d,u,p,h,f;e.lib.Cipher||(t=(e=e).lib,n=t.Base,a=t.WordArray,r=t.BufferedBlockAlgorithm,(s=e.enc).Utf8,c=s.Base64,l=e.algo.EvpKDF,d=t.Cipher=r.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){r.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(r){return{encrypt:function(e,t,n){return o(t).encrypt(r,e,t,n)},decrypt:function(e,t,n){return o(t).decrypt(r,e,t,n)}}}}),t.StreamCipher=d.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),s=e.mode={},u=t.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),u=s.CBC=((s=u.extend()).Encryptor=s.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;i.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),s.Decryptor=s.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,o=e.slice(t,t+r);n.decryptBlock(e,t),i.call(this,e,t,r),this._prevBlock=o}}),s),s=(e.pad={}).Pkcs7={pad:function(e,t){for(var t=4*t,n=t-e.sigBytes%t,r=[],o=0;o<n;o+=4)r.push(n<<24|n<<16|n<<8|n);t=a.create(r,n);e.concat(t)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},t.BlockCipher=d.extend({cfg:d.cfg.extend({mode:u,padding:s}),reset:function(){d.reset.call(this);var e,t=this.cfg,n=t.iv,t=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=t.createEncryptor:(e=t.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(t,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),p=t.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),u=(e.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,e=e.salt;return(e?a.create([1398893684,1701076831]).concat(e).concat(t):t).toString(c)},parse:function(e){var t,e=c.parse(e),n=e.words;return 1398893684==n[0]&&1701076831==n[1]&&(t=a.create(n.slice(2,4)),n.splice(0,4),e.sigBytes-=16),p.create({ciphertext:e,salt:t})}},h=t.SerializableCipher=n.extend({cfg:n.extend({format:u}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var o=e.createEncryptor(n,r),t=o.finalize(t),o=o.cfg;return p.create({ciphertext:t,key:n,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),s=(e.kdf={}).OpenSSL={execute:function(e,t,n,r){r=r||a.random(8);e=l.create({keySize:t+n}).compute(e,r),n=a.create(e.words.slice(t),4*n);return e.sigBytes=4*t,p.create({key:e,iv:n,salt:r})}},f=t.PasswordBasedCipher=h.extend({cfg:h.cfg.extend({kdf:s}),encrypt:function(e,t,n,r){n=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize),r.iv=n.iv,e=h.encrypt.call(this,e,t,n.key,r);return e.mixIn(n),e},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);n=r.kdf.execute(n,e.keySize,e.ivSize,t.salt);return r.iv=n.iv,h.decrypt.call(this,e,t,n.key,r)}}))};"object"===r(t)?e.exports=t=o(n(9036),n(4256)):(n=[n(9036),n(4256)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},9036:function(e,t,h){function n(e){return(n="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var r=function(){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),"undefined"!=typeof self&&self.crypto&&(r=self.crypto),!(r=!(r=!(r="undefined"!=typeof globalThis&&globalThis.crypto?globalThis.crypto:r)&&"undefined"!=typeof window&&window.msCrypto?window.msCrypto:r)&&void 0!==h.g&&h.g.crypto?h.g.crypto:r))try{r=h(3828)}catch(r){}var n=Object.create||function(e){return p.prototype=e,e=new p,p.prototype=null,e},e={},t=e.lib={},o=t.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=t.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null==t?4*e.length:t},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,o=e.sigBytes;if(this.clamp(),r%4)for(var i,a=0;a<o;a++)i=255&n[a>>>2]>>>24-a%4*8,t[r+a>>>2]|=i<<24-(r+a)%4*8;else for(var s=0;s<o;s+=4)t[r+s>>>2]=n[s>>>2];return this.sigBytes+=o,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=_Mathceil(t/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")}());return new l.init(t,e)}}),i=e.enc={},a=i.Hex={stringify:function(e){for(var t,n=e.words,r=e.sigBytes,o=[],i=0;i<r;i++)t=255&n[i>>>2]>>>24-i%4*8,o.push((t>>>4).toString(16)),o.push((15&t).toString(16));return o.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new l.init(n,t/2)}},s=i.Latin1={stringify:function(e){for(var t,n=e.words,r=e.sigBytes,o=[],i=0;i<r;i++)t=255&n[i>>>2]>>>24-i%4*8,o.push(_StringfromCharCode(t));return o.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new l.init(n,t)}},c=i.Utf8={stringify:function(e){try{return decodeURIComponent(escape(s.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return s.parse(unescape(encodeURIComponent(e)))}},d=t.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t,n=this._data,r=n.words,o=n.sigBytes,i=this.blockSize,a=o/(4*i),s=(e?_Mathceil(a):_Mathmax((0|a)-this._minBufferSize,0))*i,e=_Mathmin(4*s,o);if(s){for(var c=0;c<s;c+=i)this._doProcessBlock(r,c);t=r.splice(0,s),n.sigBytes-=e}return new l.init(t,e)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),u=(t.Hasher=d.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(n){return function(e,t){return new n.init(t).finalize(e)}},_createHmacHelper:function(n){return function(e,t){return new u.HMAC.init(n,t).finalize(e)}}}),e.algo={});function p(){}return e};"object"===n(t)?e.exports=t=r():void 0!==(t="function"==typeof(r=r)?r.apply(t,[]):r)&&(e.exports=t)},7818:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return f=e.lib.WordArray,e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var o=[],i=0;i<n;i+=3)for(var a=255&t[i>>>2]>>>24-i%4*8,s=255&t[i+1>>>2]>>>24-(i+1)%4*8,c=255&t[i+2>>>2]>>>24-(i+2)%4*8,l=0;l<4&&i+.75*l<n;l++)o.push(r.charAt(63&(a<<16|s<<8|c)>>>6*(3-l)));var d=r.charAt(64);if(d)for(;o.length%4;)o.push(d);return o.join("")},parse:function(e){var t=e.length,n=this._map;if(!(r=this._reverseMap))for(var r=this._reverseMap=[],o=0;o<n.length;o++)r[n.charCodeAt(o)]=o;for(var i,a,s=n.charAt(64),c=(s&&-1!==(s=e.indexOf(s))&&(t=s),e),l=t,d=r,u=[],p=0,h=0;h<l;h++)h%4&&(i=d[c.charCodeAt(h-1)]<<h%4*2,a=d[c.charCodeAt(h)]>>>6-h%4*2,u[p>>>2]|=(i|a)<<24-p%4*8,p++);return f.create(u,p)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.enc.Base64;var f};"object"===r(t)?e.exports=t=o(n(9036)):(n=[n(9036)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},1887:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return f=e.lib.WordArray,e.enc.Base64url={stringify:function(e){var t=e.words,n=e.sigBytes,r=!(1<arguments.length&&void 0!==arguments[1])||arguments[1]?this._safe_map:this._map;e.clamp();for(var o=[],i=0;i<n;i+=3)for(var a=255&t[i>>>2]>>>24-i%4*8,s=255&t[i+1>>>2]>>>24-(i+1)%4*8,c=255&t[i+2>>>2]>>>24-(i+2)%4*8,l=0;l<4&&i+.75*l<n;l++)o.push(r.charAt(63&(a<<16|s<<8|c)>>>6*(3-l)));var d=r.charAt(64);if(d)for(;o.length%4;)o.push(d);return o.join("")},parse:function(e){var t=e.length,n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1]?this._safe_map:this._map;if(!(r=this._reverseMap))for(var r=this._reverseMap=[],o=0;o<n.length;o++)r[n.charCodeAt(o)]=o;for(var i,a,s=n.charAt(64),c=(s&&-1!==(s=e.indexOf(s))&&(t=s),e),l=t,d=r,u=[],p=0,h=0;h<l;h++)h%4&&(i=d[c.charCodeAt(h-1)]<<h%4*2,a=d[c.charCodeAt(h)]>>>6-h%4*2,u[p>>>2]|=(i|a)<<24-p%4*8,p++);return f.create(u,p)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},e.enc.Base64url;var f};"object"===r(t)?e.exports=t=o(n(9036)):(n=[n(9036)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},2495:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return o=e.lib.WordArray,(t=e.enc).Utf16=t.Utf16BE={stringify:function(e){for(var t,n=e.words,r=e.sigBytes,o=[],i=0;i<r;i+=2)t=65535&n[i>>>2]>>>16-i%4*8,o.push(_StringfromCharCode(t));return o.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>1]|=e.charCodeAt(r)<<16-r%2*16;return o.create(n,2*t)}},t.Utf16LE={stringify:function(e){for(var t,n=e.words,r=e.sigBytes,o=[],i=0;i<r;i+=2)t=a(65535&n[i>>>2]>>>16-i%4*8),o.push(_StringfromCharCode(t));return o.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>1]|=a(e.charCodeAt(r)<<16-r%2*16);return o.create(n,2*t)}},e.enc.Utf16;function a(e){return 4278255360&e<<8|16711935&e>>>8}var o,t};"object"===r(t)?e.exports=t=o(n(9036)):(n=[n(9036)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},4256:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return n=(t=e).lib,r=n.Base,d=n.WordArray,n=t.algo,o=n.MD5,i=n.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:o,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,r=this.cfg,o=r.hasher.create(),i=d.create(),a=i.words,s=r.keySize,c=r.iterations;a.length<s;){n&&o.update(n),n=o.update(e).finalize(t),o.reset();for(var l=1;l<c;l++)n=o.finalize(n),o.reset();i.concat(n)}return i.sigBytes=4*s,i}}),t.EvpKDF=function(e,t,n){return i.create(n).compute(e,t)},e.EvpKDF;var t,n,r,d,o,i};"object"===r(t)?e.exports=t=o(n(9036),n(7386),n(4371)):(n=[n(9036),n(7386),n(4371)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},276:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return t=e.lib.CipherParams,n=e.enc.Hex,e.format.Hex={stringify:function(e){return e.ciphertext.toString(n)},parse:function(e){e=n.parse(e);return t.create({ciphertext:e})}},e.format.Hex;var t,n};"object"===r(t)?e.exports=t=o(n(9036),n(8191)):(n=[n(9036),n(8191)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},4371:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){var t,s;t=e.lib.Base,s=e.enc.Utf8,e.algo.HMAC=t.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=s.parse(t));var n=e.blockSize,r=4*n;(t=t.sigBytes>r?e.finalize(t):t).clamp();for(var e=this._oKey=t.clone(),t=this._iKey=t.clone(),o=e.words,i=t.words,a=0;a<n;a++)o[a]^=1549556828,i[a]^=909522486;e.sigBytes=t.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,e=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(e))}})};"object"===r(t)?e.exports=t=o(n(9036)):(n=[n(9036)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},5442:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return e};"object"===r(t)?e.exports=t=o(n(9036),n(5372),n(3831),n(2495),n(7818),n(1887),n(7668),n(7386),n(3152),n(3750),n(7613),n(3103),n(9206),n(374),n(4371),n(6216),n(4256),n(8191),n(5234),n(2060),n(995),n(3263),n(5612),n(9610),n(5367),n(1093),n(9818),n(3371),n(276),n(2236),n(7471),n(7679),n(953),n(5690)):(n=[n(9036),n(5372),n(3831),n(2495),n(7818),n(1887),n(7668),n(7386),n(3152),n(3750),n(7613),n(3103),n(9206),n(374),n(4371),n(6216),n(4256),n(8191),n(5234),n(2060),n(995),n(3263),n(5612),n(9610),n(5367),n(1093),n(9818),n(3371),n(276),n(2236),n(7471),n(7679),n(953),n(5690)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},3831:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return"function"==typeof ArrayBuffer&&(t=e.lib.WordArray,o=t.init,(t.init=function(e){if((e=(e=e instanceof ArrayBuffer?new Uint8Array(e):e)instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e)instanceof Uint8Array){for(var t=e.byteLength,n=[],r=0;r<t;r++)n[r>>>2]|=e[r]<<24-r%4*8;o.call(this,n,t)}else o.apply(this,arguments)}).prototype=t),e.lib.WordArray;var t,o};"object"===r(t)?e.exports=t=o(n(9036)):(n=[n(9036)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},7668:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){function E(e,t,n,r,o,i,a){e=e+(t&n|~t&r)+o+a;return(e<<i|e>>>32-i)+t}function T(e,t,n,r,o,i,a){e=e+(t&r|n&~r)+o+a;return(e<<i|e>>>32-i)+t}function R(e,t,n,r,o,i,a){e=e+(t^n^r)+o+a;return(e<<i|e>>>32-i)+t}function I(e,t,n,r,o,i,a){e=e+(n^(t|~r))+o+a;return(e<<i|e>>>32-i)+t}for(var t=e,n=(o=t.lib).WordArray,r=o.Hasher,o=t.algo,D=[],i=0;i<64;i++)D[i]=0|4294967296*_Mathabs(_Mathsin(i+1));return o=o.MD5=r.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,o=e[r];e[r]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var i=this._hash.words,a=e[t+0],s=e[t+1],c=e[t+2],l=e[t+3],d=e[t+4],u=e[t+5],p=e[t+6],h=e[t+7],f=e[t+8],m=e[t+9],A=e[t+10],y=e[t+11],_=e[t+12],g=e[t+13],v=e[t+14],S=e[t+15],b=E(i[0],k=i[1],C=i[2],w=i[3],a,7,D[0]),w=E(w,b,k,C,s,12,D[1]),C=E(C,w,b,k,c,17,D[2]),k=E(k,C,w,b,l,22,D[3]);b=E(b,k,C,w,d,7,D[4]),w=E(w,b,k,C,u,12,D[5]),C=E(C,w,b,k,p,17,D[6]),k=E(k,C,w,b,h,22,D[7]),b=E(b,k,C,w,f,7,D[8]),w=E(w,b,k,C,m,12,D[9]),C=E(C,w,b,k,A,17,D[10]),k=E(k,C,w,b,y,22,D[11]),b=E(b,k,C,w,_,7,D[12]),w=E(w,b,k,C,g,12,D[13]),C=E(C,w,b,k,v,17,D[14]),b=T(b,k=E(k,C,w,b,S,22,D[15]),C,w,s,5,D[16]),w=T(w,b,k,C,p,9,D[17]),C=T(C,w,b,k,y,14,D[18]),k=T(k,C,w,b,a,20,D[19]),b=T(b,k,C,w,u,5,D[20]),w=T(w,b,k,C,A,9,D[21]),C=T(C,w,b,k,S,14,D[22]),k=T(k,C,w,b,d,20,D[23]),b=T(b,k,C,w,m,5,D[24]),w=T(w,b,k,C,v,9,D[25]),C=T(C,w,b,k,l,14,D[26]),k=T(k,C,w,b,f,20,D[27]),b=T(b,k,C,w,g,5,D[28]),w=T(w,b,k,C,c,9,D[29]),C=T(C,w,b,k,h,14,D[30]),b=R(b,k=T(k,C,w,b,_,20,D[31]),C,w,u,4,D[32]),w=R(w,b,k,C,f,11,D[33]),C=R(C,w,b,k,y,16,D[34]),k=R(k,C,w,b,v,23,D[35]),b=R(b,k,C,w,s,4,D[36]),w=R(w,b,k,C,d,11,D[37]),C=R(C,w,b,k,h,16,D[38]),k=R(k,C,w,b,A,23,D[39]),b=R(b,k,C,w,g,4,D[40]),w=R(w,b,k,C,a,11,D[41]),C=R(C,w,b,k,l,16,D[42]),k=R(k,C,w,b,p,23,D[43]),b=R(b,k,C,w,m,4,D[44]),w=R(w,b,k,C,_,11,D[45]),C=R(C,w,b,k,S,16,D[46]),b=I(b,k=R(k,C,w,b,c,23,D[47]),C,w,a,6,D[48]),w=I(w,b,k,C,h,10,D[49]),C=I(C,w,b,k,v,15,D[50]),k=I(k,C,w,b,u,21,D[51]),b=I(b,k,C,w,_,6,D[52]),w=I(w,b,k,C,l,10,D[53]),C=I(C,w,b,k,A,15,D[54]),k=I(k,C,w,b,s,21,D[55]),b=I(b,k,C,w,f,6,D[56]),w=I(w,b,k,C,S,10,D[57]),C=I(C,w,b,k,p,15,D[58]),k=I(k,C,w,b,g,21,D[59]),b=I(b,k,C,w,d,6,D[60]),w=I(w,b,k,C,y,10,D[61]),C=I(C,w,b,k,c,15,D[62]),k=I(k,C,w,b,m,21,D[63]),i[0]=0|i[0]+b,i[1]=0|i[1]+k,i[2]=0|i[2]+C,i[3]=0|i[3]+w},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes,o=(t[r>>>5]|=128<<24-r%32,_Mathfloor(n/4294967296));t[15+(64+r>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t[14+(64+r>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var i,o=this._hash,a=o.words,s=0;s<4;s++)i=a[s],a[s]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return o},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}}),t.MD5=r._createHelper(o),t.HmacMD5=r._createHmacHelper(o),e.MD5};"object"===r(t)?e.exports=t=o(n(9036)):(n=[n(9036)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},5234:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return e.mode.CFB=((t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;i.call(this,e,t,r,n),this._prevBlock=e.slice(t,t+r)}}),t.Decryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,o=e.slice(t,t+r);i.call(this,e,t,r,n),this._prevBlock=o}}),t),e.mode.CFB;function i(e,t,n,r){var o,i=this._iv;i?(o=i.slice(0),this._iv=void 0):o=this._prevBlock,r.encryptBlock(o,0);for(var a=0;a<n;a++)e[t+a]^=o[a]}var t};"object"===r(t)?e.exports=t=o(n(9036),n(8191)):(n=[n(9036),n(8191)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},995:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return e.mode.CTRGladman=(t=e.lib.BlockCipherMode.extend(),n=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,o=this._iv,i=this._counter,a=(o&&(i=this._counter=o.slice(0),this._iv=void 0),0===((o=i)[0]=c(o[0]))&&(o[1]=c(o[1])),i.slice(0));n.encryptBlock(a,0);for(var s=0;s<r;s++)e[t+s]^=a[s]}}),t.Decryptor=n,t),e.mode.CTRGladman;function c(e){var t,n,r;return 255==(255&e>>24)?(n=255&e>>8,r=255&e,255==(t=255&e>>16)?(t=0,255==n?(n=0,255==r?r=0:++r):++n):++t,e=0,e=(e+=t<<16)+(n<<8)+r):e+=16777216,e}var t,n};"object"===r(t)?e.exports=t=o(n(9036),n(8191)):(n=[n(9036),n(8191)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},2060:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return e.mode.CTR=(t=e.lib.BlockCipherMode.extend(),n=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,o=this._iv,i=this._counter,a=(o&&(i=this._counter=o.slice(0),this._iv=void 0),i.slice(0));n.encryptBlock(a,0),i[r-1]=0|i[r-1]+1;for(var s=0;s<r;s++)e[t+s]^=a[s]}}),t.Decryptor=n,t),e.mode.CTR;var t,n};"object"===r(t)?e.exports=t=o(n(9036),n(8191)):(n=[n(9036),n(8191)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},5612:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return e.mode.ECB=((t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t),e.mode.ECB;var t};"object"===r(t)?e.exports=t=o(n(9036),n(8191)):(n=[n(9036),n(8191)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},3263:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return e.mode.OFB=(t=e.lib.BlockCipherMode.extend(),n=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,o=this._iv,i=this._keystream;o&&(i=this._keystream=o.slice(0),this._iv=void 0),n.encryptBlock(i,0);for(var a=0;a<r;a++)e[t+a]^=i[a]}}),t.Decryptor=n,t),e.mode.OFB;var t,n};"object"===r(t)?e.exports=t=o(n(9036),n(8191)):(n=[n(9036),n(8191)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},9610:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return e.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,t=4*t,t=t-n%t,n=n+t-1;e.clamp(),e.words[n>>>2]|=t<<24-n%4*8,e.sigBytes+=t},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Ansix923};"object"===r(t)?e.exports=t=o(n(9036),n(8191)):(n=[n(9036),n(8191)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},5367:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(n){return n.pad.Iso10126={pad:function(e,t){t*=4,t-=e.sigBytes%t;e.concat(n.lib.WordArray.random(t-1)).concat(n.lib.WordArray.create([t<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.pad.Iso10126};"object"===r(t)?e.exports=t=o(n(9036),n(8191)):(n=[n(9036),n(8191)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},1093:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(n){return n.pad.Iso97971={pad:function(e,t){e.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(e,t)},unpad:function(e){n.pad.ZeroPadding.unpad(e),e.sigBytes--}},n.pad.Iso97971};"object"===r(t)?e.exports=t=o(n(9036),n(8191)):(n=[n(9036),n(8191)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},3371:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding};"object"===r(t)?e.exports=t=o(n(9036),n(8191)):(n=[n(9036),n(8191)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},9818:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return e.pad.ZeroPadding={pad:function(e,t){t*=4;e.clamp(),e.sigBytes+=t-(e.sigBytes%t||t)},unpad:function(e){for(var t=e.words,n=e.sigBytes-1,n=e.sigBytes-1;0<=n;n--)if(255&t[n>>>2]>>>24-n%4*8){e.sigBytes=n+1;break}}},e.pad.ZeroPadding};"object"===r(t)?e.exports=t=o(n(9036),n(8191)):(n=[n(9036),n(8191)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},6216:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return n=(t=e).lib,r=n.Base,y=n.WordArray,n=t.algo,o=n.SHA1,_=n.HMAC,i=n.PBKDF2=r.extend({cfg:r.extend({keySize:4,hasher:o,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,r=this.cfg,o=_.create(r.hasher,e),i=y.create(),a=y.create([1]),s=i.words,c=a.words,l=r.keySize,d=r.iterations;s.length<l;){n=o.update(t).finalize(a),o.reset();for(var u=n.words,p=u.length,h=n,f=1;f<d;f++){h=o.finalize(h),o.reset();for(var m=h.words,A=0;A<p;A++)u[A]^=m[A]}i.concat(n),c[0]++}return i.sigBytes=4*l,i}}),t.PBKDF2=function(e,t,n){return i.create(n).compute(e,t)},e.PBKDF2;var t,n,r,y,o,_,i};"object"===r(t)?e.exports=t=o(n(9036),n(7386),n(4371)):(n=[n(9036),n(7386),n(4371)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},5690:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return n=(t=e).lib.StreamCipher,r=t.algo,o=[],a=[],c=[],r=r.RabbitLegacy=n.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]],o=this._b=0;o<4;o++)s.call(this);for(o=0;o<8;o++)r[o]^=n[7&o+4];if(t){var e=t.words,t=e[0],e=e[1],t=16711935&(t<<8|t>>>24)|4278255360&(t<<24|t>>>8),e=16711935&(e<<8|e>>>24)|4278255360&(e<<24|e>>>8),i=t>>>16|4294901760&e,a=e<<16|65535&t;for(r[0]^=t,r[1]^=i,r[2]^=e,r[3]^=a,r[4]^=t,r[5]^=i,r[6]^=e,r[7]^=a,o=0;o<4;o++)s.call(this)}},_doProcessBlock:function(e,t){var n=this._X;s.call(this),o[0]=n[0]^n[5]>>>16^n[3]<<16,o[1]=n[2]^n[7]>>>16^n[5]<<16,o[2]=n[4]^n[1]>>>16^n[7]<<16,o[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)o[r]=16711935&(o[r]<<8|o[r]>>>24)|4278255360&(o[r]<<24|o[r]>>>8),e[t+r]^=o[r]},blockSize:4,ivSize:2}),t.RabbitLegacy=n._createHelper(r),e.RabbitLegacy;function s(){for(var e=this._X,t=this._C,n=0;n<8;n++)a[n]=t[n];for(t[0]=0|t[0]+1295307597+this._b,t[1]=0|t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0),t[2]=0|t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0),t[3]=0|t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0),t[4]=0|t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0),t[5]=0|t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0),t[6]=0|t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0),t[7]=0|t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0),this._b=t[7]>>>0<a[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],o=65535&r,i=r>>>16;c[n]=((o*o>>>17)+o*i>>>15)+i*i^(0|(4294901760&r)*r)+(0|(65535&r)*r)}e[0]=0|c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16),e[1]=0|c[1]+(c[0]<<8|c[0]>>>24)+c[7],e[2]=0|c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16),e[3]=0|c[3]+(c[2]<<8|c[2]>>>24)+c[1],e[4]=0|c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16),e[5]=0|c[5]+(c[4]<<8|c[4]>>>24)+c[3],e[6]=0|c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16),e[7]=0|c[7]+(c[6]<<8|c[6]>>>24)+c[5]}var t,n,r,o,a,c};"object"===r(t)?e.exports=t=o(n(9036),n(7818),n(7668),n(4256),n(8191)):(n=[n(9036),n(7818),n(7668),n(4256),n(8191)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},953:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return n=(t=e).lib.StreamCipher,r=t.algo,o=[],a=[],s=[],r=r.Rabbit=n.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);for(var r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],o=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]],n=this._b=0;n<4;n++)c.call(this);for(n=0;n<8;n++)o[n]^=r[7&n+4];if(t){var t=t.words,i=t[0],t=t[1],i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t=16711935&(t<<8|t>>>24)|4278255360&(t<<24|t>>>8),a=i>>>16|4294901760&t,s=t<<16|65535&i;for(o[0]^=i,o[1]^=a,o[2]^=t,o[3]^=s,o[4]^=i,o[5]^=a,o[6]^=t,o[7]^=s,n=0;n<4;n++)c.call(this)}},_doProcessBlock:function(e,t){var n=this._X;c.call(this),o[0]=n[0]^n[5]>>>16^n[3]<<16,o[1]=n[2]^n[7]>>>16^n[5]<<16,o[2]=n[4]^n[1]>>>16^n[7]<<16,o[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)o[r]=16711935&(o[r]<<8|o[r]>>>24)|4278255360&(o[r]<<24|o[r]>>>8),e[t+r]^=o[r]},blockSize:4,ivSize:2}),t.Rabbit=n._createHelper(r),e.Rabbit;function c(){for(var e=this._X,t=this._C,n=0;n<8;n++)a[n]=t[n];for(t[0]=0|t[0]+1295307597+this._b,t[1]=0|t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0),t[2]=0|t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0),t[3]=0|t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0),t[4]=0|t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0),t[5]=0|t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0),t[6]=0|t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0),t[7]=0|t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0),this._b=t[7]>>>0<a[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],o=65535&r,i=r>>>16;s[n]=((o*o>>>17)+o*i>>>15)+i*i^(0|(4294901760&r)*r)+(0|(65535&r)*r)}e[0]=0|s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16),e[1]=0|s[1]+(s[0]<<8|s[0]>>>24)+s[7],e[2]=0|s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16),e[3]=0|s[3]+(s[2]<<8|s[2]>>>24)+s[1],e[4]=0|s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16),e[5]=0|s[5]+(s[4]<<8|s[4]>>>24)+s[3],e[6]=0|s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16),e[7]=0|s[7]+(s[6]<<8|s[6]>>>24)+s[5]}var t,n,r,o,a,s};"object"===r(t)?e.exports=t=o(n(9036),n(7818),n(7668),n(4256),n(8191)):(n=[n(9036),n(7818),n(7668),n(4256),n(8191)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},7679:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return r=(t=e).lib.StreamCipher,o=t.algo,i=o.RC4=r.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,r=this._S=[],o=0;o<256;o++)r[o]=o;for(var o=0,i=0;o<256;o++){var a=o%n,a=255&t[a>>>2]>>>24-a%4*8,i=(i+r[o]+a)%256,a=r[o];r[o]=r[i],r[i]=a}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=n.call(this)},keySize:8,ivSize:0}),t.RC4=r._createHelper(i),o=o.RC4Drop=i.extend({cfg:i.cfg.extend({drop:192}),_doReset:function(){i._doReset.call(this);for(var e=this.cfg.drop;0<e;e--)n.call(this)}}),t.RC4Drop=r._createHelper(o),e.RC4;function n(){for(var e=this._S,t=this._i,n=this._j,r=0,o=0;o<4;o++){var n=(n+e[t=(t+1)%256])%256,i=e[t];e[t]=e[n],e[n]=i,r|=e[(e[t]+e[n])%256]<<24-8*o}return this._i=t,this._j=n,r}var t,r,o,i};"object"===r(t)?e.exports=t=o(n(9036),n(7818),n(7668),n(4256),n(8191)):(n=[n(9036),n(7818),n(7668),n(4256),n(8191)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},374:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return n=(t=e).lib,r=n.WordArray,o=n.Hasher,n=t.algo,E=r.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),T=r.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),R=r.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),I=r.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),D=r.create([0,1518500249,1859775393,2400959708,2840853838]),P=r.create([1352829926,1548603684,1836072691,2053994217,0]),n=n.RIPEMD160=o.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,o=e[r];e[r]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}for(var i,a,s,c,l,d,u=this._hash.words,p=D.words,h=P.words,f=E.words,m=T.words,A=R.words,y=I.words,_=i=u[0],g=a=u[1],v=s=u[2],S=c=u[3],b=l=u[4],n=0;n<80;n+=1)d=0|(d=k(d=(d=0|i+e[t+f[n]])+(n<16?(a^s^c)+p[0]:n<32?w(a,s,c)+p[1]:n<48?((a|~s)^c)+p[2]:n<64?C(a,s,c)+p[3]:(a^(s|~c))+p[4])|0,A[n]))+l,i=l,l=c,c=k(s,10),s=a,a=d,d=0|(d=k(d=(d=0|_+e[t+m[n]])+(n<16?(g^(v|~S))+h[0]:n<32?C(g,v,S)+h[1]:n<48?((g|~v)^S)+h[2]:n<64?w(g,v,S)+h[3]:(g^v^S)+h[4])|0,y[n]))+b,_=b,b=S,S=k(v,10),v=g,g=d;d=0|u[1]+s+S,u[1]=0|u[2]+c+b,u[2]=0|u[3]+l+_,u[3]=0|u[4]+i+g,u[4]=0|u[0]+a+v,u[0]=d},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[14+(64+r>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var o,r=this._hash,i=r.words,a=0;a<5;a++)o=i[a],i[a]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);return r},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}}),t.RIPEMD160=o._createHelper(n),t.HmacRIPEMD160=o._createHmacHelper(n),e.RIPEMD160;function w(e,t,n){return e&t|~e&n}function C(e,t,n){return e&n|t&~n}function k(e,t){return e<<t|e>>>32-t}var t,n,r,o,E,T,R,I,D,P};"object"===r(t)?e.exports=t=o(n(9036)):(n=[n(9036)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},7386:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return n=(t=e).lib,r=n.WordArray,o=n.Hasher,n=t.algo,d=[],n=n.SHA1=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],c=0;c<80;c++){d[c]=c<16?0|e[t+c]:(l=d[c-3]^d[c-8]^d[c-14]^d[c-16])<<1|l>>>31;var l=(r<<5|r>>>27)+s+d[c];l+=c<20?1518500249+(o&i|~o&a):c<40?1859775393+(o^i^a):c<60?(o&i|o&a|i&a)-1894007588:(o^i^a)-899497514,s=a,a=i,i=o<<30|o>>>2,o=r,r=l}n[0]=0|n[0]+r,n[1]=0|n[1]+o,n[2]=0|n[2]+i,n[3]=0|n[3]+a,n[4]=0|n[4]+s},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(64+r>>>9<<4)]=_Mathfloor(n/4294967296),t[15+(64+r>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA1=o._createHelper(n),t.HmacSHA1=o._createHmacHelper(n),e.SHA1;var t,n,r,o,d};"object"===r(t)?e.exports=t=o(n(9036)):(n=[n(9036)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},3750:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return n=(t=e).lib.WordArray,r=t.algo,o=r.SHA256,r=r.SHA224=o.extend({_doReset:function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=o._doFinalize.call(this);return e.sigBytes-=4,e}}),t.SHA224=o._createHelper(r),t.HmacSHA224=o._createHmacHelper(r),e.SHA224;var t,n,r,o};"object"===r(t)?e.exports=t=o(n(9036),n(3152)):(n=[n(9036),n(3152)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},3152:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){var t=e,n=(o=t.lib).WordArray,r=o.Hasher,o=t.algo,i=[],f=[];function a(e){return 0|4294967296*(e-(0|e))}for(var s=2,c=0;c<64;)!function(e){for(var t=_Mathsqrt(e),n=2;n<=t;n++)if(!(e%n))return;return 1}(s)||(c<8&&(i[c]=a(_Mathpow(s,.5))),f[c]=a(_Mathpow(s,1/3)),c++),s++;var m=[],o=o.SHA256=r.extend({_doReset:function(){this._hash=new n.init(i.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],c=n[5],l=n[6],d=n[7],u=0;u<64;u++){m[u]=u<16?0|e[t+u]:(((p=m[u-15])<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+m[u-7]+(((p=m[u-2])<<15|p>>>17)^(p<<13|p>>>19)^p>>>10)+m[u-16];var p=r&o^r&i^o&i,h=d+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&c^~s&l)+f[u]+m[u],d=l,l=c,c=s,s=0|a+h,a=i,i=o,o=r,r=0|h+(((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+p)}n[0]=0|n[0]+r,n[1]=0|n[1]+o,n[2]=0|n[2]+i,n[3]=0|n[3]+a,n[4]=0|n[4]+s,n[5]=0|n[5]+c,n[6]=0|n[6]+l,n[7]=0|n[7]+d},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(64+r>>>9<<4)]=_Mathfloor(n/4294967296),t[15+(64+r>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});return t.SHA256=r._createHelper(o),t.HmacSHA256=r._createHmacHelper(o),e.SHA256};"object"===r(t)?e.exports=t=o(n(9036)):(n=[n(9036)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},9206:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){for(var t=e,d=(o=t.lib).WordArray,r=o.Hasher,n=t.x64.Word,o=t.algo,E=[],T=[],R=[],i=1,a=0,s=0;s<24;s++){E[i+5*a]=(s+1)*(s+2)/2%64;var c=(2*i+3*a)%5,i=a%5,a=c}for(i=0;i<5;i++)for(a=0;a<5;a++)T[i+5*a]=a+(2*i+3*a)%5*5;for(var l=1,u=0;u<24;u++){for(var p,h=0,f=0,m=0;m<7;m++)1&l&&((p=(1<<m)-1)<32?f^=1<<p:h^=1<<p-32),128&l?l=113^l<<1:l<<=1;R[u]=n.create(h,f)}for(var I=[],A=0;A<25;A++)I[A]=n.create();return o=o.SHA3=r.extend({cfg:r.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new n.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,r=this.blockSize/2,o=0;o<r;o++){var i=e[t+2*o],a=e[t+2*o+1],i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);(b=n[o]).high^=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),b.low^=i}for(var s=0;s<24;s++){for(var c=0;c<5;c++){for(var l=0,d=0,u=0;u<5;u++)l^=(b=n[c+5*u]).high,d^=b.low;var p=I[c];p.high=l,p.low=d}for(c=0;c<5;c++)for(var h=I[(c+4)%5],f=I[(c+1)%5],m=f.high,f=f.low,l=h.high^(m<<1|f>>>31),d=h.low^(f<<1|m>>>31),u=0;u<5;u++)(b=n[c+5*u]).high^=l,b.low^=d;for(var A=1;A<25;A++){var y=(b=n[A]).high,_=b.low,g=E[A],y=(d=g<32?(l=y<<g|_>>>32-g,_<<g|y>>>32-g):(l=_<<g-32|y>>>64-g,y<<g-32|_>>>64-g),I[T[A]]);y.high=l,y.low=d}var v=I[0],S=n[0];for(v.high=S.high,v.low=S.low,c=0;c<5;c++)for(u=0;u<5;u++){var b=n[A=c+5*u],w=I[A],C=I[(c+1)%5+5*u],k=I[(c+2)%5+5*u];b.high=w.high^~C.high&k.high,b.low=w.low^~C.low&k.low}b=n[0],v=R[s];b.high^=v.high,b.low^=v.low}},_doFinalize:function(){var e=this._data,t=e.words,n=(this._nDataBytes,8*e.sigBytes),r=32*this.blockSize;t[n>>>5]|=1<<24-n%32,t[(_Mathceil((1+n)/r)*r>>>5)-1]|=128,e.sigBytes=4*t.length,this._process();for(var o=this._state,i=this.cfg.outputLength/8,a=[],s=0;s<i/8;s++){var c=o[s],l=c.high,c=c.low,l=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8);a.push(16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)),a.push(l)}return new d.init(a,i)},clone:function(){for(var e=r.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}}),t.SHA3=r._createHelper(o),t.HmacSHA3=r._createHmacHelper(o),e.SHA3};"object"===r(t)?e.exports=t=o(n(9036),n(5372)):(n=[n(9036),n(5372)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},3103:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return n=(t=e).x64,r=n.Word,o=n.WordArray,n=t.algo,i=n.SHA512,n=n.SHA384=i.extend({_doReset:function(){this._hash=new o.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},_doFinalize:function(){var e=i._doFinalize.call(this);return e.sigBytes-=16,e}}),t.SHA384=i._createHelper(n),t.HmacSHA384=i._createHmacHelper(n),e.SHA384;var t,n,r,o,i};"object"===r(t)?e.exports=t=o(n(9036),n(5372),n(7613)):(n=[n(9036),n(5372),n(7613)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},7613:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){function t(){return o.create.apply(o,arguments)}for(var n=e,r=n.lib.Hasher,o=(a=n.x64).Word,i=a.WordArray,a=n.algo,te=[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)],ne=[],s=0;s<80;s++)ne[s]=t();return a=a.SHA512=r.extend({_doReset:function(){this._hash=new i.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(B,L){for(var e=this._hash.words,t=e[0],n=e[1],r=e[2],o=e[3],i=e[4],a=e[5],s=e[6],e=e[7],F=t.high,c=t.low,j=n.high,l=n.low,K=r.high,d=r.low,U=o.high,u=o.low,G=i.high,p=i.low,H=a.high,h=a.low,W=s.high,f=s.low,V=e.high,m=e.low,A=F,y=c,_=j,g=l,v=K,S=d,z=U,b=u,w=G,C=p,q=H,k=h,Y=W,$=f,J=V,X=m,E=0;E<80;E++){var T,R,I=ne[E];E<16?(R=I.high=0|B[L+2*E],T=I.low=0|B[L+2*E+1]):(x=(N=ne[E-15]).high,N=N.low,O=(P=ne[E-2]).high,P=P.low,R=(R=(R=((x>>>1|N<<31)^(x>>>8|N<<24)^x>>>7)+(M=ne[E-7]).high+((T=(N=(N>>>1|x<<31)^(N>>>8|x<<24)^(N>>>7|x<<25))+M.low)>>>0<N>>>0?1:0))+((O>>>19|P<<13)^(O<<3|P>>>29)^O>>>6)+((T+=x=(P>>>19|O<<13)^(P<<3|O>>>29)^(P>>>6|O<<26))>>>0<x>>>0?1:0))+(M=ne[E-16]).high+((T+=N=M.low)>>>0<N>>>0?1:0),I.high=R,I.low=T);var D,P=w&q^~w&Y,O=C&k^~C&$,x=A&_^A&v^_&v,M=(y>>>28|A<<4)^(y<<30|A>>>2)^(y<<25|A>>>7),N=te[E],I=N.high,Q=N.low,Z=J+((w>>>14|C<<18)^(w>>>18|C<<14)^(w<<23|C>>>9))+((D=X+((C>>>14|w<<18)^(C>>>18|w<<14)^(C<<23|w>>>9)))>>>0<X>>>0?1:0),ee=M+(y&g^y&S^g&S),J=Y,X=$,Y=q,$=k,q=w,k=C,w=0|z+(Z=Z+P+((D+=O)>>>0<O>>>0?1:0)+I+((D+=Q)>>>0<Q>>>0?1:0)+R+((D+=T)>>>0<T>>>0?1:0))+((C=0|b+D)>>>0<b>>>0?1:0),z=v,b=S,v=_,S=g,_=A,g=y,A=0|Z+(((A>>>28|y<<4)^(A<<30|y>>>2)^(A<<25|y>>>7))+x+(ee>>>0<M>>>0?1:0))+((y=0|D+ee)>>>0<D>>>0?1:0)}c=t.low=c+y,t.high=F+A+(c>>>0<y>>>0?1:0),l=n.low=l+g,n.high=j+_+(l>>>0<g>>>0?1:0),d=r.low=d+S,r.high=K+v+(d>>>0<S>>>0?1:0),u=o.low=u+b,o.high=U+z+(u>>>0<b>>>0?1:0),p=i.low=p+C,i.high=G+w+(p>>>0<C>>>0?1:0),h=a.low=h+k,a.high=H+q+(h>>>0<k>>>0?1:0),f=s.low=f+$,s.high=W+Y+(f>>>0<$>>>0?1:0),m=e.low=m+X,e.high=V+J+(m>>>0<X>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(128+r>>>10<<5)]=_Mathfloor(n/4294967296),t[31+(128+r>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32}),n.SHA512=r._createHelper(a),n.HmacSHA512=r._createHmacHelper(a),e.SHA512};"object"===r(t)?e.exports=t=o(n(9036),n(5372)):(n=[n(9036),n(5372)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},7471:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return n=(t=e).lib,r=n.WordArray,n=n.BlockCipher,o=t.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],p=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],h=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],m=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],i=o.DES=n.extend({_doReset:function(){for(var e,t=this._key.words,n=[],r=0;r<56;r++)n[r]=1&t[(e=l[r]-1)>>>5]>>>31-e%32;for(var o=this._subKeys=[],i=0;i<16;i++){for(var a=o[i]=[],s=h[i],r=0;r<24;r++)a[0|r/6]|=n[(p[r]-1+s)%28]<<31-r%6,a[4+(0|r/6)]|=n[28+(p[r+24]-1+s)%28]<<31-r%6;for(a[0]=a[0]<<1|a[0]>>>31,r=1;r<7;r++)a[r]>>>=4*(r-1)+3;a[7]=a[7]<<5|a[7]>>>27}var c=this._invSubKeys=[];for(r=0;r<16;r++)c[r]=o[15-r]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],d.call(this,4,252645135),d.call(this,16,65535),u.call(this,2,858993459),u.call(this,8,16711935),d.call(this,1,1431655765);for(var r=0;r<16;r++){for(var o=n[r],i=this._lBlock,a=this._rBlock,s=0,c=0;c<8;c++)s|=f[c][((a^o[c])&m[c])>>>0];this._lBlock=a,this._rBlock=i^s}var l=this._lBlock;this._lBlock=this._rBlock,this._rBlock=l,d.call(this,1,1431655765),u.call(this,8,16711935),u.call(this,2,858993459),d.call(this,16,65535),d.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2}),t.DES=n._createHelper(i),o=o.TripleDES=n.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),n=e.length<4?e.slice(0,2):e.slice(2,4),e=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=i.createEncryptor(r.create(t)),this._des2=i.createEncryptor(r.create(n)),this._des3=i.createEncryptor(r.create(e))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2}),t.TripleDES=n._createHelper(o),e.TripleDES;function d(e,t){t=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=t,this._lBlock^=t<<e}function u(e,t){t=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=t,this._rBlock^=t<<e}var t,n,r,o,l,p,h,f,m,i};"object"===r(t)?e.exports=t=o(n(9036),n(7818),n(7668),n(4256),n(8191)):(n=[n(9036),n(7818),n(7668),n(4256),n(8191)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},5372:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return t=e.lib,o=t.Base,i=t.WordArray,(t=e.x64={}).Word=o.extend({init:function(e,t){this.high=e,this.low=t}}),t.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null==t?8*e.length:t},toX32:function(){for(var e,t=this.words,n=t.length,r=[],o=0;o<n;o++)e=t[o],r.push(e.high),r.push(e.low);return i.create(r,this.sigBytes)},clone:function(){for(var e=o.clone.call(this),t=e.words=this.words.slice(0),n=t.length,r=0;r<n;r++)t[r]=t[r].clone();return e}}),e;var t,o,i};"object"===r(t)?e.exports=t=o(n(9036)):(n=[n(9036)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},2448:function(e,t,n){e.exports=n(1027)},4490:function(e,t,n){function a(e,t,n,r){if(t.resolvedType)if(t.resolvedType instanceof h){e("switch(d%s){",r);for(var o=t.resolvedType.values,i=Object.keys(o),a=0;a<i.length;++a)t.repeated&&o[i[a]]===t.typeDefault&&e("default:"),e("case%j:",i[a])("case %i:",o[i[a]])("m%s=%j",r,o[i[a]])("break");e("}")}else e('if(typeof d%s!=="object")',r)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",r,n,r);else{var s=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",r,r);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",r,r);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",r,r);break;case"uint64":s=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",r,r,s)('else if(typeof d%s==="string")',r)("m%s=parseInt(d%s,10)",r,r)('else if(typeof d%s==="number")',r)("m%s=d%s",r,r)('else if(typeof d%s==="object")',r)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",r,r,r,s?"true":"");break;case"bytes":e('if(typeof d%s==="string")',r)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",r,r,r)("else if(d%s.length)",r)("m%s=d%s",r,r);break;case"string":e("m%s=String(d%s)",r,r);break;case"bool":e("m%s=Boolean(d%s)",r,r)}}return e}function p(e,t,n,r){if(t.resolvedType)t.resolvedType instanceof h?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",r,n,r,r):e("d%s=types[%i].toObject(m%s,o)",r,n,r);else{var o=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",r,r,r,r);break;case"uint64":o=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',r)("d%s=o.longs===String?String(m%s):m%s",r,r,r)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",r,r,r,r,o?"true":"",r);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",r,r,r,r,r);break;default:e("d%s=m%s",r,r)}}return e}var h=n(2012),f=n(4537);t.fromObject=function(e){var t=e.fieldsArray,n=f.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return n("return new this.ctor");n("var m=new this.ctor");for(var r=0;r<t.length;++r){var o=t[r].resolve(),i=f.safeProp(o.name);o.map?(n("if(d%s){",i)('if(typeof d%s!=="object")',i)("throw TypeError(%j)",o.fullName+": object expected")("m%s={}",i)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",i),a(n,o,r,i+"[ks[i]]")("}")("}")):o.repeated?(n("if(d%s){",i)("if(!Array.isArray(d%s))",i)("throw TypeError(%j)",o.fullName+": array expected")("m%s=[]",i)("for(var i=0;i<d%s.length;++i){",i),a(n,o,r,i+"[i]")("}")("}")):(o.resolvedType instanceof h||n("if(d%s!=null){",i),a(n,o,r,i),o.resolvedType instanceof h||n("}"))}return n("return m")},t.toObject=function(e){var t=e.fieldsArray.slice().sort(f.compareFieldsById);if(!t.length)return f.codegen()("return {}");for(var n=f.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),r=[],o=[],i=[],a=0;a<t.length;++a)t[a].partOf||(t[a].resolve().repeated?r:t[a].map?o:i).push(t[a]);if(r.length){for(n("if(o.arrays||o.defaults){"),a=0;a<r.length;++a)n("d%s=[]",f.safeProp(r[a].name));n("}")}if(o.length){for(n("if(o.objects||o.defaults){"),a=0;a<o.length;++a)n("d%s={}",f.safeProp(o[a].name));n("}")}if(i.length){for(n("if(o.defaults){"),a=0;a<i.length;++a){var s,c=i[a],l=f.safeProp(c.name);c.resolvedType instanceof h?n("d%s=o.enums===String?%j:%j",l,c.resolvedType.valuesById[c.typeDefault],c.typeDefault):c.long?n("if(util.Long){")("var n=new util.Long(%i,%i,%j)",c.typeDefault.low,c.typeDefault.high,c.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",l)("}else")("d%s=o.longs===String?%j:%i",l,c.typeDefault.toString(),c.typeDefault.toNumber()):c.bytes?(s="["+Array.prototype.slice.call(c.typeDefault).join(",")+"]",n("if(o.bytes===String)d%s=%j",l,_StringfromCharCode.apply(String,c.typeDefault))("else{")("d%s=%s",l,s)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",l,l)("}")):n("d%s=%j",l,c.typeDefault)}n("}")}for(var d=!1,a=0;a<t.length;++a){var c=t[a],u=e._fieldsArray.indexOf(c),l=f.safeProp(c.name);c.map?(d||(d=!0,n("var ks2")),n("if(m%s&&(ks2=Object.keys(m%s)).length){",l,l)("d%s={}",l)("for(var j=0;j<ks2.length;++j){"),p(n,c,u,l+"[ks2[j]]")("}")):c.repeated?(n("if(m%s&&m%s.length){",l,l)("d%s=[]",l)("for(var j=0;j<m%s.length;++j){",l),p(n,c,u,l+"[j]")("}")):(n("if(m%s!=null&&m.hasOwnProperty(%j)){",l,c.name),p(n,c,u,l),c.partOf&&n("if(o.oneofs)")("d%s=%j",f.safeProp(c.partOf.name),c.name)),n("}")}return n("return d")}},2159:function(e,t,n){e.exports=function(e){var t=l.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter(function(e){return e.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break"),t("switch(t>>>3){");for(var n=0;n<e.fieldsArray.length;++n){var r=e._fieldsArray[n].resolve(),o=r.resolvedType instanceof s?"int32":r.type,i="m"+l.safeProp(r.name);t("case %i:",r.id),r.map?(t("if(%s===util.emptyObject)",i)("%s={}",i)("var c2 = r.uint32()+r.pos"),void 0===c.defaults[r.keyType]?t("k=null"):t("k=%j",c.defaults[r.keyType]),void 0===c.defaults[o]?t("value=null"):t("value=%j",c.defaults[o]),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",r.keyType)("case 2:"),void 0===c.basic[o]?t("value=types[%i].decode(r,r.uint32())",n):t("value=r.%s()",o),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0===c.long[r.keyType]?t("%s[k]=value",i):t('%s[typeof k==="object"?util.longToHash(k):k]=value',i)):r.repeated?(t("if(!(%s&&%s.length))",i,i)("%s=[]",i),void 0!==c.packed[o]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",i,o)("}else"),void 0===c.basic[o]?t(r.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",i,n):t("%s.push(r.%s())",i,o)):void 0===c.basic[o]?t(r.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",i,n):t("%s=r.%s()",i,o),t("break")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),n=0;n<e._fieldsArray.length;++n){var a=e._fieldsArray[n];a.required&&t("if(!m.hasOwnProperty(%j))",a.name)("throw util.ProtocolError(%j,{instance:m})","missing required '"+a.name+"'")}return t("return m")};var s=n(2012),c=n(1446),l=n(4537)},141:function(e,t,n){function l(e,t,n,r){t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",n,r,(3|t.id<<3)>>>0,(4|t.id<<3)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",n,r,(2|t.id<<3)>>>0)}e.exports=function(e){for(var t=p.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),n=e.fieldsArray.slice().sort(p.compareFieldsById),r=0;r<n.length;++r){var o=n[r].resolve(),i=e._fieldsArray.indexOf(o),a=o.resolvedType instanceof d?"int32":o.type,s=u.basic[a],c="m"+p.safeProp(o.name);o.map?(t("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",c,o.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",c)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(2|o.id<<3)>>>0,8|u.mapKey[o.keyType],o.keyType),void 0===s?t("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",i,c):t(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|s,a,c),t("}")("}")):o.repeated?(t("if(%s!=null&&%s.length){",c,c),o.packed&&void 0!==u.packed[a]?t("w.uint32(%i).fork()",(2|o.id<<3)>>>0)("for(var i=0;i<%s.length;++i)",c)("w.%s(%s[i])",a,c)("w.ldelim()"):(t("for(var i=0;i<%s.length;++i)",c),void 0===s?l(t,o,i,c+"[i]"):t("w.uint32(%i).%s(%s[i])",(o.id<<3|s)>>>0,a,c)),t("}")):(o.optional&&t("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",c,o.name),void 0===s?l(t,o,i,c):t("w.uint32(%i).%s(%s)",(o.id<<3|s)>>>0,a,c))}return t("return w")};var d=n(2012),u=n(1446),p=n(4537)},2012:function(e,t,n){function s(e){return(s="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function r(e,t,n,r,o){if(c.call(this,e,n),t&&"object"!==s(t))throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=r,this.comments=o||{},this.reserved=void 0,t)for(var i=Object.keys(t),a=0;a<i.length;++a)"number"==typeof t[i[a]]&&(this.valuesById[this.values[i[a]]=t[i[a]]]=i[a])}e.exports=r;var c=n(2400),o=(((r.prototype=Object.create(c.prototype)).constructor=r).className="Enum",n(2318)),i=n(4537);r.fromJSON=function(e,t){e=new r(e,t.values,t.options,t.comment,t.comments);return e.reserved=t.reserved,e},r.prototype.toJSON=function(e){e=!!e&&!!e.keepComments;return i.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",e?this.comment:void 0,"comments",e?this.comments:void 0])},r.prototype.add=function(e,t,n){if(!i.isString(e))throw TypeError("name must be a string");if(!i.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=n||null,this},r.prototype.remove=function(e){if(!i.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},r.prototype.isReservedId=function(e){return o.isReservedId(this.reserved,e)},r.prototype.isReservedName=function(e){return o.isReservedName(this.reserved,e)}},7353:function(e,t,n){function a(e){return(a="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function s(e,t,n,r,o,i,a){if(d.isObject(r)?(a=o,i=r,r=o=void 0):d.isObject(o)&&(a=i,i=o,o=void 0),c.call(this,e,i),!d.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!d.isString(n))throw TypeError("type must be a string");if(void 0!==r&&!u.test(r=r.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==o&&!d.isString(o))throw TypeError("extend must be a string");this.rule=(r="proto3_optional"===r?"optional":r)&&"optional"!==r?r:void 0,this.type=n,this.id=t,this.extend=o||void 0,this.required="required"===r,this.optional=!this.required,this.repeated="repeated"===r,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!d.Long&&void 0!==l.long[n],this.bytes="bytes"===n,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=a}e.exports=s;var c=n(2400);((s.prototype=Object.create(c.prototype)).constructor=s).className="Field";var r,o=n(2012),l=n(1446),d=n(4537),u=/^required|optional|repeated$/;s.fromJSON=function(e,t){return new s(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(s.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),s.prototype.setOption=function(e,t,n){return"packed"===e&&(this._packed=null),c.prototype.setOption.call(this,e,t,n)},s.prototype.toJSON=function(e){e=!!e&&!!e.keepComments;return d.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",e?this.comment:void 0])},s.prototype.resolve=function(){var e;return this.resolved?this:(void 0===(this.typeDefault=l.defaults[this.type])&&(this.resolvedType=(this.declaringField||this).parent.lookupTypeOrEnum(this.type),this.typeDefault=this.resolvedType instanceof r?null:this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof o)&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault]),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof o)||delete this.options.packed,!Object.keys(this.options).length)&&(this.options=void 0),this.long?(this.typeDefault=d.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault)):this.bytes&&"string"==typeof this.typeDefault&&(d.base64.test(this.typeDefault)?d.base64.decode(this.typeDefault,e=d.newBuffer(d.base64.length(this.typeDefault)),0):d.utf8.write(this.typeDefault,e=d.newBuffer(d.utf8.length(this.typeDefault)),0),this.typeDefault=e),this.defaultValue=this.map?d.emptyObject:this.repeated?d.emptyArray:this.typeDefault,this.parent instanceof r&&(this.parent.ctor.prototype[this.name]=this.defaultValue),c.prototype.resolve.call(this))},s.d=function(n,r,o,i){return"function"==typeof r?r=d.decorateType(r).name:r&&"object"===a(r)&&(r=d.decorateEnum(r).name),function(e,t){d.decorateType(e.constructor).add(new s(t,n,r,o,{default:i}))}},s._configure=function(e){r=e}},1027:function(e,t,n){var r=e.exports=n(8046);r.build="light",r.load=function(e,t,n){return"function"==typeof t?(n=t,t=new r.Root):t||(t=new r.Root),t.load(e,n)},r.loadSync=function(e,t){return(t=t||new r.Root).loadSync(e)},r.encoder=n(141),r.decoder=n(2159),r.verifier=n(860),r.converter=n(4490),r.ReflectionObject=n(2400),r.Namespace=n(2318),r.Root=n(3109),r.Enum=n(2012),r.Type=n(9345),r.Field=n(7353),r.OneOf=n(4774),r.MapField=n(6017),r.Service=n(1267),r.Method=n(1731),r.Message=n(3143),r.wrappers=n(6606),r.types=n(1446),r.util=n(4537),r.ReflectionObject._configure(r.Root),r.Namespace._configure(r.Type,r.Service,r.Enum),r.Root._configure(r.Type),r.Field._configure(r.Type)},8046:function(e,t,n){function r(){o.util._configure(),o.Writer._configure(o.BufferWriter),o.Reader._configure(o.BufferReader)}var o=t;o.build="minimal",o.Writer=n(5437),o.BufferWriter=n(8909),o.Reader=n(1381),o.BufferReader=n(2709),o.util=n(6503),o.rpc=n(921),o.roots=n(2575),o.configure=r,r()},6017:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function a(e,t,n,r,o,i){if(s.call(this,e,t,r,void 0,void 0,o,i),!c.isString(n))throw TypeError("keyType must be a string");this.keyType=n,this.resolvedKeyType=null,this.map=!0}e.exports=a;var s=n(7353),r=(((a.prototype=Object.create(s.prototype)).constructor=a).className="MapField",n(1446)),c=n(4537);a.fromJSON=function(e,t){return new a(e,t.id,t.keyType,t.type,t.options,t.comment)},a.prototype.toJSON=function(e){e=!!e&&!!e.keepComments;return c.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",e?this.comment:void 0])},a.prototype.resolve=function(){if(this.resolved)return this;if(void 0===r.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return s.prototype.resolve.call(this)},a.d=function(n,r,o){return"function"==typeof o?o=c.decorateType(o).name:o&&"object"===i(o)&&(o=c.decorateEnum(o).name),function(e,t){c.decorateType(e.constructor).add(new a(t,n,r,o))}}},3143:function(e,t,n){function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)this[t[n]]=e[t[n]]}e.exports=r;var o=n(6503);r.create=function(e){return this.$type.create(e)},r.encode=function(e,t){return this.$type.encode(e,t)},r.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},r.decode=function(e){return this.$type.decode(e)},r.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},r.verify=function(e){return this.$type.verify(e)},r.fromObject=function(e){return this.$type.fromObject(e)},r.toObject=function(e,t){return this.$type.toObject(e,t)},r.prototype.toJSON=function(){return this.$type.toObject(this,o.toJSONOptions)}},1731:function(e,t,n){function r(e,t,n,r,o,i,a,s,c){if(d.isObject(o)?(a=o,o=i=void 0):d.isObject(i)&&(a=i,i=void 0),void 0!==t&&!d.isString(t))throw TypeError("type must be a string");if(!d.isString(n))throw TypeError("requestType must be a string");if(!d.isString(r))throw TypeError("responseType must be a string");l.call(this,e,a),this.type=t||"rpc",this.requestType=n,this.requestStream=!!o||void 0,this.responseType=r,this.responseStream=!!i||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=s,this.parsedOptions=c}e.exports=r;var l=n(2400),d=(((r.prototype=Object.create(l.prototype)).constructor=r).className="Method",n(4537));r.fromJSON=function(e,t){return new r(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},r.prototype.toJSON=function(e){e=!!e&&!!e.keepComments;return d.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",e?this.comment:void 0,"parsedOptions",this.parsedOptions])},r.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),l.prototype.resolve.call(this))}},2318:function(e,t,n){function r(e,t){if(e&&e.length){for(var n={},r=0;r<e.length;++r)n[e[r].name]=e[r].toJSON(t);return n}}function i(e,t){a.call(this,e,t),this.nested=void 0,this._nestedArray=null}function o(e){return e._nestedArray=null,e}e.exports=i;var a=n(2400);((i.prototype=Object.create(a.prototype)).constructor=i).className="Namespace";var s,c,l,d=n(7353),u=n(4774),p=n(4537);i.fromJSON=function(e,t){return new i(e,t.options).addJSON(t.nested)},i.arrayToJSON=r,i.isReservedId=function(e,t){if(e)for(var n=0;n<e.length;++n)if("string"!=typeof e[n]&&e[n][0]<=t&&e[n][1]>t)return!0;return!1},i.isReservedName=function(e,t){if(e)for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1},Object.defineProperty(i.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=p.toArray(this.nested))}}),i.prototype.toJSON=function(e){return p.toObject(["options",this.options,"nested",r(this.nestedArray,e)])},i.prototype.addJSON=function(e){if(e)for(var t,n=Object.keys(e),r=0;r<n.length;++r)t=e[n[r]],this.add((void 0===t.fields?void 0===t.values?void 0===t.methods?void 0===t.id?i:d:c:l:s).fromJSON(n[r],t));return this},i.prototype.get=function(e){return this.nested&&this.nested[e]||null},i.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof l)return this.nested[e].values;throw Error("no such enum: "+e)},i.prototype.add=function(e){if(!(e instanceof d&&void 0!==e.extend||e instanceof s||e instanceof l||e instanceof c||e instanceof i||e instanceof u))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof i&&e instanceof i)||t instanceof s||t instanceof c)throw Error("duplicate name '"+e.name+"' in "+this);for(var n=t.nestedArray,r=0;r<n.length;++r)e.add(n[r]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return(this.nested[e.name]=e).onAdd(this),o(this)},i.prototype.remove=function(e){if(!(e instanceof a))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),o(this)},i.prototype.define=function(e,t){if(p.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var n,r=this;0<e.length;)if(n=e.shift(),r.nested&&r.nested[n]){if(!((r=r.nested[n])instanceof i))throw Error("path conflicts with non-namespace objects")}else r.add(r=new i(n));return t&&r.addJSON(t),r},i.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof i?e[t++].resolveAll():e[t++].resolve();return this.resolve()},i.prototype.lookup=function(e,t,n){if("boolean"==typeof t?(n=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),p.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var r=this.get(e[0]);if(r){if(1===e.length){if(!t||-1<t.indexOf(r.constructor))return r}else if(r instanceof i&&(r=r.lookup(e.slice(1),t,!0)))return r}else for(var o=0;o<this.nestedArray.length;++o)if(this._nestedArray[o]instanceof i&&(r=this._nestedArray[o].lookup(e,t,!0)))return r;return null===this.parent||n?null:this.parent.lookup(e,t)},i.prototype.lookupType=function(e){var t=this.lookup(e,[s]);if(t)return t;throw Error("no such type: "+e)},i.prototype.lookupEnum=function(e){var t=this.lookup(e,[l]);if(t)return t;throw Error("no such Enum '"+e+"' in "+this)},i.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[s,l]);if(t)return t;throw Error("no such Type or Enum '"+e+"' in "+this)},i.prototype.lookupService=function(e){var t=this.lookup(e,[c]);if(t)return t;throw Error("no such Service '"+e+"' in "+this)},i._configure=function(e,t,n){s=e,c=t,l=n}},2400:function(e,t,n){function r(e,t){if(!a.isString(e))throw TypeError("name must be a string");if(t&&!a.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}(e.exports=r).className="ReflectionObject";var o,a=n(4537);Object.defineProperties(r.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),r.prototype.toJSON=function(){throw Error()},r.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;e=e.root;e instanceof o&&e._handleAdd(this)},r.prototype.onRemove=function(e){e=e.root;e instanceof o&&e._handleRemove(this),this.parent=null,this.resolved=!1},r.prototype.resolve=function(){return this.resolved||this.root instanceof o&&(this.resolved=!0),this},r.prototype.getOption=function(e){return this.options?this.options[e]:void 0},r.prototype.setOption=function(e,t,n){return n&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},r.prototype.setParsedOption=function(t,e,n){this.parsedOptions||(this.parsedOptions=[]);var r,o,i=this.parsedOptions;return n?(r=i.find(function(e){return Object.prototype.hasOwnProperty.call(e,t)}))?(o=r[t],a.setProperty(o,n,e)):((r={})[t]=a.setProperty({},n,e),i.push(r)):((o={})[t]=e,i.push(o)),this},r.prototype.setOptions=function(e,t){if(e)for(var n=Object.keys(e),r=0;r<n.length;++r)this.setOption(n[r],e[n[r]],t);return this},r.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},r._configure=function(e){o=e}},4774:function(e,t,n){function r(e,t,n,r){if(Array.isArray(t)||(n=t,t=void 0),i.call(this,e,n),void 0!==t&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=r}function o(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}e.exports=r;var i=n(2400),a=(((r.prototype=Object.create(i.prototype)).constructor=r).className="OneOf",n(7353)),s=n(4537);r.fromJSON=function(e,t){return new r(e,t.oneof,t.options,t.comment)},r.prototype.toJSON=function(e){e=!!e&&!!e.keepComments;return s.toObject(["options",this.options,"oneof",this.oneof,"comment",e?this.comment:void 0])},r.prototype.add=function(e){if(e instanceof a)return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),o(e.partOf=this),this;throw TypeError("field must be a Field")},r.prototype.remove=function(e){if(!(e instanceof a))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),-1<(t=this.oneof.indexOf(e.name))&&this.oneof.splice(t,1),e.partOf=null,this},r.prototype.onAdd=function(e){i.prototype.onAdd.call(this,e);for(var t,n=0;n<this.oneof.length;++n)(t=e.get(this.oneof[n]))&&!t.partOf&&(t.partOf=this).fieldsArray.push(t);o(this)},r.prototype.onRemove=function(e){for(var t,n=0;n<this.fieldsArray.length;++n)(t=this.fieldsArray[n]).parent&&t.parent.remove(t);i.prototype.onRemove.call(this,e)},r.d=function(){for(var n=Array(arguments.length),e=0;e<arguments.length;)n[e]=arguments[e++];return function(e,t){s.decorateType(e.constructor).add(new r(t,n)),Object.defineProperty(e,t,{get:s.oneOfGetter(n),set:s.oneOfSetter(n)})}}},1381:function(e,t,n){function r(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function o(e){this.buf=e,this.pos=0,this.len=e.length}function i(){var e=new p(0,0),t=0;if(!(4<this.len-this.pos)){for(;t<3;++t){if(this.pos>=this.len)throw r(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,4<this.len-this.pos){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw r(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function a(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function s(){if(this.pos+8>this.len)throw r(this,8);return new p(a(this.buf,this.pos+=4),a(this.buf,this.pos+=4))}e.exports=o;function c(){return u.Buffer?function(e){return(o.create=function(e){return u.Buffer.isBuffer(e)?new l(e):f(e)})(e)}:f}var l,d,u=n(6503),p=u.LongBits,h=u.utf8,f="undefined"==typeof Uint8Array?function(e){if(Array.isArray(e))return new o(e);throw Error("illegal buffer")}:function(e){if(e instanceof Uint8Array||Array.isArray(e))return new o(e);throw Error("illegal buffer")};o.create=c(),o.prototype._slice=u.Array.prototype.subarray||u.Array.prototype.slice,o.prototype.uint32=(d=4294967295,function(){if(d=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(d=(d|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(d=(d|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(d=(d|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(d=(d|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)||!((this.pos+=5)>this.len))return d;throw this.pos=this.len,r(this,10)}),o.prototype.int32=function(){return 0|this.uint32()},o.prototype.sint32=function(){var e=this.uint32();return 0|e>>>1^-(1&e)},o.prototype.bool=function(){return 0!==this.uint32()},o.prototype.fixed32=function(){if(this.pos+4>this.len)throw r(this,4);return a(this.buf,this.pos+=4)},o.prototype.sfixed32=function(){if(this.pos+4>this.len)throw r(this,4);return 0|a(this.buf,this.pos+=4)},o.prototype.float=function(){if(this.pos+4>this.len)throw r(this,4);var e=u.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},o.prototype.double=function(){if(this.pos+8>this.len)throw r(this,4);var e=u.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},o.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw r(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},o.prototype.string=function(){var e=this.bytes();return h.read(e,0,e.length)},o.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw r(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw r(this)}while(128&this.buf[this.pos++]);return this},o.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},o._configure=function(e){l=e,o.create=c(),l._configure();var t=u.Long?"toLong":"toNumber";u.merge(o.prototype,{int64:function(){return i.call(this)[t](!1)},uint64:function(){return i.call(this)[t](!0)},sint64:function(){return i.call(this).zzDecode()[t](!1)},fixed64:function(){return s.call(this)[t](!0)},sfixed64:function(){return s.call(this)[t](!1)}})}},2709:function(e,t,n){function r(e){o.call(this,e)}e.exports=r;var o=n(1381),i=((r.prototype=Object.create(o.prototype)).constructor=r,n(6503));r._configure=function(){i.Buffer&&(r.prototype._slice=i.Buffer.prototype.slice)},r.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=_Mathmin(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=_Mathmin(this.pos+e,this.len))},r._configure()},3109:function(e,t,n){function r(e){i.call(this,"",e),this.deferred=[],this.files=[]}function h(){}function o(e,t){var n,r=t.parent.lookup(t.extend);if(r)return((n=new s(t.fullName,t.id,t.type,t.rule,void 0,t.options)).declaringField=t).extensionField=n,r.add(n),1}e.exports=r;var i=n(2318);((r.prototype=Object.create(i.prototype)).constructor=r).className="Root";var a,f,m,s=n(7353),c=n(2012),l=n(4774),A=n(4537),d=(r.fromJSON=function(e,t){return t=t||new r,e.options&&t.setOptions(e.options),t.addJSON(e.nested)},r.prototype.resolvePath=A.path.resolve,r.prototype.fetch=A.fetch,r.prototype.load=function e(t,i,o){function a(e,t){if(o){var n=o;if(o=null,u)throw e;n(e,t)}}function s(e){var t=e.lastIndexOf("google/protobuf/");if(-1<t){e=e.substring(t);if(e in m)return e}return null}function c(e,t){try{if(A.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),A.isString(t)){f.filename=e;var n,r=f(t,d,i),o=0;if(r.imports)for(;o<r.imports.length;++o)(n=s(r.imports[o])||d.resolvePath(e,r.imports[o]))&&l(n);if(r.weakImports)for(o=0;o<r.weakImports.length;++o)(n=s(r.weakImports[o])||d.resolvePath(e,r.weakImports[o]))&&l(n,!0)}else d.setOptions(t.options).addJSON(t.nested)}catch(e){a(e)}u||p||a(null,d)}function l(n,r){if(!(-1<d.files.indexOf(n))){if(d.files.push(n),n in m)return u?c(n,m[n]):(++p,setTimeout(function(){--p,c(n,m[n])}));if(u){var e;try{e=A.fs.readFileSync(n).toString("utf8")}catch(n){return r||a(n)}c(n,e)}else++p,d.fetch(n,function(e,t){return--p,o?e?void(r?p||a(null,d):a(e)):void c(n,t):void 0})}}"function"==typeof i&&(o=i,i=void 0);var d=this;if(!o)return A.asPromise(e,d,t,i);var u=o===h,p=0;A.isString(t)&&(t=[t]);for(var n,r=0;r<t.length;++r)(n=d.resolvePath("",t[r]))&&l(n);return u?d:void(p||a(null,d))},r.prototype.loadSync=function(e,t){if(A.isNode)return this.load(e,t,h);throw Error("not supported")},r.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(e){return"'extend "+e.extend+"' in "+e.parent.fullName}).join(", "));return i.prototype.resolveAll.call(this)},/^[A-Z]/);r.prototype._handleAdd=function(e){if(e instanceof s)void 0===e.extend||e.extensionField||o(0,e)||this.deferred.push(e);else if(e instanceof c)d.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof l)){if(e instanceof a)for(var t=0;t<this.deferred.length;)o(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var n=0;n<e.nestedArray.length;++n)this._handleAdd(e._nestedArray[n]);d.test(e.name)&&(e.parent[e.name]=e)}},r.prototype._handleRemove=function(e){var t;if(e instanceof s)void 0!==e.extend&&(e.extensionField?(e.extensionField.parent.remove(e.extensionField),e.extensionField=null):-1<(t=this.deferred.indexOf(e))&&this.deferred.splice(t,1));else if(e instanceof c)d.test(e.name)&&delete e.parent[e.name];else if(e instanceof i){for(var n=0;n<e.nestedArray.length;++n)this._handleRemove(e._nestedArray[n]);d.test(e.name)&&delete e.parent[e.name]}},r._configure=function(e,t,n){a=e,f=t,m=n}},2575:function(e){e.exports={}},921:function(e,t,n){t.Service=n(1430)},1430:function(e,t,n){function r(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");s.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=!!t,this.responseDelimited=!!n}e.exports=r;var s=n(6503);((r.prototype=Object.create(s.EventEmitter.prototype)).constructor=r).prototype.rpcCall=function e(n,t,r,o,i){if(!o)throw TypeError("request must be specified");var a=this;if(!i)return s.asPromise(e,a,n,t,r,o);if(a.rpcImpl)try{return a.rpcImpl(n,t[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(e,t){if(e)return a.emit("error",e,n),i(e);if(null!==t){if(!(t instanceof r))try{t=r[a.responseDelimited?"decodeDelimited":"decode"](t)}catch(e){return a.emit("error",e,n),i(e)}return a.emit("data",t,n),i(null,t)}a.end(!0)})}catch(e){a.emit("error",e,n),setTimeout(function(){i(e)},0)}else setTimeout(function(){i(Error("already ended"))},0)},r.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1267:function(e,t,n){function i(e,t){o.call(this,e,t),this.methods={},this._methodsArray=null}function r(e){return e._methodsArray=null,e}e.exports=i;var o=n(2318),a=(((i.prototype=Object.create(o.prototype)).constructor=i).className="Service",n(1731)),s=n(4537),c=n(921);i.fromJSON=function(e,t){var n=new i(e,t.options);if(t.methods)for(var r=Object.keys(t.methods),o=0;o<r.length;++o)n.add(a.fromJSON(r[o],t.methods[r[o]]));return t.nested&&n.addJSON(t.nested),n.comment=t.comment,n},i.prototype.toJSON=function(e){var t=o.prototype.toJSON.call(this,e),n=!!e&&!!e.keepComments;return s.toObject(["options",t&&t.options||void 0,"methods",o.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",n?this.comment:void 0])},Object.defineProperty(i.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=s.toArray(this.methods))}}),i.prototype.get=function(e){return this.methods[e]||o.prototype.get.call(this,e)},i.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return o.prototype.resolve.call(this)},i.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof a?r((this.methods[e.name]=e).parent=this):o.prototype.add.call(this,e)},i.prototype.remove=function(e){if(e instanceof a){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,r(this)}return o.prototype.remove.call(this,e)},i.prototype.create=function(e,t,n){for(var r,o,i=new c.Service(e,t,n),a=0;a<this.methodsArray.length;++a)i[o=s.lcFirst((r=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"")]=s.codegen(["r","c"],s.isReserved(o)?o+"_":o)("return this.rpcCall(m,q,s,r,c)")({m:r,q:r.resolvedRequestType.ctor,s:r.resolvedResponseType.ctor});return i}},9345:function(e,t,n){function a(e,t){s.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function r(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}e.exports=a;var s=n(2318),c=(((a.prototype=Object.create(s.prototype)).constructor=a).className="Type",n(2012)),l=n(4774),d=n(7353),u=n(6017),p=n(1267),o=n(3143),i=n(1381),h=n(5437),f=n(4537),m=n(141),A=n(2159),y=n(860),_=n(4490),g=n(6606);Object.defineProperties(a.prototype,{fieldsById:{get:function(){if(!this._fieldsById){this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var n=this.fields[e[t]],r=n.id;if(this._fieldsById[r])throw Error("duplicate id "+r+" in "+this);this._fieldsById[r]=n}}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=f.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=f.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=a.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof o||((e.prototype=new o).constructor=e,f.merge(e.prototype,t)),e.$type=e.prototype.$type=this,f.merge(e,o,!0),this._ctor=e;for(var n=0;n<this.fieldsArray.length;++n)this._fieldsArray[n].resolve();for(var r={},n=0;n<this.oneofsArray.length;++n)r[this._oneofsArray[n].resolve().name]={get:f.oneOfGetter(this._oneofsArray[n].oneof),set:f.oneOfSetter(this._oneofsArray[n].oneof)};n&&Object.defineProperties(e.prototype,r)}}}),a.generateConstructor=function(e){for(var t,n=f.codegen(["p"],e.name),r=0;r<e.fieldsArray.length;++r)(t=e._fieldsArray[r]).map?n("this%s={}",f.safeProp(t.name)):t.repeated&&n("this%s=[]",f.safeProp(t.name));return n("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},a.fromJSON=function(e,t){var n=new a(e,t.options);n.extensions=t.extensions,n.reserved=t.reserved;for(var r=Object.keys(t.fields),o=0;o<r.length;++o)n.add((void 0===t.fields[r[o]].keyType?d:u).fromJSON(r[o],t.fields[r[o]]));if(t.oneofs)for(r=Object.keys(t.oneofs),o=0;o<r.length;++o)n.add(l.fromJSON(r[o],t.oneofs[r[o]]));if(t.nested)for(r=Object.keys(t.nested),o=0;o<r.length;++o){var i=t.nested[r[o]];n.add((void 0===i.id?void 0===i.fields?void 0===i.values?void 0===i.methods?s:p:c:a:d).fromJSON(r[o],i))}return t.extensions&&t.extensions.length&&(n.extensions=t.extensions),t.reserved&&t.reserved.length&&(n.reserved=t.reserved),t.group&&(n.group=!0),t.comment&&(n.comment=t.comment),n},a.prototype.toJSON=function(e){var t=s.prototype.toJSON.call(this,e),n=!!e&&!!e.keepComments;return f.toObject(["options",t&&t.options||void 0,"oneofs",s.arrayToJSON(this.oneofsArray,e),"fields",s.arrayToJSON(this.fieldsArray.filter(function(e){return!e.declaringField}),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",n?this.comment:void 0])},a.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();for(var n=this.oneofsArray,t=0;t<n.length;)n[t++].resolve();return s.prototype.resolveAll.call(this)},a.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},a.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof d&&void 0===e.extend){if((this._fieldsById||this.fieldsById)[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),(this.fields[e.name]=e).message=this,e.onAdd(this),r(this)}return e instanceof l?(this.oneofs||(this.oneofs={}),(this.oneofs[e.name]=e).onAdd(this),r(this)):s.prototype.add.call(this,e)},a.prototype.remove=function(e){if(e instanceof d&&void 0===e.extend){if(this.fields&&this.fields[e.name]===e)return delete this.fields[e.name],e.parent=null,e.onRemove(this),r(this);throw Error(e+" is not a member of "+this)}if(e instanceof l){if(this.oneofs&&this.oneofs[e.name]===e)return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),r(this);throw Error(e+" is not a member of "+this)}return s.prototype.remove.call(this,e)},a.prototype.isReservedId=function(e){return s.isReservedId(this.reserved,e)},a.prototype.isReservedName=function(e){return s.isReservedName(this.reserved,e)},a.prototype.create=function(e){return new this.ctor(e)},a.prototype.setup=function(){for(var e=this.fullName,t=[],n=0;n<this.fieldsArray.length;++n)t.push(this._fieldsArray[n].resolve().resolvedType);this.encode=m(this)({Writer:h,types:t,util:f}),this.decode=A(this)({Reader:i,types:t,util:f}),this.verify=y(this)({types:t,util:f}),this.fromObject=_.fromObject(this)({types:t,util:f}),this.toObject=_.toObject(this)({types:t,util:f});var r,e=g[e];return e&&((r=Object.create(this)).fromObject=this.fromObject,this.fromObject=e.fromObject.bind(r),r.toObject=this.toObject,this.toObject=e.toObject.bind(r)),this},a.prototype.encode=function(e,t){return this.setup().encode(e,t)},a.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},a.prototype.decode=function(e,t){return this.setup().decode(e,t)},a.prototype.decodeDelimited=function(e){return e instanceof i||(e=i.create(e)),this.decode(e,e.uint32())},a.prototype.verify=function(e){return this.setup().verify(e)},a.prototype.fromObject=function(e){return this.setup().fromObject(e)},a.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},a.d=function(t){return function(e){f.decorateType(e,t)}}},1446:function(e,t,n){function r(e,t){var n=0,r={};for(t|=0;n<e.length;)r[o[n+t]]=e[n++];return r}var n=n(4537),o=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];t.basic=r([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),t.defaults=r([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",n.emptyArray,null]),t.long=r([0,0,0,1,1],7),t.mapKey=r([0,0,0,5,5,0,0,0,1,1,0,2],2),t.packed=r([1,5,0,0,0,5,5,0,0,0,1,1,0])},4537:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o,i,a=e.exports=n(6503),s=n(2575),c=(a.codegen=n(4579),a.fetch=n(5383),a.path=n(5152),a.fs=a.inquire("fs"),a.toArray=function(e){if(e){for(var t=Object.keys(e),n=Array(t.length),r=0;r<t.length;)n[r]=e[t[r++]];return n}return[]},a.toObject=function(e){for(var t={},n=0;n<e.length;){var r=e[n++],o=e[n++];void 0!==o&&(t[r]=o)}return t},/\\/g),l=/"/g,d=(a.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},a.safeProp=function(e){return!/^[$\w_]+$/.test(e)||a.isReserved(e)?'["'+e.replace(c,"\\\\").replace(l,'\\"')+'"]':"."+e},a.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)},/_([a-z])/g),u=(a.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(d,function(e,t){return t.toUpperCase()})},a.compareFieldsById=function(e,t){return e.id-t.id},a.decorateType=function(e,t){return e.$type?(t&&e.$type.name!==t&&(a.decorateRoot.remove(e.$type),e.$type.name=t,a.decorateRoot.add(e.$type)),e.$type):(t=new(o=o||n(9345))(t||e.name),a.decorateRoot.add(t),t.ctor=e,Object.defineProperty(e,"$type",{value:t,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:t,enumerable:!1}),t)},0);a.decorateEnum=function(e){var t;return e.$type||(t=new(i=i||n(2012))("Enum"+u++,e),a.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t)},a.setProperty=function(e,t,n){if("object"!==r(e))throw TypeError("dst must be an object");if(t)return function e(t,n,r){var o=n.shift();return"__proto__"!==o&&"prototype"!==o&&(0<n.length?t[o]=e(t[o]||{},n,r):((n=t[o])&&(r=[].concat(n).concat(r)),t[o]=r)),t}(e,t=t.split("."),n);throw TypeError("path must be specified")},Object.defineProperty(a,"decorateRoot",{get:function(){return s.decorated||(s.decorated=new(n(3109)))}})},7705:function(e,t,n){function r(e,t){this.lo=e>>>0,this.hi=t>>>0}e.exports=r;var o=n(6503),i=r.zero=new r(0,0),a=(i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1},r.zeroHash="\0\0\0\0\0\0\0\0",r.fromNumber=function(e){var t,n;return 0===e?i:(n=(e=(t=e<0)?-e:e)>>>0,e=(e-n)/4294967296>>>0,t&&(e=~e>>>0,n=~n>>>0,4294967295<++n)&&(n=0,4294967295<++e)&&(e=0),new r(n,e))},r.from=function(e){if("number"==typeof e)return r.fromNumber(e);if(o.isString(e)){if(!o.Long)return r.fromNumber(parseInt(e,10));e=o.Long.fromString(e)}return e.low||e.high?new r(e.low>>>0,e.high>>>0):i},r.prototype.toNumber=function(e){var t;return!e&&this.hi>>>31?(e=1+~this.lo>>>0,t=~this.hi>>>0,-(e+4294967296*(t=e?t:t+1>>>0))):this.lo+4294967296*this.hi},r.prototype.toLong=function(e){return o.Long?new o.Long(0|this.lo,0|this.hi,!!e):{low:0|this.lo,high:0|this.hi,unsigned:!!e}},String.prototype.charCodeAt);r.fromHash=function(e){return"\0\0\0\0\0\0\0\0"===e?i:new r((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},r.prototype.toHash=function(){return _StringfromCharCode(255&this.lo,255&this.lo>>>8,255&this.lo>>>16,this.lo>>>24,255&this.hi,255&this.hi>>>8,255&this.hi>>>16,this.hi>>>24)},r.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},r.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},r.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0==n?0==t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},6503:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function o(e,t,n){for(var r=Object.keys(t),o=0;o<r.length;++o)void 0!==e[r[o]]&&n||(e[r[o]]=t[r[o]]);return e}function i(e){function n(e,t){return this instanceof n?(Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,n):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),void(t&&o(this,t))):new n(e,t)}return(n.prototype=Object.create(Error.prototype)).constructor=n,Object.defineProperty(n.prototype,"name",{get:function(){return e}}),n.prototype.toString=function(){return this.name+": "+this.message},n}var a=t;a.asPromise=n(1174),a.base64=n(2840),a.EventEmitter=n(5306),a.float=n(6110),a.inquire=n(908),a.utf8=n(3541),a.pool=n(7479),a.LongBits=n(7705),a.isNode=!!(void 0!==n.g&&n.g&&n.g.process&&n.g.process.versions&&n.g.process.versions.node),a.global=a.isNode&&n.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,a.emptyArray=Object.freeze?Object.freeze([]):[],a.emptyObject=Object.freeze?Object.freeze({}):{},a.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&_Mathfloor(e)===e},a.isString=function(e){return"string"==typeof e||e instanceof String},a.isObject=function(e){return e&&"object"===r(e)},a.isset=a.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!==r(n)||0<(Array.isArray(n)?n:Object.keys(n)).length)},a.Buffer=function(){try{var e=a.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),a._Buffer_from=null,a._Buffer_allocUnsafe=null,a.newBuffer=function(e){return"number"==typeof e?a.Buffer?a._Buffer_allocUnsafe(e):new a.Array(e):a.Buffer?a._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},a.Array="undefined"==typeof Uint8Array?Array:Uint8Array,a.Long=a.global.dcodeIO&&a.global.dcodeIO.Long||a.global.Long||a.inquire("long"),a.key2Re=/^true|false|0|1$/,a.key32Re=/^-?(?:0|[1-9][0-9]*)$/,a.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,a.longToHash=function(e){return e?a.LongBits.from(e).toHash():a.LongBits.zeroHash},a.longFromHash=function(e,t){e=a.LongBits.fromHash(e);return a.Long?a.Long.fromBits(e.lo,e.hi,t):e.toNumber(!!t)},a.merge=o,a.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},a.newError=i,a.ProtocolError=i("ProtocolError"),a.oneOfGetter=function(e){for(var n={},t=0;t<e.length;++t)n[e[t]]=1;return function(){for(var e=Object.keys(this),t=e.length-1;-1<t;--t)if(1===n[e[t]]&&void 0!==this[e[t]]&&null!==this[e[t]])return e[t]}},a.oneOfSetter=function(n){return function(e){for(var t=0;t<n.length;++t)n[t]!==e&&delete this[n[t]]}},a.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},a._configure=function(){var n=a.Buffer;return n?(a._Buffer_from=n.from!==Uint8Array.from&&n.from||function(e,t){return new n(e,t)},void(a._Buffer_allocUnsafe=n.allocUnsafe||function(e){return new n(e)})):void(a._Buffer_from=a._Buffer_allocUnsafe=null)}},860:function(e,t,n){function d(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function u(e,t,n,r){if(t.resolvedType)if(t.resolvedType instanceof a){e("switch(%s){",r)("default:")("return%j",d(t,"enum value"));for(var o=Object.keys(t.resolvedType.values),i=0;i<o.length;++i)e("case %i:",t.resolvedType.values[o[i]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",n,r)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",r)("return%j",d(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",r,r,r,r)("return%j",d(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',r)("return%j",d(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',r)("return%j",d(t,"boolean"));break;case"string":e("if(!util.isString(%s))",r)("return%j",d(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',r,r,r)("return%j",d(t,"buffer"))}return e}e.exports=function(e){var t=p.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),n={};e.oneofsArray.length&&t("var p={}");for(var r=0;r<e.fieldsArray.length;++r){var o,i=e._fieldsArray[r].resolve(),a="m"+p.safeProp(i.name);if(i.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",a,i.name),i.map){t("if(!util.isObject(%s))",a)("return%j",d(i,"object"))("var k=Object.keys(%s)",a)("for(var i=0;i<k.length;++i){"),l=c=s=void 0;var s=t,c=i,l="k[i]";switch(c.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":s("if(!util.key32Re.test(%s))",l)("return%j",d(c,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":s("if(!util.key64Re.test(%s))",l)("return%j",d(c,"integer|Long key"));break;case"bool":s("if(!util.key2Re.test(%s))",l)("return%j",d(c,"boolean key"))}u(t,i,r,a+"[k[i]]")("}")}else i.repeated?(t("if(!Array.isArray(%s))",a)("return%j",d(i,"array"))("for(var i=0;i<%s.length;++i){",a),u(t,i,r,a+"[i]")("}")):(i.partOf&&(o=p.safeProp(i.partOf.name),1===n[i.partOf.name]&&t("if(p%s===1)",o)("return%j",i.partOf.name+": multiple values"),n[i.partOf.name]=1,t("p%s=1",o)),u(t,i,r,a));i.optional&&t("}")}return t("return null")};var a=n(2012),p=n(4537)},6606:function(e,t,n){var i=n(3143);t[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t,n=e["@type"].substring(e["@type"].lastIndexOf("/")+1),n=this.lookup(n);if(n)return-1===(t="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"]).indexOf("/")&&(t="/"+t),this.create({type_url:t,value:n.encode(n.fromObject(e)).finish()})}return this.fromObject(e)},toObject:function(e,t){var n,r="",o="";return!((e=t&&t.json&&e.type_url&&e.value&&(o=e.type_url.substring(e.type_url.lastIndexOf("/")+1),r=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1),n=this.lookup(o))?n.decode(e.value):e)instanceof this.ctor)&&e instanceof i?(n=e.$type.toObject(e,t),o=(r=""===r?"type.googleapis.com/":r)+("."===e.$type.fullName[0]?e.$type.fullName.substr(1):e.$type.fullName),n["@type"]=o,n):this.toObject(e,t)}}},5437:function(e,t,n){function r(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function o(){}function i(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function a(){this.len=0,this.head=new r(o,0,0),this.tail=this.head,this.states=null}function s(e,t,n){t[n]=255&e}function c(e,t){this.len=e,this.next=void 0,this.val=t}function l(e,t,n){for(;e.hi;)t[n++]=128|127&e.lo,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;127<e.lo;)t[n++]=128|127&e.lo,e.lo>>>=7;t[n++]=e.lo}function d(e,t,n){t[n]=255&e,t[n+1]=255&e>>>8,t[n+2]=255&e>>>16,t[n+3]=e>>>24}e.exports=a;function u(){return h.Buffer?function(){return(a.create=function(){return new p})()}:function(){return new a}}var p,h=n(6503),f=h.LongBits,m=h.base64,A=h.utf8,y=(a.create=u(),a.alloc=function(e){return new h.Array(e)},h.Array!==Array&&(a.alloc=h.pool(a.alloc,h.Array.prototype.subarray)),a.prototype._push=function(e,t,n){return this.tail=this.tail.next=new r(e,t,n),this.len+=t,this},(c.prototype=Object.create(r.prototype)).fn=function(e,t,n){for(;127<e;)t[n++]=128|127&e,e>>>=7;t[n]=e},a.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new c((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},a.prototype.int32=function(e){return e<0?this._push(l,10,f.fromNumber(e)):this.uint32(e)},a.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},a.prototype.int64=a.prototype.uint64=function(e){e=f.from(e);return this._push(l,e.length(),e)},a.prototype.sint64=function(e){e=f.from(e).zzEncode();return this._push(l,e.length(),e)},a.prototype.bool=function(e){return this._push(s,1,e?1:0)},a.prototype.sfixed32=a.prototype.fixed32=function(e){return this._push(d,4,e>>>0)},a.prototype.sfixed64=a.prototype.fixed64=function(e){e=f.from(e);return this._push(d,4,e.lo)._push(d,4,e.hi)},a.prototype.float=function(e){return this._push(h.float.writeFloatLE,4,e)},a.prototype.double=function(e){return this._push(h.float.writeDoubleLE,8,e)},h.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]});a.prototype.bytes=function(e){var t,n=e.length>>>0;return n?(h.isString(e)&&(t=a.alloc(n=m.length(e)),m.decode(e,t,0),e=t),this.uint32(n)._push(y,n,e)):this._push(s,1,0)},a.prototype.string=function(e){var t=A.length(e);return t?this.uint32(t)._push(A.write,t,e):this._push(s,1,0)},a.prototype.fork=function(){return this.states=new i(this),this.head=this.tail=new r(o,0,0),this.len=0,this},a.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new r(o,0,0),this.len=0),this},a.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},a.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},a._configure=function(e){p=e,a.create=u(),p._configure()}},8909:function(e,t,n){function r(){i.call(this)}function o(e,t,n){e.length<40?a.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}e.exports=r;var i=n(5437),a=((r.prototype=Object.create(i.prototype)).constructor=r,n(6503));r._configure=function(){r.alloc=a._Buffer_allocUnsafe,r.writeBytesBuffer=a.Buffer&&a.Buffer.prototype instanceof Uint8Array&&"set"===a.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},r.prototype.bytes=function(e){var t=(e=a.isString(e)?a._Buffer_from(e,"base64"):e).length>>>0;return this.uint32(t),t&&this._push(r.writeBytesBuffer,t,e),this},r.prototype.string=function(e){var t=a.Buffer.byteLength(e);return this.uint32(t),t&&this._push(o,t,e),this},r._configure()},9784:function(e,t,n){n=n(2448),n=(n.roots.default||(n.roots.default=new n.Root)).addJSON({GOD:{nested:{PROTOCOLS:{nested:{GameCursor:{fields:{showOrHide:{type:"bool",id:1},cursorPos:{type:"CoordinatePos",id:2},cursorFrames:{rule:"repeated",type:"DynamicCursorDataSingleFrame",id:3},gameCursorSyncSeqNum:{type:"uint32",id:4},cursorStyle:{type:"CursorStyle",id:5},gameCursorData:{type:"GameCursorFrameData",id:6},iconCursorHotSpot:{type:"CoordinatePos",id:7},cursorWidth:{type:"uint32",id:8},cursorHeight:{type:"uint32",id:9}},nested:{CursorStyle:{values:{CURSOR_DEFAULT:0,CURSOR_CUSTOM:1,CURSOR_NONE:2,CURSOR_APPSTARTING:32650,CURSOR_ARROW:32512,CURSOR_CROSS:32515,CURSOR_HAND:32649,CURSOR_HELP:32651,CURSOR_IBEAM:32513,CURSOR_ICON:32641,CURSOR_NO:32648,CURSOR_SIZE:32640,CURSOR_SIZEALL:32646,CURSOR_SIZENESW:32643,CURSOR_SIZENS:32645,CURSOR_SIZENWSE:32642,CURSOR_SIZEWE:32644,CURSOR_UPARROW:32516,CURSOR_WAIT:32514}},CursorFrame:{fields:{stepFrame:{type:"uint32",id:1},cursorHotSpot:{type:"CoordinatePos",id:2},frameData:{type:"bytes",id:3}}},GameCursorFrameData:{fields:{frameRate:{type:"uint32",id:1},cursorFrames:{rule:"repeated",type:"CursorFrame",id:2}}}}},DynamicCursorDataSingleFrame:{fields:{frameInfo:{type:"CursorFramInfo",id:1},cursorData:{type:"CursorData",id:2}}},CursorFramInfo:{fields:{stepFrame:{type:"uint32",id:1},stepTotol:{type:"uint32",id:2},frameRate:{type:"uint32",id:3}}},CursorData:{fields:{cursorHotSpot:{type:"CoordinatePos",id:1},bmMaskInfo:{type:"bytes",id:2},bmColorInfo:{type:"bytes",id:3},bmMaskContent:{type:"bytes",id:4},bmColorContent:{type:"bytes",id:5},cursorBmp:{type:"bytes",id:6}}},InputOPData:{fields:{opList:{rule:"repeated",type:"OneInputOPData",id:1},handleComboKey:{type:"bool",id:2},opTick:{type:"uint32",id:99}}},OneInputOPData:{fields:{inputOp:{type:"int32",id:1},inputState:{type:"InputState",id:2},value:{type:"int32",id:3},posCursor:{type:"CoordinatePos",id:4},posMouse:{type:"CoordinatePos",id:5},opDevice:{type:"int32",id:6},xinputUserIndex:{type:"int32",id:7},gameCursorSyncSeqNum:{type:"uint32",id:8},touchEvent:{type:"TouchEvent",id:9}},nested:{InputOP:{options:{allow_alias:!0},values:{OP_KEY_BEGIN:0,OP_KEY_VK_LBUTTON:1,OP_KEY_VK_RBUTTON:2,OP_KEY_VK_CANCEL:3,OP_KEY_VK_MBUTTON:4,OP_KEY_VK_XBUTTON1:5,OP_KEY_VK_XBUTTON2:6,OP_KEY_VK_BACK:8,OP_KEY_VK_TAB:9,OP_KEY_VK_CLEAR:12,OP_KEY_VK_RETURN:13,OP_KEY_VK_SHIFT:16,OP_KEY_VK_CONTROL:17,OP_KEY_VK_MENU:18,OP_KEY_VK_PAUSE:19,OP_KEY_VK_CAPITAL:20,OP_KEY_VK_KANA:21,OP_KEY_VK_HANGUL:21,OP_KEY_VK_JUNJA:23,OP_KEY_VK_FINAL:24,OP_KEY_VK_HANJA:25,OP_KEY_VK_KANJI:25,OP_KEY_VK_ESCAPE:27,OP_KEY_VK_CONVERT:28,OP_KEY_VK_NONCONVERT:29,OP_KEY_VK_ACCEPT:30,OP_KEY_VK_MODECHANGE:31,OP_KEY_VK_SPACE:32,OP_KEY_VK_PRIOR:33,OP_KEY_VK_NEXT:34,OP_KEY_VK_END:35,OP_KEY_VK_HOME:36,OP_KEY_VK_LEFT:37,OP_KEY_VK_UP:38,OP_KEY_VK_RIGHT:39,OP_KEY_VK_DOWN:40,OP_KEY_VK_SELECT:41,OP_KEY_VK_PRINT:42,OP_KEY_VK_EXECUTE:43,OP_KEY_VK_SNAPSHOT:44,OP_KEY_VK_INSERT:45,OP_KEY_VK_DELETE:46,OP_KEY_VK_HELP:47,OP_KEY_KEY_0:48,OP_KEY_KEY_1:49,OP_KEY_KEY_2:50,OP_KEY_KEY_3:51,OP_KEY_KEY_4:52,OP_KEY_KEY_5:53,OP_KEY_KEY_6:54,OP_KEY_KEY_7:55,OP_KEY_KEY_8:56,OP_KEY_KEY_9:57,OP_KEY_KEY_A:65,OP_KEY_KEY_B:66,OP_KEY_KEY_C:67,OP_KEY_KEY_D:68,OP_KEY_KEY_E:69,OP_KEY_KEY_F:70,OP_KEY_KEY_G:71,OP_KEY_KEY_H:72,OP_KEY_KEY_I:73,OP_KEY_KEY_J:74,OP_KEY_KEY_K:75,OP_KEY_KEY_L:76,OP_KEY_KEY_M:77,OP_KEY_KEY_N:78,OP_KEY_KEY_O:79,OP_KEY_KEY_P:80,OP_KEY_KEY_Q:81,OP_KEY_KEY_R:82,OP_KEY_KEY_S:83,OP_KEY_KEY_T:84,OP_KEY_KEY_U:85,OP_KEY_KEY_V:86,OP_KEY_KEY_W:87,OP_KEY_KEY_X:88,OP_KEY_KEY_Y:89,OP_KEY_KEY_Z:90,OP_KEY_VK_LWIN:91,OP_KEY_VK_RWIN:92,OP_KEY_VK_APPS:93,OP_KEY_VK_SLEEP:95,OP_KEY_VK_NUMPAD0:96,OP_KEY_VK_NUMPAD1:97,OP_KEY_VK_NUMPAD2:98,OP_KEY_VK_NUMPAD3:99,OP_KEY_VK_NUMPAD4:100,OP_KEY_VK_NUMPAD5:101,OP_KEY_VK_NUMPAD6:102,OP_KEY_VK_NUMPAD7:103,OP_KEY_VK_NUMPAD8:104,OP_KEY_VK_NUMPAD9:105,OP_KEY_VK_MULTIPLY:106,OP_KEY_VK_ADD:107,OP_KEY_VK_SEPARATOR:108,OP_KEY_VK_SUBTRACT:109,OP_KEY_VK_DECIMAL:110,OP_KEY_VK_DIVIDE:111,OP_KEY_VK_F1:112,OP_KEY_VK_F2:113,OP_KEY_VK_F3:114,OP_KEY_VK_F4:115,OP_KEY_VK_F5:116,OP_KEY_VK_F6:117,OP_KEY_VK_F7:118,OP_KEY_VK_F8:119,OP_KEY_VK_F9:120,OP_KEY_VK_F10:121,OP_KEY_VK_F11:122,OP_KEY_VK_F12:123,OP_KEY_VK_F13:124,OP_KEY_VK_F14:125,OP_KEY_VK_F15:126,OP_KEY_VK_F16:127,OP_KEY_VK_F17:128,OP_KEY_VK_F18:129,OP_KEY_VK_F19:130,OP_KEY_VK_F20:131,OP_KEY_VK_F21:132,OP_KEY_VK_F22:133,OP_KEY_VK_F23:134,OP_KEY_VK_F24:135,OP_KEY_VK_NUMLOCK:144,OP_KEY_VK_SCROLL:145,OP_KEY_VK_LSHIFT:160,OP_KEY_VK_RSHIFT:161,OP_KEY_VK_LCONTROL:162,OP_KEY_VK_RCONTROL:163,OP_KEY_VK_LMENU:164,OP_KEY_VK_RMENU:165,OP_KEY_VK_BROWSER_BACK:166,OP_KEY_VK_BROWSER_FORWARD:167,OP_KEY_VK_BROWSER_REFRESH:168,OP_KEY_VK_BROWSER_STOP:169,OP_KEY_VK_BROWSER_SEARCH:170,OP_KEY_VK_BROWSER_FAVORITES:171,OP_KEY_VK_BROWSER_HOME:172,OP_KEY_VK_VOLUME_MUT:173,OP_KEY_VK_VOLUME_DOWN:174,OP_KEY_VK_VOLUME_UP:175,OP_KEY_VK_MEDIA_NEXT_TRACK:176,OP_KEY_VK_MEDIA_PREV_TRACK:177,OP_KEY_VK_MEDIA_STOP:178,OP_KEY_VK_MEDIA_PLAY_PAUSE:179,OP_KEY_VK_LAUNCH_MAIL:180,OP_KEY_VK_LAUNCH_MEDIA_SELECT:181,OP_KEY_VK_LAUNCH_APP1:182,OP_KEY_VK_LAUNCH_APP2:183,OP_KEY_VK_OEM_1:186,OP_KEY_VK_OEM_PLUS:187,OP_KEY_VK_OEM_COMMA:188,OP_KEY_VK_OEM_MINUS:189,OP_KEY_VK_OEM_PERIOD:190,OP_KEY_VK_OEM_2:191,OP_KEY_VK_OEM_3:192,OP_KEY_VK_OEM_4:219,OP_KEY_VK_OEM_5:220,OP_KEY_VK_OEM_6:221,OP_KEY_VK_OEM_7:222,OP_KEY_VK_OEM_8:223,OP_KEY_VK_OEM_102:226,OP_KEY_VK_PACKET:231,OP_KEY_VK_PROCESSKEY:229,OP_KEY_VK_ATTN:246,OP_KEY_VK_CRSEL:247,OP_KEY_VK_EXSEL:248,OP_KEY_VK_EREOF:249,OP_KEY_VK_PLAY:250,OP_KEY_VK_ZOOM:251,OP_KEY_VK_NONAME:252,OP_KEY_VK_PA1:253,OP_KEY_VK_OEM_CLEAR:254,OP_KEY_END:510,OP_MOUSE_BEGIN:511,OP_MOUSE_BUTTON_LEFT:512,OP_MOUSE_BUTTON_MIDDLE:513,OP_MOUSE_BUTTON_RIGHT:514,OP_MOUSE_WHEEL:515,OP_MOUSE_MOV:516,OP_MOUSE_END:766,OP_GAMEPAD_BEGIN:767,OP_GAMEPAD_BTN_A:768,OP_GAMEPAD_BTN_B:769,OP_GAMEPAD_BTN_C:770,OP_GAMEPAD_BTN_D:771,OP_GAMEPAD_BTN_L1:772,OP_GAMEPAD_BTN_R1:773,OP_GAMEPAD_BTN_L2:774,OP_GAMEPAD_BTN_R2:775,OP_GAMEPAD_BTN_SELECT:776,OP_GAMEPAD_BTN_START:777,OP_GAMEPAD_BTN_LA:778,OP_GAMEPAD_BTN_RA:779,OP_GAMEPAD_BTN_MODE:780,OP_GAMEPAD_BTN_TURBO:781,OP_GAMEPAD_BTN_CLEAR:782,OP_GAEMPAD_AXIS_POV0:783,OP_GAMEPAD_AXIS_X:784,OP_GAMEPAD_AXIS_Y:785,OP_GAMEPAD_AXIS_Z:786,OP_GAMEPAD_AXIS_Z_ROTATION:787,OP_GAMEPAD_END:1022,OP_XINPUT_BEGIN:1023,OP_XINPUT_BUTTONS:1024,OP_XINPUT_LEFT_TRIGGER:1025,OP_XINPUT_RIGHT_TRIGGER:1026,OP_XINPUT_THUMB_LX:1027,OP_XINPUT_THUMB_LY:1028,OP_XINPUT_THUMB_RX:1029,OP_XINPUT_THUMB_RY:1030,OP_XINPUT_A_BUTTON:1031,OP_XINPUT_END:1150,OP_TOUCH_BEGIN:1151,OP_TOUCH_MOVE:1152,OP_TOUCH_POINT:1153,OP_TOUCH_CANCEL:1154,OP_TOUCH_END:1250}},InputState:{values:{OP_STATE_DEFAULT:1,OP_STATE_DOWN:2,OP_STATE_UP:3,OP_VK_UNTOGGLED:4,OP_VK_TOGGLED:5}},PointerProperties:{fields:{id:{type:"int32",id:1},type:{type:"TouchDevice",id:2},pressure:{type:"float",id:3},size:{type:"float",id:4},touchMajor:{type:"float",id:5},touchMinor:{type:"float",id:6},xPos:{type:"int32",id:7},yPos:{type:"int32",id:8},xPercent:{type:"float",id:9},yPercent:{type:"float",id:10}},nested:{TouchDevice:{values:{TOOL_TYPE_UNKNOWN:0,TOOL_TYPE_FINGER:1,TOOL_TYPE_STYLUS:2,TOOL_TYPE_MOUSE:3,TOOL_TYPE_ERASER:4}}}},TouchEvent:{fields:{pointerCount:{type:"int32",id:1},pointerProperties:{rule:"repeated",type:"PointerProperties",id:2}}}}},CoordinatePos:{fields:{x:{type:"int32",id:1},y:{type:"int32",id:2}}},InputMethodChData:{fields:{inputBuf:{type:"bytes",id:1}}},GSNotification:{fields:{type:{type:"GSNotifType",id:1},cid:{type:"int64",id:2},extInfo:{type:"string",id:3}},nested:{GSNotifType:{values:{GAME_QUIT:1,NO_INPUT_TIMEOUT:2,GET_CONTROL:3,LOST_CONTROL:4}}}},GSStateNotice:{fields:{type:{type:"int32",id:1},value:{type:"int32",id:2}},nested:{GSStateType:{values:{CAPITAL_STATE:1,KEYBOARD_STYLE:2,CUT_VIRTUAL_GAME_PAD:3,LINKED_VIRTUAL_GAME_PAD:4,MAIN_CONTEXT_QUIT:5}}}},IMEType:{values:{IME_STANDARD:0,IME_PASSWORD:1,IME_NUMBER:2,IME_PHONE:3,IME_EMAILADDRESS:4}},StatusType:{values:{STATUS_HIDE:0,STATUS_SHOW:1}},IMEStatus:{fields:{statusType:{type:"StatusType",id:1},imeType:{type:"IMEType",id:2}}},TerminalType:{values:{TERMINAL_DEFAULT:0,TERMINAL_TV:1,TERMINAL_PC_WIN:2,TERMINAL_PC_MAC:3,TERMINAL_PC_LINUX:4,TERMINAL_ANDROID_PAD:5,TERMINAL_ANDROID_PHONE:6,TERMINAL_IOS_IPHONE:7,TERMINAL_IOS_IPAD:8,TERMINAL_WEB_PC_WIN:9,TERMINAL_WEB_PC_MAC:10,TERMINAL_WEB_PC_LINUX:11,TERMINAL_WEB_ANDROID_PAD:12,TERMINAL_WEB_ANDROID_PHONE:13,TERMINAL_WEB_IOS_IPHONE:14,TERMINAL_WEB_IOS_IPAD:15,TERMINAL_WEB_TV:16}},IMEStatusNotify:{fields:{terminalType:{type:"TerminalType",id:1},statusType:{type:"StatusType",id:2}}},GameSDKAction:{fields:{cid:{type:"int64",id:1},userId:{type:"string",id:2},sdkAction:{type:"string",id:3}}},GameSDKData:{fields:{cid:{type:"int64",id:1},userId:{type:"string",id:2},sdkData:{type:"string",id:3}}},ResetNoInputTimer:{fields:{value:{type:"int32",id:1}}},RestNoInputTimer_R:{fields:{result:{type:"int32",id:1},msg:{type:"string",id:2}}}}}}}});e.exports=n},3828:function(){}},__webpack_module_cache__={},__webpack_exports__=(__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=function(e,t){for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==("undefined"==typeof globalThis?"undefined":_typeof(globalThis)))return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==("undefined"==typeof window?"undefined":_typeof(window)))return window}}(),__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},{});return function(){function B(e){return(B="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function L(e){for(var t=0,n=arguments.length,r=Array(1<n?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(var i=0,a=r;i<a.length;i++)t+=H(a[i]);for(var s,c=new e(t),l=0,d=0,u=r;d<u.length;d++)s=u[d],c.set(s,l),l+=H(s);return c}function d(e){e.stopPropagation(),e.cancelable&&e.preventDefault()}function F(){var e=1048575*Math.random();return _Mathfloor(e).toString(16)}function h(e){e=Object.prototype.toString.call(e);return e.substring(8,e.length-1)}function j(e,t){return e<=2?.5*t:e<5?.375*t:.25*t}function u(e,t){if("string"==typeof t)return(e.currentStyle||getComputedStyle(e))[t];if("object"===B(t))for(var n in t)e.style[n]=t[n]}function K(e,t){e.classList.remove(t)}function l(t,e){e.split(" ").forEach(function(e){t.classList.add(e)})}function s(e){e.style.display="block"}function p(e){e.style.display="none"}function U(e,t){sessionStorage.setItem(e,t)}function G(e){return sessionStorage.getItem(e)||null}function H(e){try{return e.length}catch(e){return 0}}function W(e){return _e().MD5(e)}function V(){var e=function(){for(var e=[],t=0;t<4;t++)e.push("CUPK".charCodeAt(t));return new Uint8Array(e)}(),t=new Uint8Array([1,0]);return L(Uint8Array,e,t)}function z(e,t){var e=new Uint8Array(e),t=new Uint8Array(t),n=new Uint8Array(1);return L(Uint8Array,e,t,n)}function q(e,t,n,r){var o=e.verify(t);if(o)throw Error(o);var i,o=e.create(t),t=e.encode(o).finish(),e=function(e){var t=[0,0,0,0];if(e<=255)t[0]=e;else for(var n=0;n<t.length;n++)256<=_Mathfloor(e/_Mathpow(256,n))&&(t[n]=_Mathfloor(e/_Mathpow(256,n))%256,t[n+1]=_Mathfloor(e/_Mathpow(256,n+1)));return t}((e=[6],o=[n,r],"Uint8Array"!==h(i=t)?0:H(V())+H(z(e,o))+H(i)+4));return b[6]=e[0],b[7]=e[1],b[8]=e[2],b[9]=e[3],b[11]=n,b[12]=r,L(Uint8Array,b,t)}function Y(e,t){e=new Uint8Array(e).slice(14),t=t.decode(e);return JSON.stringify(t)}function f(e){return q(Se,e,1,0)}function m(e){return(m="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function J(e){return(J="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function o(e,t,n){var r;r=function(e){if("object"!==J(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!==J(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(t),(t="symbol"===J(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function X(e){return(X="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function Q(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!==X(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!==X(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"===X(e)?e:e+""}(n.key),n)}function Z(e){return(Z="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function ee(e,t){return(ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t,n){(t=function(e){e=function(e){if("object"!==Z(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!==Z(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"===Z(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function ne(e){var t=e.url,n=e.data,r=e.done,o=e.timeout,i=void 0===o?10:o,o=e.contentType,o=void 0===o?"application/x-www-form-urlencoded":o,a=e.retryRequestCount,s=new XMLHttpRequest,c=null;return"get"===e.method.toLowerCase()?(s.open("GET",t,!0),s.send()):"post"===e.method.toLowerCase()&&(s.open("POST",t,!0),s.setRequestHeader("Content-type",o),s.send(n)),s.onreadystatechange=function(){4===s.readyState&&(200<=s.status&&s.status<300||304===s.status?r(!0,{statusCode:s.status,message:"",timeout:1e3*i,retryRequestCount:a},s.responseText):r(!1,{statusCode:s.status,message:"",timeout:1e3*i,retryRequestCount:a},""),clearTimeout(c),s=void 0)},c=setTimeout(function(){s.abort()},1e3*i),function(){s&&(s.onreadystatechange=null,clearTimeout(c),s=c=void 0)}}function re(e){var r,o=e.url,i=e.data,a=e.method,s=e.contentType,t=e.timeout,c=e.retryCount,l=e.done,e=e.retryInterval,d=void 0===e?500:e,u=1;return"array"===(e=Object.prototype.toString.call(c)).substring(8,e.length-1).toLowerCase()&&0<c.length?(u=c.length,r=l,ne({url:o,data:i,method:a,contentType:s,done:l=function(e,t,n){return e?void r(!0,t,n):--u<=0?void r(!1,t,n):void setTimeout(function(){ne({url:o,data:i,method:a,contentType:s,done:l,timeout:c[u-1],retryRequestCount:c.length-u})},d)},timeout:c[u-1],retryRequestCount:0})):ne({url:o,data:i,method:a,contentType:s,done:l,timeout:t,retryRequestCount:0})}function oe(e){return(oe="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function ie(e,t){return(ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){(t=function(e){e=function(e){if("object"!==oe(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!==oe(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"===oe(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function se(e){return(se="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function ce(e,t){return(ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){(t=function(e){e=function(e){if("object"!==se(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!==se(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"===se(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function de(e){return(de="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function ue(e,t){return(ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,n){(t=function(e){e=function(e){if("object"!==de(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!==de(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"===de(e)?e:e+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function he(e){return(he="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function r(e,t,n){var r;r=function(e){if("object"!==he(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!==he(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(t),(t="symbol"===he(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function me(e){return!isNaN(parseFloat(e))&&isFinite(e)}function Ae(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2;return _Mathround(+e+"e"+t)/_Mathpow(10,t)}var ye=Math.PI,e=(__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return tt}}),__webpack_require__(5442)),_e=__webpack_require__.n(e),ge=navigator.userAgent,e=__webpack_require__(9784),ve=e.lookupType("GOD.PROTOCOLS.GameCursor"),Se=e.lookup("GOD.PROTOCOLS.InputOPData"),be=e.lookup("GOD.PROTOCOLS.InputMethodChData"),we=e.lookup("GOD.PROTOCOLS.GSNotification"),Ce=e.lookup("GOD.PROTOCOLS.IMEStatus"),ke=(e.lookup("GOD.PROTOCOLS.IMEStatusNotify"),e.lookup("GOD.PROTOCOLS.GSStateNotice")),Ee=e.lookup("GOD.PROTOCOLS.GameSDKAction"),Te=e.lookup("GOD.PROTOCOLS.GameSDKData"),Re=e.lookup("GOD.PROTOCOLS.ResetNoInputTimer"),Ie=e.lookup("GOD.PROTOCOLS.RestNoInputTimer_R"),b=(e=V(),x=new Uint8Array(4),M=z([6],[1,0]),L(Uint8Array,e,x,M)),De="iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=",Pe=[91,"MetaLeft","MetaRight",192,"Backquote"],w={click:"click",mouseDown:"mousedown",mouseUp:"mouseup",mouseMove:"mousemove",mouseWheel:"mousewheel",touchStart:"touchstart",touchEnd:"touchend",touchMove:"touchmove",touchCancel:"touchcancel",input:"input",keyDown:"keydown",keyPress:"keypress",keyUp:"keyup",compositionStart:"compositionstart",compositionUpdate:"compositionupdate",compositionEnd:"compositionend",focusOut:"focusout",gamepadConnected:"gamepadconnected",gamepadDisconnected:"gamepaddisconnected",visibilityChange:"visibilityChange"},Oe={keydown:2,keyup:3,unLock:4,onLock:5},xe={mousedown:2,mousemove:1,mouseup:3},Me="keyboard",Ne="xbox",Be=(qe="function",Ye="object",$e="string",et={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[e="version",[x="name",M="Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[e,[x,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[x,e],[/opios[\/ ]+([\w\.]+)/i],[e,[x,(D="Opera")+" Mini"]],[/\bopr\/([\w\.]+)/i],[e,[x,D]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[x,e],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[e,[x,"UC"+(T="Browser")]],[/\bqbcore\/([\w\.]+)/i],[e,[x,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[e,[x,"WeChat"]],[/konqueror\/([\w\.]+)/i],[e,[x,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[e,[x,"IE"]],[/yabrowser\/([\w\.]+)/i],[e,[x,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[x,/(.+)/,"$1 Secure "+T],e],[/\bfocus\/([\w\.]+)/i],[e,[x,(Qe="Firefox")+" Focus"]],[/\bopt\/([\w\.]+)/i],[e,[x,D+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[e,[x,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[e,[x,"Dolphin"]],[/coast\/([\w\.]+)/i],[e,[x,D+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[e,[x,"MIUI "+T]],[/fxios\/([-\w\.]+)/i],[e,[x,Qe]],[/\bqihu|(qi?ho?o?|360)browser/i],[[x,"360 "+T]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[x,/(.+)/,"$1 "+T],e],[/(comodo_dragon)\/([\w\.]+)/i],[[x,/_/g," "],e],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[x,e],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[x],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[x,"Facebook"],e],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[x,e],[/\bgsa\/([\w\.]+) .*safari\//i],[e,[x,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[e,[x,M+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[x,M+" WebView"],e],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[e,[x,"Android "+T]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[x,e],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[e,[x,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[e,x],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[x,[e,st,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[x,e],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[x,"Netscape"],e],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[e,[x,Qe+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[x,e]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[D="architecture","amd64"]],[/(ia32(?=;))/i],[[D,Ze=function(e){return e.toLowerCase()}]],[/((?:i[346]|x)86)[;\)]/i],[[D,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[D,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[D,"armhf"]],[/windows (ce|mobile); ppc;/i],[[D,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[D,/ower/,"",Ze]],[/(sun4\w)[;\)]/i],[[D,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[D,Ze]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[T="model",[n="vendor",P="Samsung"],[t="type",E="tablet"]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[T,[n,P],[t,k="mobile"]],[/\((ip(?:hone|od)[\w ]*);/i],[T,[n,"Apple"],[t,k]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[T,[n,"Apple"],[t,E]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[T,[n,"Huawei"],[t,E]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[T,[n,"Huawei"],[t,k]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[T,/_/g," "],[n,"Xiaomi"],[t,k]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[T,/_/g," "],[n,"Xiaomi"],[t,E]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[T,[n,"OPPO"],[t,k]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[T,[n,"Vivo"],[t,k]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[T,[n,"Realme"],[t,k]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[T,[n,"Motorola"],[t,k]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[T,[n,"Motorola"],[t,E]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[T,[n,"LG"],[t,E]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[T,[n,"LG"],[t,k]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[T,[n,"Lenovo"],[t,E]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[T,/_/g," "],[n,"Nokia"],[t,k]],[/(pixel c)\b/i],[T,[n,R="Google"],[t,E]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[T,[n,R],[t,k]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[T,[n,"Sony"],[t,k]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[T,"Xperia Tablet"],[n,"Sony"],[t,E]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[T,[n,"OnePlus"],[t,k]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[T,[n,O="Amazon"],[t,E]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[T,/(.+)/g,"Fire Phone $1"],[n,O],[t,k]],[/(playbook);[-\w\),; ]+(rim)/i],[T,n,[t,E]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[T,[n,Xe="BlackBerry"],[t,k]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[T,[n,"ASUS"],[t,E]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[T,[n,"ASUS"],[t,k]],[/(nexus 9)/i],[T,[n,"HTC"],[t,E]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[n,[T,/_/g," "],[t,k]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[T,[n,"Acer"],[t,E]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[T,[n,"Meizu"],[t,k]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[T,[n,"Sharp"],[t,k]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[n,T,[t,k]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[n,T,[t,E]],[/(surface duo)/i],[T,[n,I="Microsoft"],[t,E]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[T,[n,"Fairphone"],[t,k]],[/(u304aa)/i],[T,[n,"AT&T"],[t,k]],[/\bsie-(\w*)/i],[T,[n,"Siemens"],[t,k]],[/\b(rct\w+) b/i],[T,[n,"RCA"],[t,E]],[/\b(venue[\d ]{2,7}) b/i],[T,[n,"Dell"],[t,E]],[/\b(q(?:mv|ta)\w+) b/i],[T,[n,"Verizon"],[t,E]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[T,[n,"Barnes & Noble"],[t,E]],[/\b(tm\d{3}\w+) b/i],[T,[n,"NuVision"],[t,E]],[/\b(k88) b/i],[T,[n,"ZTE"],[t,E]],[/\b(nx\d{3}j) b/i],[T,[n,"ZTE"],[t,k]],[/\b(gen\d{3}) b.+49h/i],[T,[n,"Swiss"],[t,k]],[/\b(zur\d{3}) b/i],[T,[n,"Swiss"],[t,E]],[/\b((zeki)?tb.*\b) b/i],[T,[n,"Zeki"],[t,E]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[n,"Dragon Touch"],T,[t,E]],[/\b(ns-?\w{0,9}) b/i],[T,[n,"Insignia"],[t,E]],[/\b((nxa|next)-?\w{0,9}) b/i],[T,[n,"NextBook"],[t,E]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[n,"Voice"],T,[t,k]],[/\b(lvtel\-)?(v1[12]) b/i],[[n,"LvTel"],T,[t,k]],[/\b(ph-1) /i],[T,[n,"Essential"],[t,k]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[T,[n,"Envizen"],[t,E]],[/\b(trio[-\w\. ]+) b/i],[T,[n,"MachSpeed"],[t,E]],[/\btu_(1491) b/i],[T,[n,"Rotor"],[t,E]],[/(shield[\w ]+) b/i],[T,[n,"Nvidia"],[t,E]],[/(sprint) (\w+)/i],[n,T,[t,k]],[/(kin\.[onetw]{3})/i],[[T,/\./g," "],[n,I],[t,k]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[T,[n,"Zebra"],[t,E]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[T,[n,"Zebra"],[t,k]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[n,T,[t,Je="console"]],[/droid.+; (shield) bui/i],[T,[n,"Nvidia"],[t,Je]],[/(playstation [345portablevi]+)/i],[T,[n,"Sony"],[t,Je]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[T,[n,I],[t,Je]],[/smart-tv.+(samsung)/i],[n,[t,I="smarttv"]],[/hbbtv.+maple;(\d+)/i],[[T,/^/,"SmartTV"],[n,P],[t,I]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[n,"LG"],[t,I]],[/(apple) ?tv/i],[n,[T,"Apple TV"],[t,I]],[/crkey/i],[[T,M+"cast"],[n,R],[t,I]],[/droid.+aft(\w)( bui|\))/i],[T,[n,O],[t,I]],[/\(dtv[\);].+(aquos)/i],[T,[n,"Sharp"],[t,I]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[n,it],[T,it],[t,I]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[t,I]],[/((pebble))app/i],[n,T,[t,P="wearable"]],[/droid.+; (glass) \d/i],[T,[n,R],[t,P]],[/droid.+; (wt63?0{2,3})\)/i],[T,[n,"Zebra"],[t,P]],[/(quest( 2)?)/i],[T,[n,"Facebook"],[t,P]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[n,[t,"embedded"]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[T,[t,k]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[T,[t,E]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[t,E]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[t,k]],[/(android[-\w\. ]{0,9});.+buil/i],[T,[n,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[e,[x,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[e,[x,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[x,e],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[e,x]],os:[[/microsoft (windows) (vista|xp)/i],[x,e],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[x,[e,st,O={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[x,"Windows"],[e,st,O]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[e,/_/g,"."],[x,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[x,"Mac OS"],[e,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[e,x],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[x,e],[/\(bb(10);/i],[e,[x,Xe]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[e,[x,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[e,[x,Qe+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[e,[x,"webOS"]],[/crkey\/([\d\.]+)/i],[e,[x,M+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[x,"Chromium OS"],e],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[x,e],[/(sunos) ?([\w\.\d]*)/i],[[x,"Solaris"],e],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[x,e]]},N.VERSION="0.7.31",N.BROWSER=rt([x,e,"major"]),N.CPU=rt([D]),N.DEVICE=rt([T,n,t,Je,k,I,E,P,"embedded"]),N.ENGINE=N.OS=rt([x,e]),N),Le=(i={},{sub:function(e,t,n){i[e]||(i[e]=[]);var n={order:n||0,listener:t},r=(i[e].push(n),i[e].sort(function(e,t){return e.order-t.order}),i[e].indexOf(n));return{unsub:function(){i[e].splice(r,1)}}},pub:function(e,t){!i[e]||i[e].length<1||i[e].forEach(function(e){e.listener(void 0===t?{}:t)})},unsub:function(e){try{if(e)e instanceof Array?e.forEach(function(e){delete listeners[e]}):"string"==typeof e&&0<e.length&&e.split(",").forEach(function(e){delete listeners[e]});else if(listeners)for(var t in listeners)delete listeners[t]}catch(e){}},clear:function(){if(listeners)for(var e in listeners)delete listeners[e]}}),C=((Ve={_initProp_:function(){var r=this,e=(r.rotate=window.matchMedia("screen and (orientation: portrait)").matches,r.detectOS()),t=e.osName,e=(e.osVersion,r.userAgent=navigator.userAgent);r.mobileDetect?r.mobileDetect.setUA(e):r.mobileDetect=new Be(e),r.pixelRatio=1,r.maxTouchPoints=navigator.maxTouchPoints||0,r.platform=navigator.platform,r.onMobile=!!e.match(/AppleWebKit.*Mobile.*/),r.onIOS=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),r.onMac=-1<e.indexOf("Mac OS X"),r.onLinux=-1<r.platform.indexOf("Linux")||/(?:linux)/.test(t.toLowerCase()),r.onIPhone=-1<e.indexOf("iPhone"),r.onIPad=-1<e.indexOf("iPad")||"MacIntel"===r.platform&&1<r.maxTouchPoints,r.onAndroid=/(?:Android)/.test(e)||-1<e.indexOf("Adr"),r.onWP=-1<e.indexOf("Windows Phone"),r.onQQBrowser=-1<e.indexOf("QQBrowser"),r.onMQQBrowser=-1<e.indexOf("MQQBrowser")||-1<e.indexOf("Mobile")&&-1<e.indexOf("QQ"),r.onSafari=/Safari/.exec(e)&&!/Chrome/.exec(e),r.onIE=!!window.ActiveXObject||"ActiveXObject"in window,r.onWin=/(?:Windows NT)/.test(e)||/(?:Win)/.test(e)||/(?:Win32|Win)/.test(r.platform),r.onWeiXin=/(?:MicroMessenger)/.test(e),r.onElectron=/(?:electron)/.test(e)||!!(window&&window.process&&window.process.type),r.onChrome=/(?:Chrome|CriOS)/.test(e),r.onSymbian=/(?:SymbianOS)/.test(e)||r.onWP,r.onFireFox=/(?:Firefox|Gecko)/.test(e)&&-1===e.indexOf("KHTML"),r.onTablet=/(?:iPad|PlayBook)/.test(e)||r.onAndroid&&!/(?:Mobile)/.test(e)||r.onFireFox&&/(?:Tablet)/.test(e),r.onUBrowser=/(?:UCWEB|UBrowser|UCBrowser)/.test(e),r.onQuark=/(?:Quark|TUnionSDK)/.test(e),r.onEdge=/(?:Edge)/.test(e),r.onPC=(r.onWin||r.onMac||r.onLinux)&&!(/(?:linux)/.test(t.toLowerCase())&&r.onWin)&&!(/(?:iphone)/.test(t.toLowerCase())&&r.onWin)&&!r.onIPhone&&!r.onAndroid&&!r.onSymbian&&!r.onTablet&&!r.onMobile&&!r.onIPad,r.onQQ=/QQ/gi.test(e),r.onMiui=-1<e.indexOf("XiaoMi")||-1<e.indexOf("MiuiBrowser"),r.onHuaWei=/(?:HUAWEI|HuaweiBrowser|HMSCore|HUAWEILIO|HUAWEIALP|HarmonyOS)/.test(e),r.onOppo=/(?:Oppo)/.test(e)||-1<e.indexOf("HeyTapBrowser")||-1<e.indexOf("OppoBrowser")||/(?:oppo)/.test(e.toLowerCase()),r.onVivo=/(?:vivo)/.test(e.toLowerCase()),r.onAweme="aweme"==e.toLowerCase().match(/aweme/i),r.onNewsArticle="newsarticle"==e.toLowerCase().match(/newsarticle/i),r.onIphoneX=function(){var e,t,n;return!!r.onIOS&&(t=window.devicePixelRatio||1,n=(e=window.screen).width*t,e=e.height*t,t=_Mathmin(n,e),n=_Mathmax(n,e),1125===t&&2436===n||1242===t&&2688===n||750===t&&1624===n||828===t&&1792===n)},r.onSimulator=(r.onWin||r.onMac&&/(?:linux)/.test(t.toLowerCase())&&r.onWin&&/(?:iphone)/.test(t.toLowerCase())&&r.onWin)&&(r.onIPhone||r.onAndroid||r.onSymbian||r.onTablet||r.onMobile||r.onIPad),r.defaultClientType=this.onPC?3:this.onIPhone||this.onIphoneX()?6:7,window.GAME_SCREEN=r.SCREEN=this.getScreenSize(),Le.pub("resize",r.SCREEN)},_init_:function(){var o,e,i,a,s,t=this;t.mobileDetect=new Be(navigator.userAgent),t.isLocked=!1,t.videoWidth=1920,t.videoHeight=1080,t.clientScale=1,t.mediaQuery=window.matchMedia("screen and (orientation: portrait)"),t.displayMode=0,t.containerNode=null,t.rotate=window.matchMedia("screen and (orientation: portrait)").matches,t._initProp_(),t.GAME_CURSOR={showOrHide:!0,cursorPos:{x:960,y:540},cursorStyle:"CURSOR_CUSTOM",gameCursorData:{frameRate:512,cursorFrames:[{stepFrame:0,cursorHotSpot:{x:0,y:0},frameData:"Qk2KEAAAAAAAAIoAAAB8AAAAIAAAACAAAAABACAAAwAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAD/AAD/AAD/AAAAAAAA/0JHUnOAwvUoYLgeFSCF6wFAMzMTgGZmJkBmZgagmZkJPArXAyRcjzIAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////8A////AAAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////wD///8AAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////8A////AAAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAAAAAAA/////wD///8AAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAP8AAAAAAAAAAAAAAP////8A////AAAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////AAAAAP8AAAAAAAAA/////wD///8AAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////8A////AAAAAP////8A////AAAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////wD///8A////AP///wD///8AAAAA/wAAAP8AAAD/AAAA/wAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////AP///wD///8A////AP///wD///8A////AP///wAAAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////8A////AP///wD///8A////AP///wD///8AAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////wD///8A////AP///wD///8A////AAAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////AP///wD///8A////AP///wAAAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////8A////AP///wD///8AAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////wD///8A////AAAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////AP///wAAAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////8AAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=="}]},cursorWidth:32,cursorHeight:32},t.SCREEN={};try{document.documentElement.addEventListener("touchstart",function(e){1<e.touches.length&&e.preventDefault()},!1);var n=0;document.documentElement.addEventListener("touchend",function(e){var t=Date.now();t-n<=300&&e.preventDefault(),n=t},!1),"addEventListener"in document&&document.addEventListener("DOMContentLoaded",function(){var e=document.body.style;e.margin=0,e.overflow="hidden",e["-webkit-user-select"]="none",e["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",e["touch-action"]="none",e["-webkit-touch-callout"]="none";for(var t,n=document.getElementsByTagName("meta"),r=0,o=!1,i="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no,viewport-fit=cover";r<n.length;){if("viewport"==(t=n[r]).name){t.content=i,o=!0;break}r++}o||((t=document.createElement("meta")).name="viewport",t.content=i,document.getElementsByTagName("head")[0].appendChild(t))},!1),document.addEventListener("gesturestart",function(e){e.preventDefault()},!1),(window.self===window.top?window.self:window).addEventListener("resize",function(){t._initProp_()},!1),t.mediaQuery.addListener(function(){t._initProp_()},!1),o=window,e=document,s="",o.addEventListener?i="addEventListener":(i="attachEvent",s="on"),a="onwheel"in e.createElement("div")?"wheel":void 0===e.onmousewheel?"DOMMouseScroll":"mousewheel",o.addWheelListener=function(e,t,n){r(e,a,t,n),"DOMMouseScroll"==a&&r(e,"MozMousePixelScroll",t,n)}}catch(t){}function r(e,t,n,r){e[i](s+t,"wheel"==a?n:function(e){var t={originalEvent:e=e||o.event,target:e.target||e.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==e.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){e.preventDefault?e.preventDefault():e.returnValue=!1}};return"mousewheel"==a?(t.deltaY=-.025*e.wheelDelta,e.wheelDeltaX&&(t.deltaX=-.025*e.wheelDeltaX)):t.deltaY=e.detail,n(t)},r||!1)}},detectOS:function(){for(var e,t=navigator.appVersion,n=navigator.userAgent,r="-",o="-",i=[{s:"Chrome OS",r:/CrOS/},{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}],a=0;e=i[a];a++)if(e.r.test(n)){o=e.s;break}return/Windows/.test(o)&&(/Windows (.*)/.test(o)&&(r=/Windows (.*)/.exec(o)[1]),o="Windows"),"Mac OS X"===o?/Mac OS X (10[._\d]+)/.test(n)&&(r=/Mac OS X (10[._\d]+)/.exec(n)[1]):"Android"===o?/Android ([._\d]+)/.test(n)&&(r=/Android ([._\d]+)/.exec(n)[1]):"iOS"===o&&/OS (\d+)_(\d+)_?(\d+)?/.test(n)&&(r=(r=/OS (\d+)_(\d+)_?(\d+)?/.exec(t))&&r[1]+"."+r[2]+"."+(0|r[3])),{osName:o,osVersion:r}},setResolution:function(e){if(!e)try{var t=function(e){if(Array.isArray(e))return e}(o=e.split("x"))||function(e){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,r,o,i,a=[],s=!0,c=!1;try{for(o=(t=t.call(e)).next;!(s=(n=o.call(t)).done)&&(a.push(n.value),2!==a.length);s=!0);}catch(a){c=!0,r=a}finally{try{if(!s&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(c)throw r}}return a}}(o)||function(e){var t;if(e)return"string"==typeof e?$(e,2):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?$(e,2):void 0}(o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=t[0],r=t[1];this.videoWidth=n,this.videoHeight=r}catch(e){}var o},getSafariOffsetY:function(){return(window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight)-window.innerHeight},isFullScreen:function(){return C.rotate?window.screen.height==document.documentElement.clientHeight:window.screen.width==document.documentElement.clientWidth},clientWidth:function(){return this.getScreenSize().width},clientHeight:function(){return this.getScreenSize().height},getMousePos:function(e){var t=C.SCREEN,n=t.left,r=t.top,t=t.rotate,o=0,i=0;try{var a=document.documentElement.getClientRects()[0]||{},o=e.pageX-n,i=e.pageY-r+(a.top||0);o<0&&(o=0),i<0&&(i=0)}catch(e){}return{x:t?i:o,y:t?o:i,rotate:t}},getScreenSize:function(){var e,t,n=this.containerNode?0<this.containerNode.getClientRects().length?this.containerNode.getClientRects()[0]:this.containerNode.getBoundingClientRect():document.documentElement.getClientRects()[0],r={};for(e in n)r[e]=n[e];return r.rotate=!this.onPC&&this.rotate,r.rotate&&(t=r.width,r.width=r.height,r.height=t),r},getClientScale:function(){var e=this.clientWidth()/1080,t=this.clientHeight()/720;return this.clientScale=t<e?t:e,this.clientScale},getRootNode:function(){if(!this.rootNode)for(this.rootNode=this.containerNode;this.rootNode;){var e=this.rootNode.parentNode;if(e instanceof HTMLBodyElement)break;this.rootNode=e}return this.rootNode},getGameRatio:function(){return!this.videoHeight||!this.videoWidth||this.videoWidth>this.videoHeight?this.videoHeight/this.videoWidth:this.videoWidth/this.videoHeight},getScreenWidthHeight:function(){var e={width:document.documentElement.clientWidth,height:window.innerHeight};return C.onIphoneX()&&(e.width=window.innerWidth),e},landscapeStyleCount:function(){var e=Ve.getScreenWidthHeight(),t="",n="",r="",o=this.getGameRatio(),i=e.height/o,t=i+"px",n=e.height+"px",r=(e.width-i)/2+"px",i=(i>e.width&&(t=e.width+"px",n=e.width*o+"px",r=0),e.width+"px"),o=e.height+"px";return{width:t,height:n,left:r,top:(parseFloat(o)-parseFloat(n))/2+"px",divWidth:i,divHeight:o,divLeft:"0px",divTop:"0px"}},portraitStyleCount:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=Ve.getScreenWidthHeight(),n=t.width,t=t.height,r=_Mathabs((n-t)/2),o=this.getGameRatio(),i=t,a=n,s=n/t;return e.rotate||(s=n/t,a=n),o<s?a=i*o:i=a/o,{width:i+"px",height:a+"px",left:(t-i)/2+"px",top:(n-a)/2+"px",divWidth:t+"px",divHeight:n+"px",divLeft:"-"+r+"px",divTop:r+"px"}},landscapeUiRebuid:function(e,t,n){n=Ve.landscapeStyleCount(n);e.classList.remove("rotate90"),e.style.width=n.divWidth,e.style.height=n.divHeight,e.style.left=n.divLeft,e.style.top=n.divTop,t.style.position="absolute",t.style.width=n.width,t.style.height=n.height,t.style.left=n.left,t.style.top=n.top,t.style.bottom=n.bottom},portraitUiRebuid:function(e,t,n){n=Ve.portraitStyleCount(n);e.classList.add("rotate90"),e.style.width=n.divWidth,e.style.height=n.divHeight,e.style.left=n.divLeft,e.style.top=n.divTop,t.style.position="absolute",t.style.width=n.width,t.style.height=n.height,t.style.left=n.left,t.style.top=n.top},initScreenOrientation:function(e,t,n){e&&t&&(this.rotate?this.portraitUiRebuid(e,t,n):this.landscapeUiRebuid(e,t,n))}})._init_(),Ve),Fe=(R=function e(t,n,r){var l=this;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");o(this,"_init",function(){l._appendMouse(),l._canvasParentNode.addEventListener("touchstart",l._mouseDownHandler),l._canvasParentNode.addEventListener("touchmove",l._mouseMoveHandler),l._canvasParentNode.addEventListener("touchend",l._mouseUpHandler),document.addEventListener("keydown",l._keyDownHandler),document.addEventListener("keyup",l._keyUpHandler),l._requestAnimationFramePolyfills()}),o(this,"_appendMouse",function(){l._cacheCursorInfo.element=document.createElement("div"),l._cacheCursorInfo.element.className="player_canvas_cursor",u(l._cacheCursorInfo.element,{top:"50%",left:"50%"}),l._playerContainerNode.appendChild(l._cacheCursorInfo.element)}),o(this,"_requestAnimationFramePolyfills",function(){if(void 0===window.requestAnimationFrame){for(var o=0,e=["webkit","moz"],t=0;t<e.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var t=(new Date).getTime(),n=_Mathmax(0,16.7-(t-o)),r=window.setTimeout(function(){e(t+n)},n);return o=t+n,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}}),o(this,"_sendMouseData",function(e,t,n,r,o,i,a){var s=516,c=(0===e?s=512:1===e?s=513:2===e?s=514:3===e&&(s=515),1),t=(2===t?(c=2,l._recordPressedMouseButtonsMap[s]={button:e,eventType:t,value:n,absX:r,absY:o,offsetX:i,offsetY:a}):3===t&&(c=3,delete l._recordPressedMouseButtonsMap[s]),{});t.inputOp=s,t.inputState=c,t.value=n,3!==e&&(t.posCursor={x:parseInt(i<0?0:i>l._cacheGameInfo.width?l._cacheGameInfo.width:i),y:parseInt(a<0?0:a>l._cacheGameInfo.height?l._cacheGameInfo.height:a)},t.posMouse={x:parseInt(r),y:parseInt(o)}),l._gamePlayer.sendData(f({opList:[t]}))}),o(this,"_mouseDownHandler",function(e){if(d(e),l.calcRemoteAndLocalScreenRatio(),0!==l._mouseMode){var t,n,r,o,i,a,s;if(1===l._mouseMode||2===l._mouseMode)return-1!==l._cacheFingerData.identifier?void 0:(r=e.targetTouches,t=e.type,l._cacheFingerData.identifier=r[0].identifier,n=(r=l._getClientPosition(r[0])).clientX,r=r.clientY,l._cacheFingerData.clientX=n,l._cacheFingerData.clientY=r,l._cacheFingerData.originX=n,l._cacheFingerData.originY=r,(o=G(l._storeKey.sendMouseData))&&(o=JSON.parse(o).posMouse,l._cachePosMouse.X=o.X,l._cachePosMouse.Y=o.Y),l._isRemoteMousePointLocked?(clearTimeout(l._mouseDownTimer),l._mouseDownTimer=setTimeout(function(){l._isMouseDown=!0,l._sendMouseData(0,l._mouseEventTypeMap[t],0,l._cachePosMouse.X,l._cachePosMouse.Y,l._cachePosCursor.X,l._cachePosCursor.Y)},l._mouseOperationConfig.downTimer)):1===l._mouseMode?(o=parseFloat(u(l._cacheCursorInfo.element,"left")),i=parseFloat(u(l._cacheCursorInfo.element,"top")),a=parseFloat(u(l._cacheCursorInfo.element,"height")),s=parseFloat(u(l._cacheCursorInfo.element,"width")),l._cacheCursorInfo.left=o,l._cacheCursorInfo.top=i,l._cacheCursorInfo.height=a,l._cacheCursorInfo.width=s,l._cachePosCursor=l._getPosCursor(o+l._cacheVideoInfo.left,i+l._cacheVideoInfo.top),clearTimeout(l._mouseDownTimer),l._mouseDownTimer=setTimeout(function(){l._isMouseDown=!0,l._sendMouseData(0,l._mouseEventTypeMap[t],0,l._cachePosMouse.X,l._cachePosMouse.Y,l._cachePosCursor.X,l._cachePosCursor.Y)},l._mouseOperationConfig.downTimer)):2===l._mouseMode&&(l._cachePosCursor=l._getPosCursor(n,r),a=n-l._cacheVideoInfo.left,s=r-l._cacheVideoInfo.top,l._setCursorPosition(a,s),U(l._storeKey.cursorPosition,JSON.stringify({offsetX:a,offsetY:s})),clearTimeout(l._mouseDownTimer),l._mouseDownTimer=setTimeout(function(){l._isMouseDown=!0,l._sendMouseData(4,l._mouseEventTypeMap.mousemove,0,l._cachePosMouse.X,l._cachePosMouse.Y,l._cachePosCursor.X,l._cachePosCursor.Y),setTimeout(function(){l._sendMouseData(0,l._mouseEventTypeMap[t],0,l._cachePosMouse.X,l._cachePosMouse.Y,l._cachePosCursor.X,l._cachePosCursor.Y)},25)},l._mouseOperationConfig.downTimer)),void U(l._storeKey.sendMouseData,JSON.stringify({posMouse:l._cachePosMouse,posCursor:l._cachePosCursor})));3===l._mouseMode&&l._multiTouchHandler(1153,e)}}),o(this,"_mouseMoveHandler",function(e){if(d(e),0!==l._mouseMode)if(1===l._mouseMode||2===l._mouseMode){if(-1!==l._cacheFingerData.identifier)for(var t,n,r,o,i,a=e.targetTouches,s=e.type,c=0;c<a.length;c++)a[c].identifier===l._cacheFingerData.identifier&&(t=(n=l._getClientPosition(a[0])).clientX,n=n.clientY,(_Mathabs(t-l._cacheFingerData.originX)>l._mouseOperationConfig.downMoveOffset||_Mathabs(n-l._cacheFingerData.originY)>l._mouseOperationConfig.downMoveOffset)&&(clearTimeout(l._mouseDownTimer),l._mouseDownTimer=null),(o=G(l._storeKey.sendMouseData))&&(o=JSON.parse(o).posMouse,l._cachePosMouse.X=o.X,l._cachePosMouse.Y=o.Y),l._isRemoteMousePointLocked||"block"!==l._cacheCursorInfo.element.style.display?(o=t-l._cacheFingerData.clientX,r=n-l._cacheFingerData.clientY,l._cachePosMouse.X+=_Mathfloor(o*l._mouseMoveRatio),l._cachePosMouse.Y+=_Mathfloor(r*l._mouseMoveRatio),l._cachePosCursor=l._getPosCursor(t,n),l._sendMouseData(4,l._mouseEventTypeMap[s],0,l._cachePosMouse.X,l._cachePosMouse.Y,l._cachePosCursor.X,l._cachePosCursor.Y),l._cacheFingerData.clientX=t,l._cacheFingerData.clientY=n):1===l._mouseMode?(o=t-l._cacheFingerData.clientX,r=n-l._cacheFingerData.clientY,o=o+l._cacheCursorInfo.left,i=r+l._cacheCursorInfo.top,l._cachePosCursor=l._getPosCursor(o+l._cacheVideoInfo.left,i+l._cacheVideoInfo.top),l._setCursorPosition(o,i),U(l._storeKey.cursorPosition,JSON.stringify({offsetX:o,offsetY:i})),l._sendMouseData(4,l._mouseEventTypeMap[s],0,l._cachePosMouse.X,l._cachePosMouse.Y,l._cachePosCursor.X,l._cachePosCursor.Y)):2===l._mouseMode&&(l._cachePosCursor=l._getPosCursor(t,n),o=t-l._cacheVideoInfo.left,i=n-l._cacheVideoInfo.top,l._setCursorPosition(o,i),U(l._storeKey.cursorPosition,JSON.stringify({offsetX:o,offsetY:i})),l._sendMouseData(4,l._mouseEventTypeMap[s],0,l._cachePosMouse.X,l._cachePosMouse.Y,l._cachePosCursor.X,l._cachePosCursor.Y)),U(l._storeKey.sendMouseData,JSON.stringify({posMouse:l._cachePosMouse,posCursor:l._cachePosCursor})))}else 3===l._mouseMode&&l._multiTouchHandler(1152,e)}),o(this,"_mouseUpHandler",function(e){if(d(e),0!==l._mouseMode){if(1===l._mouseMode||2===l._mouseMode){if(-1===l._cacheFingerData.identifier)return;for(var t=e.changedTouches,n=e.type,r=0;r<t.length;r++)t[r].identifier===l._cacheFingerData.identifier&&(l._cacheFingerData.identifier=-1,l._isRemoteMousePointLocked||l._cacheCursorInfo.element.style.display,setTimeout(function(){l._isMouseDown&&(l._isMouseDown=!1,l._sendMouseData(0,l._mouseEventTypeMap[n],0,l._cachePosMouse.X,l._cachePosMouse.Y,l._cachePosCursor.X,l._cachePosCursor.Y))},l._mouseOperationConfig.downTimer+10))}3===l._mouseMode&&l._multiTouchHandler(1154,e)}}),o(this,"_multiTouchHandler",function(r,e){Array.prototype.forEach.call(e.changedTouches,function(e){var t=l._getClientPosition(e),n=t.clientX,t=t.clientY,n=l._getPosCursor(n,t),t=n.X,n=n.Y,e=_Mathabs(e.identifier);1153===r&&(!l._touchIdentifier[e]&&0!==l._touchIdentifier[e]||l._sendMultiTouchData(1154,e,t,n),l._touchIdentifier[e]=l._touchIdentifierRange.splice(0,1)[0]),l._sendMultiTouchData(r,e,t,n)})}),o(this,"_sendMultiTouchData",function(e,t,n,r){n={inputOp:e,inputState:1154===e?Oe.keyup:Oe.keydown,touchEvent:{pointerCount:1,pointerProperties:[{type:1,id:l._touchIdentifier[t],xPos:parseInt(n),yPos:parseInt(r)}]}};l._gamePlayer.sendData(f({opList:[n]})),1154!==e||!l._touchIdentifier[t]&&0!==l._touchIdentifier[t]||(l._touchIdentifierRange.push(l._touchIdentifier[t]),delete l._touchIdentifier[t])}),o(this,"_getClientPosition",function(e){var t,n=e.clientX,e=e.clientY;return C.rotate&&(t=n,n=e,e=C.getScreenSize().height-t),{clientX:n,clientY:e}}),o(this,"_setCursorPosition",function(e,t){var n=l._cacheCursorInfo.element,r=l._cacheVideoInfo,o=r.width,r=r.height;(e=o<=e?o:e)<=0&&(e=0),u(n,{top:"".concat(t=(t=r<=t?r:t)<=0?0:t,"px"),left:"".concat(e,"px")})}),o(this,"_getPosCursor",function(e,t){var n=l._cacheVideoInfo,r=n.left,o=n.top;return{X:(e-r)*n.widthRatio,Y:(t-o)*n.heightRatio}}),o(this,"_keyboardHandler",function(e){var t=e.keyCode,n=e.type,r=e.code,o=e.target;!function(e,t){try{return e===t||e!==t&&e.contains(t)}catch(e){}}(l._playerContainerNode,o)&&(o instanceof HTMLInputElement||o instanceof HTMLTextAreaElement)||(d(e),-1===Pe.indexOf(t)&&-1===Pe.indexOf(r)&&l._sendKeyboardData(t,l._keyboardEventTypeMap[n],0))}),o(this,"_keyDownHandler",function(e){l._keyboardHandler(e)}),o(this,"_keyUpHandler",function(e){l._keyboardHandler(e)}),o(this,"_sendKeyboardData",function(e,t,n){if(2===t){for(var r in l._recordPressedKeysMap)if(l._recordPressedKeysMap.hasOwnProperty(r)&&18===parseInt(r)&&115===parseInt(e))return;l._recordPressedKeysMap[e]=1}else 3===t&&delete l._recordPressedKeysMap[e];l._gamePlayer.sendData(f({opList:[{inputOp:e,inputState:t,value:n}]}))}),o(this,"_sendEnterKeyCode",function(){l._sendKeyboardData(13,2,0),l._sendKeyboardData(13,3,0)}),o(this,"setCustomCursor",function(e){if(e){var e=JSON.parse(e),t=e.showOrHide,n=e.cursorStyle,r=e.gameCursorData,o=e.cursorPos,i=e.cursorWidth,e=e.cursorHeight,a=(o&&o.x&&o.y&&(l._cachePosMouse.X=o.x,l._cachePosMouse.Y=o.y),"Boolean"===h(t)&&(l._isRemoteMousePointLocked=!t),"");switch(r&&r.cursorFrames&&(a=r.cursorFrames[0].frameData),n){case"CURSOR_DEFAULT":case"CURSOR_CUSTOM":case"CURSOR_ARROW":case"CURSOR_HAND":case"CURSOR_HELP":case"CURSOR_APPSTARTING":case"CURSOR_CROSS":case"CURSOR_IBEAM":a=a||"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAKQ2lDQ1BJQ0MgcHJvZmlsZQAAeNqdU3dYk/cWPt/3ZQ9WQtjwsZdsgQAiI6wIyBBZohCSAGGEEBJAxYWIClYUFRGcSFXEgtUKSJ2I4qAouGdBiohai1VcOO4f3Ke1fXrv7e371/u855zn/M55zw+AERImkeaiagA5UoU8Otgfj09IxMm9gAIVSOAEIBDmy8JnBcUAAPADeXh+dLA//AGvbwACAHDVLiQSx+H/g7pQJlcAIJEA4CIS5wsBkFIAyC5UyBQAyBgAsFOzZAoAlAAAbHl8QiIAqg0A7PRJPgUA2KmT3BcA2KIcqQgAjQEAmShHJAJAuwBgVYFSLALAwgCgrEAiLgTArgGAWbYyRwKAvQUAdo5YkA9AYACAmUIszAAgOAIAQx4TzQMgTAOgMNK/4KlfcIW4SAEAwMuVzZdL0jMUuJXQGnfy8ODiIeLCbLFCYRcpEGYJ5CKcl5sjE0jnA0zODAAAGvnRwf44P5Dn5uTh5mbnbO/0xaL+a/BvIj4h8d/+vIwCBAAQTs/v2l/l5dYDcMcBsHW/a6lbANpWAGjf+V0z2wmgWgrQevmLeTj8QB6eoVDIPB0cCgsL7SViob0w44s+/zPhb+CLfvb8QB7+23rwAHGaQJmtwKOD/XFhbnauUo7nywRCMW735yP+x4V//Y4p0eI0sVwsFYrxWIm4UCJNx3m5UpFEIcmV4hLpfzLxH5b9CZN3DQCshk/ATrYHtctswH7uAQKLDljSdgBAfvMtjBoLkQAQZzQyefcAAJO/+Y9AKwEAzZek4wAAvOgYXKiUF0zGCAAARKCBKrBBBwzBFKzADpzBHbzAFwJhBkRADCTAPBBCBuSAHAqhGJZBGVTAOtgEtbADGqARmuEQtMExOA3n4BJcgetwFwZgGJ7CGLyGCQRByAgTYSE6iBFijtgizggXmY4EImFINJKApCDpiBRRIsXIcqQCqUJqkV1II/ItchQ5jVxA+pDbyCAyivyKvEcxlIGyUQPUAnVAuagfGorGoHPRdDQPXYCWomvRGrQePYC2oqfRS+h1dAB9io5jgNExDmaM2WFcjIdFYIlYGibHFmPlWDVWjzVjHVg3dhUbwJ5h7wgkAouAE+wIXoQQwmyCkJBHWExYQ6gl7CO0EroIVwmDhDHCJyKTqE+0JXoS+cR4YjqxkFhGrCbuIR4hniVeJw4TX5NIJA7JkuROCiElkDJJC0lrSNtILaRTpD7SEGmcTCbrkG3J3uQIsoCsIJeRt5APkE+S+8nD5LcUOsWI4kwJoiRSpJQSSjVlP+UEpZ8yQpmgqlHNqZ7UCKqIOp9aSW2gdlAvU4epEzR1miXNmxZDy6Qto9XQmmlnafdoL+l0ugndgx5Fl9CX0mvoB+nn6YP0dwwNhg2Dx0hiKBlrGXsZpxi3GS+ZTKYF05eZyFQw1zIbmWeYD5hvVVgq9ip8FZHKEpU6lVaVfpXnqlRVc1U/1XmqC1SrVQ+rXlZ9pkZVs1DjqQnUFqvVqR1Vu6k2rs5Sd1KPUM9RX6O+X/2C+mMNsoaFRqCGSKNUY7fGGY0hFsYyZfFYQtZyVgPrLGuYTWJbsvnsTHYF+xt2L3tMU0NzqmasZpFmneZxzQEOxrHg8DnZnErOIc4NznstAy0/LbHWaq1mrX6tN9p62r7aYu1y7Rbt69rvdXCdQJ0snfU6bTr3dQm6NrpRuoW623XP6j7TY+t56Qn1yvUO6d3RR/Vt9KP1F+rv1u/RHzcwNAg2kBlsMThj8MyQY+hrmGm40fCE4agRy2i6kcRoo9FJoye4Ju6HZ+M1eBc+ZqxvHGKsNN5l3Gs8YWJpMtukxKTF5L4pzZRrmma60bTTdMzMyCzcrNisyeyOOdWca55hvtm82/yNhaVFnMVKizaLx5balnzLBZZNlvesmFY+VnlW9VbXrEnWXOss623WV2xQG1ebDJs6m8u2qK2brcR2m23fFOIUjynSKfVTbtox7PzsCuya7AbtOfZh9iX2bfbPHcwcEh3WO3Q7fHJ0dcx2bHC866ThNMOpxKnD6VdnG2ehc53zNRemS5DLEpd2lxdTbaeKp26fesuV5RruutK10/Wjm7ub3K3ZbdTdzD3Ffav7TS6bG8ldwz3vQfTw91jicczjnaebp8LzkOcvXnZeWV77vR5Ps5wmntYwbcjbxFvgvct7YDo+PWX6zukDPsY+Ap96n4e+pr4i3z2+I37Wfpl+B/ye+zv6y/2P+L/hefIW8U4FYAHBAeUBvYEagbMDawMfBJkEpQc1BY0FuwYvDD4VQgwJDVkfcpNvwBfyG/ljM9xnLJrRFcoInRVaG/owzCZMHtYRjobPCN8Qfm+m+UzpzLYIiOBHbIi4H2kZmRf5fRQpKjKqLupRtFN0cXT3LNas5Fn7Z72O8Y+pjLk722q2cnZnrGpsUmxj7Ju4gLiquIF4h/hF8ZcSdBMkCe2J5MTYxD2J43MC52yaM5zkmlSWdGOu5dyiuRfm6c7Lnnc8WTVZkHw4hZgSl7I/5YMgQlAvGE/lp25NHRPyhJuFT0W+oo2iUbG3uEo8kuadVpX2ON07fUP6aIZPRnXGMwlPUit5kRmSuSPzTVZE1t6sz9lx2S05lJyUnKNSDWmWtCvXMLcot09mKyuTDeR55m3KG5OHyvfkI/lz89sVbIVM0aO0Uq5QDhZML6greFsYW3i4SL1IWtQz32b+6vkjC4IWfL2QsFC4sLPYuHhZ8eAiv0W7FiOLUxd3LjFdUrpkeGnw0n3LaMuylv1Q4lhSVfJqedzyjlKD0qWlQyuCVzSVqZTJy26u9Fq5YxVhlWRV72qX1VtWfyoXlV+scKyorviwRrjm4ldOX9V89Xlt2treSrfK7etI66Trbqz3Wb+vSr1qQdXQhvANrRvxjeUbX21K3nShemr1js20zcrNAzVhNe1bzLas2/KhNqP2ep1/XctW/a2rt77ZJtrWv913e/MOgx0VO97vlOy8tSt4V2u9RX31btLugt2PGmIbur/mft24R3dPxZ6Pe6V7B/ZF7+tqdG9s3K+/v7IJbVI2jR5IOnDlm4Bv2pvtmne1cFoqDsJB5cEn36Z8e+NQ6KHOw9zDzd+Zf7f1COtIeSvSOr91rC2jbaA9ob3v6IyjnR1eHUe+t/9+7zHjY3XHNY9XnqCdKD3x+eSCk+OnZKeenU4/PdSZ3Hn3TPyZa11RXb1nQ8+ePxd07ky3X/fJ897nj13wvHD0Ivdi2yW3S609rj1HfnD94UivW2/rZffL7Vc8rnT0Tes70e/Tf/pqwNVz1/jXLl2feb3vxuwbt24m3Ry4Jbr1+Hb27Rd3Cu5M3F16j3iv/L7a/eoH+g/qf7T+sWXAbeD4YMBgz8NZD+8OCYee/pT/04fh0kfMR9UjRiONj50fHxsNGr3yZM6T4aeypxPPyn5W/3nrc6vn3/3i+0vPWPzY8Av5i8+/rnmp83Lvq6mvOscjxx+8znk98ab8rc7bfe+477rfx70fmSj8QP5Q89H6Y8en0E/3Pud8/vwv94Tz+4A5JREAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAADdmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOmQ3NjIxNGY3LWZkMjEtY2E0ZS05Yzc2LWUyZWJhNTA4MjcyMiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowNUU2QzJDRTE1NzgxMUVBQjIzREQ0OEY2Mjk2MTk5QSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowNUU2QzJDRDE1NzgxMUVBQjIzREQ0OEY2Mjk2MTk5QSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozZmMwNjZlMy00MDlmLTZmNDAtOWRmMi1hNjM4M2YzNWUxMGUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ZDc2MjE0ZjctZmQyMS1jYTRlLTljNzYtZTJlYmE1MDgyNzIyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+aG0IeAAAAS9JREFUeNrslb1qhEAQx2ejgh9ILsKBrxHTh2CTgL2NNrFOlyc5iL2N5REQ7ITjXiD4DGplc4oERQ83uweGFGn3bHaaHWaL+TEf/0EYY1jTxMUJwxBXVQWapoHruu+qqp6TJNn1fQ+maYLneYgFAFoqUNf18zRNt3mevx6PxxdZlsG27b1lWTuE0Leu619MAdq2BVEULxWIoug0zzMOgsBomgaID4ZhsG0BTTKO4wVAUZQThaNxCkgqwH4G/hqBEa81hDewsnEADsAB/t13QRDORIDQVQGo4pHEF7/rurtF/ehLVZJ5CyRJuifJnrIs+yyKYlOW5eZwOOxJ7JH8PbAC+D1GcRxjchHpHQDHcd5oPE3Tj2EYYLvdgu/7bM8xX0MOwAE4AAfgABxgLfsRYADDFnZ+ccZcEgAAAABJRU5ErkJggg==";break;case"CURSOR_SIZE":a=a||De}a&&(o=C.getClientScale(),u(l._cacheCursorInfo.element,{"z-index":"6666",position:"absolute",width:(i||32)*o/1.5+"px",height:(e||32)*o/1.5+"px",background:"url(data:image/png;base64,".concat("true"===l._gameStartParams.isUseTransparentCursor?De:a,") no-repeat center"),"background-size":"contain",transform:"translateZ(0px)"}),setTimeout(function(){var e,t=G(l._storeKey.cursorPosition);t&&(l.calcRemoteAndLocalScreenRatio(),e=(t=JSON.parse(t)).offsetX,t=t.offsetY,l._setCursorPosition(e,t))},200)),(a&&!l._isRemoteMousePointLocked&&0!==l._mouseMode?s:p)(l._cacheCursorInfo.element)}}),o(this,"removeKeyboardEvent",function(){document.removeEventListener("keydown",l._keyDownHandler),document.removeEventListener("keyup",l._keyUpHandler)}),o(this,"removeMouseEvent",function(){l._canvasParentNode.removeEventListener("touchstart",l._mouseDownHandler),l._canvasParentNode.removeEventListener("touchmove",l._mouseMoveHandler),l._canvasParentNode.removeEventListener("touchend",l._mouseUpHandler)}),o(this,"sendTextMessage",function(e){var t;"String"===h(e)&&((t={}).inputBuf=function(e){for(var t,n=[],r=0;r<e.length;r++)if(1===(t=encodeURI(e[r])).length)n.push(t.charCodeAt(0));else for(var o=t.split("%"),i=1;i<o.length;i++)n.push(parseInt("0x"+o[i]));return new Uint8Array(n)}(e),l._gamePlayer.sendData(q(be,t,1,2)))}),o(this,"setMouseMoveRatio",function(e){"Number"===h(e)&&0<e&&(l._mouseMoveRatio=e)}),o(this,"getMouseMoveRatio",function(){return l._mouseMoveRatio}),o(this,"setMouseMode",function(e){"Number"===h(e)&&(l._mouseMode=e,(0===l._mouseMode||l._isRemoteMousePointLocked?p:s)(l._cacheCursorInfo.element))}),o(this,"getMouseMode",function(){return l._mouseMode}),o(this,"getStoreSendMouseData",function(){l.calcRemoteAndLocalScreenRatio();var e=parseFloat(u(l._cacheCursorInfo.element,"left")),t=parseFloat(u(l._cacheCursorInfo.element,"top")),e=(l._cachePosCursor=l._getPosCursor(e+l._cacheVideoInfo.left,t+l._cacheVideoInfo.top),{x:parseInt(l._cachePosCursor.X<0?0:l._cachePosCursor.X>l._cacheGameInfo.width?l._cacheGameInfo.width:l._cachePosCursor.X),y:parseInt(l._cachePosCursor.Y<0?0:l._cachePosCursor.Y>l._cacheGameInfo.height?l._cacheGameInfo.height:l._cachePosCursor.Y)}),t={x:parseInt(l._cachePosMouse.X),y:parseInt(l._cachePosMouse.Y)},n=G(l._storeKey.sendMouseData);return n&&(n=JSON.parse(n),t.x=parseInt(n.posMouse.X),t.y=parseInt(n.posMouse.Y)),{posCursor:e,posMouse:t}}),o(this,"calcRemoteAndLocalScreenRatio",function(e){e&&(l._gameStartParams.resolution=e);var e=parseFloat(u(l._playerContainerNode,"width")),t=parseFloat(u(l._playerContainerNode,"height")),n=parseFloat(u(l._playerContainerNode,"left")),r=parseFloat(u(l._playerContainerNode,"top")),o=l._gameStartParams.resolution.split("x")[0],i=l._gameStartParams.resolution.split("x")[1];e===l._cacheVideoInfo.width&&t===l._cacheVideoInfo.height&&n===l._cacheVideoInfo.left&&r===l._cacheVideoInfo.top&&o===l._cacheGameInfo.width&&i===l._cacheGameInfo.height||(l._cacheGameInfo.width=o,l._cacheGameInfo.height=i,l._cacheVideoInfo.width=e,l._cacheVideoInfo.height=t,l._cacheVideoInfo.left=n,l._cacheVideoInfo.top=r,0<e&&0<l._cacheGameInfo.width&&(l._cacheVideoInfo.widthRatio=l._cacheGameInfo.width/e),0<t&&0<l._cacheGameInfo.height&&(l._cacheVideoInfo.heightRatio=l._cacheGameInfo.height/t))}),o(this,"resizeMouseCursorPosition",function(){var e=l._cacheCursorInfo.element,t=l._cacheVideoInfo.width,n=l._cacheVideoInfo.height,r=parseFloat(u(e,"left")),o=parseFloat(u(e,"top")),i=(l.calcRemoteAndLocalScreenRatio(),l._cacheVideoInfo.width),a=l._cacheVideoInfo.height;u(e,{left:"".concat(i/(t/r),"px"),top:"".concat(a/(n/o),"px")})}),this._playerContainerNode=n,this._canvasNode=n.querySelector("canvas"),this._canvasParentNode=this._canvasNode.parentElement,this._gamePlayer=t,this._gameStartParams=r,this._cacheVideoInfo={width:0,height:0,left:0,top:0,widthRatio:1,heightRatio:1},this._cacheGameInfo={width:0,height:0},this._cachePosMouse={X:0,Y:0},this._cachePosCursor={X:0,Y:0},this._cacheCursorInfo={element:null,left:0,top:0,height:0,width:0},this._cacheFingerData={clientX:0,clientY:0,originX:0,originY:0,identifier:-1},this._mouseOperationConfig={downMoveOffset:/^[0-9]+$/.test(r.mouseDownMoveDistance)?+r.mouseDownMoveDistance:5,downTimer:/^[0-9]+$/.test(r.mouseDownDelayTime)?+r.mouseDownDelayTime:200},this._isMouseDown=!1,this._mouseDownTimer=null,this._mouseMode=1,this._isRemoteMousePointLocked=!1,this._mouseMoveRatio=1,this._recordPressedKeysMap={},this._recordPressedMouseButtonsMap={},this._touchIdentifier={},this._touchIdentifierRange=[0,1,2,3,4,5,6,7,8,9],this._keyboardEventTypeMap={keydown:2,keyup:3},this._mouseEventTypeMap={touchstart:2,touchmove:1,touchend:3},this._storeKey={cursorPosition:W("cursorPosition".concat(this._gameStartParams.cid)),sendMouseData:W("sendMouseData".concat(this._gameStartParams.cid))},this._init()},Object.defineProperty(R,"prototype",{writable:!1}),R),je={config:{default_layout:"xbox",xbox_alpha:1},keyboard:[],mouse:{btn_sensitivity:1,mode:1,sensitivity:1},xbox:[{kT:1,ks:[{c:0,k:"LT"}],n:"LT",p:{h:144,w:144,x:.062,y:.222},s:1,sT:2},{kT:1,ks:[{c:256,k:"LB"}],n:"LB",p:{h:144,w:144,x:.062,y:.378},s:1,sT:2},{kT:1,ks:[{c:0,k:"RT"}],n:"RT",p:{h:144,w:144,x:.863,y:.222},s:1,sT:2},{kT:1,ks:[{c:512,k:"RB"}],n:"RB",p:{h:144,w:144,x:.863,y:.378},s:1,sT:2},{kT:1,ks:[{c:16,k:"START"}],n:"START",p:{h:96,w:96,x:.509,y:.033},s:1,sT:2},{kT:1,ks:[{c:32,k:"SELECT"}],n:"SELECT",p:{h:96,w:96,x:.441,y:.033},s:1,sT:2},{kT:1,ks:[{c:64,k:"LS"}],n:"LS",p:{h:120,w:120,x:.01,y:.519},s:1,sT:2},{kT:1,ks:[{c:128,k:"RS"}],n:"RS",p:{h:120,w:120,x:.927,y:.519},s:1,sT:2},{kT:4,ks:[{c:0,k:"LR"}],n:"LR",p:{h:320,w:320,x:.083,y:.611},s:1,sT:2},{kT:3,ks:[{c:1,k:"UP"},{c:2,k:"DOWN"},{c:4,k:"LEFT"},{c:8,k:"RIGHT"}],n:"DIRECTION",p:{h:240,w:240,x:.312,y:.722},s:1,sT:2},{kT:5,ks:[{c:0,k:"RR"}],n:"RR",p:{h:240,w:240,x:.562,y:.722},s:1,sT:2},{kT:1,ks:[{c:4096,k:"A"}],n:"A",p:{h:120,w:120,x:.839,y:.833},s:1,sT:2},{kT:1,ks:[{c:8192,k:"B"}],n:"B",p:{h:120,w:120,x:.896,y:.731},s:1,sT:2},{kT:1,ks:[{c:16384,k:"X"}],n:"X",p:{h:120,w:120,x:.781,y:.731},s:1,sT:2},{kT:1,ks:[{c:32768,k:"Y"}],n:"Y",p:{h:120,w:120,x:.839,y:.63},s:1,sT:2}]},Ke=(Q((O=nt).prototype,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){var n;return void 0!==this._listeners&&void 0!==(n=this._listeners)[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){void 0!==this._listeners&&void 0!==(e=this._listeners[e])&&-1!==(t=e.indexOf(t))&&e.splice(t,1)}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,o=n.length;r<o;r++)n[r].call(this,e)}}}}]),Object.defineProperty(O,"prototype",{writable:!1}),nt),Ue=function(){function n(e,t){var i;if(this instanceof n)return A(c(i=a.call(this)),"updateDisplaySize",function(){i.displayWidth=C.rotate?window.innerHeight:window.innerWidth,i.displayHeight=C.rotate?window.innerWidth:window.innerHeight}),A(c(i),"_bindEvent",function(){var e=i.domEle.querySelector(".hm-vir-keyboard-mask"),e=(e&&(e.addEventListener(w.touchStart,function(e){d(e),i.hide(),i.dispatchEvent({type:"display",display:!1})}),e.addEventListener(w.touchEnd,function(e){d(e),i.hide(),i.dispatchEvent({type:"display",display:!1})}),e.addEventListener(w.touchMove,function(e){return d(e),!1})),i.domEle.querySelector(".hm-vir-keyboard"));e&&(e.addEventListener(w.touchStart,function(e){return d(e),!1}),e.addEventListener(w.touchEnd,function(e){return d(e),!1}),e.addEventListener(w.touchMove,function(e){return d(e),!1}),e=i.domEle.querySelectorAll(".i_button"))&&e.forEach(function(e){e.addEventListener(w.touchStart,function(e){d(e),i._buttonVibrate(),i._onKeyPress(w.keyDown,e.target)}),e.addEventListener(w.touchEnd,function(e){d(e),i._onKeyPress(w.keyUp,e.target)})})}),A(c(i),"_onKeyPress",function(e,t){i._removeActiveStyle(),(e===w.keyDown?l:K)(t,"active");var t=t.dataset,n=t.type,t=t.value;if(me(t)&&(t=parseInt(t)),"button"===n)switch(t){case"num_symbol":i._displayModeSwitch("symbol");break;case"ctrl_space":e===w.keyDown&&i._inputSwitch();break;case"back":i._displayModeSwitch("letter");break;case"caps_lock":e===w.keyDown&&i._setCapsLock(),i._sendKeyboardData(20,i.capsLock?"onLock":"unLock",0)}else if("symbol"===n)try{t&&(i._sendKeyboardData(16,e,0),i._sendKeyboardData(t,e,0))}catch(e){}else"num"!==n&&"letter"!==n||!t||i._sendKeyboardData(t,e,0)}),A(c(i),"_sendKeyboardData",function(e,t){var n=[];n.push({inputOp:e,inputState:Oe[t],value:2<arguments.length&&void 0!==arguments[2]?arguments[2]:0}),i.dispatchEvent({type:"inputData",data:{opList:n}})}),A(c(i),"_resize",function(){try{i.updateDisplaySize();var e=C.getScreenSize(),t=e.rotate,n=e.top,r=e.left,o=(e.width,t?n:r);u(i.domEle,{left:0,width:i.displayWidth+"px",height:i.displayHeight+"px"}),0<o&&C.isFullScreen()&&u(i.domEle,{left:-o+"px"})}catch(e){}}),A(c(i),"_render",function(){return i.updateDisplaySize(),i.initComplete||(i._drawKeyboard(),i._bindEvent(),i.initComplete=!0),c(i)}),A(c(i),"_drawKeyboard",function(){if(t=i.keyboardLayout,e=B(t),null!=t&&("object"==e||"function"==e)&&"[object Object]"===Object.prototype.toString.call(t)&&0<Object.keys(i.keyboardLayout).length){var r,e=document.createElement("div");l(e,"hm-vir-keyboard-mask"),i.domEle.appendChild(e),i.keyboardEle=document.createElement("div"),l(i.keyboardEle,"hm-vir-keyboard");for(r in i.keyboardLayout)!function(){var e,t,a,n=i.keyboardLayout[r];n&&0<n.length&&(l(e=document.createElement("div"),"panel ".concat(r)),p(e),(t=document.createElement("table")).setAttribute("align","center"),t.setAttribute("width","100%"),t.setAttribute("border","0"),t.setAttribute("cellspacing","0"),t.setAttribute("cellpadding","0"),a=document.createElement("tbody"),n.forEach(function(e){var t,n=document.createElement("tr");for(t in e){var r=e[t],o=document.createElement("td");if(o.setAttribute("colspan",r.colspan),r.width&&o.setAttribute("width",r.width),r.label){var i=document.createElement("div");switch(l(i,"i_button"),r.class&&l(i,r.class),r.type){case"num":l(i,"i_button_num");break;case"letter":l(i,"i_button_letter");break;case"symbol":l(i,"i_button_symbol");break;default:l(i,"i_button_button")}i.setAttribute("data-type",r.type),i.setAttribute("data-value",r.value),i.setAttribute("data-label",r.label),i.innerHTML=r.label,o.appendChild(i)}n.appendChild(o)}a.appendChild(n)}),t.appendChild(a),e.appendChild(t),i.keyboardEle.appendChild(e))}();i.domEle.appendChild(i.keyboardEle)}var t,e;return c(i)}),A(c(i),"_displayModeSwitch",function(e){try{i.displayMode=e,i._removeActiveStyle(),("symbol"===e?(p(i.domEle.querySelector(".letter")),s):(s(i.domEle.querySelector(".letter")),p))(i.domEle.querySelector(".symbol"))}catch(e){}}),A(c(i),"_removeActiveStyle",function(){var e;i.domEle&&(e=i.domEle.querySelectorAll(".i_button.active"))&&e.forEach(function(e){K(e,"active")})}),A(c(i),"_inputSwitch",function(){i._sendKeyboardData(91,"keydown",0),i._sendKeyboardData(32,"keydown",0),i._sendKeyboardData(91,"keyup",0),i._sendKeyboardData(32,"keyup",0)}),A(c(i),"_resetKeyboard",function(){i.displayMode="letter",i.capsLock&&(i._sendKeyboardData(20,w.unLock,0),i._setCapsLock()),i._displayModeSwitch("letter"),i._removeActiveStyle()}),A(c(i),"_setCapsLock",function(){function r(e){return 8!==e&&189!==e&&37!==e&&39!==e&&13!==e&&190!==e&&188!==e&&9!==e&&189!==e&&187!==e}var e,t;"letter"===i.displayMode&&(e=i.domEle.querySelector("div.letter").querySelectorAll(".i_button_letter"),t=i.domEle.querySelector("div.capsLock"),i.capsLock?(t&&(t.innerHTML=i.sdkTips.upperCase||""),e.forEach(function(e){var t=e.dataset,n=t.value,t=t.label;me(n)&&(n=parseInt(n)),r(n)&&(e.innerHTML=t.toLowerCase())})):(t&&(t.innerHTML=i.sdkTips.lowerCase||""),e.forEach(function(e){var t=e.dataset,n=t.value,t=t.label;me(n)&&(n=parseInt(n)),r(n)&&(e.innerHTML=t.toUpperCase())})),i.capsLock=!i.capsLock)}),A(c(i),"_buttonVibrate",function(){navigator.vibrate&&i._enabledVibrate&&navigator.vibrate(50)}),A(c(i),"resizeLayout",function(){i._resize()}),A(c(i),"show",function(){var e;return i.domEle&&(i.initComplete||i._render(),i.display=!0,i._removeActiveStyle(),s(i.domEle),e=i.domEle.querySelector("div.hm-vir-keyboard"))&&(i._displayModeSwitch(i.displayMode),u(e,{bottom:0})),c(i)}),A(c(i),"hide",function(){try{var e;i.display=!1,i.domEle&&(p(i.domEle),(e=i.domEle.querySelector("div.hm-vir-keyboard"))&&u(e,{bottom:"-200px"}),i._resetKeyboard()),i.dispatchEvent({type:"inputState",data:!1})}catch(e){}return c(i)}),A(c(i),"getDisplay",function(){return"block"===u(i.domEle,"display")}),A(c(i),"destroy",function(){try{i.initComplete=!1,i.capsLock=!1,i.displayMode="letter",i.container.removeChild(i.domEle),i.domEle=null,i.display=!1}catch(e){}}),A(c(i),"enableVibrate",function(e){i._enabledVibrate=e}),i.capsLock=!1,i.sdkTips=t,i.displayMode="letter",i.keyboardLayout={letter:[{empty:{colspan:13,value:"",label:""},left:{colspan:1,value:189,label:i.sdkTips.forward||"",type:"letter",class:"ctrl"},right:{colspan:1,value:187,label:i.sdkTips.next||"",type:"letter",class:"ctrl"}},{num_1:{colspan:1,value:49,label:"1",type:"num"},num_2:{colspan:1,value:50,label:"2",type:"num"},num_3:{colspan:1,value:51,label:"3",type:"num"},num_4:{colspan:1,value:52,label:"4",type:"num"},num_5:{colspan:1,value:53,label:"5",type:"num"},empty:{colspan:5,value:"",label:""},num_6:{colspan:1,value:54,label:"6",type:"num"},num_7:{colspan:1,value:55,label:"7",type:"num"},num_8:{colspan:1,value:56,label:"8",type:"num"},num_9:{colspan:1,value:57,label:"9",type:"num"},num_0:{colspan:1,value:48,label:"0",type:"num"}},{q:{colspan:1,value:81,label:"q",type:"letter"},w:{colspan:1,value:87,label:"w",type:"letter"},e:{colspan:1,value:69,label:"e",type:"letter"},r:{colspan:1,value:82,label:"r",type:"letter"},t:{colspan:1,value:84,label:"t",type:"letter"},empty:{colspan:5,value:"",label:""},y:{colspan:1,value:89,label:"y",type:"letter"},u:{colspan:1,value:85,label:"u",type:"letter"},i:{colspan:1,value:73,label:"i",type:"letter"},o:{colspan:1,value:79,label:"o",type:"letter"},p:{colspan:1,value:80,label:"p",type:"letter"}},{tab:{colspan:1,value:9,label:i.sdkTips.newline||"",type:"letter",class:"ctrl"},a:{colspan:1,value:65,label:"a",type:"letter"},s:{colspan:1,value:83,label:"s",type:"letter"},d:{colspan:1,value:68,label:"d",type:"letter"},f:{colspan:1,value:70,label:"f",type:"letter"},empty:{colspan:5,value:"",label:""},g:{colspan:1,value:71,label:"g",type:"letter"},h:{colspan:1,value:72,label:"h",type:"letter"},j:{colspan:1,value:74,label:"j",type:"letter"},k:{colspan:1,value:75,label:"k",type:"letter"},l:{colspan:1,value:76,label:"l",type:"letter"}},{capsLock:{colspan:1,value:"caps_lock",label:i.sdkTips.upperCase||"",type:"button",class:"ctrl capsLock"},z:{colspan:1,value:90,label:"z",type:"letter"},x:{colspan:1,value:88,label:"x",type:"letter"},c:{colspan:1,value:67,label:"c",type:"letter"},v:{colspan:1,value:86,label:"v",type:"letter"},empty:{colspan:5,value:"",label:""},b:{colspan:1,value:66,label:"b",type:"letter"},n:{colspan:1,value:78,label:"n",type:"letter"},m:{colspan:1,value:77,label:"m",type:"letter"},backspace:{colspan:2,value:8,label:i.sdkTips.delete||"",type:"letter",class:"ctrl"}},{num_symbol:{colspan:1,value:"num_symbol",label:i.sdkTips.switchSymbol||"/",type:"button",class:"ctrl"},ctrl_space:{colspan:1,value:"ctrl_space",label:i.sdkTips.shift||"/",type:"button",class:"ctrl"},comma:{colspan:1,value:188,label:",",type:"letter",upperCase:!1},dot:{colspan:1,value:190,label:".",type:"letter",upperCase:!1},space:{colspan:7,value:32,label:i.sdkTips.space||"",type:"letter"},"!":{colspan:1,value:49,label:"!",type:"symbol"},"@":{colspan:1,value:50,label:"@",type:"symbol"},enter:{colspan:2,value:13,label:i.sdkTips.determine||"",type:"letter",class:"ctrl"}}],symbol:[{empty:{colspan:14,value:"",label:""}},{"(":{colspan:1,value:57,label:"(",type:"symbol"},")":{colspan:1,value:48,label:")",type:"symbol"},"[":{colspan:1,value:219,label:"[",type:"letter"},"]":{colspan:1,value:221,label:"]",type:"letter"},"{":{colspan:1,value:219,label:"{",type:"symbol"},"}":{colspan:1,value:221,label:"}",type:"symbol"},"@":{colspan:1,value:50,label:"@",type:"symbol"},empty:{colspan:3,value:"",label:""},num_1:{colspan:1,value:49,label:"1",type:"num"},num_2:{colspan:1,value:50,label:"2",type:"num"},num_3:{colspan:1,value:51,label:"3",type:"num"},",":{colspan:1,value:188,label:",",type:"letter"},".":{colspan:1,value:190,label:".",type:"letter"}},{"*":{colspan:1,value:56,label:"*",type:"symbol"},"#":{colspan:1,value:51,label:"#",type:"symbol"},"%":{colspan:1,value:53,label:"%",type:"symbol"},$:{colspan:1,value:52,label:"$",type:"symbol"},"&":{colspan:1,value:55,label:"&",type:"symbol"},_:{colspan:1,value:189,label:"_",type:"symbol"},"^":{colspan:1,value:54,label:"^",type:"symbol"},empty:{colspan:3,value:"",label:""},num_4:{colspan:1,value:52,label:"4",type:"num"},num_5:{colspan:1,value:53,label:"5",type:"num"},num_6:{colspan:1,value:54,label:"6",type:"num"},backspace:{colspan:2,value:8,label:i.sdkTips.delete||"",type:"letter",class:"ctrl"}},{"/":{colspan:1,value:191,label:"/",type:"letter"},"\\":{colspan:1,value:220,label:"\\",type:"letter"},"|":{colspan:1,value:220,label:"|",type:"symbol"},"'":{colspan:1,value:222,label:"'",type:"letter"},'"':{colspan:1,value:222,label:'"',type:"symbol"},"`":{colspan:1,value:192,label:"`",type:"letter"},"~":{colspan:1,value:192,label:"~",type:"symbol"},empty:{colspan:3,value:"",label:""},num_7:{colspan:1,value:55,label:"7",type:"num"},num_8:{colspan:1,value:56,label:"8",type:"num"},num_9:{colspan:1,value:57,label:"9",type:"num"},tab:{colspan:2,value:9,label:i.sdkTips.newline||"",type:"letter",class:"ctrl"}},{":":{colspan:1,value:186,label:":",type:"symbol"},";":{colspan:1,value:186,label:";",type:"letter"},"+":{colspan:1,value:187,label:"+",type:"symbol"},"-":{colspan:1,value:189,label:"-",type:"letter"},"=":{colspan:1,value:187,label:"=",type:"letter"},"<":{colspan:1,value:188,label:"<",type:"symbol"},">":{colspan:1,value:190,label:">",type:"symbol"},empty:{colspan:3,value:"",label:""},"?":{colspan:1,value:191,label:"?",type:"symbol"},"!":{colspan:1,value:49,label:"!",type:"symbol"},num_0:{colspan:1,value:48,label:"0",type:"num"},back:{colspan:2,value:"back",label:i.sdkTips.saasOperationTips||"",type:"button",class:"ctrl"}},{empty:{colspan:14,value:"",label:""}}]},i.container=e,i.domEle=document.createElement("div"),u(i.domEle,{"pointer-events":"auto",display:"none"}),l(i.domEle,"hm-vir-keyboard-box"),i._resize(),i.container.appendChild(i.domEle),i.initComplete=!1,i.display=!1,i._enabledVibrate=!1,i._render(),i;throw new TypeError("Cannot call a class as a function")}var e=n,t=Ke;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),ee(e,t);r=n,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var r,o,a=function(){var e,t=te(r),t=(e=o?(e=te(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===Z(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)};return e=n,Object.defineProperty(e,"prototype",{writable:!1}),e}(),Ge=function(){function n(e,t){var c;if(this instanceof n)return y(a(c=i.call(this)),"_init_",function(){return c._render_(),a(c)}),y(a(c),"_render_",function(){try{var e,t,n,r,o,i,a;c.keyType<=2||7<c.keyType||(c.domEle=document.createElement("div"),l(c.domEle,"hm-vir-rocker"),l(c.domEle,3===(s=c.keyType)?"direction":4===s?"left":5===s?"right":6===s?"wasd":7===s?"tblr":void 0),e=C.rotate,t=C.getScreenWidthHeight().width,n=C.getScreenWidthHeight().height,u(c.domEle,{width:c.width/1.5+"px",height:c.height/1.5+"px",position:"fixed",left:c.x*(e?n:t)+"px",top:c.y*(e?t:n)+"px",zIndex:201,opacity:c.opacity}),l(r=document.createElement("div"),"dir"),l(o=document.createElement("div"),"inner"),3!=c.keyType&&l(o,"up"),c.innerSize=c.width/2*.4,i=c.innerSize/2,a=c.innerSize/2,u(o,{width:c.innerSize/1.5+"px",height:c.innerSize/1.5+"px",marginTop:-i/2+"px",marginLeft:-a/2+"px"}),c.domEle.appendChild(r),c.domEle.appendChild(o),c.container.appendChild(c.domEle),c.domEle.addEventListener(w.touchStart,c.onEventHandler,!1),c.domEle.addEventListener(w.touchMove,c.onEventHandler,!1),c.domEle.addEventListener(w.touchEnd,c.onEventHandler,!1))}catch(e){}var s}),y(a(c),"_adjustInnerPos",function(e){c.innerSize=e/2*.4;var e=c.innerSize/2,t=c.innerSize/2;u(c.domEle.querySelector("div.inner"),{width:c.innerSize+"px",height:c.innerSize+"px",marginTop:-e+"px",marginLeft:-t+"px"})}),y(a(c),"resize",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};0<Object.keys(e).length&&(u(c.domEle,{display:"block"}),u(c.domEle,e),e=Ae(u(c.domEle,"width").replace("px",""),2),me(e))&&c._adjustInnerPos(e)}),y(a(c),"show",function(){return c.domEle&&s(c.domEle),a(c)}),y(a(c),"hide",function(){return c.domEle&&p(c.domEle),a(c)}),y(a(c),"updateStyle",function(){c.pressed&&(u(c.domEle.querySelector("div.inner"),c.onStyle),u(c.domEle.querySelector("div.dir"),c.angleStyle))}),y(a(c),"getCirclePosition",function(){var e=c.domEle.getBoundingClientRect();c.radial=e.width/2,c.circleX=e.left+c.radial,c.circleY=e.top+c.radial,c.maxDist=.65*c.radial}),y(a(c),"addIdentifier",function(e){e=e.changedTouches||[];c.identifier=e[0].identifier||0,c.identifiers.push(c.identifier)}),y(a(c),"removeIdentifier",function(){c.identifiers=[],c.identifier=0}),y(a(c),"getTargetEvent",function(e){for(var t=e.changedTouches||[],n=null,r=0;r<t.length;r++)if(t[r].identifier===c.identifier){n=t[r];break}return n&&(n.type=e.type,n.targetEvent=e),n}),y(a(c),"onEventHandler",function(e){d(e);var t,n={x:0,y:0};switch(e.type){case w.touchStart:e.stopPropagation(),c.getCirclePosition(),c.pressed=!0,c.identifiers.length<1&&c.addIdentifier(e),t=c.getTargetEvent(e),n=C.getMousePos(t),c.startX=n.x,c.startY=n.y,c._onStart(t),c.updateStyle(),c.buttonVibrate();break;case w.touchMove:e.stopPropagation(),t=c.getTargetEvent(e),n=C.getMousePos(t),c.moveX=n.x-c.startX,c.moveY=n.y-c.startY;var r=n.x>=c.startX?n.x-c.startX:c.startX-n.x,o=n.y>=c.startY?n.y-c.startY:c.startY-n.y;c.mouseMoved||(c.mouseMoved=5<r||5<o),c.startX=n.x,c.startY=n.y,c._onMove(t),c.updateStyle();break;case w.touchEnd:case w.touchCancel:e.stopPropagation(),t=c.getTargetEvent(e),n=C.getMousePos(t),c.moveX=n.x-c.startX,c.moveY=n.y-c.startY,c.mouseMoved||(r=n.x>=c.startX?n.x-c.startX:c.startX-n.x,o=n.y>=c.startY?n.y-c.startY:c.startY-n.y,c.mouseMoved=5<r||5<o),c._onEnd(t),c.mouseMoved=!1}}),y(a(c),"_onStart",function(e){c.clertTimer(),c.pressed=!0,s(c.domEle.querySelector("div.dir")),K(c.domEle.querySelector("div.inner"),"up"),l(c.domEle.querySelector("div.inner"),"down"),l(c.domEle,"down"),c._processMouseMove(e)}),y(a(c),"_onMove",function(e){c.timer||(c.timer=requestAnimationFrame(function(){c._processMouseMove(e),c.timer=null}))}),y(a(c),"_onEnd",function(e){c.clertTimer(),c.pressed=!1,c._processMouseMove(e),c.removeIdentifier(),c._resetStyle()}),y(a(c),"_resetStyle",function(){c.onStyle={transform:"translate3d(0,0,0)",transition:"transform 0.05s"};var e=c.domEle.querySelector("div.inner");K(e,"down"),3!=c.keyType&&l(e,"up"),u(e,c.onStyle),K(c.domEle,"down"),p(c.domEle.querySelector("div.dir"))}),y(a(c),"clertTimer",function(){cancelAnimationFrame(c.timer),c.timer=null}),y(a(c),"_processMouseMove",function(e){var t=C.rotate,n={x:e.clientX,y:e.clientY},r={x:c.circleX,y:c.circleY},o=_Mathsqrt((o=r.x-n.x)*o+(o=r.y-n.y)*o),t=(c.angle=Math.atan2(r.y-n.y,r.x-n.x)*(180/ye)-(t?90:0),t=r,o=_Mathmin(o,c.maxDist),i=c.angle,i*=ye/180,(a={x:0,y:0}).x=t.x-o*Math.cos(i),a.y=t.y-o*_Mathsin(i),(n=a).x-r.x),o=n.y-r.y,i=t/c.maxDist,a=o/c.maxDist;c._axis={angle:c.angle,originX:t,originY:o,x:i,y:a},c.getDirection(),c.onStyle={transform:"translate3d("+t+"px, "+o+"px, 0)"},c.angleStyle={transform:"rotate("+c.angle+"deg)"},"keyboard"===c.layout?c._sendKeyboardData(e):c._sendGamepadData(e)}),y(a(c),"_sendKeyboardData",function(){var t,n,r,e=1===(e=c.dir)?6===c.keyType?[87]:[38]:2===e?6===c.keyType?[83]:[40]:4===e?6===c.keyType?[65]:[37]:8===e?6===c.keyType?[68]:[39]:5===e?6===c.keyType?[65,87]:[37,38]:6===e?6===c.keyType?[65,83]:[37,40]:9===e?6===c.keyType?[68,87]:[39,38]:10===e?6===c.keyType?[68,83]:[39,40]:[-1];c._last_vk&&JSON.stringify(c._last_vk)!==JSON.stringify(e)&&(t=[],c._last_vk.forEach(function(e){t.push({inputOp:e,inputState:Oe[w.keyUp],value:0})}),c.dispatchEvent({type:w.keyUp,data:{opList:t}}),c._last_dir=null),0<=e[0]&&(n=c.pressed?w.keyDown:w.keyUp,c._last_vk=e,r=[],e.forEach(function(e){r.push({inputOp:e,inputState:Oe[n],value:0})}),c.dispatchEvent({type:n,data:{opList:r}}))}),y(a(c),"_sendGamepadData",function(e){var t="";switch(e.type){case w.touchStart:t=w.mouseDown;break;case w.touchMove:t=w.mouseMove;break;case w.touchEnd:case w.touchCancel:t=w.mouseUp}3===c.keyType?(c._last_dir&&c._last_dir!==c.dir&&c.dispatchEvent({type:w.mouseUp,data:c._last_dir}),c.dispatchEvent({type:t,data:c.dir}),c._last_dir=c.dir):(e=c._getAxes(c._axis.x,c._axis.y),c.pressed||(e={x:0,y:0}),c.dispatchEvent({type:t,data:e}))}),y(a(c),"_getAxes",function(e,t){e=+e.toFixed(5),t=+t.toFixed(5);return c.dir<1?{x:0,y:0}:{x:parseInt(32767*e),y:-parseInt(32767*t)}}),y(a(c),"_direction4",function(){45<c.angle&&c.angle<135?c.dir=1:-135<c.angle&&c.angle<-45?c.dir=2:c.angle<-135&&-180<c.angle||135<c.angle&&c.angle<180?c.dir=8:(c.angle<0&&-45<c.angle||0<c.angle&&c.angle<45)&&(c.dir=4)}),y(a(c),"_direction8",function(){67.5<c.angle&&c.angle<112.5||-270<c.angle&&c.angle<-247.5?c.dir=1:-112.5<c.angle&&c.angle<-67.5?c.dir=2:c.angle<0&&-22.5<c.angle||0<c.angle&&c.angle<22.5?c.dir=4:c.angle<-157.5&&-180<c.angle||157.5<c.angle&&c.angle<180||-225<c.angle&&c.angle<-180?c.dir=8:112.5<c.angle&&c.angle<157.5||-247.5<c.angle&&c.angle<-225?c.dir=9:22.5<c.angle&&c.angle<67.5?c.dir=5:-157.5<c.angle&&c.angle<-112.5?c.dir=10:-67.5<c.angle&&c.angle<-22.5&&(c.dir=6)}),y(a(c),"getDirection",function(){7==c.keyType?c._direction4():c._direction8()}),y(a(c),"destroy",function(){try{c.display=!1}catch(e){}}),y(a(c),"buttonVibrate",function(){navigator.vibrate&&c._enabledVibrate&&navigator.vibrate(50)}),y(a(c),"setEnableVibrate",function(e){c._enabledVibrate=e}),c.container=e,void 0===c.container&&(c.container=document.body),c.display=!1,c.opacity=1,c.layout="keyboard",c._pressedKeys={},c.virtualKey=[],c.keyType=-1,c.keys=[],c.name="",c.width=96,c.height=96,c.clientScale=C.getClientScale(),c.x=0,c.y=0,c.scale=1,c.sendMode=2,c.initComplete=!1,c.innerSize=48,t&&(c.keyType=t.kT||-1,c.name=t.n||null,c.keys=t.ks||[],c.name||c.keys.forEach(function(e){c.name+=e.k}),e=t.p||{h:0,w:0,x:0,y:0},c.x=e.x,c.y=e.y,c.originWidth=e.w,c.originHeight=e.h,c.scale=t.s||1,c.sendMode=t.sT||1,c.layout=t.layout||"keyboard",c.width=c.originWidth*c.clientScale*c.scale,c.height=c.originHeight*c.clientScale*c.scale),c.effectiveFinger=-1,c.maxDist=0,c.circleX=0,c.circleY=0,c.radial=0,c.identifier=0,c.identifiers=[],c._axis={},c.dir=-1,c.timer=null,c.mouseMoved=!1,c.pressed=!1,c.moveX,c.moveY,c.startX,c.startY=0,c.gOptions={},c._enabledVibrate=!1,c._init_(),c;throw new TypeError("Cannot call a class as a function")}var e=n,t=Ke;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),ie(e,t);r=n,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var r,o,i=function(){var e,t=ae(r),t=(e=o?(e=ae(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===oe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return a(t)};return e=n,Object.defineProperty(e,"prototype",{writable:!1}),e}(),He=function(){function n(e,t){var o;if(this instanceof n)return g(_(o=i.call(this)),"_init",function(){return o.initComplete||o._render(),_(o)}),g(_(o),"_render",function(){try{var e,t,n,r;3<=o.keyType&&o.keyType<=7||(o.className=function(){switch(o.keyType){case 1:return o.layout===Me?"hm-vir-kb":"hm-vir-xbox ".concat(o.name.toLowerCase());case 2:return"hm-vir-kb";case 8:return"hm-vir-mouse left";case 9:return"hm-vir-mouse right";case 10:return"hm-vir-mouse mid";case 11:return"hm-vir-mouse wheel_top";case 12:return"hm-vir-mouse wheel_bottom"}}(o.keyType),o.domEle=document.createElement("div"),l(o.domEle,o.className),e=C.rotate,t=C.getScreenWidthHeight().width,n=C.getScreenWidthHeight().height,u(o.domEle,{position:"fixed",zIndex:201,opacity:o.opacity,width:o.width/2+"px",height:o.height/2+"px",left:o.x*(e?n:t)+"px",top:o.y*(e?t:n)+"px",transform:"scale(".concat(o.smallScreenScale,")")}),o.keyType<=2&&o.layout&&o.layout===Me&&(o.keyEle=document.createElement("div"),l(o.keyEle,"hm-vir-kb-value"),(r=document.createElement("span")).innerHTML=o.name,u(r,{fontSize:j(o.name.length,o.width/2)+"px"}),o.keyEle.appendChild(r),o.domEle.appendChild(o.keyEle)),o.container.appendChild(o.domEle),o._bindEvent())}catch(e){}}),g(_(o),"_updateTextSize",function(e){if(o.domEle){var t=o.domEle.querySelectorAll("span");if(0<t.length)for(var n,r=0;r<t.length;r++)u(n=t[r],{fontSize:j(n.innerText,e)+"px"})}}),g(_(o),"_dispatchEvent",function(e){var t=e.type,n=e.target;switch(d(e),t){case w.touchStart:case w.mouseDown:l(n,"down"),o.layout===Ne?o._sendGamepadData(!0):o._sendKeyboardData(!0),o.buttonVibrate();break;case w.touchEnd:case w.mouseUp:K(n,"down"),o.layout===Ne?o._sendGamepadData(!1):-1===[11,12].indexOf(o.keyType)&&o._sendKeyboardData(!1)}}),g(_(o),"_sendGamepadData",function(e){var t=0;o.keys.forEach(function(e){t|=e.c}),o.dispatchEvent({type:e?w.keyDown:w.keyUp,data:t})}),g(_(o),"_sendKeyboardData",function(e){var t,n,r;3<=o.keyType&&o.keyType<=7||(r=-1,o.keyType,t="",r=8<o.keyType&&o.keyType<=12?xe[t=e?w.mouseDown:w.mouseUp]:Oe[t=e?w.keyDown:w.keyUp],1===o.sendMode?(n=[],o.keys.forEach(function(e){n.push({inputOp:e.c,inputState:r,value:0})}),o.dispatchEvent({type:t,data:{opList:n},keyType:o.keyType})):o.keys.forEach(function(e){e=[{inputOp:e.c,inputState:r,value:0}];o.dispatchEvent({type:t,data:{opList:e},keyType:o.keyType})}))}),g(_(o),"_bindEvent",function(){o.domEle&&(o.domEle.addEventListener(w.touchStart,o._dispatchEvent),o.domEle.addEventListener(w.touchEnd,o._dispatchEvent),o.domEle.addEventListener(w.mouseDown,o._dispatchEvent),o.domEle.addEventListener(w.mouseUp,o._dispatchEvent))}),g(_(o),"_removeEvent",function(){o.domEle&&(o.domEle.removeEventListener(w.touchStart,o._dispatchEvent),o.domEle.removeEventListener(w.touchEnd,o._dispatchEvent),o.domEle.removeEventListener(w.mouseDown,o._dispatchEvent),o.domEle.removeEventListener(w.mouseUp,o._dispatchEvent))}),g(_(o),"resize",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};0<Object.keys(e).length&&(u(o.domEle,{visibility:"visible"}),u(o.domEle,e),e=Ae(u(o.domEle,"height").replace("px",""),2),me(e))&&o._updateTextSize(e)}),g(_(o),"destroy",function(){try{o.display=!1,o._removeEvent()}catch(e){}}),g(_(o),"buttonVibrate",function(){navigator.vibrate&&o._enabledVibrate&&navigator.vibrate(50)}),g(_(o),"setEnableVibrate",function(e){o._enabledVibrate=e}),o.container=e,null==o.container&&(o.container=document.body),o.display=!1,o.opacity=1,o.keyType=-1,o.keys=[],o.name="",o.width=96,o.height=96,o.clientScale=C.getClientScale(),o.smallScreenScale=o.clientScale<.65?.9:1,o.x=0,o.y=0,o.scale=1,o.sendMode=2,o.cssText="",o.layout=Me,o.initComplete=!1,t&&(o.layout=t.layout||Me,o.keyType=t.kT||-1,o.name=t.n||"",o.keys=t.ks||[],e=t.p||{h:0,w:0,x:0,y:0},o.name||o.keys.forEach(function(e){o.name+=e.k}),o.x=e.x,o.y=e.y,o.originWidth=e.w,o.originHeight=e.h,o.scale=t.s||1,o.sendMode=t.sT||1,o.width=o.originWidth*o.clientScale*o.scale,o.height=o.originHeight*o.clientScale*o.scale),o._enabledVibrate=!1,o._init(),o;throw new TypeError("Cannot call a class as a function")}var e=n,t=Ke;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),ce(e,t);r=n,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var r,o,i=function(){var e,t=le(r),t=(e=o?(e=le(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===se(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _(t)};return e=n,Object.defineProperty(e,"prototype",{writable:!1}),e}(),We=function(){function n(e,t){var d;if(this instanceof n)return S(v(d=i.call(this)),"_render",function(e){return e&&(d.layout=e),d.domEle=document.createElement("div"),u(d.domEle,{"pointer-events":"auto",transform:"translateZ(0px)","z-index":3}),l(d.domEle,"hm-vir-layout"),d.container.appendChild(d.domEle),d.layout&&(e=[],"keyboard"===d.layout?d.keyboard instanceof Array&&0<d.keyboard.length&&(e=d.keyboard):"xbox"===d.layout&&d.xbox instanceof Array&&0<d.xbox.length&&(e=d.xbox),e)&&e.forEach(function(e){e.opacity=d.opacity,e.layout=d.layout;var t=null,t=new(3<=e.kT&&e.kT<=7?Ge:He)(d.domEle,e);d._virtualComponents.push(t),t&&(t.setEnableVibrate(d._enabledVibrate),d._bindEvent(t))}),v(d)}),S(v(d),"_calcGamepadBtnValue",function(){var t=0;return Object.keys(d._buttons).forEach(function(e){d._buttons[e]?t|=parseInt(e):delete d._buttons[e]}),t}),S(v(d),"_sendGamepadData",function(e,t){var n,r,o=t.data,t=t.target,i=t.keyType,t=t.name;1===i||3===i?(n=1024,r=o,r="LT"===t?(n=1025,e?255:0):"RT"===t?(n=1026,e?255:0):(d._buttons[o]=e,d._calcGamepadBtnValue()),d.dispatchEvent({type:d.layout,data:{opList:[{inputOp:n,value:r}]}})):4===i?(t=o.x,e=o.y,d.dispatchEvent({type:d.layout,data:{opList:[{inputOp:1027,value:t},{inputOp:1028,value:e}]}})):5===i&&(n=o.x,r=o.y,d.dispatchEvent({type:d.layout,data:{opList:[{inputOp:1029,value:n},{inputOp:1030,value:r}]}}))}),S(v(d),"_sendData",function(e){var t=e.data,n=e.keyType,r=e.type;d.layout===Ne?d._sendGamepadData(!(r===w.keyUp||r===w.mouseUp),e):d.dispatchEvent({type:d.layout,data:t,keyType:n})}),S(v(d),"_bindEvent",function(e){e.addEventListener(w.keyDown,d._sendData),e.addEventListener(w.keyUp,d._sendData),e.addEventListener(w.mouseDown,d._sendData),e.addEventListener(w.mouseMove,d._sendData),e.addEventListener(w.mouseUp,d._sendData)}),S(v(d),"_resize",function(e){try{var t=e.rotate,n=(e.width,e.height,e.left),r=e.top,o=e.scale;d.updateDisplaySize(t);for(var i=0;i<d._virtualComponents.length;i++)a=d._virtualComponents[i],l=c=s=void 0,l=C.isFullScreen(),a&&(c=0,t?(s=a.x*d.displayWidth,0<n&&l&&(s-=r),c=a.y*d.displayHeight,0<r&&l&&(c-=n)):(s=a.x*d.displayWidth,c=a.y*d.displayHeight,0<r&&l&&(c-=r),0<n&&l&&(s-=n)),a.resize({left:"".concat(s,"px"),top:"".concat(c,"px"),width:"".concat(a.originWidth*o,"px"),height:"".concat(a.originWidth*o,"px")}));u(d.domEle,{position:"fixed",left:"0px",top:"0px",width:"".concat(d.displayWidth,"px"),height:"".concat(d.displayHeight,"px")}),0<r&&u(d.domEle,{left:"-".concat(t?r:n,"px")}),0<n&&u(d.domEle,{top:"-".concat(t?n:r,"px")})}catch(e){}var a,s,c,l}),S(v(d),"changeLayout",function(e){d.destroy(),d._render(e)}),S(v(d),"resizeLayout",function(){d._resize(C.getScreenSize()),d.display&&d.changeLayout(d.layout)}),S(v(d),"updateDisplaySize",function(e){d.displayWidth=e?window.innerHeight:window.innerWidth,d.displayHeight=e?window.innerWidth:window.innerHeight}),S(v(d),"show",function(){return d.display=!0,d.domEle&&s(d.domEle),v(d)}),S(v(d),"hide",function(){return d.display=!1,d.domEle&&(d.domEle.innerHTML=""),v(d)}),S(v(d),"destroy",function(){try{d.domEle&&(d.container.removeChild(d.domEle),d.domEle=null,d._virtualComponents=[])}catch(e){}}),S(v(d),"enableVibrate",function(t){d._enabledVibrate=t,d._virtualComponents.forEach(function(e){e.setEnableVibrate(t)})}),void 0===e&&(e=document.body),Object.assign(v(d),t),d.container=e,d.display=!1,d.opacity=0,d.layout=d.config?d.config.default_layout:"keyboard",d.pixelRatio=1,d._virtualComponents=[],d._buttons={},d._enabledVibrate=!1,d._render(d.layout),d;throw new TypeError("Cannot call a class as a function")}var e=n,t=Ke;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),ue(e,t);r=n,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var r,o,i=function(){var e,t=pe(r),t=(e=o?(e=pe(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===de(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return v(t)};return e=n,Object.defineProperty(e,"prototype",{writable:!1}),e}();Xe=function e(t,n){var p=this;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");r(this,"_createRtcInstance",function(){var e=window.RTCPeerConnection||window.webkitRTCPeerConnection||window.mozRTCSessionDescription;p._pc=new e(null),p._getRemoteSdp(),p._pc.addEventListener("icecandidate",p._icecandidateHandle),p._pc.addEventListener("track",p._trackHandle),p._pc.addEventListener("negotiationneeded",p._negotiationneededHandle),p._pc.addEventListener("iceconnectionstatechange",p._iceconnectionstatechangeHandle),p._pc.addEventListener("icegatheringstatechange",p._icegatheringstatechangeHandle),p._pc.addEventListener("signalingstatechange",p._signalingstatechangeHandle),p._pc.addEventListener("connectionstatechange",p._connectionstatechangeHandle),p._pc.addEventListener("datachannel",p._datachannelHandle)}),r(this,"_openHandle",function(){p._eventEmitter.emit("x86player","dataChannelOpen")}),r(this,"_messageHandle",function(e){var t,n,e=e.data;"String"!==h(e)?"ArrayBuffer"===h(e)&&(3===(t=new Uint8Array(e))[11]&&5===t[12]?(n=Y(t,ve),p._gameControl&&p._gameControl.setCustomCursor(n),p._eventEmitter.emit("x86player","dataChannelMsg",{cursorInfo:JSON.parse(n)})):4===t[11]&&8===t[12]?p._eventEmitter.emit("x86player","dataChannelMsg",{notify:JSON.parse(Y(t,we))}):4===t[11]&&11===t[12]?p._eventEmitter.emit("x86player","dataChannelMsg",{stateType:JSON.parse(Y(t,ke))}):(1===t[11]&&1===t[12]&&(n=JSON.parse(Y(t,Ce)),p._eventEmitter.emit("x86player","dataChannelMsg",{IMEStatus:n}),p._enableAutoPopVirtualFullKeyboard)&&p.setFullKeyboardState("STATUS_SHOW"===n.statusType),4===t[11]&&12===t[12]&&(n=JSON.parse(Y(t,Te)),p._eventEmitter.emit("x86player","dataChannelMsg",{sdkData:n.sdkData})),1===t[11]&&7===t[12]&&(n=JSON.parse(Y(t,Ie)),p._eventEmitter.emit("x86player","dataChannelMsg",{resetNoInputTimer:n})))):p._eventEmitter.emit("x86player","dataChannelMsg",{pingPong:e})}),r(this,"_closeHandle",function(){}),r(this,"_errorHandle",function(e){p._eventEmitter.emit("x86player","dataChannelError",e)}),r(this,"_destroyDataChannelInstance",function(){p._dataChannelInstance&&(p._dataChannelInstance.removeEventListener("open",p._openHandle),p._dataChannelInstance.removeEventListener("message",p._messageHandle),p._dataChannelInstance.removeEventListener("close",p._closeHandle),p._dataChannelInstance.removeEventListener("error",p._errorHandle),p._dataChannelInstance.close(),p._dataChannelInstance=null)}),r(this,"sendData",function(e){var t;"open"===(null==(t=p._dataChannelInstance)?void 0:t.readyState)&&p._dataChannelInstance.send(e)}),r(this,"_getRemoteSdp",function(){var e=p._gameStartParams,t=e.cid,e=e.gsmUri,o=(p._eventEmitter.emit("x86player","getRemoteSdpBegin",""),{});p._httpRelease=re({url:e,data:JSON.stringify({cid:t,client_sdp:"",option:1}),method:"POST",contentType:"text/plain",retryCount:p._retryCount,timeout:10,retryInterval:2e3,done:function(e,t,n){if(o.isSucceed=e){var r,e=JSON.parse(n);if(0===(null==(r=e.ret)?void 0:r.result))return p._setRemoteSdp(e.gsproxy_sdp),p._eventEmitter.emit("x86player","getRemoteSdpSuccess",atob(e.gsproxy_sdp)),!1;o.response=e}else o.response=n;p._eventEmitter.emit("x86player","getRemoteSdpError",o)}})}),r(this,"_createAnswer",function(){p._pc.createAnswer().then(function(e){return p._sendLocalSdp(e),p._pc.setLocalDescription(e)}).catch(function(e){p._eventEmitter.emit("x86player","createAnswerError",e)})}),r(this,"_sendLocalSdp",function(e){var t=p._gameStartParams,n=t.cid,t=t.gsmUri,n={cid:n,client_sdp:"".concat(btoa(JSON.stringify(e))),option:2},o=(p._eventEmitter.emit("x86player","sendLocalSdpBegin",e),{});p._httpRelease=re({url:t,data:JSON.stringify(n),method:"POST",contentType:"text/plain",retryCount:p._retryCount,timeout:10,retryInterval:2e3,done:function(e,t,n){if(o.isSucceed=e){var r,e=JSON.parse(n);if(0===(null==(r=e.ret)?void 0:r.result))return p._eventEmitter.emit("x86player","sendLocalSdpSuccess",atob(e.gsproxy_sdp)),!1;o.response=e}else o.response=n;p._eventEmitter.emit("x86player","sendLocalSdpError",o)}})}),r(this,"_setRemoteSdp",function(e){e=JSON.parse(atob(e));p._pc.setRemoteDescription(new RTCSessionDescription(e)).then(function(){p._createAnswer()}).catch(function(e){p._eventEmitter.emit("x86player","setRemoteDescriptionError",e)})}),r(this,"_icecandidateHandle",function(e){e=e.candidate;e&&p._eventEmitter.emit("x86player","icecandidate",e||e.candidate)}),r(this,"_trackHandle",function(e){var t=e.track,e=e.streams;return"video"===t.kind?(p._videoNode.srcObject=e[0],void p._eventEmitter.emit("x86player","track",t)):void("audio"===t.kind&&(p._hasAudioTrack=!0,p._audioNode.srcObject=e[0]))}),r(this,"_negotiationneededHandle",function(){}),r(this,"_iceconnectionstatechangeHandle",function(){p._pc.iceConnectionState,p._eventEmitter.emit("x86player","iceConnectionState",p._pc.iceConnectionState)}),r(this,"_connectionstatechangeHandle",function(){p._pc.connectionState,p._eventEmitter.emit("x86player","connectionstatechange",p._pc.connectionState)}),r(this,"_datachannelHandle",function(e){p._dataChannelInstance=e.channel,p._dataChannelInstance.binaryType="arraybuffer",p._dataChannelInstance.addEventListener("open",p._openHandle),p._dataChannelInstance.addEventListener("message",p._messageHandle),p._dataChannelInstance.addEventListener("close",p._closeHandle),p._dataChannelInstance.addEventListener("error",p._errorHandle)}),r(this,"_signalingstatechangeHandle",function(){p._eventEmitter.emit("x86player","signalingstatechange",p._pc.signalingState)}),r(this,"_icegatheringstatechangeHandle",function(){p._pc.iceGatheringState,p._eventEmitter.emit("x86player","icegatheringstatechange",p._pc.iceGatheringState)}),r(this,"_destroyRTCInstance",function(){p._pc&&(p._pc.removeEventListener("icecandidate",p._icecandidateHandle),p._pc.removeEventListener("track",p._trackHandle),p._pc.removeEventListener("negotiationneeded",p._negotiationneededHandle),p._pc.removeEventListener("iceconnectionstatechange",p._iceconnectionstatechangeHandle),p._pc.removeEventListener("icegatheringstatechange",p._icegatheringstatechangeHandle),p._pc.removeEventListener("signalingstatechange",p._signalingstatechangeHandle),p._pc.removeEventListener("connectionstatechange",p._connectionstatechangeHandle),p._pc.removeEventListener("datachannel",p._datachannelHandle),p._pc.close(),p._pc=null)}),r(this,"_getNonStandardStats",function(){p._pc&&p._pc.getStats(function(e){e.result().forEach(function(t){var n={},r=!1;t.names().forEach(function(e){n[e]=t.stat(e),"video"===t.stat(e)&&(r=!0)}),r&&(p._rtcStatsMap=JSON.parse(JSON.stringify(n)))})})}),r(this,"_getStandardStats",function(t){var n;p._pc&&(n=[],p._pc.getStats(null).then(function(e){e.forEach(function(e){n.push(e),"inbound-rtp"===e.type&&"video"===e.kind&&(e.packetsReceived&&(p._rtcStatsMap.packetsReceived=e.packetsReceived),e.packetsLost&&(p._rtcStatsMap.packetsLost=e.packetsLost),e.bytesReceived&&(p._rtcStatsMap.bytesReceived=e.bytesReceived),e.framesDecoded&&(p._rtcStatsMap.framesDecoded=e.framesDecoded),e.totalDecodeTime&&(p._rtcStatsMap.totalDecodeTime=e.totalDecodeTime),e.frameWidth&&(p._rtcStatsMap.frameWidth=e.frameWidth),e.frameHeight&&(p._rtcStatsMap.frameHeight=e.frameHeight),e.framesReceived&&(p._rtcStatsMap.framesReceived=e.framesReceived),/firefox/gi.test(ge)&&(p._rtcStatsMap.currentRoundTripTime=e.jitter),p._rtcStatsMap.totalFreezesDuration=e.totalFreezesDuration,p._rtcStatsMap.freezeCount=e.freezeCount),"candidate-pair"===e.type&&-1<["succeeded","in-progress"].indexOf(e.state)&&(p._rtcStatsMap.currentRoundTripTime=e.currentRoundTripTime,p._rtcStatsMap.totalRoundTripTime=e.totalRoundTripTime,p._rtcStatsMap.responsesReceived=e.responsesReceived),"remote-candidate"===e.type&&(p._rtcStatsMap.remoteCandidate=e)}),t(p._rtcStatsMap,n)}).catch(function(e){throw new Error(e)}))}),r(this,"create",function(e){var t,n,r,o;if(e)return p._playerContainerId="player-".concat(F()),t="canvas-".concat(F()),n="video-".concat(F()),r="audio-".concat(F()),o="\n        <div id=".concat(p._playerContainerId,' style="position: relative; width: auto; height: auto; overflow: hidden;">\n            <canvas id="').concat(t,'" style="width: 100%; height: 100%; position: absolute; z-index: 1; left: 0; top: 0; background: none;"></canvas>\n            <video id="').concat(n,'" controls muted autoplay playsinline webkit-playsinline x5-playsinline x5-video-player-type="h5" x5-video-orientation="landscape" x-webkit-airplay="allow" preload style="width: 100%; height: 100%; background: none; display: block; object-fit: fill;"></video>\n            <audio id="').concat(r,'" muted playsinline webkit-playsinline style="display:none;"></audio>\n        </div>'),e.insertAdjacentHTML("beforeend",o),p._playerContainerNode=document.getElementById(p._playerContainerId),p._videoNode=document.getElementById(n),p._audioNode=document.getElementById(r),{videoId:n,canvasId:t,audioId:r}}),r(this,"connect",function(e){(p._gameStartParams=e).retryCount&&(p._retryCount=e.retryCount);var t=je;try{e.keyMapContent&&(t=JSON.parse(e.keyMapContent))}catch(t){}p._cacheVirtualKeysType=t.config&&t.config.default_layout||je.config.default_layout;var e=t.mouse||je.mouse,n=e.sensitivity,r=e.mode;e.btn_sensitivity,t.config&&"Boolean"===h(t.config.enableVirtualFullKeyboard)&&(p._enableAutoPopVirtualFullKeyboard=t.config.enableVirtualFullKeyboard),p._createRtcInstance(),p._gameControl=new Fe(p,p._playerContainerNode,p._gameStartParams),p.setMouseMode(r),p.setMouseMoveRatio(n),p._virtualKeys=new We(p._playerContainerNode,t),p._virtualKeys.addEventListener(Me,function(e){var t=e.data,r=e.keyType;t.opList.forEach(function(e){var t,n;-1<[512,513,514,515].indexOf(e.inputOp)&&(t=(n=p._gameControl.getStoreSendMouseData()).posMouse,n=n.posCursor,e.posMouse={x:t.x,y:t.y},e.posCursor={x:n.x,y:n.y},11===r?(e.value=1,e.inputState=1):12===r&&(e.value=-1,e.inputState=1))}),p.sendData(f(t))}),p._virtualKeys.addEventListener(Ne,function(e){e=e.data;p.sendData(f(e))}),p._virtualFullKeyboard=new Ue(p._playerContainerNode,p.sdkTips),p._virtualFullKeyboard.addEventListener("inputData",function(e){e=e.data;p.sendData(f(e))}),p._virtualFullKeyboard.addEventListener("inputState",function(e){e.data||("NONE"===p._cacheVirtualKeysType?p._virtualKeys.hide():p._virtualKeys.changeLayout(p._cacheVirtualKeysType))})}),r(this,"disconnect",function(){p._destroyDataChannelInstance(),p._destroyRTCInstance(),p._gameControl&&(p._gameControl.removeKeyboardEvent(),p._gameControl.removeMouseEvent(),p._gameControl=null),p._virtualKeys&&(p._virtualKeys.destroy(),p._virtualKeys=null),p._virtualFullKeyboard&&(p._virtualFullKeyboard.destroy(),p._virtualFullKeyboard=null),document.getElementById(p._playerContainerId)&&document.getElementById(p._playerContainerId).remove(),p._httpRelease&&(p._httpRelease(),p._httpRelease=null),p._hasAudioTrack=!1}),r(this,"getWebrtcStats",function(e){/chrome/gi.test(ge)&&p._getNonStandardStats(),p._getStandardStats(e)}),r(this,"calcRemoteAndLocalScreenRatio",function(e){p._gameControl&&p._gameControl.calcRemoteAndLocalScreenRatio(e)}),r(this,"enableAudio",function(e){"Boolean"===h(e)&&(p._hasAudioTrack?e?(p._audioNode.muted=!1,p._audioNode.volume=.9,p._audioNode.play()):(p._audioNode.muted=!0,p._audioNode.volume=1,p._audioNode.pause()):(p._videoNode.muted=!e,p._videoNode.volume=e?.9:1))}),r(this,"enableVibrate",function(e){p._virtualKeys&&p._virtualKeys.enableVibrate(e),p._virtualFullKeyboard&&p._virtualFullKeyboard.enableVibrate(e)}),r(this,"sendTextMessage",function(e){p._gameControl&&p._gameControl.sendTextMessage(e)}),r(this,"setMouseMode",function(e){p._gameControl&&p._gameControl.setMouseMode(e)}),r(this,"getMouseMode",function(){return p._gameControl&&p._gameControl.getMouseMode()}),r(this,"setMouseMoveRatio",function(e){p._gameControl&&p._gameControl.setMouseMoveRatio(e)}),r(this,"getMouseMoveRatio",function(){return p._gameControl&&p._gameControl.getMouseMoveRatio()}),r(this,"setVirtualKeys",function(e){-1!==["xbox","keyboard","NONE"].indexOf(e)&&p._virtualKeys&&("NONE"===(p._cacheVirtualKeysType=e)?p._virtualKeys.hide():p._virtualKeys.changeLayout(e),p.setFullKeyboardState(!1))}),r(this,"getVirtualKeys",function(){return p._cacheVirtualKeysType}),r(this,"setFullKeyboardState",function(e){p._virtualFullKeyboard&&(e?(p._virtualFullKeyboard.show(),p._virtualKeys&&p._virtualKeys.hide()):p._virtualFullKeyboard.hide())}),r(this,"getFullKeyboardState",function(){return p._virtualFullKeyboard&&p._virtualFullKeyboard.getDisplay()}),r(this,"resizeAllKeysLayout",function(){p._virtualFullKeyboard&&p._virtualFullKeyboard.resizeLayout(),p._virtualKeys&&p._virtualKeys.resizeLayout(),p._gameControl&&p._gameControl.resizeMouseCursorPosition()}),r(this,"sendDataToGame",function(e,t,n){p.sendData(q(Ee,{cid:e,userId:t,sdkAction:n},4,12))}),r(this,"sendInputDataToInstance",function(e){if("Array"===h(e)){for(var t=0;t<e.length;t++){var n=e[t],r=n.inputOp,o=n.inputState,n=n.value;if("Number"!==h(r)||"Number"!==h(o)||"Number"!==h(n))return}p.sendData(f({opList:e}))}var i,a,s,c,l,d,u;"Object"===h(e)&&(i=e.inputUserIndex,u=e.inputOp,a=e.inputState,s=e.value,c=e.posCursor,l=e.posMouse,d=e.touchEvent,"Number"===h(u))&&"Number"===h(a)&&"Number"===h(s)&&(u={inputOp:u,inputState:a,value:s},c&&c.x&&c.y&&(u.posCursor=c),l&&l.x&&l.y&&(u.posMouse=l),"Number"===h(i)&&(u.XinputUserIndex=i),"Object"===h(d)&&(u.touchEvent=d),p.sendData(f({opList:[u]})))}),r(this,"getScreenSize",function(){var e=C.getScreenSize(),t=function(e){if(Array.isArray(e))return e}(t=p._gameStartParams.resolution.split("x"))||function(e){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,r,o,i,a=[],s=!0,c=!1;try{for(o=(t=t.call(e)).next;!(s=(n=o.call(t)).done)&&(a.push(n.value),2!==a.length);s=!0);}catch(a){c=!0,r=a}finally{try{if(!s&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(c)throw r}}return a}}(t)||function(e){var t;if(e)return"string"==typeof e?fe(e,2):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?fe(e,2):void 0}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=t[0],t=t[1],r=p._playerContainerNode,o=r.clientWidth,r=r.clientHeight,o=(0<r&&0<n&&(e.videoWidthRatio=o/n),0<r&&0<t&&(e.videoHeightRatio=r/t),e.videoWidth=n,e.videoHeight=t,e.scale=e.height/1080,e.documentClientRects=document.documentElement.getClientRects()[0],0<p._playerContainerNode.getClientRects().length?p._playerContainerNode.getClientRects()[0]:p._playerContainerNode.getBoundingClientRect());return e.displayWidth=o.width,e.displayHeight=o.height,e.displayLeft=o.left,e.displayTop=e.top=o.top,C.rotate?(e.scaleY=e.videoHeight/e.displayWidth,e.scaleX=e.videoWidth/e.displayHeight,e.posXMax=e.displayHeight-2,e.posYMax=e.displayWidth-2,e.posX=e.displayHeight/2,e.posY=e.displayWidth/2):(e.scaleY=e.videoHeight/e.displayHeight,e.scaleX=e.videoWidth/e.displayWidth,e.posXMax=e.displayWidth-2,e.posYMax=e.displayHeight-2,e.posX=e.displayWidth/2,e.posY=e.displayHeight/2),e}),r(this,"resetInputTimer",function(){p.sendData(q(Re,{value:1},1,7))}),r(this,"getCurrentMouseCoordinate",function(){return p._gameControl&&p._gameControl.getStoreSendMouseData()}),this._eventEmitter=t||{emit:function(){}},this.sdkTips=n||{},this._playerContainerId=null,this._videoNode=null,this._audioNode=null,this._playerContainerNode=null,this._gameStartParams=null,this._gameControl=null,this._virtualKeys=null,this._dataChannelInstance=null,this._cacheVirtualKeysType="",this._rtcStatsMap={},this._httpRelease=null,this._hasAudioTrack=!1,this._retryCount=[10,10,10,10,10,10],this._enableAutoPopVirtualFullKeyboard=!0},Object.defineProperty(Xe,"prototype",{writable:!1});var Ve,i,ze,qe,Ye,$e,t,n,Je,k,E,Xe,T,Qe,R,I,D,P,Ze,O,et,x,M,tt=Xe;function nt(){if(!(this instanceof nt))throw new TypeError("Cannot call a class as a function")}function rt(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t}function ot(e,t){return m(e)===$e&&-1!==Ze(t).indexOf(Ze(e))}function it(e,t){if(m(e)===$e)return e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,""),"undefined"===m(t)?e:e.substring(0,255)}function at(e,t){for(var n,r,o,i,a,s=0;s<t.length&&!i;){for(var c=t[s],l=t[s+1],d=n=0;d<c.length&&!i;)if(i=c[d++].exec(e))for(r=0;r<l.length;r++)a=i[++n],m(o=l[r])===Ye&&0<o.length?2===o.length?m(o[1])==qe?this[o[0]]=o[1].call(this,a):this[o[0]]=o[1]:3===o.length?m(o[1])!==qe||o[1].exec&&o[1].test?this[o[0]]=a?a.replace(o[1],o[2]):void 0:this[o[0]]=a?o[1].call(this,a,o[2]):void 0:4===o.length&&(this[o[0]]=a?o[3].call(this,a.replace(o[1],o[2])):void 0):this[o]=a||void 0;s+=2}}function st(e,t){for(var n in t)if(m(t[n])===Ye&&0<t[n].length){for(var r=0;r<t[n].length;r++)if(ot(t[n][r],e))return"?"===n?void 0:n}else if(ot(t[n],e))return"?"===n?void 0:n;return e}function N(e,t){var n,r;return m(e)===Ye&&(t=e,e=void 0),this instanceof N?(n=e||("undefined"!==m(ze)&&ze.navigator&&ze.navigator.userAgent?ze.navigator.userAgent:""),r=t?function(e,t){var n,r={};for(n in e)r[n]=t[n]&&0==t[n].length%2?t[n].concat(e[n]):e[n];return r}(et,t):et,this.getBrowser=function(){var e,t={name:void 0,version:void 0};return at.call(t,n,r.browser),t.major=m(e=t.version)===$e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0,t},this.getCPU=function(){var e={architecture:void 0};return at.call(e,n,r.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return at.call(e,n,r.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return at.call(e,n,r.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return at.call(e,n,r.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=m(e)===$e&&255<e.length?it(e,255):e,this},this.setUA(n),this):new N(e,t).getResult()}}(),__webpack_exports__}))}),X86Player=getDefaultExportFromCjs(x86player),sdkTips={lang:"zh_CN",NETWORK_UNAVALIABLE:",",applyFailTips:{NETWORK_REQUEST_TIMEOUT:"",PLAYER_IMPORT_ERROR:"",PARAMS_ERROR:"",GAME_STOPPED:", ",CONNECTING:"",INTERNAL_ERROR:",",LOAD_GAME_FAILED:"",NETWORK_UNAVAILABLE:"",GET_CID_ERROR:"",GET_SAAS_WEBSOCKET_ERROR:"",GET_INSTANCE_ERROR:"",SAAS_WEBSOCKET_ERROR:"",GAME_START_ERROR:"",GET_DID_COUNTLY_ERROR:"",GET_DID_DID_ERROR:"",invalid_resolution:"",query_private_mode:",,?",game_interrupted:",",unsupportedDevice:""},uploadErrorMessage:{1e3:":file ",1001:":opType ",1002:":",1003:":opType",1004:"image/jpegimage/png",1005:"opType",1006:"",1007:": ",1e4:"IEChrome",10001:": ",10002:"",10003:"",10004:"MD5",10005:"",10006:"",10007:"BID ",10008:"CID ",10009:""},downloadErrorMessage:{cancel_name_empty:"fileName",download_name_empty:"fileName",has_task:"",no_task:"",download_file_error:"",user_cancel:"",image_not_found:"",download_limit:"",link_close:"",turned_off:"",noSupport:"IEChrome"},SaasSDK:{controlLose:"",controlFail:"",unknownError:"",supportLiving:"",screenshotFailed:"",paramTypeError:"",cidTypeError:"cid",infoTypeError:"controlInfos",assignmentFailed:"",queryFailed:"",linkLimit:"",PARAMS_ERROR:"",gameNotStart:"",systemUnknownError:"",midMissed:"mid",socketNotConnected:"socket",dataOrTypeMissed:"datatype",invalidType:"type",invalidData:"data",sendTimeout:""},utils:{hour:"",minute:"",seconds:"",systemUnknownError:""},camera:{camera:"API",VideoFormat:"",useRefuses:""},request:{responseDataError:"response "},UIView:{completeSet:"",webFullScreen:"",exitWebFullScreen:"",fullScreen:"",exitFullScreen:"",customPlan:"(|)",onlySave5:"5",saveNewPlan:"|",pleaseInput:"",defaultPlan:"",lastSavePlan:"",delay:"",packetLoss:"",keyMouse:"",flashDisable:"Flash",displayInGame:"",clickOpen:"",cancel:"",continue:"",newPlan:"",simulation:"",rotate:"",space:"",setClick:"",liftPress:"",enterKeysControlSkill:"",InputSwipe:"",end:"",cancelRelease:"",controlDirection:"WASD",leftFire:"",switchLock:" <br> ",rightGo:"",sensitivity:"",right:"",notSet:"",cannotSet:"|",loading:"",transparency:"",guide:"",close:"",save:"",notSave:"",dragDirection:"",dragArrow:"WASD",clickScreen:"",experienceReticle:"Chrome",dragShooter:"/",enterKeysControlGame:" <br> /",experienceFire:"Chrome",dragFire:"",rightControl:"",dragSkill:"/",gesture:"/",swipeBtn:"",turnOnReminders:"F2/",newProjectName:"",saveChange:"",restore:"",description:"",arrowKeys:"WASD",customButton:"",rightWalk:"",smartCasting:"",frontSightFire:"",clearAll:"",reset:"",guideImgName:"img"},UIModel:{officialPlan:"1",cancel:"",continue:"",INVALID_PARAM:": ",pleaseSet:"",onlyEnNum:"",cannotRepeat:"",swipeLimit:"",notSupportSmart:"",notSupportRight:"",notSupportArrow:"WASD",nameRepeat:"",indexError:"index",notSet:"",completeSet:"",waiting:"",pleaseDownload:""},X86Player:{forward:"",next:"",newline:"",upperCase:"",lowerCase:"",delete:"",switchSymbol:"/",saasOperationTips:"",shift:"/",space:"",determine:""}},sdk=function(){var p=null,t=null,o=null,h="",f="",m="",e="visible",n="online",A=!1,y=!1,_=sdkTips,g=!1,v={streamStyleH:void 0,streamStyleW:void 0},S=null,r="hm_player_js",i=null,b="";function w(){if(!A){if("visible"===document.visibilityState){if("visible"===e&&(p.pauseGame("hidden"),e="hidden"),e="visible","offline"===n)return;p.restartGame("visible")}"hidden"===document.visibilityState&&(p.pauseGame("hidden"),e="hidden")}}function C(){n="online","hidden"!==e&&p.restartGame("online")}function k(){n="offline",p.pauseGame("offline"),p._emit("sceneChanged","offline",{message:"".concat(_.applyFailTips.NETWORK_UNAVAILABLE," [").concat(applyFailCode.NETWORK_BROKEN,"-").concat(a().cid,"]")})}function E(e){var t,n,r,o,i,a,s,c;"landscape"===(e=e||screenOrientation())?(window.scrollTo(0,1),window.scrollTo(0,0),l("landscape",function(){var e=getScreenSize(),t=e.width,e=e.height,n=getGameAspectRatio(v.streamStyleH,v.streamStyleW),r=e/n,o=e,i=(t-r)/2;t<r&&(o=(r=t)*n,i=0);return{device:{top:"0",left:"0",width:t,height:e},game:{position:"absolute",top:(e-o)/2,left:i,width:r,height:o}}}())):"portrait"===e&&l("portrait",(t=getScreenSize(),n=t.width,t=t.height,(r=getGameAspectRatio(v.streamStyleH,v.streamStyleW))<(i=n)/(o=t)?i=o*r:o=i/r,r=(n-t)/2,a=(t-n)/2,s=(t-o)/2,c=Math.abs((n-i)/2),{device:{top:Math.abs(a),left:r,width:t,height:n},game:{position:"absolute",top:c,left:s,width:o,height:i}})),"ARM"===b?p.sendPositionPoint(e):"X86"===b&&p.resizeAllKeysLayout()}function T(e){return clearTimeout(t),!!p&&!(y&&"init"!=e||(t=setTimeout(E,500),0))}function l(e,t){var n=t.device,t=t.game,r=document.getElementById(o);"landscape"===e?r.classList.remove("HM_rotate90"):r.classList.add("HM_rotate90"),"portrait"===e&&n.height>n.width?(r.style.left="".concat(n.top,"px"),r.style.top="-".concat(n.top,"px")):(r.style.left="-".concat(n.top,"px"),r.style.top="".concat(n.top,"px")),r.style.width="".concat(n.width,"px"),r.style.height="".concat(n.height,"px"),S&&(S.style.position=t.position,S.style.width="".concat(t.width,"px"),S.style.height="".concat(t.height,"px"),S.style.top="".concat(t.top,"px"),S.style.left="".concat(t.left,"px"))}function R(e,t){p&&p.sendLogger(e,t)}function a(){return p&&p.getCid()}function I(){window.WeixinJSBridge&&WeixinJSBridge.invoke("getNetworkType",{},function(){p&&p.enableAudio(!0)}),document.addEventListener("WeixinJSBridgeReady",function(){WeixinJSBridge.invoke("getNetworkType",{},function(){p&&p.enableAudio(!0)})}),p&&p.enableAudio(!0),window.sharedAudioContext&&window.sharedAudioContext.resume&&window.sharedAudioContext.resume()}function D(e){null===i?!g||e&&!e.paused||I():!0===i&&I()}return{initSDK:function(o){var r=o.accessKeyID,i=o.accessKeyId,a=o.channelId,e=o.androidPlayer,t=o.iosPlayer,s=o.onSceneChanged,n=o.MessageHandler,c=o.onMessageHandler,l=o.isIgnoreVisibilityChangeEvent,d=o.isIgnoreResizeEvent;if("object"===typeCheck(window.gLanguage)?window.gLanguage=window.gLanguage:window.gLanguage={},_=assiginObj(_,window.gLanguage),o.language&&(_=assiginObj(_,o.language)),(r||i)&&a)if(n){if("boolean"===typeCheck(l)&&(A=l),"boolean"===typeCheck(d)&&(y=d),p=new SaasSDK({accessKeyId:r||i,channelId:a,X86Player:X86Player}),R(loggerEventId.init_sdk_fun_call,JSON.stringify(o)),h=e,f=t,m=getSDKPath("saas-sdk.js"),h||m){l="";try{var u=h.lastIndexOf("/"),l=h.substring(0,u+1)}catch(e){l=m}sessionStorage.getItem("saas_player_code")||7!==getClientType()||ajax({url:"".concat(l,"saas-player-android-worker.js"),method:"get",timeout:30,done:function(e,t,n){e&&""!==n?sessionStorage.setItem("saas_player_code",n):(e={errorCode:applyFailCode.INIT_PARAMS_VALIDATE_FAILED,errorMsg:"".concat(_.applyFailTips.PLAYER_IMPORT_ERROR),accessKeyId:r||i,channelId:a},R(loggerEventId.init_sdk_fun_failed,e),p._emit("sceneChanged","loadPlayer",{result:!1}))}})}p.listen("sceneChanged",function(e,t){var n,r;if("createdPlayer"===e)v=t.streamStyle,S=t.playerNode,b=t.gameType,E(null),window.addEventListener("resize",T);else if("stop"===e&&(document.removeEventListener("visibilitychange",w),window.removeEventListener("online",C),window.removeEventListener("offline",k),window.removeEventListener("resize",T)),"play"==e&&g&&(S&&(n=S.getElementsByTagName("canvas")[0],r=S.getElementsByTagName("audio")[0],"ARM"===b?n.addEventListener("touchend",function(){D(r)}):"X86"===b&&S.addEventListener("touchend",function(){D(r)})),I()),s){if("stop"==e&&t.errorCode)try{t.errorCode=String(t.errorCode),t.errorCodeWithoutCid=t.errorCode.split("-")[0]}catch(e){}o.onSceneChanged(e,t),-1===["delay","packetsLost","internalStats","evnt","clst","RTCState","videoStreamInfo","cursorInfo"].indexOf(e)&&p.sendLogger(loggerEventId.sdk_scene_changed_call,e+",data:"+(t?JSON.stringify(t):""))}}),p.listen("messageHandler",function(e){(n||c)&&(n||c)(e)})}else d={errorCode:applyFailCode.INIT_PARAMS_VALIDATE_FAILED,errorMsg:"".concat(_.applyFailTips.PARAMS_ERROR," MessageHandler"),accessKeyId:r||i,channelId:a},R(loggerEventId.init_sdk_fun_failed,d),o.onSceneChanged?(o.onSceneChanged("warning",d),o.onSceneChanged("error",d)):alert(d.errorMsg);else e={errorCode:applyFailCode.INIT_PARAMS_VALIDATE_FAILED,errorMsg:"".concat(_.applyFailTips.PARAMS_ERROR," accessKeyId or channelId"),accessKeyId:r||i,channelId:a},R(loggerEventId.init_sdk_fun_failed,e),o.onSceneChanged?(o.onSceneChanged("warning",e),o.onSceneChanged("error",e)):alert(e.errorMsg)},startGame:function(t,n){R(loggerEventId.apply_game_fun_call,JSON.stringify(n)),o=t,g=n.autoPlayAudio,"#"!=t.charAt(0)&&(t="#"+t),document.getElementById(r)&&removePlayer(r);var e=(new Date).getTime();sessionStorage.setItem("startGameTS",e),6===getClientType()&&loadPlayer(f=!f&&m?"".concat(m,"saas-player-ios.js"):f,function(e){e?e&&(p&&p._emit("sceneChanged","loadPlayer",{result:!0}),p)&&p.applyGame(t,n,null,_):(e={errorCode:applyFailCode.PARAMS_ERROR,errorMsg:"".concat(_.applyFailTips.PLAYER_IMPORT_ERROR)},R(loggerEventId.apply_game_fun_failed,e),p&&p._emit("sceneChanged","loadPlayer",{result:!1}))},r),7===getClientType()&&loadPlayer(h=!h&&m?"".concat(m,"saas-player-android.js"):h,function(e){e?e&&(p&&p._emit("sceneChanged","loadPlayer",{result:!0}),p)&&p.applyGame(t,n,null,_):(e={errorCode:applyFailCode.PARAMS_ERROR,errorMsg:"".concat(_.applyFailTips.PLAYER_IMPORT_ERROR)},R(loggerEventId.apply_game_fun_failed,e),p._emit("sceneChanged","loadPlayer",{result:!1}))},r),document.addEventListener("visibilitychange",w),window.addEventListener("online",C),window.addEventListener("offline",k)},stopGame:function(e,t){p&&p.endGame(e,t)},getCid:a,gameArchived:function(e){p&&p.gameArchived(e)},checkPlayingGame:function(e){p&&p.checkPlayingGame(e)},releasePlayingGame:function(e,t){return p&&p.releasePlayingGame(e,t)},getGameArchiveStatus:function(e){p&&p.getGameArchiveStatus(e)},sendMessage:function(e){return p&&p.sendMessage(e)},reportFinishInfo:function(e){p&&p.reportFinishInfo(e)},enableAudio:function(e){i=e,p&&p.enableAudio(e)},enterQueue:function(){p&&p.enterQueue()},outQueue:function(){p&&p.outQueue()},bringUpApp:function(){p&&p.bringUpApp()},getNetInfo:function(){return p&&p.getNetInfo()},getCloudPlayStatusCode:function(){return p&&p.getCloudPlayStatusCode()},getStreamingDomain:function(){return p&&p.getStreamingDomain()},sendWSMessage:function(e){return p&&p.sendWSMessage(e)},switchResolution:function(e,t){return 5!=p.gGameState&&(p.changeResolution(e=+e,function(){t&&t()}),!0)},setScreenDirection:function(e){return!(-1===["landscape","portrait"].indexOf(e)||!p||5==p.gGameState||!y||(R(loggerEventId.appSetScreenDirection,"".concat(screenOrientation(),",").concat(e)),E(e),0))},upload:function(e){if("object"==_typeof(e))return 5!=p.gGameState&&p.uploadFile(e)},getFileList:function(e){return p.getFileList(e)},downLoadFile:function(e,t){return p.downLoadFile(e,t)},cancelDownLoadFile:function(e){return p.cancelDownload(e)},startLiving:function(e,t){return 5!=p.gGameState&&p.startLiving(e,t)},isSupportLiving:function(){return 5!=p.gGameState&&p.isSupportLiving()},endLiving:function(e){return 5!=p.gGameState&&p.endLiving(e)},getPinCode:function(){return 5!=p.gGameState&&p.getPinCode()},resetInputTimer:function(){return p.resetInputTimer()},version:function(){return SDK_VERSION},setMouseMoveRatio:function(e){p&&p.setMouseMoveRatio(e)},controlPowerDistribute:function(e,t){p&&p.controlPowerDistribute(e,t)},controlPowerQuery:function(e,t){p&&p.controlPowerQuery(e,t)},captureGameImage:function(e,t){p&&p.captureGameImage(e,t)},setMouseMode:function(e){p&&p.setMouseMode(e)},getMouseMode:function(){return p&&p.getMouseMode()},getMouseMoveRatio:function(){return p&&p.getMouseMoveRatio()},enableVibrate:function(e){p&&p.enableVibrate(e)},requestVideoFrameCallback:function(e){p&&p.requestVideoFrame(e)},removeRequestVideoFrameCallback:function(){p&&p.removeRequestVideoFrame()},startHangUp:function(e,t){return!!e&&(!e.downloadList||"array"!=typeCheck(e.downloadList)||e.downloadList.length<1?(t&&t(" downloadList"),!1):e.hangUpTime&&"number"==typeCheck(e.hangUpTime)?hasOwnProperty(e,"Cutoff")&&"boolean"==typeCheck(e.Cutoff)?void(p&&p.startHangUp(e,t)):(t&&t(" Cutoff"),!1):(t&&t(" hangUpTime"),!1))},stopHangUp:function(e){p&&p.stopHangUp(e)},getBigFileList:function(e){p&&p.getBigFileList(e)},updateGameUID:function(e,t){p&&p.updateGameUID(e,t)},getCapture:function(e){return p&&p.getCapture(e)},setVirtualKeys:function(e){p&&p.setVirtualKeys(e)},getVirtualKeys:function(){return p&&p.getVirtualKeys()},setFullKeyboardState:function(e){p&&p.setFullKeyboardState(e)},getFullKeyboardState:function(){return p&&p.getFullKeyboardState()},sendSensorData:function(e){return!!p&&p.sendSensorData(e)},startPlayer:function(){return!!p&&p.startPlayer()},pauseGame:function(){return!!p&&p.pausePlayer()},removeCacheCid:function(){p&&p.removeCacheCid()},sendMessageToRom:function(e){p&&p.sendMessageToRom(e)},getMouseCoordinate:function(){return p.getMouseCoordinate()},cameraParamsSet:function(e){p&&p.cameraParamsSet(e)},closeMediaDevices:function(e){p&&p.closeMediaDevices(e)},openMediaDevices:function(e,t){p&&p.openMediaDevices(e,t)},mediaDevicesResponseNotify:function(e,t){p&&p.mediaDevicesResponseNotify(e,t)}}}();return sdk});
